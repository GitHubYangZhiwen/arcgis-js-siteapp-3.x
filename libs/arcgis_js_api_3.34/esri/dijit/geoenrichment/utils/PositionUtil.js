// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.34/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/PositionUtil",["dojo/_base/lang","./FitUtil"],function(p,e){var m={},n="before-centered before after-centered after above above-centered above-alt below below-centered below-alt".split(" ");m.POSITIONS=n;m.getBestPositionBigAroundSmall=function(a,b,c){function g(g){function k(a,d){return m.checkFitsInView({x:a,y:d,w:b.w,h:b.h},{viewPortOffset:q,useBodyScroll:c.useBodyScroll})}function e(a,b){var c=k(a[0],b[0]);if(c.totalAdjust){var d=k(a[1],b[1]);l=d.totalAdjust?
c.totalAdjust<d.totalAdjust?c:d:d}else l=c;l===c?(h=a[0],f=b[0]):(h=a[1],f=b[1])}var h,f,l;switch(g){case "before-centered":h=a.x-b.w-d;f=a.y-(b.h-a.h)/2;break;case "before":h=a.x-b.w-d;e([h,h],[a.y,a.y+a.h-b.h]);break;case "after-centered":h=a.x+a.w+d;f=a.y-(b.h-a.h)/2;break;case "after":h=a.x+a.w+d;e([h,h],[a.y,a.y+a.h-b.h]);break;case "above":f=a.y-b.h-d;e([a.x,a.x+a.w-b.w],[f,f]);break;case "above-centered":h=a.x-(b.w-a.w)/2;f=a.y-b.h-d;break;case "above-alt":f=a.y-b.h-d;e([a.x+a.w-b.w,a.x],[f,
f]);break;case "below":f=a.y+a.h+d;e([a.x,a.x+a.w-b.w],[f,f]);break;case "below-centered":h=a.x-(b.w-a.w)/2;f=a.y+a.h+d;break;case "below-alt":f=a.y+a.h+d,e([a.x+a.w-b.w,a.x],[f,f])}l=l||k(h,f);return!l.fits&&c.useStrictFit?null:{x:h+l.adjustX,y:f+l.adjustY,totalAdjust:l.totalAdjust,position:g}}c=c||{};var d=c.offset||0,q=c.viewPortOffset||0,k;c.orient&&c.orient.some(function(a){if((a=g(a))&&!a.totalAdjust)return k=a,!0});if(k)return k;var e=[];n.some(function(a){if((k=g(a))&&!k.totalAdjust)return!0;
k&&(e.push(k),k=null)});if(k)return k;e.sort(function(a,b){return a.totalAdjust-b.totalAdjust});return e[0]};m.checkFitsInView=function(a,b){var c=(b=b||{},b.viewPortOffset)||0,g=b.useBodyScroll?document.body.scrollWidth:document.body.clientWidth;b=b.useBodyScroll?document.body.scrollHeight:document.body.clientHeight;var d=0,e=0;a.x<c?d=-a.x+c:a.x+a.w>g-c&&(d=g-c-(a.x+a.w));a.y<c?e=-a.y+c:a.y+a.h>b-c&&(e=b-c-(a.y+a.h));return{fits:0===d&&0===e,adjustX:d,adjustY:e,totalAdjust:Math.abs(d)+Math.abs(e)}};
m.findBestAllowedSizeBigAroundBox=function(a,b,c){a=p.mixin({},a);c=c||{};var g=c.offset||0,d=c.viewPortOffset||0;a.x-=d+g;a.y-=d+g;a.w+=2*g;a.h+=2*g;g=(c.useBodyScroll?document.body.scrollWidth:document.body.clientWidth)-2*d;c=(c.useBodyScroll?document.body.scrollHeight:document.body.clientHeight)-2*d;a=[e.fitBox(b,{w:a.x,h:c}),e.fitBox(b,{w:g-a.x-a.w,h:c}),e.fitBox(b,{w:g,h:a.y}),e.fitBox(b,{w:g,h:c-a.y-a.h})];a.sort(function(a,b){return a.ratio<b.ratio?1:-1});return a[0]};return m});