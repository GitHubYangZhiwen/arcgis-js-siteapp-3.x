// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.34/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/createHTML/HTMLToSVGBuilder","dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/when dojo/query esri/dijit/geoenrichment/ReportPlayer/config ./CSSFilesLoader ./HTMLPageBuilder esri/dijit/geoenrichment/utils/htmlToSvg/HTMLtoSVGConverter esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/imageUtils/ImageOptimizer esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(n,v,e,p,w,q,x,y,z,A,B,C){var m={htmlToSvg:function(a,b,c,f,g,h,k){return this._htmlToSvg(a,b,c,f,g,h,k)},htmlToSvgInHtml:function(a,b,c,f,g,h,k,e){return p(this._htmlToSvg(a,c,f,g,h,k,e),function(a){return p(x.loadCssFontFiles(),function(c){return y.composeHtmlStringFromParts({reportTitle:b,contentString:a.join(""),cssFiles:c})})})},_htmlToSvg:function(a,b,c,f,g,h,k){var m=this,d,l=[];if("string"===typeof a)for(d=e.create("div",{"class":"esriGEBehindScreen"},document.body),d.innerHTML=a;d.children.length;)a=
e.create("div",{"class":"esriGEBehindScreen"},document.body),e.place(d.children[0],a),l.push(a);else{d=a;a=w(".reportContainerGrid_gridContainerWrapper",d);for(var r=0,n=a.length;r<n;r++)l.push(a[r])}var u=new B,t=[];l.map(function(a,c){u.add(function(){return m._nodeToSvg(a,{fitParams:b,convertUrlImages:g,hideUrlImages:h,getItemResourceUrl:k}).then(function(b){t.push(b);a.innerHTML="";f(c,l.length);return q.isPlayerOnServer?null:C.delay(50)})})});return p(u.getPromise()).then(function(){if(q.isPlayerOnServer)return t;
d.innerHTML="";return A.optimizeSize(t,c)})},_NODES_TO_CLIP:["shapeContainer_svgContainerShowAsBar","imageNavigator_imagePaginationRoot","infographicPageStack_infographicSectionNode_stackNode","infographicPageStack_infographicSectionNode_background"],_nodeToSvg:function(a,b){return z.htmlToSvg(a,n.mixin({iterationsPerScript:q.isPlayerOnServer?1E5:100,clipFunc:function(a){return a&&m._NODES_TO_CLIP.some(function(b){return v.contains(a,b)})}},b))}};return m});