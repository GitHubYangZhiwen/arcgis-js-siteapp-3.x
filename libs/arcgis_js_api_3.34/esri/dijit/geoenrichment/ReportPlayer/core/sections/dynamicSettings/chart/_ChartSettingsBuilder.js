// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.34/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/chart/_ChartSettingsBuilder",["dojo/aspect","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes","esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting","dojo/i18n!esri/nls/jsapi"],function(l,m,d,e,c){c=c.geoenrichment.dijit.ReportPlayer.SectionDynamicSettingsBuilder.ChartSettings;var f={provideChartSettings:function(a){var b=a.getChartJson();if(!b||b.type===d.GAUGE||
b.type===d.WAFFLE)return null;var c=b&&!!b.seriesItems.length&&!b.visualProperties.noTableView,e=a.calculationStatesGroup,h=f._provideOptionsForSorting(b);return m(a.getChart().getFilterRanges(),function(d){var f=c||h||e,g=d&&d.length;if(!f&&!g)return null;var k={viewSettings:f&&{canViewTable:c,group:e,sortingOptions:h,sorting:b.visualProperties.sorting},filter:g&&{filter:b.visualProperties.filter,filterRanges:d,isAreasFilter:a.getChart().canFilterAreas(),getNumElementsTotal:function(){return a.getChart().getNumElementsTotal()},
getNumElementsShown:function(){return a.getChart().getNumElementsShown()},onContentUpdated:function(){}}};g&&l.after(a.getChart(),"onContentUpdated",function(){k.filter.onContentUpdated()});return k})},_provideOptionsForSorting:function(a){return!a.isMultiFeatureChart&&1===a.seriesItems.length&&d.isSortingSupported(a.type)?[{label:c.noSorting,imageClass:"",value:e.NONE},{label:c.sortAscending,imageClass:"upButton",value:e.ASC},{label:c.sortDescending,imageClass:"downButton",value:e.DESC}]:null}};
return f});