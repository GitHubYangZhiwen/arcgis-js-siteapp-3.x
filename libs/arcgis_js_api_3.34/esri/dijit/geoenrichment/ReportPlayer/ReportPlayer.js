// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.34/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],function(k){return k})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(k){return k})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(k){return k})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(k){function g(f){f=f.split(".");return Number((Number(f[0])+Number(f[1])/100).toFixed(2))}k=Math.max(g("3.34"),
g(k.version)).toFixed(2);return{jsapiVersion:k,esriDijitCssUrl:"https://js.arcgis.com/"+k+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+k+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+k+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!1,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(k,g,f,e,d,c,a){return k(null,{_initCommands:function(){a.isMobileDevice()||!c.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():e(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(a){this._createCommandButtons(a);this.playerToolbar&&this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(a){function b(a){var b=new f,h=new f;c.onCommandSettingsShown(b.promise);
c._saveVisualState();e(c._getPrintableContainer({commandId:a,showDialog:!0}),function(a){if(a){var b=a.getSelectedCommandId();b&&b!==d.PRINT&&(c._lastNonPrintCommandId=b);e(c._executeCommand(b,{printableContainer:a}),h.resolve,h.reject)}else e(c._applySavedVisualState(),function(){c.onCommandCanceled();h.resolve()})}).always(b.resolve);return h.promise}var c=this;if(a&&a.length){var n,m=a.filter(function(a){return a.id===d.PRINT?(n=a,!1):!0});m.length&&(this._executeExportCallback=function(){return b(c._lastNonPrintCommandId||
m[0].id)},this._createCommandButton(m[0],this._executeExportCallback));n&&(this._executePrintCallback=function(){return b(n.id)},this._createCommandButton(n,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(a,h){return this.playerToolbar&&this.playerToolbar.createCommandButton(a,h)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},
executeCommand:function(a,h){h=h||{};this._saveVisualState();var b=this._viewModel.dynamicReportInfo.fieldData;!this.isPlayerOnServer||a!==d.PDF&&a!==d.IMAGE||(h.exportSettings=g.mixin({},b.reportInfo&&b.reportInfo.exportSettings,h.exportSettings));var c=this;return e(this._getPrintableContainer({commandId:a,showDialog:!1,exportSettings:h.exportSettings}),function(b){return c._executeCommand(a,g.mixin({printableContainer:b},h))})},_executeCommand:function(a,h){function b(){e(c.dataProvider.executeCommand&&
c.dataProvider.executeCommand(a,c,h,function(a){c.onCommandProgress(a)}),p.resolve,p.reject)}var c=this,m=this._viewModel.dynamicReportInfo.fieldData;a!==d.PDF&&a!==d.DYNAMIC_HTML||!m.runReportTaskIDs||(h.creditsTaskIDs=m.runReportTaskIDs);var p=new f;this.isPlayerOnServer?b():setTimeout(b);var g=p.promise.then(function(a){return e(c._applySavedVisualState(),function(){return a})});this.onCommandStart(g,a);this._showWaiting(g,"executeCommand");g.always(function(){c.onCommandEnd(g)});return g},_visualStateMemo:null,
_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},_applySavedVisualState:function(){var a=this;return this.setVisualState(this._visualStateMemo).then(function(){a._visualStateMemo=null})},onCommandSettingsShown:function(a){},onCommandCanceled:function(){},onCommandStart:function(a,h){},onCommandProgress:function(a){},onCommandEnd:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var k={HTML:"createHTML",PDF:"createPDF",
PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1}};return k})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(k){var g={},f=function(){var d=window,c=d.navigator.platform,a=d.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!d.cordova&&
!d.phonegap),phonegap:!(!d.cordova&&!d.phonegap),electron:!1,nwjs:!1},h=d.screen.width,l=d.screen.height,n=a.match(/(Android);?[\s\/]+([\d.]+)?/),e=a.match(/(iPad).*OS\s([\d_]+)/),p=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!e&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),r=0<=a.indexOf("Edge/"),u=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),y="Win32"===c,v=0<=a.toLowerCase().indexOf("electron"),w="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==
typeof process.versions&&"undefined"!==typeof process.versions.nw,c="MacIntel"===c,A="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!e&&c&&k("touch")&&0<=A.indexOf(h+"x"+l)&&((e=a.match(/(Version)\/([\d.]+)/))||(e=[0,1,"13_0_0"]),c=!1);b.ie=g;b.edge=r;b.firefox=u;n&&!y&&(b.os="android",b.osVersion=n[2],b.android=!0,b.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(e||f||p)b.os="ios",b.ios=!0;f&&!p&&(b.osVersion=f[2].replace(/_/g,"."),b.iphone=!0);e&&
(b.osVersion=e[2].replace(/_/g,"."),b.ipad=!0);p&&(b.osVersion=p[3]?p[3].replace(/_/g,"."):null,b.ipod=!0);b.ios&&b.osVersion&&0<=a.indexOf("Version/")&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);b.webView=!(!(f||e||p)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!d.navigator.standalone)||d.matchMedia&&d.matchMedia("(display-mode: standalone)").matches;b.webview=b.webView;b.standalone=b.webView;b.desktop=!(b.ios||b.android)||v||w;b.desktop&&(b.electron=
v,b.nwjs=w,b.macos=c,b.windows=y,b.macos&&(b.os="macos"),b.windows&&(b.os="windows"));b.pixelRatio=d.devicePixelRatio||1;return b}();g.device=f;g.isMobileDevice=function(){return!f.desktop};g.isPCWithTouchScreen=function(){return f.desktop&&k("touch")};g.isLandscape=function(){return 90===Math.abs(window.orientation)};var e=null;g.isWebLayout=function(){var d;e||(d=document.createElement("div"),d.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;",document.body.appendChild(d),
e=d.offsetHeight,d.parentNode.removeChild(d));d=e;d*=7;var c=document.body.offsetWidth;if(c>=d)return!0;var a=document.body.offsetHeight;return c>=a&&Math.sqrt(c*c+a*a)>=d?!0:!1};g.press=f.desktop?"mousedown":"touchstart";g.release=f.desktop?"mouseup":"touchend";g.click=f.desktop?"click":"touchend";g.clickOrRelease=f.desktop?"click, mouseup":"touchend";g.move=f.desktop?"mousemove":"touchmove";return g})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors","../core/supportClasses/images/DefaultLogoLoader"],function(k,g,f,e){return k(null,{_getReportLogo:function(d,c,a){function b(){return g(h._reportData.attachmentsStore&&h._reportData.attachmentsStore.getImages(),function(b){return g(b&&b[0]&&b[0].getThumbnail(),function(b){return b||h._getDefaultLogo(c,a)})})}var h=this;switch(d){case f.ATTACHMENTS:return b();default:return this._getDefaultLogo(c,a)}},_getDefaultLogo:function(d,
c){return this._reportData.customLogo||c||e.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var k={ATTACHMENTS:"attachments",LOGO:"logo",toSupportedValue:function(g,f){return g===k.ATTACHMENTS?g:g||f?k.LOGO:null}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/utils/ColorUtil"],function(k,g,f){return{_identifyDefaultLogoBackground:function(e){return!e||f.isTransparent(e.backgroundColor)?"transparent":f.isLightColor(e.backgroundColor)?"light":"dark"},_loadLogo:function(e){var d=new g;k(["./"+e],function(c){d.resolve(c)});return d.promise},getDefaultLogo:function(e){switch(this._identifyDefaultLogoBackground(e)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");
default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color","dojox/color/_base","dojox/color/Palette"],function(k,g,f){function e(c,a,b){return Math.round((c&255)*(1-b)+(a&255)*b)}var d={toCSSColor:function(c,a,b){"string"!==typeof c||/^0x/i.test(c)||(c=k.fromString(c));if(c instanceof k)return a||1===c.a?c.toHex():c.toCss(!0);if(null==c||isNaN(c))return b?d.toCSSColor(b,a):"#000000";c="00000"+Number(c).toString(16);
return"#"+c.substr(c.length-6)},toColor:function(c,a){return"object"===typeof c?(new k).setColor(c):k.fromString(d.toCSSColor(c,!1,a))},getCSSColorWithAlpha:function(c,a){return d.toCSSColor(d.getColorWithAlpha(c,a))},getColorWithAlpha:function(c,a){c=(new k).setColor(c);c.a=a;return c},transform:function(c,a){var b=new f;b.colors=[new k(c)];return b.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(c,a,b){return f.generators.analogous({base:c,
high:a,low:b}).colors},applyColorHue:function(c,a){c=new g.Color(c);a=new g.Color(a);c=c.toHsl();var b=a.toHsl();c=g.fromHsl({h:c.h,s:0===c.s?0:0===b.s?c.s:b.s,l:b.l});c.a=a.a;return c},getColorParams:function(c){c=new g.Color(c);var a=c.toHsv();a.l=c.toHsl().l;return a},generateGradient:function(c,a){c=c.map(d.toRGBColor);var b=[];if(0===c.length-1||1===a){c=c[0];for(var h=0;h<a;h++)b.push(c);return b}for(var l=1/(a-1),h=0;h<a;h++)b.push(d.getGradientRGBColor(c,h*l));return b},getGradientRGBColor:function(c,
a,b){var h=c.length-1,l=1>h||0>=a?0:1<=a?h:-1;if(0<=l)return c[l];a*=h;l=Math.floor(a);l===h&&l--;return d.mixRGBColors(c[l],c[l+1],a-l,b)},mixRGBColors:function(c,a,b,h){1<b?b=1:0>b&&(b=0);var l=e(c,a,b),d=e(c>>8,a>>8,b),m=e(c>>16,a>>16,b);return((h?e(c>>24,a>>24,b):0)<<24)+(m<<16)+(d<<8)+l},toRGBColor:function(c,a){c=d.toCSSColor(c,!0,a);return parseInt("0x"+c.substr(1))},getContrastColor:function(c,a,b,h){return d.isLightColor(c,h)?d.toColor(a,"#000000"):d.toColor(b,"#FFFFFF")},getHighlightColor:function(c,
a){a=a||{};c=new g.Color(c);x=c.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var b=a.saturation||100,h=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=b,x.l=x.l<a?h:x.l>h?a:x.l-a>h-x.l?a:h)}a=g.fromHsl(x);a.a=c.a;return a},getLightness:function(c){c=d.toRGBColor(c);return(299*(c>>16&255)+587*(c>>8&255)+114*(c&255))/1E3},isLightColor:function(c,a){return d.getLightness(c)>=(void 0===a?128:a)},colorsEqual:function(c,a){c instanceof k||(c=
d.toColor(c));a instanceof k||(a=d.toColor(a));return c.a==a.a&&c.r==a.r&&c.g==a.g&&c.b==a.b},isTransparent:function(c){c=d.toCSSColor(c);return"rgba(0,0,0,0)"===c.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(c){function a(){return b+Math.round((h-b)*Math.random())}c=c||{};var b=c.min||0,h=c.max||255,l=c.randomizeAlpha?a():1;return c.grayScheme?(c=a(),new k([c,c,c,l])):new k([a(),a(),a(),l])}};return d})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color",
"dojo/colors"],function(k,g,f,e){k=g.getObject("color",!0,k);k.Color=f;k.blend=f.blendColors;k.fromRgb=f.fromRgb;k.fromHex=f.fromHex;k.fromArray=f.fromArray;k.fromString=f.fromString;k.greyscale=e.makeGrey;g.mixin(k,{fromCmy:function(d,c,a){g.isArray(d)?(c=d[1],a=d[2],d=d[0]):g.isObject(d)&&(c=d.m,a=d.y,d=d.c);return new f({r:Math.round(255*(1-d/100)),g:Math.round(255*(1-c/100)),b:Math.round(255*(1-a/100))})},fromCmyk:function(d,c,a,b){g.isArray(d)?(c=d[1],a=d[2],b=d[3],d=d[0]):g.isObject(d)&&(c=
d.m,a=d.y,b=d.b,d=d.c);b/=100;return new f({r:Math.round(255*(1-Math.min(1,d/100*(1-b)+b))),g:Math.round(255*(1-Math.min(1,c/100*(1-b)+b))),b:Math.round(255*(1-Math.min(1,a/100*(1-b)+b)))})},fromHsl:function(d,c,a){g.isArray(d)?(c=d[1],a=d[2],d=d[0]):g.isObject(d)&&(c=d.s,a=d.l,d=d.h);c/=100;for(a/=100;0>d;)d+=360;for(;360<=d;)d-=360;var b,h;120>d?(b=(120-d)/60,h=d/60,d=0):240>d?(b=0,h=(240-d)/60,d=(d-120)/60):(b=(d-240)/60,h=0,d=(360-d)/60);b=2*c*Math.min(b,1)+(1-c);h=2*c*Math.min(h,1)+(1-c);d=2*
c*Math.min(d,1)+(1-c);.5>a?(b*=a,h*=a,d*=a):(b=(1-a)*b+2*a-1,h=(1-a)*h+2*a-1,d=(1-a)*d+2*a-1);return new f({r:Math.round(255*b),g:Math.round(255*h),b:Math.round(255*d)})}});k.fromHsv=function(d,c,a){g.isArray(d)?(c=d[1],a=d[2],d=d[0]):g.isObject(d)&&(c=d.s,a=d.v,d=d.h);360==d&&(d=0);c/=100;a/=100;var b,h,l;if(0==c)h=l=b=a;else{var n=d/60;d=Math.floor(n);var e=n-d,n=a*(1-c),p=a*(1-c*e);c=a*(1-c*(1-e));switch(d){case 0:b=a;h=c;l=n;break;case 1:b=p;h=a;l=n;break;case 2:b=n;h=a;l=c;break;case 3:b=n;h=
p;l=a;break;case 4:b=c;h=n;l=a;break;case 5:b=a,h=n,l=p}}return new f({r:Math.round(255*b),g:Math.round(255*h),b:Math.round(255*l)})};g.extend(f,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var d,c=this.r/255,a=this.g/255,b=this.b/255;d=Math.min(1-c,1-a,1-b);return{c:Math.round((1-c-d)/(1-d)*100),m:Math.round((1-a-d)/(1-d)*100),y:Math.round((1-b-d)/(1-d)*100),b:Math.round(100*d)}},toHsl:function(){var d=
this.r/255,c=this.g/255,a=this.b/255,b=Math.min(d,a,c),h=Math.max(d,c,a),l=h-b,n=0,e=0,b=(b+h)/2;0<b&&1>b&&(e=l/(.5>b?2*b:2-2*b));0<l&&(h==d&&h!=c&&(n+=(c-a)/l),h==c&&h!=a&&(n+=2+(a-d)/l),h==a&&h!=d&&(n+=4+(d-c)/l),n*=60);return{h:n,s:Math.round(100*e),l:Math.round(100*b)}},toHsv:function(){var d=this.r/255,c=this.g/255,a=this.b/255,b=Math.max(d,c,a),h=b-Math.min(d,a,c),l=null,n=0==b?0:h/b;0==n?l=0:(l=d==b?60*(c-a)/h:c==b?120+60*(a-d)/h:240+60*(d-c)/h,0>l&&(l+=360));return{h:l,s:Math.round(100*n),
v:Math.round(100*b)}}});return k})},"dojox/main":function(){define(["dojo/_base/kernel"],function(k){return k.dojox})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(k,g,f,e){var d={};g.setObject("dojo.colors",d);var c=function(a,h,c){0>c&&++c;1<c&&--c;var b=6*c;return 1>b?a+(h-a)*b:1>2*c?h:2>3*c?a+(h-a)*(2/3-c)*6:a};k.colorFromRgb=f.fromRgb=function(a,h){var b=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){a=b[2].split(/\s*,\s*/);
var d=a.length,b=b[1];if("rgb"==b&&3==d||"rgba"==b&&4==d)return b=a[0],"%"==b.charAt(b.length-1)?(b=e.map(a,function(a){return 2.56*parseFloat(a)}),4==d&&(b[3]=a[3]),f.fromArray(b,h)):f.fromArray(a,h);if("hsl"==b&&3==d||"hsla"==b&&4==d){var b=(parseFloat(a[0])%360+360)%360/360,m=parseFloat(a[1])/100,p=parseFloat(a[2])/100,m=.5>=p?p*(m+1):p+m-p*m,p=2*p-m,b=[256*c(p,m,b+1/3),256*c(p,m,b),256*c(p,m,b-1/3),1];4==d&&(b[3]=a[3]);return f.fromArray(b,h)}}return null};var a=function(a,c,l){a=Number(a);return isNaN(a)?
l:a<c?c:a>l?l:a};f.prototype.sanitize=function(){this.r=Math.round(a(this.r,0,255));this.g=Math.round(a(this.g,0,255));this.b=Math.round(a(this.b,0,255));this.a=a(this.a,0,1);return this};d.makeGrey=f.makeGrey=function(a,c){return f.fromArray([a,a,a,c])};g.mixin(f.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],
cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],
darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,
92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,
153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,
245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,
82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return f})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(k,g,f){function e(a,b,c){var h=new f.Palette;h.colors=
[];g.forEach(a.colors,function(a){h.colors.push(new f.Color({r:Math.min(255,Math.max(0,"dr"==b?a.r+c:a.r)),g:Math.min(255,Math.max(0,"dg"==b?a.g+c:a.g)),b:Math.min(255,Math.max(0,"db"==b?a.b+c:a.b)),a:Math.min(1,Math.max(0,"da"==b?a.a+c:a.a))}))});return h}function d(a,b,c){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toCmy();h.colors.push(f.fromCmy(Math.min(100,Math.max(0,"dc"==b?a.c+c:a.c)),Math.min(100,Math.max(0,"dm"==b?a.m+c:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+c:a.y))))});
return h}function c(a,b,c){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toCmyk();h.colors.push(f.fromCmyk(Math.min(100,Math.max(0,"dc"==b?a.c+c:a.c)),Math.min(100,Math.max(0,"dm"==b?a.m+c:a.m)),Math.min(100,Math.max(0,"dy"==b?a.y+c:a.y)),Math.min(100,Math.max(0,"dk"==b?a.b+c:a.b))))});return h}function a(a,b,c){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toHsl();h.colors.push(f.fromHsl(("dh"==b?a.h+c:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+c:a.s)),
Math.min(100,Math.max(0,"dl"==b?a.l+c:a.l))))});return h}function b(a,b,c){var h=new f.Palette;h.colors=[];g.forEach(a.colors,function(a){a=a.toHsv();h.colors.push(f.fromHsv(("dh"==b?a.h+c:a.h)%360,Math.min(100,Math.max(0,"ds"==b?a.s+c:a.s)),Math.min(100,Math.max(0,"dv"==b?a.v+c:a.v))))});return h}f.Palette=function(a){this.colors=[];a instanceof f.Palette?this.colors=a.colors.slice(0):a instanceof f.Color?this.colors=[null,null,a,null,null]:k.isArray(a)?this.colors=g.map(a.slice(0),function(a){return k.isString(a)?
new f.Color(a):a}):k.isString(a)&&(this.colors=[null,null,new f.Color(a),null,null])};k.extend(f.Palette,{transform:function(h){var l=e;if(h.use){var n=h.use.toLowerCase();0==n.indexOf("hs")?l="l"==n.charAt(2)?a:b:0==n.indexOf("cmy")&&(l="k"==n.charAt(3)?c:d)}else if("dc"in h||"dm"in h||"dy"in h)l="dk"in h?c:d;else if("dh"in h||"ds"in h)l="dv"in h?b:a;var n=this,m;for(m in h)"use"!=m&&(n=l(n,m,h[m]));return n},clone:function(){return new f.Palette(this)}});k.mixin(f.Palette,{generators:{analogous:function(a){var b=
a.high||60,c=a.low||18;a=(k.isString(a.base)?new f.Color(a.base):a.base).toHsv();var h=Math.max(10,95>=a.s?a.s+5:100-(a.s-95)),d=92<=a.v?a.v-9:Math.max(a.v+9,20),e=90>=a.v?Math.max(a.v+5,20):95+Math.ceil((a.v-90)/2),q=[h,1<a.s?a.s-1:21-a.s,a.s,h,h],r=[d,e,a.v,d,e];return new f.Palette(g.map([(a.h+c+360)%360,(a.h+Math.round(c/2)+360)%360,a.h,(a.h-Math.round(b/2)+360)%360,(a.h-b+360)%360],function(a,b){return f.fromHsv(a,q[b],r[b])}))},monochromatic:function(a){a=k.isString(a.base)?new f.Color(a.base):
a.base;var b=a.toHsv(),c=9<b.s-30?b.s-30:b.s+30,h=b.s,d=20<b.v-20?b.v-20:b.v+60,e=20<b.v-50?b.v-50:b.v+30;return new f.Palette([f.fromHsv(b.h,c,100-.8*(100-b.v)),f.fromHsv(b.h,h,e),a,f.fromHsv(b.h,c,e),f.fromHsv(b.h,h,d)])},triadic:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),c=(b.h-157+360)%360,h=90<b.s?b.s-10:b.s+10,d=95<b.s?b.s-5:b.s+5,e=20<b.v-20?b.v-20:b.v+20,g=20<b.v-30?b.v-30:b.v+30,r=70<b.v-30?b.v-30:b.v+30;return new f.Palette([f.fromHsv((b.h+57+360)%360,20<
b.s?b.s-10:b.s+10,b.v),f.fromHsv(b.h,h,g),a,f.fromHsv(c,h,e),f.fromHsv(c,d,r)])},complementary:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),c=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,h=100-.9*(100-b.s),d=Math.min(100,b.s+20),e=20<b.v?b.v-30:b.v+30;return new f.Palette([f.fromHsv(b.h,Math.max(b.s-10,0),Math.min(100,b.v+30)),f.fromHsv(b.h,h,e),a,f.fromHsv(c,d,e),f.fromHsv(c,b.s,b.v)])},splitComplementary:function(a){var b=k.isString(a.base)?new f.Color(a.base):a.base,
c=a.da||30;a=b.toHsv();var h=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,d=(h-c+360)%360,c=(h+c)%360,h=100-.9*(100-a.s),e=Math.min(100,a.s+20),g=20<a.v?a.v-30:a.v+30;return new f.Palette([f.fromHsv(d,Math.max(a.s-10,0),Math.min(100,a.v+30)),f.fromHsv(d,h,g),b,f.fromHsv(c,e,g),f.fromHsv(c,a.s,a.v)])},compound:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),c=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,h=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,d=360>2*b.h+99?2*b.h+
99:Math.floor(b.h/2)-99,e=80<b.s-10?b.s-10:b.s+10,g=10<b.s-25?b.s-25:b.s+25,r=80<b.v-20?b.v-20:b.v+20,u=Math.max(b.v,20);return new f.Palette([f.fromHsv(c,10<b.s-40?b.s-40:b.s+40,10<b.v-40?b.v-40:b.v+40),f.fromHsv(c,e,r),a,f.fromHsv(h,g,u),f.fromHsv(d,e,r)])},shades:function(a){a=k.isString(a.base)?new f.Color(a.base):a.base;var b=a.toHsv(),c=100==b.s&&0==b.v?0:b.s,h=20<=b.v-25?b.v-25:b.v+55,d=20<=b.v-75?b.v-75:b.v+5,e=Math.max(b.v-10,20);return new f.Palette([new f.fromHsv(b.h,c,20<b.v-50?b.v-50:
b.v+30),new f.fromHsv(b.h,c,h),a,new f.fromHsv(b.h,c,d),new f.fromHsv(b.h,c,e)])}},generate:function(a,b){if(k.isFunction(b))return b({base:a});if(f.Palette.generators[b])return f.Palette.generators[b]({base:a});throw Error("dojox.color.Palette.generate: the specified generator ('"+b+"') does not exist.");}});return f.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],
function(k,g,f,e){return g(null,{_initBuilderPromise:null,_mapBuilder:null,_initMapBuilder:function(){var d=this;if(this._initBuilderPromise)return this._initBuilderPromise;var c=new f;k([d.isPlayerOnServer?"../core/supportClasses/map/ServerMapBuilder":"../core/supportClasses/map/MapBuilder"],function(a){d._mapBuilder=new a({getPlayerZoomScale:function(a){var b=d.getCurrentReportContainer();return b&&b.getPanelZoomScale?b.getPanelZoomScale(a):b&&b.getZoomInfo&&b.getZoomInfo().scale}});c.resolve()});
return this._initBuilderPromise=c.promise},collectMaps:function(d){return this._mapBuilder?d&&d.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(d,c){c=c||{};return e(this._initMapBuilder(),function(){this._mapBuilder.setFallbackMapImageInfos(this._reportData.mapImageInfos);return this._mapBuilder.createMap(d,{reportData:this._reportData,
areaIndex:c.areaIndex,defaultBasemapId:this._getDefaultBasemapId()||c.defaultBasemapId,webMapId:c.webMapId,additionalLayerInfos:c.additionalLayerInfos,calculatorFieldName:c.calculatorFieldName,pinSymbolJson:c.pinSymbolJson,areaSymbolJsons:c.areaSymbolJsons,areaSymbolRamp:c.areaSymbolRamp,locatorPointsControllers:c.locatorPointsControllers,stdPolygonsControllers:c.stdPolygonsControllers,thisAreasHighlightController:c.thisAreasHighlightController,legendController:c.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,
geClient:this._viewModel.dynamicReportInfo.geClient,countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:c.waitForLoad,extent:c.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,b){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var a=this;g(this.prevPageButton,"click",function(){a._showPrevPage()});g(this.nextPageButton,"click",function(){a._showNextPage()});b.hide(this.sidePageNavigator);h.setTooltipToNode(this.prevPageButton,l.previousPage);h.setTooltipToNode(this.nextPageButton,l.nextPage)},showPageAt:function(b){this.viewMode!==a.FULL_PAGES||this.isPlayerOnServer||
(b=Math.max(0,b),this._currentPageIndex=b=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,b),this.getCurrentReportContainer().showPageAt(b),this._updatePageNavigator())},_updatePageNavigator:function(){if(this.playerToolbar){var h=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(h);if(h){var h=this.getCurrentReportContainer().getNumberOfPages(),l=1<h;l&&this._provideSideNavigationNodes();
b.display(this.sidePageNavigator,l);l&&(f[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,"disabled"),f[this._currentPageIndex===h-1?"add":"remove"](this.nextPageButton,"disabled"),this.resizeMode===c.FIT_WINDOW&&(l=e.position(this.getCurrentReportContainer().stackContainer),d.set(this.sidePageNavigator,"left",Math.min(l.x+l.w+20,document.body.clientWidth-70)+"px"),d.set(this.sidePageNavigator,"top",Math.max(60,l.y+10)+"px")));this.playerToolbar.updatePageSelect(h,this._currentPageIndex)}else b.hide(this.sidePageNavigator)}},
_provideSideNavigationNodes:function(){var a=this;this.sidePageNavigator||(this.sidePageNavigator=b.create("div",{"class":"reportPlayer_sidePageNavigator"},this.domNode),this.prevPageButton=b.create("div",{"class":"reportPlayer_paginationArrowUp"},this.sidePageNavigator),this.nextPageButton=b.create("div",{"class":"reportPlayer_paginationArrowDown"},this.sidePageNavigator),g(this.prevPageButton,"click",function(){a._showPrevPage()}),g(this.nextPageButton,"click",function(){a._showNextPage()}),h.setTooltipToNode(this.prevPageButton,
l.previousPage),h.setTooltipToNode(this.nextPageButton,l.nextPage))},_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var k={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",
isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.FIT_WINDOW}};return k})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var k={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.FULL_PAGES},
isMobileSupported:function(g){return g===k.PANELS_IN_SLIDES||g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL},isStackLike:function(g){return g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL},isStack:function(g){return g===k.PANELS_IN_STACK||g===k.PANELS_IN_STACK_ALL}};return k})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),
function(k,g,f,e,d,c,a,b){function h(){n||(n=e.create("div",{"class":"esriGEOffscreen"},document.body));return n}var l={isHidden:function(a){return a&&f.contains(a,"esriGEHidden")},hasVisibleChildren:function(a){if(!a||!a.children.length)return!1;for(var b=0;b<a.children.length;b++)if(!l.isHidden(a.children[b]))return!0;return!1},hide:function(a){return l.addTag(a,"esriGEHidden")},show:function(a){return l.removeTag(a,"esriGEHidden")},display:function(a,b){return l[b?"show":"hide"](a)},addTag:function(a,
b){return l.applyCallback(a,function(a){a&&f.add(a,b)})},removeTag:function(a,b){return l.applyCallback(a,function(a){a&&f.remove(a,b)})},applyCallback:function(a,b,c){c&&(b=k.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var c=0;c<a.children.length;c++)if(a.children[c]===b)return c;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],c=0;c<a.children.length;c++)b.push(a.children[c]);return b},getChildNodes:function(a){if(!a||
!a.childNodes)return null;for(var b=[],c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c]);return b},isChildOf:function(a,b,c){var h=!1,d=function(a){if(c&&!c(a))return!1;a.parentNode===b?h=!0:a.parentNode&&d(a.parentNode)};a&&d(a);return h},isNodeInLayout:function(a){return l.isChildOf(a,document.body,function(a){return!l.isHidden(a)&&"none"!=c.get(a,"display")&&!f.contains(a,"dijitHidden")})},isNodeVisible:function(a){return l.isChildOf(a,document.body,function(a){return!f.contains(a,"dijitHidden")&&
"hidden"!=c.get(a,"visibility")})},isNodeOnscreen:function(a){return l.isChildOf(a,document.body,function(a){return!f.contains(a,"esriGEOffscreen")})},enableContent:function(a,b,h){if(a){h=h||{};var l=a.children.length-1;if(!(0>l)){l=a.children[l];f.contains(l,"esriGEDisabledContent")||(l=null);if(b)l&&a.removeChild(l);else if(l=l||e.create("div",{"class":"esriGEDisabledContent"+(h.overlayClass?" "+h.overlayClass:"")},a),h.textContent&&(l.textContent=h.textContent),!1!==h.fitParent&&(a=d[h.marginBox?
"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",c.set(l,{height:a,marginTop:"-"+a});return l}}},enableContentAbsolute:function(a,b,h){if(a){h=h||{};var d=c.get(a,"position");"relative"!==d&&"absolute"!==d&&c.set(a,"position","relative");return l.enableContent(a,b,{overlayClass:"esriGEAbsoluteStretched "+(h.overlayClass||"")+(h.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:h.textContent})}}},n;l.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;
var c=e.create("div",null,a,"after"),d=e.create("div",{style:"position: absolute; left: 0px; top: 0px;"},h());e.place(a,d);b="DomUtil.hideNodeInBackground"+(b?"."+b:"");g.set(c,"_bg_memo_node",b);g.set(d,"_bg_temp_node",b);b={undo:function(){c&&(c.parentNode&&e.place(a,c,"replace"),e.destroy(c),e.destroy(d),n.children.length||(e.destroy(n),n=null),c=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};l.showNodeFromBackground=
function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};l.noTransformPosition=function(a){function b(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent,b.x+=c.get(a,"borderLeftWidth"),b.y+=c.get(a,"borderTopWidth");return b}function h(a){return c.get(a,"width")+c.get(a,"paddingLeft")+c.get(a,"paddingRight")+c.get(a,"borderLeftWidth")+c.get(a,"borderRightWidth")}function d(a){return c.get(a,"height")+c.get(a,"paddingTop")+
c.get(a,"paddingBottom")+c.get(a,"borderTopWidth")+c.get(a,"borderBottomWidth")}if(a){var l;if(a instanceof SVGElement&&a.getBBox)return l=(l=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&b(l),a=a.getBBox(),{x:(a.x||0)+l.x,y:(a.y||0)+l.y,w:a.width||0,h:a.height||0};l=b(a);return{x:l.x,y:l.y,w:h(a),h:d(a)}}};l.uniteNodeBoxes=function(a,b){var c=1E6,h=1E6,d=-1E6,e=-1E6;a.forEach(function(a){a=l.noTransformPosition(a);c=Math.min(c,a.x);h=Math.min(h,a.y);d=Math.max(d,a.x+a.w);e=Math.max(e,a.y+a.h)});
a={x:c,y:h,w:d-c,h:e-h};b&&(b=l.noTransformPosition(b),a.x-=b.x,a.y-=b.y);return a};l.getNodesBox=function(a,b){if(!a||!a.length)return null;for(var c=1E6,h=-1E6,e=1E6,n=-1E6,m=0;m<a.length;m++)var f=a[m],f=b&&b.ignoreTranformation?l.noTransformPosition(f):d.position(f),c=Math.min(c,f.x),e=Math.min(e,f.y),h=Math.max(h,f.x+f.w),n=Math.max(n,f.y+f.h);return{x:c,y:e,w:h-c,h:n-e}};l.traverseChildren=function(a,b){function c(a){if(a&&a.children)for(var h=0;h<a.children.length;h++){var d=a.children[h];
if(b(d))break;c(d)}}c(a)};l.scrollToListNode=function(a,b,c){var h=b.offsetTop+b.clientHeight,d=h-(a.scrollTop+a.clientHeight);0<d&&(a.scrollTop+=d);c&&(h-=b.clientHeight-c.offsetTop,d=a.scrollTop-h,0<d&&(a.scrollTop-=d))};var m;l.getScrollbarSize=function(){if(!m){var a=e.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";m={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};e.destroy(a)}return m};
l.hasScrollbars=function(a){var b=c.getComputedStyle(a);return{w:"scroll"===b.overflowX||a.offsetWidth>a.clientWidth&&"auto"===b.overflowX,h:"scroll"===b.overflowY||a.offsetHeight>a.clientHeight&&"auto"===b.overflowY}};l.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:e.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=d.getMarginBox(this.div);delete a.l;delete a.t;return a},
destroy:function(){e.destroy(this.div)}}};l.getTextBox=function(a,b){b=l.getMeasureContext(b);a=b.measureText(a);b.destroy();return a};l.getNodeFontFamily=function(a){return(a=c.get(a,"fontFamily")||c.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};l.getNodeFontSize=function(a){return c.toPixelValue(a,c.get(a,"fontSize"))};l.stealFocus=function(){var a=new b;try{var c=e.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});e.place(c,document.body);
c.select();e.destroy(c)}catch(q){}setTimeout(a.resolve,0);return a.promise};l.getWindowBox=function(){for(var a=[],b=0,c=document.body.children.length;b<c;b++){var h=document.body.children[b];l.isHidden(h)||(l.hide(h),a.push(h))}b={w:document.body.clientWidth,h:document.body.clientHeight};a.forEach(function(a){l.show(a)});return b};l.getBorder=function(a){return{t:c.toPixelValue(a,c.get(a,"borderTopWidth")),r:c.toPixelValue(a,c.get(a,"borderRightWidth")),b:c.toPixelValue(a,c.get(a,"borderBottomWidth")),
l:c.toPixelValue(a,c.get(a,"borderLeftWidth"))}};l.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};l.setAttribute=function(a,b,c){return 2===arguments.length?g.set(a,b):g.set(a,b,c)};l.getAttribute=function(a,b,c){return 2===arguments.length?g.get(a,b):g.get(a,b,c)};l.addClass=function(a,b){return f.add(a,b)};l.removeClass=function(a,b){return f.remove(a,b)};l.toggleClass=function(a,b,c){return f[c?"add":"remove"](a,b)};l.replaceClass=function(a,b,c){return f.replace(a,
b,c)};l.containsClass=function(a,b){return f.contains(a,b)};l.getStyle=function(a,b){return c.get(a,b)};l.setStyle=function(a,b,h){return 2===arguments.length?c.set(a,b):c.set(a,b,h)};l.toPixelValue=function(a,b){return parseFloat(b)||0};l.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};l.position=function(a,b){return d.position(a,b)};l.getMarginBox=function(a,b){return d.getMarginBox(a,b)};l.setMarginBox=function(a,b){return d.setMarginBox(a,b)};l.getMarginExtents=
function(a,b){return d.getMarginExtents(a,b)};l.getContentBox=function(a,b){return d.getContentBox(a,b)};l.getPadBorderExtents=function(a,b){return d.getPadBorderExtents(a,b)};l.getPadExtents=function(a,b){return d.getPadExtents(a,b)};l.getBorderExtents=function(a,b){return d.getBorderExtents(a,b)};l.docScroll=function(){return d.docScroll()};l.create=function(a,b,c,h){return e.create(a,b,c,h)};l.toDom=function(a){return e.toDom(a)};l.place=function(a,b,c){return e.place(a,b,c)};l.empty=function(a){return e.empty(a)};
l.destroy=function(a){return e.destroy(a)};l.query=function(b,c){b=a(b,c);c=[];for(var h=0,d=b.length;h<d;h++)c.push(b[h]);return c};return l})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),function(k,
g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u){function y(){}var v={},w=k(l._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(a){a&&(f.add(this.domNode,a),this._customClasses=a)},setCustomStyle:function(a){this._customStyle=a},show:function(a,b,c,h,d,m,f){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof a?this.containerNode.innerHTML=a:(this.containerNode.innerHTML=
"",e.place(a.domNode||a,this.containerNode));d&&this.set("textDir",d);this.containerNode.align=h?"right":"left";var p=n.around(this.domNode,b,c&&c.length?c:l.defaultPosition,!h,g.hitch(this,"orient")),q=p.aroundNodePos;"M"==p.corner.charAt(0)&&"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=q.y+(q.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=q.x+(q.w-this.connectorNode.offsetWidth>>
1)-p.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=m||y;this.onMouseLeave=f||y}},orient:function(a,b,c,l,e){this.connectorNode.style.top="";var n=l.h;l=l.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=b+"-"+c];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var m=d.position(this.domNode);m.w=Math.ceil(m.w);if(h("ie")||h("trident"))m.w+=2;d.setMarginBox(this.domNode,{w:Math.min(Math.max(l,1),m.w)});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=d.position(a),b=this.connectorNode.offsetHeight,
a.h>n?(this.connectorNode.style.top=n-(e.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,m.w-l)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var a=this.domNode.clientWidth,b=this.domNode.clientHeight,c=d.position(this.domNode),h=d.position(this.connectorNode),
l=d.position(this.containerNode);h.x-=c.x;h.y-=c.y;l.x-=c.x;l.y-=c.y;l.x+=1;l.y+=1;l.w-=2;l.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&e.destroy(this._surfaceContainer);c=this._surfaceContainer=e.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");c.style.pointerEvents="none";a=this._surface=m.createSurface(c,a,b);b=[{x:l.x,y:l.y},{x:l.x+l.w,y:l.y},{x:l.x+l.w,y:l.y+l.h},{x:l.x,y:l.y+l.h},{x:l.x,y:l.y}];c=h.x+h.w/2;h=h.y+h.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":l=
[{x:c-5,y:l.y},{x:c,y:h},{x:c+5,y:l.y}];b.splice.apply(b,[1,0].concat(l));break;case "ML-MR":case "BL-BR":l=[{x:l.x+l.w,y:h-5},{x:c,y:h},{x:l.x+l.w,y:h+5}];b.splice.apply(b,[2,0].concat(l));break;case "TM-BM":case "TL-BL":case "TR-BR":l=[{x:c+5,y:l.y+l.h},{x:c,y:h},{x:c-5,y:l.y+l.h}];b.splice.apply(b,[3,0].concat(l));break;case "MR-ML":case "BR-BL":l=[{x:l.x,y:h+5},{x:c,y:h},{x:l.x,y:h-5}],b.splice.apply(b,[4,0].concat(l))}l=a.createPolyline(b);h="function"===typeof this._customStyle?this._customStyle():
this._customStyle;l.setFill(h&&h.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});h&&h.color&&(this.containerNode.style.color=h.color)}}}),A={show:function(a,b,c,h,d){"string"===typeof c&&(c=[c]);c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var l=new w;d&&l.setCustomStyle(d);l.addCustomClasses(h);l.show(a,b,c);return l}};v.setTooltipToNode=function(c,h,d){function l(){!e&&v.showTooltipForNode(c,h,d)}d=d||{};if(c&&!u.isPlayerOnServer&&
(v.hideTooltipForNode(c),c.__setTooltipToNodeMouseEnterHandle&&c.__setTooltipToNodeMouseEnterHandle.remove(),h)){var e=!1;p.isMobileDevice()?c.__setTooltipToNodeMouseEnterHandle=t.addNoDragClickHandler(c,l):c.__setTooltipToNodeMouseEnterHandle=a(c,b.enter,l);d.showTooltip&&l();return{remove:function(){h=null;v.hideTooltipForNode(c)},suspend:function(){v.hideTooltipForNode(c);e=!0},resume:function(){e=!1},refresh:function(){c._shownTooltip&&l()}}}};v.showTooltipForNode=function(c,h,d){function l(){v.hideTooltipForNode(c);
var a=Array.isArray(d.classes)?d.classes.join(" "):d.classes,a=(a||"")+" esriGETooltip";d.notRestricted&&(a+=" notRestricted");c._shownTooltip=n=A.show(e,c,d.position||["after","before"],a,d.style)}if(c&&!u.isPlayerOnServer){v.hideTooltipForNode(c);var e="function"==typeof h?h():h;if(e){d.textAlign&&(e="\x3cdiv class\x3d'"+("start"===d.textAlign?"esriGEStart":"end"===d.textAlign?"esriGEEnd":"")+"'\x3e"+e+"\x3c/div\x3e");f.add(c,"esriGESimpleTextTooltip");var n;l();var m=v.hideTooltipForNode.bind(v,
c);p.isMobileDevice()?c.__setTooltipToNodeMouseLeaveHandle=a(document.body,"touchstart",function(a){r.isMouseOver(c,{event:a})||m()}):c.__setTooltipToNodeMouseLeaveHandle=a.once(c,b.leave,function(){!d.stayOnHover&&m()});d.ignoreNodeRemoval||(c.__setTooltipToNodeInLayoutHandle=setInterval(function(){!q.isNodeInLayout(c)&&m()},300));p.isMobileDevice()||(c.__setTooltipToNodeMouseOverHandle=setInterval(function(){d.stayOnHover&&r.isMouseOver(n.domNode)||r.isMouseOver(c)||m()},300),c.__setTooltipToNodeClickHandle=
a(c,"click",function(a){d.hideOnClick?m():!c._shownTooltip&&l()}),d.stayOnHover&&(c.__setTooltipToNodeMouseLeaveMasterHandle=a(n.domNode,b.leave,m)));return c._shownTooltip}}};v.isShown=function(a){return!(!a||!a._shownTooltip)};v.hideTooltipForNode=function(a){a&&(a.title="",f.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),
clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var C,z;v.autoTooltip=function(b){u.isPlayerOnServer||a(b,".TrimWithEllipses:mouseover",function(){if(this!==C&&this.offsetWidth<this.scrollWidth){var b=function(){C=null;z&&(z.tooltip.destroy(),z.mouseOutH.remove(),z.mouseMoveH.remove(),z=null)};b();C=this;z={tooltip:A.show(C.textContent,
C,["above","below"]),mouseOutH:a.once(C,"mouseout, mousedown, touchstart",b),mouseMoveH:a(document.body,"mousemove",function(){r.isMouseOver(C)||b()})}}})};v.showClosableTooltip=function(a){var b=v._createClosableTooltip(a.message,a.tooltipClass,a.position);return v._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};v.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};v._createClosableTooltip=function(a,b,c){function h(){var a=e.create("div",{"class":"esriGEClosableTooltipTip"},
l);f.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function d(){n=e.create("div",{"class":"esriGEClosableTooltipBody"},l);e.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},n);m=e.create("div",{"class":"esriGEClosableTooltipCloseButton"},n)}var l=e.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),n,m;"right"!==c?(d(),h()):(h(),d());l.style.position="fixed";return{tooltip:l,body:n,closeButton:m}};v._placeClosableTooltip=
function(b,h,l,e,n){function m(){var a=d.position(h),l=a.x+";"+a.y+";"+a.w+";"+a.h;l!==g&&(g=l,l=d.getMarginBox(b.tooltip),c.set(b.tooltip,{left:(f?a.x+a.w:a.x-l.w)+"px",top:a.y+a.h/2-l.h/2+"px"}))}var f="rtl"===document.dir&&"right"!==e||"rtl"!==document.dir&&"right"===e,g;m();var p,t,k,r,u,y=function(){p&&clearTimeout(p);t&&clearInterval(t);k&&clearInterval(k);r&&r.remove();b.tooltip.parentNode&&b.tooltip.parentNode.removeChild(b.tooltip)};t=setInterval(function(){q.isNodeInLayout(h)&&h.parentNode||
(u=!1,y());q.isNodeVisible(h)&&q.isNodeOnscreen(h)?(u=!0,q.show(b.tooltip)):(u=!1,q.hide(b.tooltip))},0);k=setInterval(function(){u&&m()},0);l&&(p=setTimeout(y,l));r=a(b.closeButton,"click",function(){y();n&&n()});b.tooltip._removeFunc=y;return b.tooltip};v.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});v.hideTooltipForNode(document.body);return v})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],
function(k,g,f,e){var d={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(c,a,b){b=b||{};return f.isMobileDevice()?d._addMobile(c,a,b):d._addPC(c,a,b)},_addPC:function(c,a,b){var h=b.tolerance||0,d,n,m=k(c,"mousedown",function(b){n&&n.remove();var c=b.clientX,l=b.clientY,m;d=k(document.body,"mousemove",function(a){if(!a.shiftKey&&!e.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-c)||0<Math.abs(b-l))m=!0}});n=k.once(document.body,"mouseup",function(b){d.remove();var e=
b.clientX,n=b.clientY;!m&&Math.abs(e-c)<=h&&Math.abs(n-l)<=h&&a(b)})});return{remove:function(){d&&d.remove();n&&n.remove();m&&m.remove()}}},_addMobile:function(c,a,b){function h(){m&&m.remove();f&&f.remove();g&&g.remove();clearTimeout(q)}var l=b.tolerance||d.MOBILE_TOLERANCE,e,m,f,g,q;e=k(c,"touchstart",function(e){function n(a){return Math.abs(e.clientX-a.clientX)<l&&Math.abs(e.clientY-a.clientY)<l}h();var p;if(b.detectLongPress){var t;f=k(c,"touchmove",function(a){t=a});q=setTimeout(function(){n(t||
e)&&(b.ignoreReleaseIfLongPressHappened&&(p=!0),b.longPressCallback(e))},b.longPressTimeout||d.LONG_PRESS_TIMEOUT)}m=k.once(c,"touchend",function(b){!p&&n(b)&&a(b);h()});g=k.once(c,"touchcancel",h)});return{remove:function(){e&&e.remove();h()}}},addGlobalDragHanlder:function(c){function a(){b&&b.remove();h&&h.remove();d&&d.remove();n&&n.remove();m&&c.destroyDnDBox&&c.destroyDnDBox(m)}c.tolerance=0<c.tolerance?c.tolerance:5;var b,h,d,n,m;return k(c.node,c.downEventName||f.press,function(l){a();if(!c.onMouseDown||
c.onMouseDown(l)){var p=l.clientX,q=l.clientY,r=p,u=q;b=k(document.body,f.move,function(l){function t(){a();c.dragEnded&&c.dragEnded()}l.shiftKey||e.isCtrl(l)||!(Math.abs(p-l.clientX)>=c.tolerance||Math.abs(q-l.clientY)>=c.tolerance)||(b.remove(),c.dragStarted&&!c.dragStarted(l,l.clientX-r,l.clientY-u))||(r=l.clientX,u=l.clientY,m=c.createDnDBox&&c.createDnDBox(),h=k(document.body,f.move,function(a){c.dragMoved&&c.dragMoved(a,a.clientX-r,a.clientY-u,t);r=a.clientX;u=a.clientY}),d=k.once(document.body,
g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){t()}),n=k(document.body,"keyup",function(b){27==b.keyCode&&(a(),c.dragCanceled&&c.dragCanceled())}))});k.once(document.body,g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){b.remove()})}})}};return d})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(k,g,f){var e={listenToKeyboardCombinationOverNode:function(d){return k(document.body,
"keydown",function(c){if(!d.isCtrl||e.isCtrl(c))if(!d.isShift||c.shiftKey)if(!d.isAlt||c.altKey)String.fromCharCode(c.keyCode).toLowerCase()!==d["char"]||d.node&&!f.isNodeInLayout(d.node)||d.callback(c)})},isCtrl:function(d){return g("mac")?d.metaKey:d.ctrlKey}};return e})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(k,g,f,e,d,c){var a={_latestEvent:null,_setLatestEvent:function(b){a._latestEvent=
b}};f("touch")?(g(document.body,e.press,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))}),g(document.body,e.move,function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))})):g(document.body,"mousemove",function(b){a._setLatestEvent(a.fixTouchEvent(b,!0))});var b;g(document.body,"mousedown",function(){b||(b=!0,g.once(document.body,"mouseup, click",function(){b=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(b,l){var h=l&&l.event||a._latestEvent;if(!(b&&b.parentNode&&
b.getBoundingClientRect&&h))return!1;if(l&&l.checkAllChildren){l=k.mixin({},l);delete l.checkAllChildren;var e=!1;c.traverseChildren(b,function(b){if(a.isMouseOver(b,l))return e=!0});return e}return a.isMouseOverBox(d.position(b),l)};a.isMouseOverBox=function(b,c){if(!b)return!1;var h=c&&c.event||a._latestEvent;c&&c.ignoreBorderTolerance&&(c=c.ignoreBorderTolerance,b=k.mixin({},b),b.x+=c,b.y+=c,b.w-=2*c,b.h-=2*c);return b.x<=h.clientX&&b.x+b.w>=h.clientX&&b.y<=h.clientY&&b.y+b.h>=h.clientY};a.fixTouchEvent=
function(a,b){a=b?k.mixin({},a):a;a.touches&&1===a.touches.length?(b=a.touches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY):a.changedTouches&&1===a.changedTouches.length&&(b=a.changedTouches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY);return a};a.isBeingDragged=function(){return b};a.addOverOutHandler=function(b){function c(){clearTimeout(d);h&&h.remove()}var h,d,e=g(b.node,"mouseover",function(l){function e(){a.isMouseOver(b.node)&&(b.onMouseOver(l),
h=g(document.body,"mousemove",function(h){a.isMouseOver(b.node)||(c(),b.onMouseOut(h))}))}c();b.delayTimeout?d=setTimeout(e,b.delayTimeout):e()});return{remove:function(){e.remove();c()}}};a.addOutHandler=function(b,c){return g(document.body,"mousemove",function(h){a.isMouseOver(b,{checkAllChildren:!0})||c(h)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when",
"../ReportPlayerState"],function(k,g,f,e,d){function c(){var a=new f;k(["../printing/PrintableContainer"],function(b){a.resolve(b)});return a.promise}return g(null,{_getPrintableContainer:function(a){var b=this;d.isAnimationSuspended=!0;return b._showWaiting(c(),"loadPrintModules").then(function(c){var h=new c(b,b._viewModel);a.onShowWaiting=function(a){b._showWaiting(a,"initPrintContainer")};return e(h.initialize(a),function(a){d.isAnimationSuspended=!1;return a?a:e(h.stop(),function(){return null})})})},
_getPrintDialogSettings:function(){var a=this;return c().then(function(b){return(new b(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(k,g,f,e,d,c){var a={createContainer:function(a,b){var c=a.getCurrentAnalysisAreaIndex();a.viewMode===d.PANELS_IN_STACK_ALL&&(c=0);var h=b.getContainer(c);if(!h){switch(a.viewMode){case d.PANELS_IN_SLIDES:h=this._createPaginationReportContainer(a);break;case d.PANELS_IN_STACK:h=this._createStackReportContainer(a);break;case d.PANELS_IN_STACK_ALL:h=this._createStackReportContainerAll(a);break;default:h=this._createFullPageReportContainer(a)}h.isCurrentContainer=function(){return a.getCurrentReportContainer()===
h}}b.setContainer(h,c);return h},_createPaginationReportContainer:function(a){var b=a._viewModel;return b.layoutBuilder.createElement("reportContainerPagination",{viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:a.scaleSlidesToFitWindow,onResized:function(b){a.playerToolbar.update();a._emitResizedEvent(b)},onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainer:function(a){var b=a._viewModel,c={center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:a.showToolbarInPopup?43:10};return b.layoutBuilder.createElement("reportContainerStack",{viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),isVertical:!0,renderOptions:c,onPendingDataApplied:function(){a._emitResizedEvent()}},a.reportContainerDiv)},_createStackReportContainerAll:function(a){var b=a._viewModel;return b.layoutBuilder.createElement("reportContainerStackAll",{viewModel:b,parentWidget:a,isVertical:!0,renderOptions:{center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:a.showToolbarInPopup?43:0},onPendingDataApplied:function(){a._emitResizedEvent()},onSwitchToSingleAreaView:function(){a.showAnalysisAreaAt(0)}},a.reportContainerDiv)},_createFullPageReportContainer:function(a){var b=a._viewModel,c={viewModel:b,parentWidget:a,currentFeatureIndex:a.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){a._emitResizedEvent()}};c.renderOptions={center:!0,minRight:10,minBottom:10,minLeft:10,minTop:a.showToolbarInPopup?
43:10};return b.layoutBuilder.createElement(a.getReportData().reportObject.isGraphicReport?"reportContainerGrid":"reportContainer",c,a.reportContainerDiv)}},b=k(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(a){return this._getInfo(a,"container")},getContainers:function(){return this._containerInfos.map(function(a){return a.container})},getContainerIndex:function(a){return this.getContainers().indexOf(a)},setContainer:function(a,b){g.set(a.domNode,
"area-index",b);this._getInfo(b,null,a)},isLoaded:function(a){return this._getInfo(a,"loaded")},setLoaded:function(a){if(a=this._getInfo(a))a.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(a){a.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(a){a.container.destroy()});this._containerInfos.length=0},_getInfo:function(a,b,c){var h=this._containerInfos[a];!h&&c&&(h=this._containerInfos[a]={container:c,loaded:!1});return b?h&&h[b]:h}}),h=
k(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(a){this._lastVisuals=a?{scrollTop:a.getScrollableContainer&&a.getScrollableContainer().scrollTop||0,pageIndex:a.getCurrentPageIndex&&a.getCurrentPageIndex()||0,slideIndex:a.getCurrentSlideIndex&&a.getCurrentSlideIndex()||0,zoomInfo:a.getZoomInfo&&a.getZoomInfo()}:null},applyCurrentContainerVisuals:function(a){this._lastVisuals&&(a.getScrollableContainer&&(a.getScrollableContainer().scrollTop=
this._lastVisuals.scrollTop||0),a.showSlideAt&&a.showSlideAt(this._lastVisuals.slideIndex||0),a.showPageAt?a.showPageAt(this._lastVisuals.pageIndex||0):a.notifyShown(),a.setZoomInfo&&a.setZoomInfo(this._lastVisuals.zoomInfo))}});return k(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new b;this._visualsHelper=new h},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(a){a?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!a&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=a.createContainer(this,this._containerDict);f.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView");switch(this.viewMode){case d.PANELS_IN_SLIDES:f.add(this.domNode,"esriGEReportPlayerPaginationView");break;case d.PANELS_IN_STACK:f.add(this.domNode,"esriGEReportPlayerStackView");break;case d.PANELS_IN_STACK_ALL:f.add(this.domNode,"esriGEReportPlayerStackAllView");
break;default:f.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(a){this.isPlayerOnServer||(a.__undoHideContainerHandle=c.hideNodeInBackground(a.domNode,"reportContainer_"+this._containerDict.getContainerIndex(a)),a.own(a.__undoHideContainerHandle))},_showContainer:function(a){!this.isPlayerOnServer&&a.__undoHideContainerHandle&&(a.__undoHideContainerHandle.undo(),delete a.__undoHideContainerHandle)},
_showAllContainers:function(){var a=this;this.getAllReportContainers().forEach(function(b){a._showContainer(b);a.reportContainerDiv.removeChild(b.domNode);e.place(b.domNode,a.reportContainerDiv)});return{undo:function(){a.getAllReportContainers().forEach(function(b){a._hideContainer(b)});a._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);
this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define("dojo/_base/declare dojo/dom-class dojo/on esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil ../PlayerResizeModes ../PlayerViewModes".split(" "),function(k,g,f,e,d,c,a){return k(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var a=this;this.resizeMode===c.FIT_WINDOW&&this.own(f(window,
"resize, orientationchange",function(){setTimeout(function(){a._measuredWinBox=null;a.resize()})}));this._resize()},_resize:function(a){a=a||{};g.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case c.FIT_WINDOW:return this._resize_fitWindow(a);case c.AUTO:return this._resize_auto(a);case c.MANUAL:return this._resize_manual(a)}},_resize_fitWindow:function(a){this._measuredWinBox=this._measuredWinBox||d.getWindowBox();
this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=this._measuredWinBox.h;g.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,
this._height-this._getToolbarHeight()),this._emitResizedEvent(a.isPaginating))},_resize_auto:function(a){this._height=this._width=0;g.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),
this._currentReportContainer.resize(0,0),this._emitResizedEvent(a.isPaginating))},_resize_manual:function(a){this._width=void 0!==a.width?a.width:this._width;this._height=void 0!==a.height?a.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),g.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=this._height+
"px",this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(a.isPaginating)))},_getToolbarHeight:function(){if(this.showToolbarInPopup)return 0;var b=this.playerToolbar&&
0===this.playerToolbar.toolbarHolder.infographicsSelectDiv.children.length,c=!this.showAreaTitle,d=this._reportData&&(this._reportData.isMultiFeature||1===this._reportData.analysisAreas.length),n=this.viewMode===a.PANELS_IN_SLIDES,m=e.isMobileDevice();return b&&c&&d&&n&&m?0:50},_maxWidth:0,_maxHeight:0,setMaxWidth:function(a){this._maxWidth=a},setMaxHeight:function(a){this._maxHeight=a}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare",
"dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(k,g,f,e,d){return k(null,{_initZoomControls:function(){var c=this;this.playerToolbar.onZoomToFitPage=function(){c.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=function(){c.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};this.playerToolbar.onZoomToFitPageHeight=function(){c.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};
this.playerToolbar.onSetZoomPercent=function(a){c.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar&&this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},
resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(c){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[c]&&a[c]()}},_getZoomSupportsInfo:function(){var c={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};this.viewMode!==e.PANELS_IN_SLIDES&&(c.supported=!0,this.resizeMode!==f.AUTO&&(c.canFitPage=!e.isStackLike(this.viewMode),c.canFitPageWidth=!0,c.canFitPageHeight=!1));return c},_updateZoomControls:function(){this._connectZoomToCurrentContainer();
this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var c=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();this._reportContainerZoomChangedHandle=c&&g.after(c,"onZoomChanged",function(){if(this.playerToolbar){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();
this.playerToolbar.update()}}.bind(this));c&&c.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var c=this._getZoomSupportsInfo();c.supported&&c.canFitPage&&this.defaultZoomBehavior===d.FIT_PAGE?this.zoomToFitPage():c.supported&&c.canFitPageWidth&&this.defaultZoomBehavior===d.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():c.supported&&c.canFitPageHeight&&this.defaultZoomBehavior===d.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],
function(){var k={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.RESET}};return k})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),
function(k,g,f,e,d,c,a,b,h,l){var n=k(null,{_dataProgress:0,_areaProgresses:null,_numAreas:0,constructor:function(a){g.mixin(this,a);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(a){this._dataProgress=a;this._fireProgress()},setNumAreas:function(a){this._numAreas=a},setProgressForAreaAt:function(a,b){this._areaProgresses[b]=a;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var a=
.25*this._dataProgress,b=.75/this._numAreas,c;for(c in this._areaProgresses)a+=b*(this._areaProgresses[c]||0);a=Math.min(.999999,Math.max(0,a));this.onChange(a);this._printProgress()},_printProgress:function(){},onChange:function(a){}});return k(null,{_progressController:null,_initProgressController:function(){var a=this;this.showProgressBar&&(this._progressController=new n,(new l(this._progressController)).onChange=function(b){h.showProgressBar({value:b,node:a.domNode,position:"top"})})},_waitingCount:0,
_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return h.getProgressPromiseForNode(this._waitNode||this.domNode)},_showWaiting:function(a,l){var e=this;if(this.isPlayerOnServer)return a;this.onWaitingShown(a);return this.resizeMode!==c.FIT_WINDOW?(0===this._waitingCount++&&(this._updateElementsVisibility(),this._waitNode=d.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":
"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=b.hideNodeInBackground(this.domNode)),f(a)["finally"](function(){0===--e._waitingCount&&(e._hideUndoHandle.undo(),e._hideUndoHandle=null,d.destroy(e._waitNode),e._updateElementsVisibility())}),h.showProgressPromise(this._waitNode,a,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(a,l)},_showWaitingFullScreen:function(b,c){return h.showProgressPromise(this.domNode,
b,{progressClass:"esriGEReportPlayerProgress",onShowProgress:function(){this._waitingCount++;this._updateElementsVisibility()}.bind(this),onRemoveProgress:function(){if(this.domNode){this._waitingCount--;this._updateElementsVisibility();var b=this.getCurrentReportContainer();b&&!b.__isBeingAnimated&&(b.__isBeingAnimated=!0,b.domNode&&e.add(b.domNode,"esriGEReportPlayer_fadeIn1000"),b.notifyShown(),a.delay(1500).then(function(){b.__isBeingAnimated=!1;b.domNode&&e.remove(b.domNode,"esriGEReportPlayer_fadeIn1000")}))}}.bind(this)})},
onWaitingShown:function(a){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred"],function(k){return{delay:function(g,f){var e=new k,d="function"===typeof g?g:null;setTimeout(e.resolve,("number"===typeof g?g:f)||0);return e.promise.then(function(){return d&&d()})}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(k,g,f,e,d,c){var a={showProgress:function(a,h){c.isPlayerOnServer||a&&!a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=f.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(h||"")},a))},removeProgress:function(a){a&&a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(f.destroy(a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete a["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},
showProgressBar:function(a){var b=a.node;if(b){b._progressBar&&f.destroy(b._progressBar);delete b._progressBar;var c=Number(a.value);0>=c||isNaN(c)||(c=Math.min(c,1),b._progressBar=f.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(a.position||"bottom")},b),d.set(b._progressBar,"width",e.position(b).w*c+"px"))}},showProgressPromise:function(b,c,d){if(!b)return c;d=d||{};void 0===b.__progressIndex&&(b.__progressIndex=0);0===b.__progressIndex&&(b.__progressDfd=
new k,a.showProgress(b,d.progressClass),d.onShowProgress&&d.onShowProgress());b.__progressIndex++;g(c)["finally"](function(){b.__progressIndex=Math.max(0,--b.__progressIndex);0===b.__progressIndex&&(b.__progressDfd&&b.__progressDfd.resolve(),delete b.__progressDfd,a.removeProgress(b),d.onRemoveProgress&&d.onRemoveProgress())});return c},getProgressPromiseForNode:function(a){return a&&a.__progressDfd&&a.__progressDfd.promise}};return a})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(k,g){return k(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(f){0<f.fireInterval&&(this.fireInterval=f.fireInterval);0<f.elasticTime&&(this.elasticTime=f.elasticTime);0<f.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/f.timeEstimate,.5));var e=this;this._progressHandle=g.after(f,"onChange",function(d){1<=d?e._finalize():e._updateProgress(d)},
!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(f,e){this._realProgress=Math.max(f,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!e))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(f){f!==!!this._intervalHandle&&(f?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),
this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(f){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(k,g,f,e,d,c){var a={configurePlayer:function(b,h){b._originalConfigurationSettings||(b.theme=b.theme&&f.toSupportedValue(b.theme)||f.DARK,b.viewMode=b.viewMode&&e.toSupportedValue(b.viewMode),b.resizeMode=b.resizeMode&&k.toSupportedValue(b.resizeMode)||
k.FIT_WINDOW,b.defaultZoomBehavior=b.defaultZoomBehavior&&g.toSupportedValue(b.defaultZoomBehavior),b._originalConfigurationSettings={viewMode:b.viewMode,defaultZoomBehavior:b.defaultZoomBehavior,scaleSlidesToFitWindow:b.scaleSlidesToFitWindow,showAreaTitle:b.showAreaTitle});b.viewMode=h||b._originalConfigurationSettings.viewMode||a.getDefaultViewMode(b);switch(b.viewMode){case e.FULL_PAGES:a._configure_fullPages(b);break;case e.PANELS_IN_SLIDES:a._configure_panelsInSlides(b);break;case e.PANELS_IN_STACK:a._configure_panelsInStack(b);
break;case e.PANELS_IN_STACK_ALL:a._configure_panelsInStackAll(b)}b._viewModel.setAnimationSuspended(b.viewMode===e.PANELS_IN_STACK_ALL);c.isMobileDevice()&&(d.modules.exportCommands=!1);d.modules.complexCellTooltips=b.viewMode===e.FULL_PAGES||b.viewMode===e.PANELS_IN_STACK_ALL},getDefaultViewMode:function(a){return c.isMobileDevice()&&!c.isWebLayout()?c.isLandscape()?e.PANELS_IN_SLIDES:e.PANELS_IN_STACK:e.FULL_PAGES},_configure_fullPages:function(a){a.showAreaTitle=!1!==a._originalConfigurationSettings.showAreaTitle;
a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=a._originalConfigurationSettings.defaultZoomBehavior||(c.isMobileDevice()?g.FIT_PAGE_WIDTH:null)||g.FIT_PAGE;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=a._originalConfigurationSettings.defaultZoomBehavior||g.FIT_PAGE}},_configure_panelsInSlides:function(a){a.showAreaTitle=!!a._originalConfigurationSettings.showAreaTitle;a.defaultZoomBehavior=null;switch(a.resizeMode){case k.FIT_WINDOW:a.scaleSlidesToFitWindow=
!1!==a._originalConfigurationSettings.scaleSlidesToFitWindow;break;case k.AUTO:a.scaleSlidesToFitWindow=!1;break;case k.MANUAL:a.scaleSlidesToFitWindow=!1!==a._originalConfigurationSettings.scaleSlidesToFitWindow}},_configure_panelsInStack:function(a){a.showAreaTitle=!!a._originalConfigurationSettings.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=
g.FIT_PAGE_WIDTH}},_configure_panelsInStackAll:function(a){a.showAreaTitle=!1!==a._originalConfigurationSettings.showAreaTitle;a.scaleSlidesToFitWindow=!1;switch(a.resizeMode){case k.FIT_WINDOW:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH;break;case k.AUTO:a.defaultZoomBehavior=g.RESET;break;case k.MANUAL:a.defaultZoomBehavior=g.FIT_PAGE_WIDTH}},configurePlayerForCustomBuild:function(a,c){c=c||d;c.esriDijitCssUrl=a+"/dijit/themes/claro/claro.css";c.esriCssUrl=a+"/esri/css/esri.css";c.playerSourceRootUrl=
a+"/dojo/dojo.js";c.configScriptText='var dojoConfig \x3d { baseUrl: "'+a+'/", waitSeconds: 60, async: true, locale: typeof dojoConfig !\x3d\x3d "undefined" \x26\x26 dojoConfig.locale || null, packages: [{ name: "dojo", location: "./dojo" }, { name: "dijit", location: "./dijit" }, { name: "dojox", location: "./dojox" }, { name: "dgrid1", location: "./dgrid1" }, { name: "dstore", location: "./dstore" }, { name: "xstyle", location: "./xstyle" }, { name: "esri", location: "./esri" }, { name: "moment", location: "./moment", main: "moment/moment" }] }'}};
return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var k={LIGHT:"light",DARK:"dark",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.DARK}};return k})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil","esri/dijit/geoenrichment/utils/DelayUtil"],function(k,g){return{animateTo:function(f){if(!f._isAnimatedTo){f._isAnimatedTo=
!0;var e=k.animateResize({duration:300,domNode:f.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});k.animateFadeIn({domNode:f.domNode,duration:300});return e.then(function(){return g.delay(100)})}},animateFrom:function(f){if(f._isAnimatedTo){f._isAnimatedTo=!1;var e=k.animateResize({duration:300,domNode:f.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-
200)/2,w:300,h:200}});k.animateFadeOut({domNode:f.domNode,duration:300});return e.then(function(){return g.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e,d){var c={animateResize:function(a){function b(b){a.domNode=k.create("div",{"class":a.ghostClass},document.body);g.set(a.domNode,{width:b.w+"px",height:b.h+"px"})}function c(b,
c,h){var d,l=a.fromOffset.x,e=a.fromOffset.y;if("number"!==typeof l)switch(d=c.w*h.x,l){case "l":l=0;break;case "r":l=(b.w||0)-d;break;default:l=((b.w||0)-d)/2}if("number"!==typeof e)switch(d=c.h*h.y,e){case "t":e=0;break;case "b":e=(b.h||0)-d;break;default:e=((b.h||0)-d)/2}return{x:b.x+l,y:b.y+e}}function l(b,c,h){var d,l=a.toOffset.x,e=a.toOffset.y;if("number"!==typeof l)switch(d=b.w*h.x,l){case "l":l=0;break;case "r":l=(c.w||0)-d;break;default:l=((c.w||0)-d)/2}if("number"!==typeof e)switch(d=b.h*
h.y,e){case "t":e=0;break;case "b":e=(c.h||0)-d;break;default:e=((c.h||0)-d)/2}return{x:c.x+l,y:c.y+e}}var n=a.fromBox||(a.domFrom||a.domNode)&&d.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&b(n);var m=a.toBox||d.noTransformPosition(a.domTo);if(n&&m){var p=function(b,c){var h={x:a.startScaleX,y:a.startScaleY},d=0;"fit"===h.x&&(b.w?d=h.x=b.w/c.w:h.x=0);"fit"===h.y&&(b.h?d=Math.max(h.y=b.h/c.h,d):h.y=0);h.x=h.x||d||1;h.y=h.y||d||1;return h}(n,m),t=function(b,c){var h={x:a.endScaleX,y:a.endScaleY},
d=0;"fit"===h.x&&(c.w?d=h.x=c.w/b.w:h.x=0);"fit"===h.y&&(c.h?d=Math.max(h.y=c.h/b.h,d):h.y=0);h.x=h.x||d||1;h.y=h.y||d||1;return h}(n,m);a.fromOffset&&(n=c(n,m,p));a.toOffset&&(m=l(n,m,t));var q=f("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[q]="0% 0%";return e.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:n.x,end:m.x},__y:{start:n.y,end:m.y},__scaleX:{start:p.x||1,end:t.x},__scaleY:{start:p.y||1,end:t.y}},endFunction:function(){a.animateGhost&&
k.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(b,c){var h=f("webkit")?"webkitTransform":"transform";"__x"==b?a.domNode.style.left=c+"px":"__y"==b?a.domNode.style.top=c+"px":"__scaleX"==b?a.domNode.style[h]="scaleX("+c+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==b&&(a.domNode.style[h]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+c+")")}}).promise}a.onEnd&&a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return c.animateResize(a)},
animateFadeIn:function(a){return e.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return e.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateSlide:function(a,b,c){var h=c.width;e.animateProperty({obj:a.style,duration:c.duration||250,properties:{left:{start:c.leftToRight?
0:-h,end:c.leftToRight?-h:0,units:"px"},right:{start:c.leftToRight?0:h,end:c.leftToRight?h:0,units:"px"}},endFunction:function(){c.onEnd&&c.onEnd()}});return e.animateProperty({obj:b.style,duration:c.duration||250,properties:{left:{start:c.leftToRight?h:0,end:c.leftToRight?0:h,units:"px"},right:{start:c.leftToRight?-h:0,end:c.leftToRight?0:-h,units:"px"}}}).promise},animateExpand:function(a,b,c){c=c||{};a.style.overflow="hidden";b&&d.show(a);var h=g.get(a,"height");return e.animateProperty({obj:a.style,
duration:c.duration,properties:{height:{start:b?0:h,end:b?h:0,units:"px"}},progressFunction:c.progressFunction,endFunction:function(){!b&&d.hide(a);g.set(a,"height","");g.set(a,"overflow","")}}).promise}};return c})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(k,g,f){function e(b){1>b.progress&&!b.isStopped?a.setTimeout(function(){if(b.isStopped)b.endFunction();else{var a=(new Date).getTime();
b.progress=1-(b.endTime-a)/b.duration;b.progress=Math.min(1,b.progress);d(b);e(b)}}):b.endFunction()}function d(a){for(var b in a.params.properties){var c=a.params.properties[b],d=c.easing?"function"===typeof c.easing?c.easing:g[c.easing]:null,d=d?d(a.progress):a.progress,e=c.start+d*(c.end-c.start);a.obj[b]=c.units?e+c.units:e;a.progressFunction&&a.progressFunction(b,e,d)}}var c={},a={_funcs:null,setTimeout:function(a){var b=this;this._funcs?this._funcs.push(a):(this._funcs=[a],setTimeout(function(){var a=
b._funcs;b._funcs=null;a.forEach(function(a){a()})},33))}};c.animateProperty=function(a){var b={},c=new k;b.promise=c.promise;b.params=a;b.obj=a.obj||a.node||{};b.duration=void 0!==a.duration?a.duration:1E3;b.startTime=(new Date).getTime();b.endTime=b.startTime+b.duration;b.progress=0;b.endFunction=function(){a.endFunction&&a.endFunction();c.resolve()};b.progressFunction=a.progressFunction;b.stop=function(){b.isStopped=!0};d(b);e(b);return b};c.animateTransform=function(a){var b=a.shape;b.setTransform(null);
return c.animateProperty({duration:a.duration,properties:{p:{start:0,end:1,easing:a.easing}},progressFunction:function(c,h,d){var l,e,n,m;a.transform.forEach(function(a){var b=a.start[0]+(a.end[0]-a.start[0])*d,c=a.start[1]+(a.end[1]-a.start[1])*d;"translate"===a.name?(l=b,e=c):"scale"===a.name&&(n=b,m=c)});b.setTransform(new f.Matrix2D({dx:l,dy:e,xx:n,yy:m}))},endFunction:function(){b.setTransform(null);a.onEnd&&a.onEnd()}}).promise};return c})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(k){var g={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return f*(f-2)*-1},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,4)},quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?
Math.pow(f,4)/2:-.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(Math.PI/2*f)+1},sineOut:function(f){return Math.sin(Math.PI/2*f)},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:Math.pow(2,10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==
f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=2;return 1>f?-.5*(Math.sqrt(1-Math.pow(f,2))-1):.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},backOut:function(f){--f;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,
2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;--f;return-1*Math.pow(2,10*f)*Math.sin(2*(f-.075)*Math.PI/.3)},elasticOut:function(f){return 0==f||1==f?f:Math.pow(2,-10*f)*Math.sin(2*(f-.075)*Math.PI/.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var e=.3*1.5,d=e/4;if(1>f)return--f,-.5*Math.pow(2,10*f)*Math.sin(2*(f-d)*Math.PI/e);--f;return.5*Math.pow(2,-10*f)*Math.sin(2*(f-d)*Math.PI/e)+1},bounceIn:function(f){return 1-
g.bounceOut(1-f)},bounceOut:function(f){return f<1/2.75?7.5625*Math.pow(f,2):f<2/2.75?7.5625*Math.pow(f-1.5/2.75,2)+.75:f<2.5/2.75?7.5625*Math.pow(f-2.25/2.75,2)+.9375:7.5625*Math.pow(f-2.625/2.75,2)+.984375},bounceInOut:function(f){return.5>f?g.bounceIn(2*f)/2:g.bounceOut(2*f-1)/2+.5}};k.setObject("dojo.fx.easing",g);return g})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z){z=z.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var D=k([a,b],{templateString:C,nls:z,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){u.hide(this.commandButtonsContainer);this._toolbarArranger=new t({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();A.autoTooltip(this.domNode)},_initAreaSelect:function(){var a=
this;this.areasSelect=(new m({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(b){a.onShowAnalysisAreaAt(b.value);a.onClosePopup()},onAddMoreAreas:function(){a.onAddMoreAreas();a.onClosePopup()},onRemoveAreas:function(b,c){a.onRemoveAreas(b);c&&a.onClosePopup()},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.onClosePopup()},onStopComparison:function(b){a.onShowAnalysisAreaAt(b);a.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(a){var b=a.analysisAreas,c=a.combinedAreasInfo,h=a.currentAreaIndex,d=a.isMultiFeature;this.areasSelect.buildAreaOptions(a);this.areasSelect.set("value",h);a=1<this.areasSelect.get("options").length&&!d;u[a?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.player.showReportTitle?500<document.body.clientWidth||!a?(this.infographicsSelectDiv.innerHTML="\x3cdiv class\x3d'TrimWithEllipses' style\x3d'max-width:"+
.4*document.body.clientWidth+"px;'\x3e"+this.player.getReportTitle()+"\x3c/div\x3e",this._toolbarArranger.showAreaTitle=!0):(this.infographicsSelectDiv.innerHTML="",this._toolbarArranger.showAreaTitle=!1):d?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,c):this._formatAreaTitleMulti(c):(b=b["all"===h?0:h],this.areaTitleFormatter?this.areaTitleFormatter(this.areaTitleInnerDiv,b):this._formatAreaTitle(b,h))},_formatAreaTitle:function(a,b){this.areaTitleInnerDiv.innerHTML=
"all"===b?z.allAreas:a.locationName||a.name},_formatAreaTitleMulti:function(a){this.areaTitleInnerDiv.innerHTML=a.locationName||a.name||a.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var a=this;this.pageSelect=(new n({onChange:function(b){a.onShowPageAt(b.value);a.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},setPageControlsVisible:function(a){this._pageControlsVisible=a;u[a?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(a,b){for(var c=
[],h=0;h<a;h++)c.push({label:f.substitute(z.pageIndex,{index:h+1}),value:h});this.pageSelect.set("options",c);this.pageSelect.set("value",b);u[this._pageControlsVisible&&1<a?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var a=this;this.zoomSelect=(new p({onChange:function(b){if(b.value===q.FIT_PAGE)a.onZoomToFitPage();else if(b.value===q.FIT_PAGE_WIDTH)a.onZoomToFitPageWidth();else if(b.value===q.FIT_PAGE_HEIGHT)a.onZoomToFitPageHeight();else a.onSetZoomPercent(b.value);a.onClosePopup()}})).placeAt(this.zoomSelectDiv);
this.own(this.zoomSelect)},setZoomSupportsInfo:function(a){u[a.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.store.data.forEach(function(b){b.hidden=!1;b.value!==q.FIT_PAGE||a.canFitPage?b.value!==q.FIT_PAGE_WIDTH||a.canFitPageWidth?b.value!==q.FIT_PAGE_HEIGHT||a.canFitPageHeight||(b.hidden=!0):b.hidden=!0:b.hidden=!0})},setZoomInfo:function(a){a=a.isFitPageScale?q.FIT_PAGE:a.isFitPageWidthScale?q.FIT_PAGE_WIDTH:a.isFitPageHeightScale?
q.FIT_PAGE_HEIGHT:q.getClosestZoomAndUpdateOptions(100*a.scale,this.zoomSelect.get("options"));a!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",a)},createCommandButton:function(a,b){return this.createCustomCommandButton({callback:b,buttonClass:a.id===h.PRINT?"playerPrintButton":"playerExportButton",tooltip:a.id===h.PRINT?z.printInfographic:z.exportInfographic,visibleOnError:!1})},createCustomCommandButton:function(a){u.show(this.commandButtonsContainer);var b=c.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},
this.commandButtonsContainer,a.addFirst?"first":"last");b.__visibleOnError=a.visibleOnError;b=c.create("div",{"class":"playerToolbar_commandButton"},b);a.buttonClass&&d.add(b,a.buttonClass);a.tooltip&&A.setTooltipToNode(b,a.tooltip);g(b,"click",a.callback);return b},setTheme:function(a){d.remove(this.domNode,"playerThemeDark playerThemeLight");d.add(this.domNode,a===l.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(a);this.pageSelect.setTheme(a);this.zoomSelect.setTheme(a)},setErrorShown:function(a){if(a)for(u.hide([this.areaTitleDiv,
this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),a=0;a<this.commandButtonsContainer.children.length;a++){var b=this.commandButtonsContainer.children[a];u[b.__visibleOnError?"show":"hide"](b)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},addInfographicsSelect:function(a){this._infographicSelect=a;a.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return v.isMouseOver(this.domNode)||
this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(a){u.enableContentAbsolute(this.commandButtonsContainer,!1);u.enableContentAbsolute(this.infographicsSelectDiv,!1);e(a,function(){u.enableContentAbsolute(this.commandButtonsContainer,!0);u.enableContentAbsolute(this.infographicsSelectDiv,
!0)}.bind(this))},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(a){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}});return k([a,b],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",player:null,popupButtonDiv:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,
showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var a=this;this.inherited(arguments);this.toolbarHolder=(new D({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(b){a.onShowPageAt(b)},onShowAnalysisAreaAt:function(b){a.onShowAnalysisAreaAt(b)},
onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide()},onZoomToFitPage:function(){a.onZoomToFitPage()},onZoomToFitPageWidth:function(){a.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){a.onZoomToFitPageHeight()},onSetZoomPercent:function(b){a.onSetZoomPercent(b)},onClosePopup:function(){a.closePopup()},onAddMoreAreas:function(){a.onAddMoreAreas()},onRemoveAreas:function(b){a.onRemoveAreas(b)}})).placeAt(this.domNode);this.own(this.toolbarHolder)},updateAreaSelect:function(a){this.toolbarHolder.areaTitleFormatter=
this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(a)},setPageControlsVisible:function(a){this.toolbarHolder.setPageControlsVisible(a)},updatePageSelect:function(a,b){this.toolbarHolder.updatePageSelect(a,b)},setZoomSupportsInfo:function(a){this.toolbarHolder.setZoomSupportsInfo(a)},setZoomInfo:function(a){this.toolbarHolder.setZoomInfo(a)},createCommandButton:function(a,b){return this.toolbarHolder.createCommandButton(a,
b)},setTheme:function(a){this.toolbarHolder.setTheme(a)},setErrorShown:function(a){this.toolbarHolder.setErrorShown(a);this._arrangeControls()},_arrangeControls:function(){u.show(this.domNode);this.toolbarHolder.arrangeControls();u[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){y.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){d[this.isScrollShown()?"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");
d[r.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");d[r.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var a=w.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=c.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,"first"),this._popupHandle=w.makePopup(this.toolbarHolder,
this,this._popupButton,{orient:["before","below"],openPopup:a})):c.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);this.domNode.innerHTML="";this._popupButton&&c.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&w.close(this.toolbarHolder)},isScrollShown:function(){return!1},createCustomCommandButton:function(a){return this.toolbarHolder.createCustomCommandButton(a)},
notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var a=c.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);A.setTooltipToNode(a,z.close);g(a,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:z.close,callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(a){this.toolbarHolder.addInfographicsSelect(a)},
isMouseOver:function(){return v.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(a){this.toolbarHolder.setContentLoadPromise(a)},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(a){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare",
"dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(k,g,f,e){return k(f,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(d){g[d===e.DARK?"add":"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil dojo/text!./templates/OnDemandSelect.html".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v){var w=k([n,p]),A={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(a){this._currentSelect=a;this._updateHandlers()},_updateHandlers:function(){var a=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=f(document.body,"keyup",function(b){b=String.fromCharCode(b.keyCode);1===b.length&&(b=b.toLowerCase(),a._tryHighlightNextItemForKey(b))}),this._mouseMoveHandler=f(this._currentSelect.popupList.domNode,"mousemove",function(){a._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(a){a===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=a;var b=this,c=this._currentSelect.store.query(function(c){return(c=
c[b._currentSelect.labelProperty])&&c.toLowerCase().charAt(0)===a});if(c.length){this._currentItemIndex>c.length-1&&(this._currentItemIndex=0);var h=(c=c[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(c);c&&this._currentSelect.popupList.scrollToItem(c);this._setNodeFocused(h)}},_currentFocusedNode:null,_setNodeFocused:function(a){this._currentFocusedNode&&(d.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);a&&(d.add(a,"listItemFocused"),this._currentFocusedNode=
a)}};return k([h,l],{templateString:v,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,_lastPopupListScrollTop:0,postCreate:function(){var a=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():q.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);this.listClass&&
d.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=f(this.openButton,this.openMouseEvent||t.click,function(b){a.stopOpenEventPropagation&&("function"===typeof a.stopOpenEventPropagation?a.stopOpenEventPropagation(b):b.stopPropagation());a.openPopup()});this.popupList.startup();this._trySelectValue();f(this.popupList.domNode,t.clickOrRelease,function(b){a.stopPopupInteractionEventPropagation&&b.stopPropagation()});f(this.popupList.domNode,"scroll",function(b){a._lastPopupListScrollTop=
a.popupList.domNode.scrollTop});y.autoTooltip(this.domNode)},_createPopupList:function(){var a=this,b=this.itemRenderer||new m;this.popupList=new (this.detectItemHover?w:n)(g.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:b,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){a._processOnChangeEvent()},
onItemHovered:function(b){a.onItemHovered(b)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var a=this.value,b=this.popupList.selectedItem;this.value=b[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:a,selectedItem:b})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||u.close(this.popupList)},
_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var b=this;u.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(a){return a+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,
onClickComponent:this.onClickComponent,onPreShow:function(){b.onPopupListPreBuild();b.makePopupListWidthMatchOpenButtonWidth&&c.set(b.popupList.domNode,"minWidth",a.getContentBox(b.domNode).w+"px");b._updatePopupListStore();b.onPopupPreOpened()},onShow:function(){b.onPopupOpened();A.setFocusedSelect(b);b._onPopupOpened()},onClose:function(){b.onPopupClosed();A.setFocusedSelect(null);b.clearPopupOnClose&&b._clearPopup()},isMouseOver:function(){return b.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&
this.popupList.clear&&this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,d.add(this.selectedLabel,this.placeHolderClass),!0;d.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},trySelectValue:function(a){this.value=
a;this._normalizeValue();return this._trySelectValue()},_trySelectValue:function(){if(null!==this.value&&this._setValueAttr(this.value,!0))return!0;if(this.requireSelection){var a=this.store&&this.store.query();if(a&&a.length){var b=this;this.value&&a.some(function(a){return b.value===a[b.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(a[0][this.idProperty],!0)}}return!1},_setValueAttr:function(a,b){this.value=a;this._normalizeValue();if(!this.store||!this.popupList)return!1;var c=
this;(a=this.store.query(function(a){return a[c.idProperty]===c.value})[0])&&this.popupList.setSelectedItem(a);this._updateSelection(a);return!!a},_setOptionsAttr:function(a){this.options=a;this.store=this._createStore(a);this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(a){this.options=(this.store=this._createStore(a))&&this.store.query();a.idProperty&&(this.idProperty=a.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(a){return a instanceof
Array?new b({data:a,idProperty:this.idProperty}):a},_updatePopupListStore:function(){this.popupList&&(this.popupList.store&&this.popupList.store===this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var a=this.get("value"),b=this;return void 0!==a&&this.store.query(function(c){return c[b.idProperty]===
a})[0]},setSelectedItem:function(a){this.store&&this.popupList&&a&&this._setValueAttr(a[this.idProperty],!0)},getSelectedIndex:function(){var a=this,b=-1;if(this.store){var c=this.get("value");void 0!==c&&this.store.query().some(function(h,d){if(h[a.idProperty]==c)return b=d,!0})}return b},setSelectedIndex:function(a){this.setSelectedItem(this.store&&this.store.data[a])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(a){a=a||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||
(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",e.place(this.nodeToKeepAsSelected,this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=!0):this.renderSelectionAsItem?(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",a&&this.popupList.itemRenderer.createPresentation(a,!1,this.selectedItemHolder,this.popupList)):(q.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:
(this.selectedLabel.innerHTML=a?a[this.labelProperty]:"",this.selectedLabel.innerHTML&&d.remove(this.selectedLabel,this.placeHolderClass),q[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return u.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),u.open(this.popupList))},closePopup:function(){this._popupCreationHandler||u.close(this.popupList)},
refreshPopup:function(){this.isPopupOpen()&&u.refresh(this.popupList)},isMouseOver:function(a){return r.isMouseOver(this.domNode,{event:a})||this.isMouseOverList(a)},isMouseOverList:function(a){return this.popupList&&r.isMouseOver(this.popupList.domNode,{event:a})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},_onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(a){},onItemHovered:function(a){},destroy:function(){this._popupCreationHandler&&
this._popupCreationHandler.remove();this.closePopup(this.popupList);this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),function(k,g,f,e,d,c,a,b,h,l,n,m,p){var t=k([m,p],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",
idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:l,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,
postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?f.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();h.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);
this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(a){var b=this;if(this._isCreated){var c=this.items||this.store&&this.store.data;c&&c.some(function(c){if(c[b.idProperty]==a)return b.setSelectedItem(c),!0})}else this._valueOnCreation=a},_scrollTopMemo:0,memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=
this._scrollTopMemo||0},_setItemsAttr:function(a){this.setItems(a)},setItems:function(a,b){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=a;b||(this.items&&this._isCreated?(this._addItems(a),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=this.selectedIndex||this.selectedItem){var a=this;this._addedWrappers&&this._addedWrappers.some(function(b,c){return a._isItemSelected(b,
c)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(a,b){this.hasSelectableItems&&(this.selectedItem=a,this.selectedIndex=-1,this.refresh(),b&&this._dispatchChangeEvent())},setSelectedIndex:function(a,b){this.hasSelectableItems&&(this.selectedIndex=a,this.selectedItem=null,this.refresh(),b&&this._dispatchChangeEvent())},getItemNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(c){if(c.itemRef===
a)return b=c.__itemPresentation,!0});return b},getItemByNode:function(a){var b;this._addedWrappers&&this._addedWrappers.some(function(c){if(c.__itemPresentation===a)return b=c.itemRef,!0});return b},getItemByValue:function(a){var b,c=this;this._addedWrappers&&this._addedWrappers.some(function(h){if(h[c.idProperty]===a)return b=h.itemRef,!0});return b},__selectedPresentation:null,_addItems:function(a){this._addedWrappers=this._addedWrappers||[];var b=this;a.forEach(function(a){var c=g.mixin({},a);
c.itemRef=a;b.__addWrapper(c)})},__addWrapper:function(a){var b=this._addedWrappers.length,c=this.itemRenderer.createPresentation(a.itemRef,this._isItemSelected(a,b),this.itemsDiv,this,a);c&&(c.index=b,c.item=a.itemRef,a.__itemPresentation=c,this._isItemSelected(a,b)&&(this.selectedItem=a.itemRef,this.selectedIndex=b,this.__selectedPresentation=c),this._addClickHandler(c),this._addedWrappers.push(a),a=this._addedWrappers.length-1,e.add(c,"listItem_"+a),e.add(c,"listItem_"+(0==a%2?"even":"odd")))},
_isItemSelected:function(a,b){return this.hasSelectableItems&&this._isItemClickable(a)?b==this.selectedIndex||a.itemRef===this.selectedItem?!0:a.itemRef&&this.selectedItem?(a=a.itemRef[this.idProperty],b=this.selectedItem[this.idProperty],void 0!==a&&a===b):!1:!1},_isItemClickable:function(a){return this.selectionValidator?this.selectionValidator(a):this._selectionValidatorDefault(a)},_selectionValidatorDefault:function(a){return!!a&&!a.isSeparator&&!1!==a.enabled},_addClickHandler:function(b){function h(){(l.allowRepetitiveSelection||
l.__selectedPresentation!=b)&&l._isItemClickable(b.item)&&(l.__selectedPresentation&&l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(l.__selectedPresentation,!1,l.__selectedPresentation.item),l.itemRenderer.selectPresentation&&l.itemRenderer.selectPresentation(b,l.hasSelectableItems,b.item),l.__selectedPresentation=b,l.selectedIndex=b.index,l.selectedItem=b.item,l._dispatchChangeEvent())}var l=this;if(this.allowManualSelection){var e;e=this.selectOnMouseDown||!this.noDragTolerance?
d(b,this.selectOnMouseDown?c.press:c.click,function(a){l.stopMouseEventPropagation&&a.stopPropagation();h()}):a.addNoDragClickHandler(b,h,{tolerance:this.noDragTolerance});this._clickHandles.push(e)}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,selectedItem:this.selectedItem,value:this.selectedItem&&this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(a){a.destroyPresentation&&
a.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&(this.itemsDiv.innerHTML="");this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(a){a.remove()});this._clickHandles.length=0},scrollToItem:function(a){if(a=this.getItemNode(a))this.domNode.scrollTop=a.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(a){this.setStore(a)},
setStore:function(a){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=a)&&a.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();var b=this;this._storeScrollHandler=this._storeScrollHandler||d(this.domNode,"scroll",function(){var a=b._addedWrappers[b._addedWrappers.length-30];(a=a?a.__itemPresentation:null)&&a.offsetTop<b.domNode.scrollTop&&b._loadNextPart()})}else this._checkIfStillSelected()},
_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var a=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete a.total;this._addItems(a);a.length&&this._addedWrappers.length<this.onDemandPopulateLimit&&(a=this._loadNextPart.bind(this),setTimeout(a,this.onDemandPopulatePeriod))}},isMouseOver:function(a){return b.isMouseOver(this.domNode,{event:a})},onChange:function(a){},destroy:function(){this.clear();this.inherited(arguments)}});
t.createPopup=function(a){function b(){c||(c=new t({"class":a.listClass,itemRenderer:a.itemRenderer,items:a.options,onChange:function(b){a.onChange(b);!a.keepSelection&&c.setSelectedItem(null);n.close(c)}}),a.doNotOwn||a.wizard.own(c),a.isDeferred&&a.isDeferred(c));return c}var c;n.makePopup(a.isDeferred?b:b(),a.wizard,a.aroundNode,a.popupOptions||{});return c};return t})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),
function(k,g,f,e,d,c,a,b){return k(null,{itemClass:"",itemClassSelected:"",labelClass:"",createLabelNode:!1,createImageAfterLabel:!1,constructor:function(a){g.mixin(this,a)},createPresentation:function(a,b,c,m,g){if(a.isSeparator)return b=e.create("div",{"class":"flowList_listSeparator"},c),a.hidden&&d.hide(b),b;c=e.create("div",{"class":"listItem "+(this.itemClass||" ")+(a.itemClass||""),style:a.style},c);a.isLink&&f.add(c,"esriGELink");!1===a.enabled&&f.add(c,"disabled");this._createParts(a,c,m);
this._setTooltip(a,c,m);this.selectPresentation(c,b,a);a.hidden&&d.hide(c);return c},_setTooltip:function(a,b,d){a.tooltip&&d.own(c.setTooltipToNode(b,a.tooltip))},_createParts:function(a,b,c){var h;this.createImageAfterLabel&&(this._createLabel(a,b,c),h=!0);this._createImage(a,b,c);!h&&this._createLabel(a,b,c)},_createImage:function(a,b,c){if(b=this._createImageNode(a,b,c))a.imageClass&&f.add(b,a.imageClass),a.imageUrl&&(b.style="background-image: url("+a.imageUrl+");")},_createImageNode:function(a,
b,c){return b},_createLabel:function(a,b,c){if(this.createLabelNode)return b=e.create("div",{innerHTML:a[c.labelProperty],"class":"dijitInline TrimWithEllipses listItemLabel"},b),a.labelClass&&f.add(b,a.labelClass),this.labelClass&&f.add(b,this.labelClass),c.autoDetectUrlsInLabels&&this._tryConvertToUrls(b),b;a[c.labelProperty]&&(b.innerHTML=a[c.labelProperty],c.autoDetectUrlsInLabels&&this._tryConvertToUrls(b))},_tryConvertToUrls:function(c){var h=c.innerHTML.match(a.IS_URL_RE);if(h=h&&h[0])c.innerHTML=
c.innerHTML.replace(h,"\x3ca href\x3d'"+b.toHttpsUrl(h)+"' target\x3d'_blank'\x3e"+h+"\x3c/a\x3e")},selectPresentation:function(a,b,c){f[b?"add":"remove"](a,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var k={createRegExp:function(a,c,d){a=k.trimText(a);return!a&&d?null:new RegExp(a,c)},trimText:function(a){return a?a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(a,c,d){return null==a?"":(""+
a).replace(c,function(a){return d[a]||""})}},g=/&|<|>/g,f=/&|<|>|"|'/g,e={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;"};k.encodeXML=function(a,c){return k.replace(a,c?f:g,e)};var d=/&amp;|&lt;|&gt;|&quot;|&apos;/g,c={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};k.decodeXML=function(a){return k.replace(a,d,c)};k.IS_RICH_TEXT_RE=/<\w/;k.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;
k.isRichText=function(a){return a&&k.IS_RICH_TEXT_RE.test(a)};k.isUrl=function(a){return a&&k.IS_URL_RE.test(a)};var a=/^[0-9a-fA-F]{32}$/;k.isId=function(b){return b&&a.test(b)};return k})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],function(k,g,f,e,d){var c={getDomain:function(a){if("string"!==typeof a)return null;a=a.replace(/^(http:\/\/|https:\/\/)/i,"");var b=a.indexOf("/");return 0>b?a:a.substr(0,
b)},getPortalUrl:function(a){if("string"!==typeof a)return null;a=a.replace(/\?.*$/,"");var b=a.match(/^(.+)\/sharing(\/|$)/i);return b||(b=a.match(/^(.+)\/home$/i))?b[1]:(b=a.match(/^(.+)\/portal(\/|$)/i))?b[1]+"/portal":a},getProxyUrl:function(a){var b=g.defaults.io.proxyUrl;b&&!/^http/i.test(b)&&(b=e.getAbsoluteUrl(b));b&&a&&(b=c.toHttpsUrl(b));return b},registerCORS:function(a){(a=c.getDomain(a))&&-1==g.defaults.io.corsEnabledServers.indexOf(a)&&g.defaults.io.corsEnabledServers.push(a);c._fixCORS()},
_fixCORS:function(){g.defaults.io.corsEnabledServers=g.defaults.io.corsEnabledServers.filter(function(a){return a.indexOf&&0===a.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+a),!1):!0})},indexOfQuery:function(a){var b=a.indexOf("?");0<=b&&(a=a.substr(b+1),/^(http:\/\/|https:\/\/)/i.test(a)&&(a=a.indexOf("?"),b=0<=a?b+1+a:-1));return b},removeQuery:function(a){var b=c.indexOfQuery(a);return 0>b?a:a.substr(0,b)},addQueryPart:function(a,b){var h=0>c.indexOfQuery(a)?"?":"\x26";
return a+h+b},getVariableValue:function(a,b){if(a&&"string"===typeof b){var c=e.urlToObject(a);if(c.query){var d={};Object.keys(c.query).forEach(function(a){d[a.toLowerCase()]=c.query[a]});return d[b.toLowerCase()]}}},addUrlVariable:function(a,b,h){b=encodeURIComponent(b);h=encodeURIComponent(h);return c.addQueryPart(a,b+"\x3d"+h)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(a){return!a||/^http/i.test(a)?a:"http://"+a},toHttpsUrl:function(a){a&&(a=c.toHttpUrl(a));if(!a||!/^http:\/\//i.test(a))return a;
var b=new k(a);a=a.replace(/^http/i,"https");var h=c.securePortsMap[b.port];h&&(a=a.replace(":"+b.port,":"+h));return a},combine:function(a,b){"number"===typeof b&&(b+="");if(b){if(/^(http:\/\/|https:\/\/)/i.test(b)||!a)return b;"/"!=b.charAt(0)&&(b="/"+b);if(1==b.length)return a;var h=a.length-1;"/"==a.charAt(h)&&(a=a.substr(0,h));var d=e.urlToObject(a);a=c.removeQuery(a);h=a.length-b.length;0<=h&&a.substr(h).toLowerCase()==b.toLowerCase()&&(a=a.substr(0,h));a+=b;for(var n in d.query)c.addQueryPart(a,
d.query[n])}return a},combineMulti:function(a){for(var b=a[0],h=1;h<a.length;h++)b=c.combine(b,a[h]);return b},openUrl:function(a,b){if(b)return window.open(a,"_blank");b=window.open();b.opener=null;b.referrer=null;b.location=a;return b},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(a){return(a=a&&f.id.findCredential(a)||f.id.credentials[0])&&a.token},setArcgisUrl:function(a){a&&(d.arcgisUrl=c.combine(a,"/sharing/rest/content/items"))}};return c})},
"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config dijit/popup dijit/place dijit/Viewport ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),function(k,g,f,e,d,c,a,b,h,l,n,m,p,t){function q(a){if(!a)return["below"];var b=[];a.forEach(function(a){var c=d.isBodyLtr();switch(a){case "before-alt":c=
!c;case "after-alt":b.push(c?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});b.push(c?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}b.push(a)});return b}var r={makePopup:function(l,y,v,w){function u(a){if(w.overlay&&a._popupWrapper){var b=e.create("div",{"class":w.overlay.overlayClass});if(w.overlay.overlayParent)e.place(b,w.overlay.overlayParent);else{e.place(b,E,"before");var h=c.get(a._popupWrapper,"zIndex");c.set(b,"zIndex",h)}a.__popupOverlay=b}}function C(a){a.__popupOverlay&&
(e.destroy(a.__popupOverlay),a.__popupOverlay=null)}function z(a){G=!1;a.__bodyClickHandler&&a.__bodyClickHandler.remove();a.__bodyClickHandler=null;a.__popupWidgetOpenFlag=!1;C(a);w.onClose&&w.onClose()}function D(b){b&&w.stopEventPropagation&&b.stopPropagation();G||(G=!0,a(B||("function"==typeof l?l():l),function(b){B=b;B.domNode?(B.__openPopupWidgetFunc=D,E=h.moveOffScreen(B),a(w.onPreShow&&w.onPreShow(),function(){var a=q(w.orient);if(E&&!1!==w.allowAutoOrientation){var b=a.indexOf("below");-1!==
b&&-1===a.indexOf("above")&&a.splice(b+1,0,"above")}b=-1;if(-1!==a.indexOf("after")||-1!==a.indexOf("before"))var b=n.getEffectiveBox(this.ownerDocument),c=d.position(v,!1),b=Math.floor(Math.max(c.y+c.h,b.h-c.y))-10;w.noOverflow&&(B.baseClass="esriGENoOverflow "+B.baseClass);h.open({parent:y,popup:B,around:v,maxHeight:b,orient:a,onClose:function(){z(B)}});w.suppressReposition&&clearTimeout(h._aroundMoveListener);w.noOverflow&&(B.baseClass=B.baseClass.replace("esriGENoOverflow ",""));E&&w.wrapperClass&&
f.add(E,w.wrapperClass);B.__popupInfo=k.mixin({},h.getTopPopup());B.__popupInfo.orient=a;B.__popupInfo.around=v;C(B);u(B);w.onShow&&w.onShow();B.__popupWidgetOpenFlag=!0;H&&B.own&&B.own(H);B.__bodyClickHandler&&B.__bodyClickHandler.remove();if(!1!==w.closeOnClickOutside){var l="function"===typeof w.closeOnClickOutside?w.closeOnClickOutside:null;setTimeout(function(){B.__bodyClickHandler&&B.__bodyClickHandler.remove();B.__bodyClickHandler=g(document.body,m.isMobileDevice()?m.press:F,function(a){G&&
(t.fixTouchEvent(a),l&&!l(a)||t.isMouseOver(E)||w.isMouseOver&&w.isMouseOver()||B.isMouseOver&&B.isMouseOver()||B.__lockPopupWidgetFlag||r.close(B))})})}})):G=!1}))}if(l){if(b.isPlayerOnServer)return{remove:function(){}};w=w||{};var F=w.openMouseEvent?w.openMouseEvent:m.clickOrRelease,B="function"!==typeof l?l:null;if(B)var E=h.moveOffScreen(B);var G=!1;B&&(B.__openPopupWidgetFunc=D);var H;if(!1!==w.openOnMouseEvent){var J=D;if(w.toggleOnClick)var M,J=function(a){M=M||a.type;B?M===a.type&&r.toggle(B):
D()};H=!1===w.onClickComponent?null:void 0!==w.noDragClickTolerance?p.addNoDragClickHandler(w.onClickComponent||v,J,{tolerance:w.noDragClickTolerance}):g(w.onClickComponent||v,F,J)}w.openPopup&&D();return{remove:function(){B&&"function"!==typeof B&&(r.close(B),z(B),B._popupWrapper&&(B.domNode&&B.domNode.parentNode===B._popupWrapper&&B._popupWrapper.removeChild(B.domNode),e.destroy(B._popupWrapper),delete B._popupWrapper),delete B.__openPopupWidgetFunc,delete B.__popupWidgetOpenFlag);H&&H.remove()}}}},
setLocked:function(a,b){a.__lockPopupWidgetFlag=b},open:function(a){a&&!a.__lockPopupWidgetFlag&&!a.__popupWidgetOpenFlag&&a.__openPopupWidgetFunc&&a.__openPopupWidgetFunc()},close:function(a){a&&!a.__lockPopupWidgetFlag&&h.close(a)},isOpen:function(a){return!(!a||!a.__popupWidgetOpenFlag)},toggle:function(a){r.isOpen(a)?r.close(a):r.open(a)},refresh:function(a){if(a){a=a.__popupInfo;var b=d.isBodyLtr();a&&l.around(a.wrapper,a.around,a.orient,b)}},getWrapper:function(a){return a&&a._popupWrapper}};
return r})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang","dojo/on","dojo/sniff"],function(k,g,f){var e=f("touch");return k.mixin(function(d,c,a,b){if(e){switch(c){case "click":c="touchstart,click";break;case "mousedown":c="touchstart,mousedown";break;case "mouseup":c="touchend,mouseup";break;case "clickend":c="touchend,click";break;default:return g(d,c,a,b)}var h=!1;return g(d,c,function(b){"touchstart"===b.type||"touchend"===b.type?(a.call(this,b),h=!0,setTimeout(function(){h=
!1},500)):h||a.call(this,b)},b)}"clickend"===c&&(c="click");return g(d,c,a,b)},g)})},"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare","dojo/on","../utils/MouseUtil"],function(k,g,f){var e=k(null,{_list:null,_checkIntervalH:null,constructor:function(d){this._list=d},setHoveredItem:function(d){clearInterval(this._checkIntervalH);this._emitHoverEvent(d);this._checkIntervalH=setInterval(function(){f.isMouseOver(d)||this.setHoveredItem(null)}.bind(this),100)},
_emitHoverEvent:function(d){this._list.onItemHovered({type:"itemHover",index:d?d.index:-1,item:d?d.item:null,value:d?d.item[this._list.idProperty]:void 0})}});return k(null,{_mouseHelper:null,postCreate:function(){this._mouseHelper=new e(this);this.inherited(arguments)},_addClickHandler:function(d){this.inherited(arguments);this._clickHandles.push(g(d,"mouseover",function(){this._mouseHelper.setHoveredItem(d)}.bind(this)))},onItemHovered:function(d){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q){q=q.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var r=k(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(a,b,h,l){var n=this,m=this.inherited(arguments);if(a.isSeparator)return m;m.innerHTML="";if("all"===a.value){m.style.cursor="pointer";var g=e.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},m);(new c(g,{mode:"toggle"})).set("checked",this.isCompareAll());e.create("div",{"class":"dijitInline",
innerHTML:a.label},m);m.addEventListener("click",function(){if(n.isCompareAll())n.onStopComparison();else n.onCompareAreasSideBySide()});t.setTooltipToNode(m,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return m}if("addAreas"===a.value)return m.style.cursor="pointer",e.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},m),e.create("div",{"class":"dijitInline",innerHTML:a.label},
m),m.addEventListener("click",function(){n.onAddMoreAreas()}),m;if(a.isAdditional)return m.style.cursor="pointer",a.buttonInfo.imageClass&&e.create("div",{"class":"dijitInline esriGESpaceAfterBig "+a.buttonInfo.imageClass},m),e.create("div",{"class":"dijitInline",innerHTML:a.label},m),m.addEventListener("click",function(b){a.buttonInfo.callback(b);n.onClosePopup()}),a.buttonInfo.tooltip&&(g=e.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},m),t.setTooltipToNode(g,a.buttonInfo.tooltip,
a.buttonInfo.tooltipParams)),a.buttonInfo.onCreated&&a.buttonInfo.onCreated(m),m;if(a.canSelect){var g=e.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},m),p=new d(g);p.autoToggle=!1;p.set("checked",a.selected);m.addEventListener("click",function(){a.selected=!a.selected;p.set("checked",a.selected);a.isGroup?a.children.forEach(function(b){b.selected=a.selected}):a.parent&&(a.parent.selected=a.parent.children.some(function(a){return a.selected}));n.onVisibilityChanged()})}this.canRemoveAreas&&
a.isHost&&(g=e.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},m),g.addEventListener("click",function(b){b.stopPropagation();n.onRemoveAreas(a.isArea?[a.analysisArea]:a.analysisAreas)}),t.setTooltipToNode(g,a.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&a.isHost&&this.isCompareAll()&&(g=e.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},m),0<a.hostIndex&&e.create("div",{"class":"dijitInline upArrow"},
g).addEventListener("click",function(b){b.stopPropagation();n.onMoveUp(a)}),a.hostIndex<this.getNumHostItems()-1&&e.create("div",{"class":"dijitInline downArrow"},g).addEventListener("click",function(b){b.stopPropagation();n.onMoveDown(a)}));g=e.create("div",{"class":"dijitInline",innerHTML:a.label},m);a.parent&&(g.style.paddingLeft="20px");this.wrapInCards&&(a.isArea&&!a.parent?f.add(m,"areaCard_only"):a.isGroup?f.add(m,"areaCard_groupTop"):a.isArea&&f.add(m,a.parent.children.indexOf(a)===a.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(m,b,a);return m},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(a){},onVisibilityChanged:function(){},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return k(h,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var a=this;this.inherited(arguments);this._nls=g.mixin({},q,this.player.nlsMap);this.itemRenderer=new r({nls:this._nls,onAddMoreAreas:function(){a.onAddMoreAreas();a.closePopup()},onRemoveAreas:function(b){var c=2>=a._getNumHostItems();a.onRemoveAreas(b,c);c&&a.closePopup()},isCompareAll:function(){return a.player.viewMode===b.PANELS_IN_STACK_ALL},getNumHostItems:function(){return a._getNumHostItems()},
onVisibilityChanged:function(){var b={};a.get("options").forEach(function(a){a.isArea&&(b[a.analysisArea.index]=a.selected)});a.refresh();a.player.getCurrentReportContainer().setAreasVisibilityState(b,{append:!0})},onMoveUp:function(a){},onMoveDown:function(a){},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.closePopup()},onStopComparison:function(){var b=-1;a.get("options").some(function(a){if(a.analysisArea&&!a.analysisArea.hidden)return b=a.analysisArea.index,!0});a.onStopComparison(b);
a.closePopup()},onClosePopup:function(){a.closePopup()}})},_buildAdditionalPopupListProperties:function(){var a=this;return{selectionValidator:function(c){return a.player.viewMode!==b.PANELS_IN_STACK_ALL&&!!c&&!c.isSeparator&&!1!==c.enabled}}},buildAreaOptions:function(a){var c=n.groupAreas(a),h=1<c.groupInfos.length&&!c.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=h;this.itemRenderer.canRemoveAreas=h&&!m.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var d=[],l=0;c.groupInfos.forEach(function(a,
b){var c;a.isRealGroup&&(c={isGroup:!0,isHost:!0,hostIndex:l++,label:a.label,value:"group_"+b,enabled:!1,analysisAreas:a.areas,children:[]},d.push(c));a.areas.forEach(function(a){a={isArea:!0,label:a.shortName||a.name||"",value:a.index,analysisArea:a,parent:c,isHost:!c};a.isHost&&(a.hostIndex=l++);d.push(a);c&&c.children.push(a)})});c={isSeparator:!0};d.push(c);this.player.viewMode!==b.PANELS_IN_SLIDES&&(!m.isMobileDevice()&&1<a.analysisAreas.filter(function(a){return!a.hidden}).length&&d.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&d.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(a){a.isVisible&&!a.isVisible()||d.push({label:a.label,value:a.id,isAdditional:!0,buttonInfo:a})});d[d.length-1]===c&&d.pop();this._updateTreeSelection(d);this.set("options",d);this._updateComparisonSettings()},_getNumHostItems:function(){var a=0;this.get("options").some(function(b){b.isHost&&a++});return a},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(a){if(this.player.viewMode===b.PANELS_IN_STACK_ALL){var c=this.player.getCurrentReportContainer().getAreasVisibilityState();a=a||this.get("options");a.forEach(function(a){if(a.isGroup||a.isArea)a.canSelect=!0,a.isGroup?(a.children.forEach(function(a){a.selected=c[a.analysisArea.index]}),a.selected=a.children.some(function(a){return a.selected})):a.selected=c[a.analysisArea.index]})}},_updateComparisonSettings:function(){var a=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&e.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===b.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=e.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),e.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),p.makePopup(function(){a.comparisonSettings||(a.comparisonSettings=
new l({player:a.player,onChange:function(){a.player.getCurrentReportContainer().setComparisonSettings(a.comparisonSettings.getSettings())}}));a.comparisonSettings.setSettings(a.player.getCurrentReportContainer().getComparisonSettings());return a.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(a,b){},onCompareAreasSideBySide:function(){},onStopComparison:function(a){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(k,g,f,e,d,c,a,b){return k(e,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(h,l,e){var n=b.isMobileDevice()?"touchstart":"click";l=l||{};var g=l["class"];l["class"]=(g?g+" ":"")+"esriTriStateCheckBoxIcon";
if(g=l.label){if(h instanceof HTMLLabelElement)h.innerHTML="\x26nbsp;"+g;else{var k=l.labelAttrs||{};k.innerHTML="\x26nbsp;"+g;k=c.create("label",k);h&&c.place(k,h);h=k}l=f.mixin({},l);delete l.label;delete l.labelAttrs}this.checkboxNode=c.create("div",l,h,h instanceof HTMLLabelElement?"first":e);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);h instanceof HTMLLabelElement?(d(h,n,f.hitch(this,this._onClick)),a.add(h,"esriTriStateCheckBoxLabel")):d(this.checkboxNode,
n,f.hitch(this,this._onClick));this.domNode=g?h:this.checkboxNode},postscript:function(){},_onClick:function(a){this.disabled||(this.autoToggle&&this.toggle(),a.checked=this.checked,this.onClick(g.fix(a)))},onClick:function(a){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(a){a!==this.checked&&(this.checked="mixed"===a?a:this._lastChecked=!!a,this._updateClass())},_disabledSetter:function(a){this.disabled=!!a;this._updateClass()},_updateClass:function(){var b=
this._composeClass();b!==this._currentClass&&(a.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var a="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?a+"Disabled":a}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare","dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(k,g,f,e,d){return k(g,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(c,
a,b){a=a||{};var h=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=e.create("div",{"class":(h?h+" ":"")+"esriGEToggleButton"},c,b);this._updateClass();f(this.domNode,"click",function(a){this.disabled||(a.checked=this.toggle(),this.onClick(a))}.bind(this))},postscript:function(){},_checkedSetter:function(c){this.checked=!!c;this._updateClass()},_modeSetter:function(c){this.mode=c;this._updateClass()},_disabledSetter:function(c){this.disabled=c;this._updateClass()},_updateClass:function(){d.remove(this.domNode,
"checked unchecked switch toggle");d.add(this.domNode,"toggle"===this.mode?"toggle":"switch");d.add(this.domNode,this.checked?"checked":"unchecked");d[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(c){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h){h=h.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return k([f,e],{templateString:b,nls:h,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var b=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new g(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){b._onChange()};this.splitPanelsCheckbox=new g(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){b._update();b._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,h.splitPanelsTooltip);var c=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||h.zoomPanelsTooltip;d[c?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,c);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var a=this;this._zoomEditor=new c({numericOnly:!0,onApply:function(b){a._setZoom(b)},onCancel:function(){a._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){a._zoomEditor.range={min:10,max:500};a._zoomEditor.editNodeLabel(a.zoomLabel,a._zoom)});this.zoomOutButton.addEventListener("click",function(){a._setZoom(Math.max(10,a._zoom-10))});this.zoomInButton.addEventListener("click",function(){a._setZoom(Math.min(500,a._zoom+10))});this.resetButton.addEventListener("click",function(){a._setZoom(100)})},_setZoom:function(a,b){a=Math.round(a);this._zoom!==a&&(this._zoom=a,this._updateZoomLabel(),this._update(),!b&&this._onChange())},_updateZoomLabel:function(){this.zoomLabel.innerHTML=
this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var a=this;this._zoomSplitEditor=new c({numericOnly:!0,onApply:function(b){a._setZoomSplit(b)},onCancel:function(){a._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){a._zoomSplitEditor.range={min:10,max:500};a._zoomSplitEditor.editNodeLabel(a.zoomSplitLabel,a._zoomSplit)});this.zoomOutSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.max(10,a._zoomSplit-10))});
this.zoomInSplitButton.addEventListener("click",function(){a._setZoomSplit(Math.min(500,a._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){a._setZoomSplit(100)})},_setZoomSplit:function(a,b){a=Math.round(a);this._zoomSplit!==a&&(this._zoomSplit=a,this._updateZoomSplitLabel(),this._update(),!b&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=100===this._zoom?"hidden":
"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";d.hide([this.zoomBlock,this.zoomSplitBlock]);d.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(a){this.showBackgroundImageCheckbox.set("checked",!a.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",a.splitPanels);this._setZoom(100*(a.scale||1),!0);this._setZoomSplit(100*(a.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(k,g,f,e,d,c,a,b,h){return k(null,{_textMemo:null,
_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(a){g.mixin(this,a)},editNodeLabel:function(h,n){var l=this;this._stopEdit();this._node=h;this._textMemo="string"===typeof n||"number"===typeof n?n:h.innerHTML;n=c.position(h).w;h.innerHTML="";this._textBox=d.create("input",{type:"text"},h);this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();this.keepLabelDimensions&&a.set(this._textBox,
"width",n+"px");this._handlers=[f(document.body,"keyup",function(a){a.keyCode===e.ESCAPE?l._cancelEdit():a.keyCode===e.ENTER&&l._applyEdit()}),f(document.body,"click",function(){b.isMouseOver(h)||l._cancelEdit()})]},_checkCanApply:function(a){if(!this.numericOnly)return!0;a=h.parseNumber(a);return isNaN(a)||this.range&&void 0!==this.range.min&&this.range.min>a||this.range&&void 0!==this.range.max&&this.range.max<a?!1:!0},_applyEdit:function(){var a=this._textBox.value;this._checkCanApply(a)?(this._node.innerHTML=
a,this._stopEdit(),this.onApply(a)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(a){a.remove()});this._textMemo=this._handlers=null;d.destroy(this._textBox);this._node=this._textBox=null},onApply:function(a){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(k){var g={};Math.log10=Math.log10||function(e){return Math.log(e)*
Math.LOG10E};g.populateObject=function(e,d,c){function a(b,h){function d(d){var l=b[d],e=h[d],n=l&&"object"===typeof l;void 0!==l&&(void 0===e?h[d]=l:e&&"object"===typeof e&&n?a(l,e):c&&(n?(e=h[d]={},a(l,e)):h[d]=b[d]))}if(b&&h&&!(Array.isArray(b)&&!Array.isArray(h)||Array.isArray(h)&&!Array.isArray(b)))if(Array.isArray(b))b.forEach(function(a,b){d(b)});else for(var e in b)d(e)}a(d,e);return e};g.filterByPattern=function(e,d){function c(a,h,d){for(var b in a){var l=a[b],e=h[b];if(Array.isArray(l)){var f=
l[0];if(e&&Array.isArray(e)){var g=d[b]=[];e.forEach(function(a){if(a&&"object"===typeof a){var b=Array.isArray(a)?[]:{};c(f,a,b);g.push(b)}})}}else if("object"===typeof l){if(e&&"object"===typeof e){var k=d[b]={};c(l,e,k)}}else void 0!==e&&(d[b]=e)}}var a={};c(d,e,a);return a};g.traverseObject=function(e,d){for(var c in e){var a=e[c];d(a,c,e);a&&"object"===typeof a&&g.traverseObject(a,d)}};g.copyOwnJsonProperties=function(e,d,c){d=d||{};for(var a in e){var b=e[a];e.hasOwnProperty(a)&&"function"!=
typeof b&&(b&&"object"==typeof b&&c&&(b=c(a,b)),void 0!==b&&(d[a]=b))}return d};g.removeUndefinedProperties=function(e){e&&Object.keys(e).forEach(function(d){void 0===e[d]&&delete e[d]});return e};g.getValue=function(e,d){if("string"!==typeof d)return e;d=d.split(".");for(var c=0;c<d.length;c++)e=e&&e[d[c]];return e};g.setValue=function(e,d,c){if("string"===typeof d&&(d=d.split("."),d.length)){for(var a=0;a<d.length-1;a++)e=e&&e[d[a]];e&&(e[d[d.length-1]]=c)}};g.isNumber=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};g.roundNumber=function(e,d){return"number"!==typeof e?e:parseFloat(e.toFixed(void 0!==d?d:0))};g.getBestPrecision=function(e){return 0===e?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(e))))};g.getPlaces=function(e,d){function c(c,h){var d=e.indexOf(c,a);if(0>d)return b;c=e.charAt(d+c.length);return!c||0>h.indexOf(c)?b:d-a}e=+e;if(isNaN(e))return-1;e+="";var a=e.indexOf(".")+1,b=a?e.length-a:0;if(2>=b||!d)return b;d=0;if(!+e.substr(0,a-1))for(;"0"===e.charAt(a);)a++,d++,b--;for(var h=
b-1;2<=h;h--){var l=Math.min(c("000000000000000".substr(0,h),"01234"),c("999999999999999".substr(0,h),"56789"));if(l!==b){b=l;break}}return b+d};g.formatNumber=function(e,d){d="number"===typeof d?{places:d}:d||{};var c=d.places,a={};0<=c?a.places=c:c=-1;e=k.format(e,a);if(d.noSeparator){var a=g.getSeparator(),b;if(a)for(;0<=(b=e.indexOf(a));)e=e.substr(0,b)+e.substr(b+1)}if(d.preserveTrailingZeroes||0>=c||!e)return e;for(d=e.length;0<c&&"0"==e.charAt(d-1);)d--,--c||d--;return e.substr(0,d)};g.formatNumberAsCurrency=
function(e,d,c){return d?d.split(";")[0>e?1:0].replace("0",g.formatNumber(Math.abs(e),c)):g.formatNumber(e,c)};var f;g.getSeparator=function(){void 0===f&&(f=k.format(9999,{places:0}).replace(/9/g,""));return f};g.parseNumber=function(e,d,c,a){if(""===e)return"undefined"!==typeof c?c:NaN;if(null==e||"string"!==typeof e&&isNaN(e))return NaN;e=String(e);if(!e.trim())return void 0!==c?c:NaN;c=k.parse(e,{strict:a});isNaN(c)&&e.trim().length&&(c=a?k.parse(e,{strict:a,locale:"en-US"}):Number(e));return isNaN(c)||
void 0===d||0>d?c:k.round(c,d)};g.parsePercentOrCurrency=function(e,d,c,a,b){"string"===typeof e&&(e=e.replace("%",""),d&&(d=d.split(";")[0].replace("0",""),e=e.replace(d,"")));return g.parseNumber(e,c,a,b)};g.compareEqual=function(e,d,c){return void 0===c?e===d:Number(Number(e).toFixed(c))===Number(Number(d).toFixed(c))};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],
function(k,g,f){var e={geometryToLatLong:function(d){var c=d.spatialReference.wkid;return c===f.WGS_84_WKID?{STORE_LONG:d.x,STORE_LAT:d.y}:f.isWebMercator(c)?(d=g.xyToLngLat(d.x,d.y),{STORE_LONG:d[0],STORE_LAT:d[1]}):null},populateCombinedAreasInfo:function(d,c){var a={},b={};c.forEach(function(c){c.latitude&&(a[c.latitude]=1);c.longitude&&(b[c.longitude]=1)});d.name=d.name||c.map(function(a){return a.name}).join(", ");d.shortName=d.shortName||c.map(function(a){return a.shortName||a.name}).join(", ");
d.description=d.description||c.map(function(a){return a.description||a.name}).join(", ");d.address=d.address||c.map(function(a){return a.address||a.name}).join(", ");d.latitude=d.latitude||Object.keys(a).join(", ");d.longitude=d.longitude||Object.keys(b).join(", ");return d},groupAreas:function(d){function c(a){var b=a.locationName||a.name;return{isSingleAreaGroup:!0,label:b,hideGroupLabel:b===(a.shortName||a.name),areas:[a]}}var a=d.combinedAreasInfo&&d.combinedAreasInfo.groups||[],b=[],h=[],l={};
d.analysisAreas.forEach(function(e){if(!(d.filter&&!d.filter(e)||e.hidden))if(e.isGrouped){if(!l[e.groupIndex]){var n=a[e.groupIndex],n=l[e.groupIndex]={isRealGroup:!0,label:n.locationName||n.name,areas:[]};h.push(n);b.push(n)}l[e.groupIndex].areas.push(e)}else b.push(c(e))});var e;1===b.length&&b[0].isRealGroup&&(b=b[0].areas.map(c),h.length=0,e=!0);return{groupInfos:b,isOnlyAreasInOnlyGroup:e}},parseSites:function(d){if(d.sites){d.analysisAreas=[];d.sites.forEach(function(a){a.areas.forEach(function(a){d.analysisAreas.push(a)})});
d.combinedAreasInfo={groups:d.sites.map(function(a){var b=k.mixin({},a);delete b.areas;delete b.attributes;delete b.notes;delete b.images;b.indexes=a.areas.map(function(a){return d.analysisAreas.indexOf(a)});return b})};e.populateCombinedAreasInfo(d.combinedAreasInfo,d.sites);if(!d.attachmentsProvider||!d.attachmentsProvider.getAttributesForAreaAt){d.attachmentsProvider={};d.attachmentsProvider.supportsMultipleAreas=1<d.sites.length;var c=d.attachmentsProvider.areaAttachments=[];d.sites.forEach(function(a){a.areas.forEach(function(b){c.push({attributes:a.attributes,
notes:a.notes,images:a.images})})})}delete d.sites}}};return e})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(k,g){var f={},e=[4326,102100,102113,3857];f.WGS_84_WKID=4326;f.WEB_MERCATOR_WKID=102100;f.getSupportedWKIDs=function(){return e.slice()};f.testSpatialReferenceWKID=function(d){d=e.indexOf(Number(d&&"object"===typeof d?d.wkid:d));return 0<=d?e[0===d?0:1]:0};f.isWebMercator=function(d){return 102100===
f.testSpatialReferenceWKID(d)};f.isWGS84=function(d){return 4326===f.testSpatialReferenceWKID(d)};f.getGeometryConverter=function(d,c){d=f.testSpatialReferenceWKID(d);c=f.testSpatialReferenceWKID(c);return d&&c&&d!==c?4326===d?k.geographicToWebMercator:k.webMercatorToGeographic:null};f.toWGS84=function(d){return f.toSpatialReference(d,4326)};f.toWebMercator=function(d){return f.toSpatialReference(d,102100)};f.toSpatialReference=function(d,c){d&&!d.toJson&&(d=g.fromJson(d));c=f.getGeometryConverter(d&&
d.spatialReference,c);return null!=c?c(d):d};return f})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,d,c,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var b=k(f,{createPresentation:function(b,d,e,m){var h=this,l=this.inherited(arguments);if(b.isCustomZoom){l.innerHTML=
"";var n=g.create("div",{"class":"esriGELink",innerHTML:a.customZoom},l),f=new c({numericOnly:!0,onApply:function(b){h.onCustomZoomApplied(b);n.innerHTML=a.customZoom},onCancel:function(){n.innerHTML=a.customZoom}});n.addEventListener("click",function(){f.range={min:10,max:1E3};f.editNodeLabel(n,"")})}else this.selectPresentation(l,d);return l},onCustomZoomApplied:function(a){}});return k(e,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",buildRendering:function(){var a=
this;this.inherited(arguments);this.itemRenderer=new b({onCustomZoomApplied:function(b){a.set("value",b);a.onChange({value:b});a.closePopup()}})},postCreate:function(){this.inherited(arguments);var a=d.getOptions().slice();a.push({isCustomZoom:!0,enabled:!1});this.set("options",a);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],function(k){var g={};k=k.geoenrichment.dijit.ReportPlayer.PlayerToolbar;g.FIT_PAGE="fitPage";
g.FIT_PAGE_WIDTH="fitPageWidth";g.FIT_PAGE_HEIGHT="fitPageHeight";g.getOptions=function(){var f=[{value:g.FIT_PAGE,label:k.fitPage},{value:g.FIT_PAGE_WIDTH,label:k.fitPageWidth},{value:g.FIT_PAGE_HEIGHT,label:k.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(e){f.push({isCustom:!0,
value:-1,label:""});f.push(e)});f.push({isCustom:!0,value:-1,label:""});return f};g.getClosestZoomAndUpdateOptions=function(f,e){e.forEach(function(a){a.isCustom&&(a.value=-1,a.hidden=!0)});var d=[];e.forEach(function(a){a.isCustom||"number"!==typeof a.value||d.push({option:a,value:a.value,score:f<a.value?f/a.value:a.value/f})});d.sort(function(a,c){return c.score-a.score});var c=d[0];if(1===c.score)return c.value;var a=e.indexOf(c.option);e=e[a+(f>c.value?-1:1)];e.value=f;e.label=Math.round(f)+"%";
e.hidden=!1;return e.value};return g})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e){return k(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(d){g.mixin(this,
d)},arrangeControls:function(){e[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);e[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));
this.syncRightSideVisibility()},_processStretchSpecialCases:function(d){function c(b){return e.isHidden(b)?0:b.clientWidth+a(b)}function a(a){return e.isHidden(a)?0:f.get(a,"marginLeft")+f.get(a,"marginRight")}this.showAreaTitle&&(d=d.clientWidth,d-=c(this.infographicsSelectDiv),d-=c(this.rightSideControlsBlock),d-=c(this.areasSelectDiv),d-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=d+"px",e.isHidden(this.infographicsSelectDiv)||e.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=
Math.min(d-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-c(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(e.isNodeInLayout)},syncRightSideVisibility:function(){e.show(this.rightSideControlsBlock);var d=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(e.isNodeInLayout);
e[d?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(k,g){return{invoke:function(f,e,d,c,a){f.__invokeTimeoutIDs||(f.__invokeTimeoutIDs={});var b=f.__invokeTimeoutIDs[e];if(b){if(null==d||!1===c)return b.dfd.promise;clearTimeout(b.handle)}b||(b=f.__invokeTimeoutIDs[e]={dfd:new k});b.handle=setTimeout(function(){delete f.__invokeTimeoutIDs[e];g(a?f[e].apply(f,
a):f[e](),function(a){b.dfd.resolve(a)},function(a){b.dfd.reject(a)})},d||0);return b.dfd.promise},hasPendingInvoke:function(f,e){return!(!f.__invokeTimeoutIDs||!f.__invokeTimeoutIDs[e])},cancelInvoke:function(f,e){f.__invokeTimeoutIDs&&f.__invokeTimeoutIDs[e]&&(clearTimeout(f.__invokeTimeoutIDs[e].handle),delete f.__invokeTimeoutIDs[e])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){return k(null,{isReportPlayerViewModel:!0,isGraphicStyle:!1,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new e;return this.layoutBuilder.initCoreComponents()},initialize:function(a,b){this.preInitialize();return this.layoutBuilder[a?"initClassicComponents":"initGraphicComponents"](b)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&
!this._animationSuspended},setAnimationAllowed:function(a){this._animationAllowed=a},setAnimationSuspended:function(a){this._animationSuspended=a},_theme:null,getCurrentTheme:function(a){return a||this._theme},setTheme:function(a){this._theme=a||d.getReportThemeById(c.GRAPHIC)},getTableDefaultStyles:function(a,b){a=this.getCurrentTheme(a).table.overrideStyles;return b?a[b]:a},getChartDefaultStyles:function(a){return this.getCurrentTheme(a).chart},getDocumentDefaultStyles:function(a){return this.getCurrentTheme(a).document},
getInfographicDefaultStyles:function(a){return this.getCurrentTheme(a).infographic},getStaticInfographicDefaultStyles:function(a){return(a=this.getInfographicDefaultStyles(a))&&a.staticInfographic},isLightDocumentTheme:function(a){return n.isLightColor(this.getCurrentTheme(a).document.backgroundColor)},setDynamicReportInfo:function(a){this.dynamicReportInfo=a;this.isGraphicStyle=a.reportObject.isGraphicReport},getDynamicImageFunc:function(a,b,c){},_locatorPointsControllers:null,getLocatorPointsController:function(b,
c){var h=b.calculatorName+"_"+c;this._locatorPointsControllers=this._locatorPointsControllers||{};var d=this._locatorPointsControllers[h];d||(d=this._locatorPointsControllers[h]=new a(b,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,c),g.after(d,"destroy",function(){delete this._locatorPointsControllers[h]}.bind(this)));return d},_stdPolygonsControllers:null,getStdPolygonsController:function(a,c){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var h=a+"_"+(c||
0),d=this._stdPolygonsControllers[h];d||(d=this._stdPolygonsControllers[h]=new b(a,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,c),g.after(d,"destroy",function(){delete this._stdPolygonsControllers[h]}.bind(this)));return d},loadAllStdFeatures:function(){var a=[],b;for(b in this._stdPolygonsControllers)a.push(this._stdPolygonsControllers[b].loadAllFeatures());return f(a)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new h,g.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(a,b,c){this._legendControllers=this._legendControllers||{};var h=this._legendControllers[b]=this._legendControllers[b]||{};h[c]=a;var d=a.addCallback(function(b,c){if(c)for(var d in h)c=h[d],c!==a&&c.setLegendVisible(b)},"viewModel");return{remove:function(){delete h[c];
d.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(a){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=a;g.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(a){return this._benchmarkDisabled?!1:"number"===typeof a&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==a},setBenchmarkDisabled:function(a){this._benchmarkDisabled=a},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(a){a&&Object.keys(a).forEach(function(b){(b=a[b])&&b.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(a){},pepareExportToExcelParameters:function(a){},getUnits:function(){return"px"},provideUnits:function(a){return l.provideUnits(a,this.getUnits())},roundForUnits:function(a){return l.round(a,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(k,g,f,e){return k(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var d=this._getModulePaths();return this._initPaths(g.mixin({},d.core,d.graphicCore))},initClassicComponents:function(){var d=this._getModulePaths();return this._initPaths(g.mixin({},d.core,d.classic))},initGraphicComponents:function(d){var c=this._getModulePaths();return this._initPaths(g.mixin({},c.core,c.graphicCore,c["graphic_"+d]||c.graphic_fullPages))},_initPaths:function(d){var c=this;this._moduleMap=this._moduleMap||{};var a=[],b;for(b in d)a.push({id:b,path:d[b]});
var h=new f;require(a.map(function(a){return a.path}),function(){for(var b=0;b<arguments.length;b++)c._moduleMap[a[b].id]=arguments[b];h.resolve()});return h.promise},createElement:function(d,c,a,b){switch(d){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[d](c,a?e.create("div",null,a,b):void 0);case "section":return this._moduleMap.section.createSection(c,
a,b);case "emptySection":return this._moduleMap.section.createEmptySection(c,a,b);case "image":return this._moduleMap.image.createImageContainer(c);case "shape":return this._moduleMap.shape.createShapeContainer(c);case "chart":return this._moduleMap.chart.createChartPage(c);case "infographic":return this._moduleMap.infographic.createInfographicPage(c);case "map":return this._moduleMap.map.createMapContainer(c)}return!1},getClass:function(d){return this._moduleMap[d]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a){function b(a){a=a||{};a=a.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:a,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:a,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:a,
fontSize:24},variableLabelStyleContrast:{fontFamily:a,fontSize:24},variableDescriptionStyle:{fontFamily:a,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function h(){return{style:g.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function l(a){a=a||{};var c=a.defaultFontFamilty||"Avenir Next",d=a.defaultFontSize||13;return{document:{fontSize:d,fontFamily:c,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:h()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:f.SOLID,titleStyle:{fontFamily:c,fontSize:16},xAxis:{gridLinesStyle:f.SOLID,axisStyle:{fontFamily:c,fontSize:9},titleStyle:{fontFamily:c,fontSize:d}},yAxis:{gridLinesStyle:f.SOLID,baseLineStyle:f.SOLID,axisStyle:{fontFamily:c,fontSize:9},titleStyle:{fontFamily:c,fontSize:d}},dataLabelsStyle:{fontFamily:c,
fontSize:10},legendStyle:{fontFamily:c,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:c,fontSize:10},minVariableLabelStyle:{fontFamily:c,fontSize:16},maxVariableLabelStyle:{fontFamily:c,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:c}},waffle:{dataValueStyle:{fontFamily:c,fontSize:30},dataLabelStyle:{fontFamily:c,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:b(a)}}}var n={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:b(),standardRamps:[{id:e.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:e.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},m={};n.standardRamps.forEach(function(a){var b=k.mixin({},a.additional);b.id=a.id;var h=l({defaultFontFamilty:a.id===e.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:a.id===
e.CLASSIC?10:13});d.applyThemeColorsToTheme({theme:h,colors:a.colors});c.populateObject(h,b,!0);n[a.id]=h;m[a.id]=h});n.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");n.getReportThemeById=function(a){return m[a]};n.isStandardTheme=function(a){return!!m[a]};n.getStandardThemes=function(){return Object.keys(m).map(function(a){return m[a]})};n.getDefaultStaticInfographicSettings=function(){return k.clone(n.defaultStaticInfographic)};n.getDefaultBorderSettings=
function(){return h()};n.getDefaultTheme=function(a){return l(a)};return n})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var k={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.ALL}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var k={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toGFXValue:function(g,f){switch(g){case "Dashed":return 1>f?"LongDash":"Dash";case "Dotted":return 1>f?"Dash":"Dot";default:return"Solid"}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(k,g,f){function e(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-7:7}).toHex()}var d={getPanelTitleColor:function(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-50:50}).toHex()},getChartElementBackgroundColor:function(a){var b=g.isLightColor(a);return g.transform(a,{dv:b?-13:13}).toHex()}},c={getThemeColors:function(a){return[a.document.backgroundColor,a.icon.backgroundColor,a.highlightedIcon.backgroundColor]},
generateChartColors:function(a,c,d){d=d||{};var b=d.gradientFactor||1,h=[c,g.transform(c,{dv:-20*b}).toHex(),g.transform(c,{dv:-40*b}).toHex(),g.transform(c,{dv:-50*b}).toHex(),g.transform(c,{dv:-55*b}).toHex(),g.transform(c,{dv:-60*b}).toHex(),g.transform(c,{dv:-65*b}).toHex(),g.transform(c,{dv:-70*b}).toHex()];if(d.numLighterColors)for(var l=0;l<d.numLighterColors;l++)h.unshift(g.transform(c,{dv:20*b*(l+1),ds:-20*(l+1)}).toHex());a&&a!==c&&h.unshift(a);var e={};return h.filter(function(a){return e[a]?
!1:e[a]=!0})},applyThemeColorsToTheme:function(a){var b=a.theme,l=a.colors,n=a.preserveForegroundColor,m=a.chartColors,p=a.colors3series;a=a.preprocessGeneratedThemeFunc;var k=l[0],q=l[1],l=l[2],r=n&&b.chart&&b.chart.dataLabelsStyle&&b.chart.dataLabelsStyle.color||g.getContrastColor(k).toHex(),n=n&&b.document.color||("#FFFFFF"===k.toUpperCase()?"#4C4C4C":r),u=g.isLightColor(k),y=d.getChartElementBackgroundColor(k),v=d.getPanelTitleColor(k),w=g.transform(k,{dv:u?-33:33}).toHex(),A={overrideStyles:{Default:{color:n,
backgroundColor:"transparent"},TableHeader:{color:g.getContrastColor(q,void 0,void 0,200).toHex(),backgroundColor:q},AlternatingRow:{color:n,backgroundColor:g.transform(k,{dv:u?-7:7}).toHex()},ReportTitle:{color:l,backgroundColor:"transparent"},GreyText:{color:w,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},C={lineColor:r,gridLinesColor:r,gridStripesColor:e(k),gridStripesColorAlt:"transparent",axisStyle:{color:r},titleStyle:{color:r}},z={lineColor:r,gridLinesColor:r,
gridStripesColor:e(k),gridStripesColorAlt:"transparent",baseLineColor:r,axisStyle:{color:r},titleStyle:{color:r}},D=g.isLightColor(k),k={document:{color:n,backgroundColor:k,border:{color:w}},icon:{backgroundColor:q},highlightedIcon:{backgroundColor:l},table:A,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:v},dataLabelsAltColor:r,dataLabelsStyle:{color:r},xAxis:C,yAxis:z,legendStyle:{color:r,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:r}},comparisonInfo:{lineColor:D?
"#666666":"#BBBBBB"},icon:{backgroundColor:q},ring:{ringBackground:{backgroundColor:y}},gauge:{dataLabelStyle:{color:q},othersColor:y,arrowIndicator:{lineColor:v,backgroundColor:v}},waffle:{dataValueStyle:{color:q},dataLabelStyle:{color:q},othersColor:y},columnBarBackground:{backgroundColor:y}},infographic:{backgroundColor:"transparent",agePyramid:{theme:u?"light":"common",male:{backgroundColor:q},female:{backgroundColor:l}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:q},
highlightedIcon:{backgroundColor:l},iconBarBackground:{},titleLine:{color:g.transform(k,{dv:u?-40:40}).toHex()},titleStyle:{color:v},variableLabelStyle:{color:q},variableLabelStyleHighlighted:{color:l},variableLabelStyleContrast:{color:k},variableDescriptionStyle:{color:g.transform(k,{dv:u?-50:50}).toHex()}}}};a&&a(k);f.populateObject(b,k,!0);b.chart.colors=m&&m.length?m:c.generateChartColors(q,l);b.chart.colors3series=p},applyTextStyleToTheme:function(a,d){function b(a,b){var c=k.mixin({},d);a&&
delete c.color;b||delete c.fontSize;return c}d=c.filterTextStyles(d);var h={document:b(!1,!0),table:{overrideStyles:{Default:b(!1,!0),TableHeader:b(!1,!0),AlternatingRow:b(!1,!0),ReportTitle:b(!1,!0),GreyText:b(!1,!0),BlueText:b(!1,!0)}},chart:{titleStyle:b(),dataLabelsStyle:b(),xAxis:{axisStyle:b(),titleStyle:b()},yAxis:{axisStyle:b(),titleStyle:b()},legendStyle:b(),minMaxLegend:{titleStyle:b(),minVariableLabelStyle:b(!0),maxVariableLabelStyle:b(!0)},gauge:{dataLabelStyle:b()},waffle:{dataValueStyle:b(),
dataLabelStyle:b()}},infographic:{staticInfographic:{titleStyle:b(),variableLabelStyle:b(),variableLabelStyleHighlighted:b(),variableLabelStyleContrast:b(),variableDescriptionStyle:b()}}};f.populateObject(a,h,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};c.filterTextStyles=function(b){var c={},d;for(d in a){var e=b[d];void 0!==e&&(c[d]=e)}return c};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(k,g,f,e,d,c){return k(f,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,b,c,d){this._info=a;this._fieldData=b;this._isMultiFeature=c;this._currentFeatureIndex=d;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,b){this._layerNames[a]=b},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=e.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=e.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=e.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);
return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var b=this,c;a.set("highlightRowsOnHover",!0);g(a.domNode,"mouseover,mousemove",function(){var d=a.getOverFieldCell();d&&d!==c&&(c=d,b._highlightGraphicForFieldCell(c))});g(a.domNode,
"mouseout",function(){b._highlightGraphicForFieldCell(null);c=null})},_highlightRowForGraphic:function(a,b){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);b&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(b),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
b,c,d){this._unSetInfo(a);b={map:c,graphicsLayer:b,getPointIndexForGraphicFunc:d.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:d.getGraphicForPointAtFunc,setGraphicHighlightedFunc:d.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=b;this._addLayerListeners(b)},_addLayerListeners:function(a){var b=this,h=a.map,l=a.graphicsLayer;a.layerMouseOverHandle=d.onLayerMouseOver(l,h,function(d){d.graphic&&
d.graphic._graphicsLayer===l&&a.overGraphic!==d.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,b._removeHighlight(a),a.overGraphic=d.graphic,b._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),c.isMobileDevice())?h.infoWindow&&(h.infoWindow.setFeatures([a.overGraphic]),h.infoWindow.show(d.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=g.once(l,"mouse-out",function(c){b._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var b in this._graphicLayerInfos){var c=
this._graphicLayerInfos[b];this._removeHighlight(c);if(a){var d=this._getPointIndexForCellFunc(a);if(d=c.getGraphicForPointAtFunc(d))c.setGraphicHighlightedFunc(d,!0),c.highlightedGraphic=d}}},_removeHighlight:function(a,b){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!b&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
b){for(var c in this._graphicLayerInfos){var d=this._graphicLayerInfos[c].getGraphicForPointAtFunc(a);if(d)d[b?"show":"hide"]()}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(k,g,f){var e={getAreaDataValue:function(d){function c(a){!1!==u&&(y=a[u]);void 0===y&&(y=a[b])}function a(){if(p)c(p);else{var a=l[e];a&&c(a.data)}}var b=d.fieldName,h=d.fieldData,l=d.areaDataObject,e=d.calculatorName,m=d.featureIndex,p=d.featureAttributes,k=d.ignoreMetadata,
q=d.isMultiFeature;if(!f.showAreaDataUtilUndefinedData&&b){var r=b.indexOf("."),u=!1;-1!==r&&(u=b.substr(r+1));e||-1===r||(e=b.substr(0,r));m=void 0===m?0:Number(m)||0;if((l=d.areaDataObject||h.areaData[m])||p){var y;q&&e===g.AREA_ATTRIBUTES_CALCULATOR_NAME&&!k&&h&&c(h.metadata);void 0===y&&a();if(e)return y;void 0===y&&!k&&h&&c(h.metadata);if(void 0===y&&!p)for(var v in l)if(c(l[v].data),void 0!==y)break;return y}}},getAreaDataObjectCalculator:function(d,c,a){if(!d)return null;var b=d[c];!b&&a&&
(b=d[c]=e.createCalculator());return b},createCalculator:function(d,c){return{data:d||{},comparisonLevels:c||[]}},combineAreaDataObjectCalculators:function(d,c,a){var b=[],h=[];d.forEach(function(a){if(a=e.getAreaDataObjectCalculator(a,c))b.push(a.data),h=h.concat(a.comparisonLevels)});a&&a.removeDuplicates&&(h=e.removeDuplicacatedCalcData(h));return{thisAreas:b,comparisonLevels:h}},removeDuplicacatedCalcData:function(d){if(!d.length)return d;var c=[],a={},b=Object.keys(d[0]);d.forEach(function(d){var h=
function(a){var c="";b.forEach(function(b){c+=a[b]+";"});return c}(d);a[h]||(a[h]=!0,c.push(d))});return c},setAreaDataValue:function(d,c,a,b,h){h=void 0===h?0:Number(h)||0;e.setAreaDataObjectValue(d,c,a[h],b)},setAreaDataObjectValue:function(d,c,a,b){a&&b&&null!==c&&void 0!==c&&(e.getAreaDataObjectCalculator(a,b,!0).data[d]=c)},mergeAreaData:function(d,c){c.forEach(function(a,b){(b=d[b])&&e.mergeAreaDataObjects(b,a)})},mergeAreaDataObjects:function(d,c){for(var a in d){var b=d[a],h=c[a];h?b.comparisonLevels.length!==
h.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(k.mixin(h.data,b.data),b.comparisonLevels.forEach(function(a,b){k.mixin(h.comparisonLevels[b],a)})):c[a]=b}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(c)}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(k,
g){var f={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(e,d){if(!e)return"";
var c="";e.isSiteAttribute?c=e.attribute.name:e.isChartAttribute?c=e.id:e.isWebMap?c=e.webMapFieldName||e.fieldName:(e=(e.fullName||e).replace(/_|\.|\s/g,""),d=d||"n",e+="n"===d?"":"_"+d,f.FIRST_SYMBOL_IS_NUMBER_RE.test(e)&&(e="_"+e),c=e.toUpperCase());return f._validateName(c)},createFieldNameFromScript:function(e){e=e.name;f.SCRIPT_PREFIX_RE.test(e)&&(e=e.replace(f.SCRIPT_PREFIX_RE,""));return f._validateName(f.SCRIPT_PREFIX+e.replace(/\.|-/g,""))},_validateName:function(e){return f._checkXMLValidName(f._maskUnicodeInName(e))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(e){return f._XML_MASK_NAME_RE.test(e)?e.replace(f._XML_MASK_NAME_RE,"$1_$2"):e},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(e){return k.maskWithUnicodeXML(e).replace(f._XML_UNICODE_RE,"")},renderScriptName:function(e){return e.replace(f.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(e,d){e&&(e.templateName=d?d+"."+e.name:e.isWebMap?f.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+e.name:e.isSiteAttribute?f.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+e.name:f.DATA_COLLECTIONS_CALCULATOR_NAME+"."+e.name)},getCalculatorName:function(e){return e&&e.templateName&&e.templateName.substr(0,e.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(e){return f.getCalculatorName(e)===f.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(e,d){e&&(e.hasVariable||e.script)&&(e.templateName=d+e.templateName.substr(e.templateName.indexOf(".")))},refreshNameAndTemplateName:function(e){e.statefulName&&e.fullName&&(e.name=f.createFieldNameFromSource(e,
e.statefulName.charAt(0)),e.templateName=e.templateName.substr(0,e.templateName.lastIndexOf(".")+1)+e.name)},getFieldInfoAlias:function(e){return e?e.script?e.script.alias:e.hasVariable||e.isMissing?e.alias:g.getFieldLabel(e.name):null}};return f})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function k(g,f){return"string"!==typeof g?g:String(g).replace(/[^\x20-\x7f]/g,function(e){e=e.charCodeAt(0).toString(16).toUpperCase();return f(e)})}return{maskWithUnicode:function(g){return k(g,
function(f){return"\\u000".substr(0,6-f.length)+f})},maskWithUnicodeXML:function(g){return k(g,function(f){return"\x26#x000".substr(0,7-f.length)+f+";"})},removeUnicode:function(g,f){return k(g,function(e){return f||""})},removeXMLMasks:function(g,f){return g.replace(/&#x.*?;/g,f||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string","dojo/i18n!esri/nls/jsapi"],function(k,g){var f=g.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;
g=g.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;f={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"SummaryCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",
SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",
FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",
DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},
_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:g.fieldPreviewTitle,Title_graphic:g.fieldPreviewTitleGraphic,Subtitle:g.fieldPreviewSubtitle,Date:g.fieldPreviewDate,Page:g.fieldPreviewPage,Count:g.fieldPreviewLocationsCount,Copyright:g.fieldPreviewCopyright,TrialUrlText:g.fieldPreviewTrialUrlText,PhoneNumber:g.fieldPreviewPhoneNumber,ProductUrl:g.fieldPreviewProductUrl,ProductLabel:g.fieldPreviewProductLabel,Source:g.fieldPreviewSource,
SITE_NAME:g.fieldPreviewSiteName,SITE_NAME_multi:g.fieldPreviewSiteNameMulti,STORE_LAT:g.fieldPreviewLat,STORE_LONG:g.fieldPreviewLong,AREA_DESC2:g.fieldPreviewAreaDesc2,STORE_ADDR:g.fieldPreviewStoreAddr,AREA_DESC:g.fieldPreviewAreaDesc,CHART_AREA_NAME:g.fieldPreview_chartArea,CHART_SERIES_NAME:g.fieldPreview_seriesName,CHART_POINT_NAME:g.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:f.chartAreaName,CHART_SERIES_NAME:f.chartSeriesName,CHART_POINT_NAME:f.chartPointName,CHART_POINT_VALUE:f.chartPointValue},
DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"SummaryCount",GROUPCOUNT_FIELD_ALIAS:"SummaryCount",SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",init:function(){for(var e in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[e].toUpperCase()]=e;for(e in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[e].toUpperCase()]=
e;for(e in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[e].toUpperCase()]=e},templateToUIHeader:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP[e]||this._ADDITIONAL_HEADER_FIELDS_MAP[e]},qualifyTemplateHeaderName:function(e){return e&&0!==e.indexOf("headers.")?"headers."+e:e},trimTemplateHeaderName:function(e){if(!e)return e;0===e.indexOf("headers.")&&(e=e.substr(e.indexOf(".")+1));return e},templateToUIReportVar:function(e){e=
e&&e.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[e]},uiToTemplate:function(e){e=e&&e.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[e]||this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[e]||this._REPORT_VAR_FIELDS_MAP_BACK[e]},getPreview:function(e,d,c){e=this.trimTemplateHeaderName(e);if(!e)return null;d&&"Title"===e&&(e+="_graphic");c&&"SITE_NAME"===e&&(e+="_multi");return"SiteNotes"===e?g.fieldPreviewSiteNotes:0===e.indexOf("SiteNote")?k.substitute(g.fieldPreviewSiteNote,{index:e.replace("SiteNote",
"")||1}):this._PREVIEW[e]},hasField:function(e){return!!(this.uiToTemplate(e)||this.templateToUIHeader(e)||this.templateToUIReportVar(e))},isAdditionalHeadersField:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();return this._ADDITIONAL_HEADER_FIELDS_MAP[e]},isChartAttribute:function(e){return this.isAdditionalHeadersField(e)&&-1!==e.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(e){return"SiteNote"+(!e||1>=Number(e)?"":e)},getFieldLabel:function(e){e=e&&this.trimTemplateHeaderName(e).toUpperCase();
return this._LABELS[e]},getReportVarSelfTagsMap:function(){return{Page:"currPage",Title:"reportName",Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var e=this.getReportVarSelfTagsMap(),d={},c;for(c in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[c];e[a]||(d[a]=a)}return d}};f.init();return f})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{logData:!1,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,
useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},
createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff",
"esri/dijit/geoenrichment/utils/DeviceUtil"],function(k,g,f){return{onLayerMouseOver:function(e,d,c){var a=f.isMobileDevice();e=a?e:g("touch")?d:e;a=a?"mouse-over":g("touch")?"mouse-down, mouse-move":"mouse-move";return k(e,a,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../comparison/ComparisonUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),
function(k,g,f,e,d,c,a,b){return k(d,{currentFeatureIndex:null,_calculatorName:null,_fieldData:null,_isMultiFeature:null,_hasRegisteredLayers:!1,_hasRegisteredInfographics:!1,constructor:function(a,b,c,d){this._calculatorName=a;this._fieldData=b;this._isMultiFeature=c;this.currentFeatureIndex=d;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},getCalculatorName:function(){return this._calculatorName},_rendererJsons:null,
_labelRendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},getLabelRendererJson:function(a){return this._labelRendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},setLabelRendererJson:function(a,b){this._labelRendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a,c){var d=b.getGeographiesModel().getLevels(),h=-1;d.some(function(a,b){if(a.id===c)return h=b,!0});return this._layerIndexes[a]+h/d.length},setLayerIndex:function(a,b){this._layerIndexes[a]=
b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(a){this._attributeFields=a},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(a){var b=
this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];this._featuresChangedHandlers.push(a);return{remove:function(){var c=b._featuresChangedHandlers;if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}}}},setShownFeatureAttributes:function(a){this._shownFeatureAttributes=a||[];this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(a){a()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||
[]},setAllFeatureAttributes:function(a){this._allFeatureAttributes=a},setLoadAllFeaturesListener:function(a){var b=this;this._loadAllFeaturesHandlers=this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(a);return{remove:function(){var c=b._loadAllFeaturesHandlers;if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&e(this._loadAllFeaturesHandlers.map(function(a){return a()}))},buildGeometryFieldName:function(a){return"__stdGeometry_"+
a},saveGeometryInCalculatorData:function(b,c){a.copyValueToCalculatorData(b,{fieldName:c,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},provideGeometryFromCalculatorData:function(b,c){a.copyValueFromCalculatorData(b,{fieldName:c,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},_highlightInfographicForAttributesFunc:null,
_registerInfographicDfd:null,registerInfographic:function(a){this._highlightInfographicForAttributesFunc=a.highlightInfographicForAttributes;this._registerInfographicDfd=new g;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||(this._hasRegisteredInfographics=!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(a,b,c,d){this._unSetInfo(a);this._pendingLayerInfos[a]=
{map:c,graphicsLayer:b,getGraphicForAttributesFunc:d.getGraphicForAttributesFunc,setGraphicHighlightedFunc:d.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var a in this._pendingLayerInfos){var b=this._pendingLayerInfos[a];this._graphicLayerInfos[a]=
b;this._addLayerListeners(b)}this._pendingLayerInfos={}},_addLayerListeners:function(a){var b=this,d=a.graphicsLayer,h;a.layerMouseOverHandle=c.onLayerMouseOver(d,a.map,function(c){c.graphic&&c.graphic._graphicsLayer===d&&h!==c.graphic&&(a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,h&&a.setGraphicHighlightedFunc(h,!1),h=c.graphic,b._highlightInfographicForAttributesFunc(h.attributes),a.setGraphicHighlightedFunc(h,!0),a.layerMouseOutHandle=f.once(d,"mouse-out",function(c){b._highlightInfographicForAttributesFunc(null);
h&&a.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(a){for(var b in this._graphicLayerInfos){var c=this._graphicLayerInfos[b];c.highlightedGraphic&&(c.setGraphicHighlightedFunc(c.highlightedGraphic,!1),c.highlightedGraphic=null);if(a){var d=c.getGraphicForAttributesFunc(a);d&&(c.setGraphicHighlightedFunc(d,!0),c.highlightedGraphic=d)}}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),
b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonUtil":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","../../dataProvider/supportClasses/data/AreaDataUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f){f=f.geoenrichment.dijit.ReportPlayer.ReportPlayer;
var e={valueFormatFunction:function(d,c){return c&&c.isMissing?f.missingVariable:void 0===d||"string"===typeof d?d:k.formatNumber(d,{places:c.decimals,preserveTrailingZeroes:!0})},copyValueToCalculatorData:function(d,c){var a=e._findAttrsInCalcData(c,d);a&&(a[c.fieldName]=d[c.fieldName])},copyValueFromCalculatorData:function(d,c){var a=e._findAttrsInCalcData(c,d);a&&(d[c.fieldName]=a[c.fieldName])},_findAttrsInCalcData:function(d,c){d=(d=d.isMultiFeature?g.combineAreaDataObjectCalculators(d.fieldData.areaData,
d.calculatorName):g.getAreaDataObjectCalculator(d.fieldData.areaData[d.currentFeatureIndex],d.calculatorName))&&d.comparisonLevels||[];var a;d.some(function(b){if(b.StdGeographyLevel&&b.StdGeographyLevel===c.StdGeographyLevel&&b.StdGeographyID===c.StdGeographyID)return a=b,!0});return a}};return e})},"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(k){function g(){if(!e||!e.hierarchies)return"census";
var a=e.hierarchies[0].ID;if(1==e.hierarchies.length)return a;if(e.defaultDatasetID)for(var b in e.hierarchies){var c=e.hierarchies[b];if(c.datasets&&c.datasets.some(function(a){return a==e.defaultDatasetID})){a=c.ID;break}}return a}var f={},e;f.getCurrentCountry=function(){return e};f.getCountryID=function(){return e&&e.id};f.getCurrencySymbol=function(){return e&&e.currencySymbol||"$"};f.getCurrencyFormat=function(){if(e&&e.currencyFormat)return e.currencyFormat;var a=f.getCurrencySymbol();return a+
"0;-"+a+"0"};f.setCountry=function(a){e=a};var d,c;f.getSingleUnits=function(){return d};f.getPluralUnits=function(){return c};f.setSingleAndPluralUnits=function(a,b){d=a;c=b};var a;f.getHierarchyID=function(){return a};f.setHierarchyID=function(b){a=b||g()};var b;f.getGeographiesModel=function(){return b};f.setGeographiesModel=function(a){b=a};f.reset=function(){b=c=d=a=e=null};f.toJson=function(){return{country:{id:f.getCountryID(),currencySymbol:f.getCurrencySymbol(),currencyFormat:f.getCurrencyFormat()},
hierarchy:a,geographiesModel:b&&b.toJson()}};f.fromJson=function(c){c&&(e=c.country,a=c.hierarchy,b=c.geographiesModel&&new k(c.geographiesModel))};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],function(k){return k(null,{_levelsCache:null,_levels:null,constructor:function(g){this._initWithLevels(g.levels)},_initWithLevels:function(g){this._levels=g;this._levelsCache={};this._levels.forEach(function(f){delete f.description;
this._levelsCache[f.id]=f;f.adminLevel&&(this._levelsCache[f.adminLevel]=f)},this)},getLevels:function(g){return g?this._levels.filter(function(f){return!f.isWholeCountry}):this._levels.slice()},getLevel:function(g){return this._levelsCache[g]},getLevelPluralName:function(g){return(g=this.getLevel(g))?g.name||g.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","dojo/on","dijit/Destroyable","../../MapEventUtil"],function(k,g,f,e,d){return k(e,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,constructor:function(c){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=[];this._pendingLayerInfos={}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(c){this._highlightTableForAreaIndexFuncs.push(c.highlightTableForAreaIndex);c=new g;this._registerTableDfds.push(c);
this._hasRegisteredLayers&&this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return c.promise},_doRegisterTables:function(){this._registerTableDfds.forEach(function(c){c.resolve()});this._registerTableDfds.length=0},_graphicLayerInfos:null,_pendingLayerInfos:null,setThisAreaLayer:function(c,a,b,d){this._unSetInfo(c);this._pendingLayerInfos[c]={graphicsLayer:a,areaIndex:d.thisAreaIndex,getGraphicForAreaIndexFunc:d.getGraphicForAreaIndexFunc,
setGraphicHighlightedFunc:d.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:b};this._hasRegisteredTables&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},_doRegisterLayers:function(){for(var c in this._pendingLayerInfos){var a=this._pendingLayerInfos[c];this._graphicLayerInfos[c]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(c){var a=this,b=c.graphicsLayer,
h;c.layerMouseOverHandle=d.onLayerMouseOver(b,c.map,function(d){d.graphic&&d.graphic._graphicsLayer===b&&h!==d.graphic&&(c.layerMouseOutHandle&&c.layerMouseOutHandle.remove(),c.layerMouseOutHandle=null,h&&c.setGraphicHighlightedFunc(h,!1),h=d.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(a){a(c.areaIndex)}),c.setGraphicHighlightedFunc(h,!0),c.layerMouseOutHandle=f.once(b,"mouse-out",function(b){a._highlightTableForAreaIndexFuncs.forEach(function(a){a(null)});h&&c.setGraphicHighlightedFunc(h,
!1);h=null}))})},highlightGraphicForAreaIndex:function(c){for(var a in this._graphicLayerInfos){var b=this._graphicLayerInfos[a];b.highlightedGraphic&&(b.setGraphicHighlightedFunc(b.highlightedGraphic,!1),b.highlightedGraphic=null);var d=b.getGraphicForAreaIndexFunc(c);d&&(b.setGraphicHighlightedFunc(d,!0),b.highlightedGraphic=d)}},_unSetInfo:function(c){var a=this._graphicLayerInfos[c];delete this._graphicLayerInfos[c];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&
a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.units;var f={},e=["px","pt","mm","cm","in"],d={px:0,pt:1,mm:1,cm:2,"in":2};f.getSupportedUnits=
function(){return e};f.getShortName=function(c){return g.shortNames[c]};f.getLongName=function(c){return g.longNames[c]};f.getLongNameWithUnits=function(c){return g.longNamesWithUnits[c]};f.getPlaces=function(c){return d[c]||0};f.round=function(c,a){return k.roundNumber(c,f.getPlaces(a))};f.provideUnits=function(c,a){return c.replace("${units}",f.getShortName(a))};return f})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/PortalManager ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z,D,F,B){return k([c,a,b],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,constructor:function(a){g.mixin(this,a)},_getAttachmentsStore:function(a){return(new r(a)).initialize()},getCustomReports:function(a){return m.getCustomReports(a)},_currentContext:null,getReportData:function(a,b){var c=this,d=b&&b.progressCallback||function(){},k=g.mixin({},a);k.portalUrl=B.getPortalUrl(k.portalUrl);z.isPlayerOnServer||
B.setArcgisUrl(k.portalUrl);h.parseSites(k);D.reset();k.hierarchy||k.analysisAreas.some(function(a){if(a.geographies&&a.geographies[0].hierarchy)return k.hierarchy=a.geographies[0].hierarchy,!0});c.resetReportItemsCache&&m.resetCache();c._currentContext=k;k.analysisAreas=l.areasFromJson(k.analysisAreas);k.combinedAreasInfo=k.combinedAreasInfo&&l.combinedAreasInfoFromJson(k.combinedAreasInfo)||{};h.populateCombinedAreasInfo(k.combinedAreasInfo,k.analysisAreas);k.fieldData={specialTradeAreaCalculatorName:null,
runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null};return f([e(m.tryFindReportIdByAlias(k),function(a){k.reportID=a||k.reportID}),this._discoverPortal(k),function(){return k.variables&&e(v.preprocessVariables(k.variables,k.portalUrl),function(a){k.variables=a})}()]).then(function(){return e(n.preprocessAreas(k,{analysisAreasLimit:c.analysisAreasLimit}),function(){d(.25);setTimeout(function(){c._onCreateReportStarted()});var a=k.attachmentsProvider?u(k.attachmentsProvider):c._getAttachmentsStore(k.analysisAreas),
b={initGE:q.initialize(),countryInfo:q.getCountryInfo(k.countryID),attachmentsStore:a};k.reportID?(b.reportObject=m.getCustomReportByID(k),b.templateJsonInfo=p.getTemplateJsonByID(k,c.cacheTemplates),b.runReportResult=t.runReportAndGetData(k,a)):k.variables&&(b.reportObject=m.getFakeCustomReportByContext(k),b.templateJsonInfo=p.createTemplateJsonFromVariables(k),b.runReportResult=t.runReportFromVariables(k));return f(b).then(function(a){var b=a.reportObject,c=a.attachmentsStore,h=a.templateJsonInfo.templateJson,
l=a.templateJsonInfo.templateVariableProvider,f=a.runReportResult;d(.75);if(!h||!b||!k.fieldData)return null;D.setCountry(a.countryInfo.country);D.setHierarchyID(k.hierarchy);D.setGeographiesModel(a.countryInfo.geographiesModels[D.getHierarchyID()]);h.theme||(h.theme=A.getReportThemeById(b.isGraphicReport?C.GRAPHIC:C.CLASSIC));var n={isMultiFeature:b.isMultiFeature&&1<k.analysisAreas.length,reportTitle:k.reportTitle||b.title,templateJson:h,reportObject:b,fieldData:k.fieldData,analysisAreas:k.analysisAreas,
combinedAreasInfo:k.combinedAreasInfo,reverseAnalysisAreasOnMap:k.reverseAnalysisAreasOnMap,attachmentsStore:c,geClient:q.getClient(),templateVariableProvider:l,customLogo:k.customLogo,config:{portalUrl:k.portalUrl,geoenrichmentUrl:k.geoenrichmentUrl,geometryServiceUrl:k.geometryServiceUrl,printMapTaskUrl:k.printMapTaskUrl,countryID:k.countryID,hierarchy:k.hierarchy,reportID:k.reportID,variables:k.variables}};return e(t.applyRunReportAndGetDataResults(f,n),function(){d(1);return n})})})})},_discoverPortal:function(a){return y.getPortalInfo(a.portalUrl).then(function(b){a.geoenrichmentUrl=
a.geoenrichmentUrl||b.portal.helperServices.geoenrichment.url;var c=d.id.findCredential(a.portalUrl);q.setGeoenrichmentUrl(a.geoenrichmentUrl,c&&c.token);a.geometryServiceUrl=a.geometryServiceUrl||b.portal.helperServices.geometry.url;F.setGeometryServiceUrl(a.geometryServiceUrl);a.printMapTaskUrl=a.printMapTaskUrl||b.portal.helperServices.printTask.url;w.setPrintMapTaskUrl(a.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(a,b){var c=b.currentFeatureIndex||0,d=g.mixin({},a.fieldData);
d.areaData=[d.areaData[c]];var h=[g.mixin({},a.analysisAreas[c])];n.removeGroupInfo(h);var e=a.attachmentsStore;return{isMultiFeature:!1,reportTitle:b.reportTitle,templateJson:b.templateJson,reportObject:a.reportObject,fieldData:d,analysisAreas:h,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,attachmentsStore:e&&{getImages:function(){e.supportsMultipleAreas&&e.setCurrentAnalysisAreaIndex(c);return e.getImages()},getAttributes:function(){e.supportsMultipleAreas&&e.setCurrentAnalysisAreaIndex(c);
return e.getAttributes()},getNotes:function(){e.supportsMultipleAreas&&e.setCurrentAnalysisAreaIndex(c);return e.getNotes()}},geClient:a.geClient,templateVariableProvider:a.templateVariableProvider,config:a.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(k,g,f,e,d,c,a,b){var h={};return g(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var l=this;if(this._initCommandsPromise)return d(this._initCommandsPromise);var n=new e;if(b.modules.exportCommands)k(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(b,d,e,l,f){h[c.HTML]=b;h[c.PDF]=d;h[c.IMAGE]=
e;h[c.PRINT]=l;h[c.DYNAMIC_HTML]=f;a.getInitPromise().then(n.resolve)});else return n.resolve();n.promise.then(function(){l._initCommandsPromise=!0});return this._initCommandsPromise=n.promise},registerCommand:function(a,b,c){function d(c){if(!c.isBrowserSupported||c.isBrowserSupported())e._commands[a]||(e._commands[a]={index:e._commandIndex++,id:a,label:b||c.label,command:c})}var e=this;if(c)d(c);else return this._initCommands().then(function(){var b=h[a];b&&d(new b)})},getCommands:function(){return this._initCommands().then(function(){var b=
[],h=this._commands[c.PDF],e;for(e in this._commands)b.push(this._commands[e]);b.sort(function(a,b){return a.index-b.index});return(e=this._getCurrentContext())&&e.geoenrichmentUrl&&h?d(a.hasCapability("FormatInfographics"),function(a){a||(b=b.filter(function(a){return a!==h}));return b}):d(b)}.bind(this))},getCommandById:function(a){return this._commands[a]&&this._commands[a].command},executeCommand:function(a,b,c,d){return this._initCommands().then(function(){c=f.mixin({printMapTaskUrl:this.printMapTaskUrl},
c);return this._commands[a]&&this._commands[a].command&&this._commands[a].command.execute(b,c||{},d)}.bind(this))},executeCommandOnData:function(a,b,c,d){return this._initCommands().then(function(){c=f.mixin({printMapTaskUrl:this.printMapTaskUrl},c);return this._commands[a]&&this._commands[a].command&&this._commands[a].command.executeOnData(this,b,c||{},d)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t){function q(b){return A?A:(b=b&&a.id.findCredential(b)||a.id.credentials[0])&&b.token}function r(a,b){var c=h.urlToObject(a);b=g.mixin({f:"json",token:q(a),langCode:dojo.locale},c.query||{},b);for(var d in b)a=b[d],a instanceof n||a&&"object"===typeof a&&(b[d]=JSON.stringify("function"===typeof a.toJson?a.toJson():a));return{url:c.path,taskParams:b}}function u(a){z||(z=new y(w));return!a||z.initialized?z:z.initialize()}var y=k(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(a){this._capabilities={};this._supportedOperations={};this.url=a},_initDfd:null,initialized:!1,initialize:function(){var a=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new f;m.requestPublicFirst(r(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(b){a.initWithJson(b)});return this._initDfd.promise},initWithJson:function(a){this._geInfo=a;this._capabilities={};this._supportedOperations=
{};a.capabilities&&a.capabilities.forEach(function(a){this._capabilities[a.toLowerCase()]=!0},this);a.supportedOperations&&a.supportedOperations.forEach(function(a){this._supportedOperations[a.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new f;this._initDfd.resolve();this.initialized=!0},hasCapability:function(a){return!!this._capabilities[a.toLowerCase()]},addCapability:function(a){this._capabilities[a.toLowerCase()]=!0},supportsOperation:function(a){return!!this._supportedOperations[a.toLowerCase()]},
enrich:function(a){a=r(this.url,a);a.taskParams.AddDerivativeVariables="all";return b({url:a.url+"/Geoenrichment/Enrich",content:a.taskParams,handleAs:"json"}).then(function(a){return a.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(a){a=r(this.url,a);return b({url:a.url+"/StandardGeographyQuery/execute",content:a.taskParams,handleAs:"json"}).then(function(a){return a.results[0].value.features||[]})},getDataCollections:function(a,c,d){d=r(this.url,d);return b({url:d.url+"/Geoenrichment/DataCollections/"+
a+(c?"/"+c:""),content:d.taskParams,handleAs:"json"}).then(function(a){return a.DataCollections})},getCountries:function(){var a=r(this.url);return b({url:a.url+"/Geoenrichment/Countries",content:a.taskParams,handleAs:"json"}).then(function(a){return a.countries})},getCountryInfo:function(a){var c=this,h=l.get("GEUtil.countries");if(!h[a]){var f=r(this.url);h[a]=b({url:f.url+"/Geoenrichment/Countries/"+a,content:f.taskParams,handleAs:"json"}).then(function(b){var h=b.countries[0],l={};return d(h.hierarchies.map(function(b){return e(c._getStdGeographyModel(a,
b.ID),function(a){l[b.ID]=a})})).then(function(){return{country:h,geographiesModels:l}})})}return h[a]},_getStdGeographyModel:function(a,c){var d=l.get("GEUtil.stdModels"),h=a+c;if(!d[h]){var e=r(this.url);d[h]=b({url:e.url+"/Geoenrichment/StandardGeographyLevels/"+a+"/"+c,content:e.taskParams,handleAs:"json"}).then(function(b){return new t({countryID:a,hierarchyID:c,levels:b.geographyLevels[0].hierarchies[0].levels})})}return d[h]},formatReport:function(a){a=r(this.url,a);return m.request({url:a.url,
urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:a.taskParams}).then(function(a){return a&&a.data&&"text/plain"===a.data.type?null:a})},getReports:function(a){var c=r(this.url);return b({url:c.url+"/Geoenrichment/reports/"+a,content:c.taskParams,handleAs:"json"}).then(function(a){return a.reports})},createReport:function(a){var b=r(this.url,a),d=c();l.get("GEUtil.tasks")[d]={taskName:"createReport",taskParams:g.clone(a)};return m.request({url:b.url,urlSuffix:"Geoenrichment/createReport"},
{handleAs:"xml"===a.format?"text":"bin",content:b.taskParams}).then(function(a){return{taskID:d,result:a}})},consumeCredits:function(a){if(a=l.get("GEUtil.tasks")[a])return a=g.clone(a),delete a.taskParams.forStorage,this[a.taskName](a.taskParams)},getLayerInfos:function(a){var b=l.get("GEUtil.dataLayers");b[a]||(b[a]=this._getLayerInfos(a));return b[a]},_getLayerInfos:function(a){var c=r(this.url);return b({url:c.url+"/Geoenrichment/DataLayers/"+a,content:c.taskParams,handleAs:"json"}).then(function(a){return a&&
a.layers||[]}).otherwise(function(a){console.log(a);return[]})},getLayerInfo:function(a,b){var c=l.get("GEUtil.dataLayers"),d=a+"_"+b;c[d]||(c[d]=this._getLayerInfo(a,b));return c[d]},_getLayerInfo:function(a,c){var d=r(this.url);return b({url:d.url+"/Geoenrichment/DataLayers/"+a+"/"+c,content:d.taskParams,handleAs:"json"}).then(function(a){return a&&a.layer}).otherwise(function(a){console.log(a);return null})}}),v={},w,A,C=new f;v.setGeoenrichmentUrl=function(a,b){(w=a||w)&&p.registerCORS(w);A=b||
A;!C.promise.isFulfilled()&&C.resolve()};v.canMakeRequests=function(){return!!w};v.getInitPromise=function(){return C.promise};v.GEClient=y;var z;v.getClient=function(){return u()};v.initialize=function(){return e(u(!0))};v.initWithJson=function(a,b){v.setGeoenrichmentUrl(a);u().initWithJson(b)};v.enrich=function(a){return u().enrich(a)};v.stdGeographyQuery=function(a){return u().stdGeographyQuery(a)};v.getDataCollections=function(a,b,c){return u().getDataCollections(a,b,c)};v.formatReport=function(a){return u().formatReport(a)};
v.createReport=function(a){return u().createReport(a)};v.consumeCredits=function(a){return u().consumeCredits(a)};v.getLayerInfos=function(a){return u().getLayerInfos(a)};v.hasCapability=function(a){return e(u(!0),function(){return z&&z.hasCapability(a)})};v.addCapability=function(a){return u().addCapability(a)};v.supportsOperation=function(a){return e(u(!0),function(){return z&&z.supportsOperation(a)})};v.getCountryInfo=function(a){return u().getCountryInfo(a)};return v})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],
function(){dojox.uuid.generateRandomUuid=function(){function k(){for(var c=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>c.length;)c="0"+c;return c}var g=k(),f=k(),f=f.substring(0,4)+"-4"+f.substring(5,8),e=k(),e="8"+e.substring(1,4)+"-"+e.substring(4,8),d=k();return(g+"-"+f+"-"+e+d).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(k){k.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(g,f){if(!g)throw f||(f="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(f);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(g){g=g.toString();var f=k.isString(g)&&36==g.length&&g==g.toLowerCase();if(f){g=
g.split("-");var f=5==g.length&&8==g[0].length&&4==g[1].length&&4==g[2].length&&4==g[3].length&&12==g[4].length,e;for(e in g)var d=parseInt(g[e],16),f=f&&isFinite(d)}return f};dojox.uuid.getVariant=function(g){if(!dojox.uuid._ourVariantLookupTable){var f=dojox.uuid.variant,e=[];e[0]=f.NCS;e[1]=f.NCS;e[2]=f.NCS;e[3]=f.NCS;e[4]=f.NCS;e[5]=f.NCS;e[6]=f.NCS;e[7]=f.NCS;e[8]=f.DCE;e[9]=f.DCE;e[10]=f.DCE;e[11]=f.DCE;e[12]=f.MICROSOFT;e[13]=f.MICROSOFT;e[14]=f.UNKNOWN;e[15]=f.UNKNOWN;dojox.uuid._ourVariantLookupTable=
e}g=g.toString();g=g.charAt(19);g=parseInt(g,16);dojox.uuid.assert(0<=g&&16>=g);return dojox.uuid._ourVariantLookupTable[g]};dojox.uuid.getVersion=function(g){dojox.uuid.assert(dojox.uuid.getVariant(g)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");g=g.toString();g=g.charAt(14);return parseInt(g,16)};dojox.uuid.getNode=function(g){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");
g=g.toString();return g.split("-")[4]};dojox.uuid.getTimestamp=function(g,f){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");g=g.toString();f||(f=null);switch(f){case "string":case String:return dojox.uuid.getTimestamp(g,Date).toUTCString();case "hex":var e=g.split("-");g=e[0];f=e[1];e=e[2];e=e.slice(1);g=e+f+g;dojox.uuid.assert(15==g.length);return g;case null:case "date":case Date:return e=g.split("-"),g=parseInt(e[0],
16),f=parseInt(e[1],16),e=(parseInt(e[2],16)&4095)<<16,e=4294967296*(e+f),e+=g,new Date(e/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+f)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/CacheUtil":function(){define([],function(){var k={},g={};k.get=function(f,e){var d=g[f];d||e||(d=g[f]={});return d};k.set=function(f,e){return g[f]=e};k.clear=function(f,e){g={}};return k})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/utils/DataUtil"],function(k,g){function f(d){return d?/^image\//.test(d)?"base64":/^text\//.test(d)?"text":/application\/json/.test(d)?"json":"bin":"bin"}var e=k(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(d,c,a){this.data=d;c&&(this.contentType=c);a&&(this.contentTransferEncoding=a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:g.base64FromByteSource(this.data):
null},toString:function(){return this.filename||"\x3cunknown\x3e"}});e.fromArrayBuffer=function(d,c){return new e(g.binaryStringFromByteSource(d),c)};e.fromBlob=function(d,c){return g.arrayBufferFromBlob(d).then(function(a){return new e(g.binaryStringFromByteSource(a),c||d.type)})};e.fromFileData=function(d,c,a){a=a||g.getContentType(d);if("object"==typeof c&&window.ArrayBuffer&&(c instanceof ArrayBuffer||c.buffer instanceof ArrayBuffer))c=g.binaryStringFromByteSource(c.buffer||c);else{var b=f(a);
"json"==b&&"object"==typeof c&&(c=JSON.stringify(c));if("string"!=typeof c)throw Error("Wrong file data.");switch(b){case "base64":c=atob(c);break;case "text":case "json":c=unescape(encodeURIComponent(c))}}c=new e(c,a);c.filename=d;return c};e.getContentConversionType=f;return e})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(k,g){function f(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},
getByte:function(a){return this.source.charCodeAt(a)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(a){return this.source[a]}}:a}function e(a){for(var b=a.length,c=new Uint8Array(a.length),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function d(a,b){a=new Uint8Array(a);b=Math.min(b,a.byteLength);for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var c={arrayBufferFromBlob:function(a){var b=
new k,c=new FileReader;c.onloadend=function(){c.error?b.reject(c.error):b.resolve(c.result)};c.readAsArrayBuffer(a);return b.promise},arrayBuffersToBlob:function(a,b){return new Blob(a,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=f(a);for(var b=a.getLength(),c=b%4,b=b-c,d="",e=0,g,p,k,q;e<b;)g=a.getByte(e++),p=a.getByte(e++),k=a.getByte(e++),q=a.getByte(e++),d+=String.fromCharCode(g,p,k,q);1==c?d+=String.fromCharCode(a.getByte(e)):
2==c?d+=String.fromCharCode(a.getByte(e),a.getByte(e+1)):3==c&&(d+=String.fromCharCode(a.getByte(e),a.getByte(e+1),a.getByte(e+2)));return d},base64FromByteSource:function(a){a=f(a);for(var b=a.getLength(),c=b%3,b=b-c,d,e,g,p,k="",q=0;q<b;q+=3)p=a.getByte(q)<<16|a.getByte(q+1)<<8|a.getByte(q+2),d=p>>18&63,e=p>>12&63,g=p>>6&63,p&=63,k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p];1==c?(p=a.getByte(q),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p<<4&63]+"\x3d\x3d"):2==c&&(p=a.getByte(q)<<8|a.getByte(q+1),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[p<<
2&63]+"\x3d");return k},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};c.binaryStringToByteArray=e;c.base64ToByteArray=function(a){return e(atob(a))};c.getFirstBytes=function(a,b){var c;if("string"==typeof a)c=a.substr(0,b);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)c=d(a,b);else if(window.Blob&&a instanceof Blob){c=new k;var e=new FileReader;e.onloadend=function(){e.error?c.resolve(""):c.resolve(d(e.result,b))};e.readAsArrayBuffer(a.slice(0,
b))}return g(c||"")};c.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};c.getContentType=function(a){a=c.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};c.getFileExtension=function(a){var b=
a.lastIndexOf(".")+1;return b?a.substr(b).toLowerCase():null};return c})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q){function r(a,b){if(b)this.reject(b);else{b=a.xhr;var c=
b.getResponseHeader&&b.getResponseHeader("Content-Type");a.status=b.status;a.data=new m(b.response||b.responseBody||b.responseText,c);this.resolve(a)}}var u=0,y=d("safari"),v=function(a){"string"===typeof a?this.url=a:"object"===typeof a&&k.mixin(this,a)};v.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(a,b){return this.sendUrlRequest(this.prepareUrlRequest(a,b),"UniversalClient.send")},prepareUrlRequest:function(c,
d){"string"===typeof c?c={urlSuffix:c}:c||(c={});d||(d={});var f=c.url||this.url;c=c.urlSuffix;f||(f=c,c=null);if(!f)throw Error("URL is missing.");var g=l.urlToObject(f),f=n.combine(g.path,c);c=g.query||{};"object"===typeof d.content&&(c=k.mixin(c,d.content));g=d.requireSSL;!0!==g&&!1===this.allowSSL&&(g=!1);!1!==g&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(g=!0);if(a.id){var m=a.id.findCredential(f);!m&&this.useCommonAuth&&(m="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):
a.id.credentials[0]);m&&(c.token||!1===c.token||(c.token=m.token),m.ssl&&!1!==g&&(g=!0))}!0===g&&(f=n.toHttpsUrl(f));!1===c.token&&delete c.token;var q=d.handleAs||"json";"json"===q&&(c.f="json");var m=(d.sendAs||(d.usePost||this.usePost||c.token?"post":"get")).toLowerCase(),g="multipart"==m?!0:d.sendAs||d.sizeLimit?!1:null,r=0,v;for(v in c){var w=c[v];if(w instanceof p)g=!0;else{var A=0,C=v.length;"object"===typeof w?d.allowMultipleValues&&Array.isArray(w)?c[v]=w.map(function(a){a="object"===typeof a?
JSON.stringify(a):a;A+=C+a+2;return a}):(c[v]=JSON.stringify(w),A+=C+c[v].length+2):A=C+(w?w.length:0)+2;!g&&0<this.multipartThreshold&&(r+=A)}}!1!==g&&0<this.multipartThreshold&&r>this.multipartThreshold&&(g=!0);if(d.useProxy||!l.hasSameOrigin(f,window.location.href)&&this.useProxy&&!d.hasOwnProperty("useProxy")){var I=n.getProxyUrl();I&&(f=I+"?"+f)}else l.getProxyRule(f)&&(f=l.getProxyRule(f).proxyUrl+"?"+f);v=(v=d.hasOwnProperty("preventCache")?d.preventCache:this.preventCache)||null===v&&I||y?
"_ts\x3d"+(new Date).getTime()+u++:"";I={handleAs:q};if(q=Number(h.isDefined(d.timeout)?d.timeout:this.timeout))I.timeout=q;q="get"!==m||g;m=g?null:e.objectToQuery(c);q||(q=m.length+f.length+v.length+1>=b.defaults.io.postLength);I.method=q?"POST":"GET";I.headers={"X-Requested-With":null};I.headers["Content-Type"]="undefined"!==typeof d.contentType?d.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";g?(g=new t,g.addVariables(c),g.build(I)):q?I.data=m:m&&(f+="?"+m,v&&(f+="\x26"+v),v=
null);!m&&v&&(f+="?"+v);return{url:f,options:I,sizeLimit:d.sizeLimit}},sendUrlRequest:function(a,b){var d="string"===typeof a.options.data?a.options.data.length:null;if(a.sizeLimit&&d&&("function"===typeof a.sizeLimit?a.sizeLimit(d):d>a.sizeLimit))return(new g).reject(Error("SIZE_LIMIT_EXCEEDED"));b=b||"UniversalClient.sendUrlRequest";var h=a.deferred||new g;if(d="bin"===a.options.handleAs)a.options.handleAs="blob";var e=f(a.url,a.options,!0);d&&(e.handleResponse=r);var l=this;e.then(function(d){d=
"json"===a.options.handleAs&&d&&q.parseError(d)||d;if(d instanceof Error){var e;!0===l.useCommonAuth&&498===d.code&&(e=v.handleInvalidTokenError(d));c(e)["finally"](function(){h.reject(d)})}else h.resolve(l._makeResponse(b,d))},function(a){h.reject(q.makeError(a))});return h.promise},requestToUrl:function(a){if(a.options.headers&&a.options.headers["Content-Type"]&&0==a.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var c=a.url;if(a=a.options.data){if(c.length+a.length>=
b.defaults.io.postLength)return null;c+="?"+a}return c},_makeResponse:function(a,b){return b}};v.makeError=q.makeError;v.handleInvalidTokenError=function(a){};var w=new v({useCommonAuth:!0,allowSSL:!0});v.request=function(a,b){return w.send(a,b).otherwise(function(c){var d=b&&b.content&&b.content.token;if(498!==c.code||null!=d)return(new g).reject(c);b=k.mixin({},b);b.content=k.mixin({},b.content);b.content.token=!1;return w.send(a,b)})};v.requestPublicFirst=function(a,b,c){var d=k.mixin({},b);d.content=
k.mixin({},b.content);d.content.token=!1;return w.send(a,d).otherwise(function(d){return c&&c.retryOnAnyError||499===d.code||403===d.code?w.send(a,b):(new g).reject(d)})};return v})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(k){return k(null,{data:null,type:null,constructor:function(g,f){this.type=f||g&&g.type||null;this.data=g}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/request/util",
"esri/lang","./FileContent"],function(k,g,f,e){var d=k(null,{data:null,constructor:function(a){this.data=a}}),c=g.parseArgs;g.parseArgs=function(a,h,e){h.data&&h.data instanceof d&&(h.data=h.data.data,e=!0);return c(a,h,e)};var a=g.deepCreate;g.deepCreate=function(b,c){return c instanceof d?new d(c.data):a(b,c)};return k(null,{addVariables:function(a){for(var b in a)this.addVariable(b,a[b])},addVariable:function(a,c){f.isDefined(c)&&(c instanceof e?this._writeFileContent(a,c):this._writeVariable(a,
c.toString()))},build:function(a){this._writeBoundary(!0);a.data=new d(this._prepareBinaryData());var b=a.headers||{};b["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;a.headers=b;this._dataProvider=null},_prepareBinaryData:function(){var a=this._dataProvider.buffer;if(!window.Uint8Array)return a;for(var c=a.length,d=new Uint8Array(new ArrayBuffer(c)),e=0;e<c;e++)d[e]=a.charCodeAt(e);return d},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var a=
"",c=0;32>c;c++)a+=String.fromCharCode(Math.floor(97+25*Math.random()));this._dataProvider={buffer:"",boundary:a}}return this._dataProvider},_writeVariable:function(a,c){this._writeBoundary();this._writeContentDisposition(a);this._writeLineBreak();this._writeData(this._toUTF8(c));this._writeLineBreak()},_writeFileContent:function(a,c){this._writeBoundary();this._writeContentDisposition(a,c.filename);c.contentType&&(this._writeData("Content-Type: "+c.contentType),this._writeLineBreak());c.contentTransferEncoding&&
(this._writeData("Content-Transfer-Encoding: "+c.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(c.data);this._writeLineBreak()},_writeBoundary:function(a){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);a?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(a,c){c=c?'"; filename\x3d"'+this._toUTF8(c.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(a)+c+'"');
this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(a){this._getDataProvider().buffer+=a},_toUTF8:function(a){return unescape(encodeURIComponent(a))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(k,g,f){function e(c){var a=new k;f(["./DataResource"],function(b){g((new b(c)).getFileContent(),
a.resolve,a.reject)});return a.promise}var d={getErrorFromBin:function(c){var a=/^text\/|^application\/json/;return c&&c.type&&!a.test(c.type)?null:g(c&&e(c),function(b){if(b){if(b.hasOwnProperty("contentType")&&!a.test(b.contentType))return null;try{var c=JSON.parse(decodeURIComponent(escape(b.data))),e=d.parseError(c);if(e)return e;if(c.messages&&c.messages.length){var f=c.messages[0];if("esriJobMessageTypeError"==f.type)return Error(f.description)}}catch(m){}}return Error("Binary data error.")})},
parseError:function(c){var a;c.error?a=d.makeError(c.error):"error"===c.status&&(a=d.makeError(c));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(c){null==c?c=Error():"string"===typeof c&&(c={message:c});if(!(c instanceof Error)&&"object"===typeof c){var a=c;c=Error();a.code&&(c.code=a.code);a.message&&(c.message=a.message);a.details&&(c.details=a.details)}c.log=dojoConfig.isDebug;return c}};return d})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/PortalManager ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){function t(){var a=new e;k("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(b,c,d,e,l,f,g,n,m){q=b;r=c;u=d;y=f;h=g;v=n;w=m;a.resolve()});return a.promise}var q,r,u,y,v,w;return g(null,{reportDataToJson:function(a,b){var e=this;b=b||{};var g=!1;l.processTemplateFieldInfos(a.templateJson,function(a){a.isInfographic&&a.infographicJson.type===h.ATTACHMENTS&&(g=!0)});return t().then(function(){return d(null,function(){return d(a.attachmentsStore&&q.getAttachmentsStoreJson(a.attachmentsStore,{numAreas:a.analysisAreas.length,saveImages:g}),function(d){var h=f.mixin({},
a.config);!1!==b.forceFixedDataMode&&delete h.geoenrichmentUrl;d={isMultiFeature:a.isMultiFeature,reportTitle:a.reportTitle,templateJson:u.serialize(a.templateJson),reportObject:e._prepareReportObjectJson(a.reportObject),fieldData:a.fieldData,analysisAreas:c.areasToJson(a.analysisAreas),combinedAreasInfo:a.combinedAreasInfo&&c.combinedAreasInfoToJson(a.combinedAreasInfo),reverseAnalysisAreasOnMap:a.reverseAnalysisAreasOnMap,attachmentsStore:d,templateVariableProvider:a.templateVariableProvider&&a.templateVariableProvider.toJson(),
config:h,countryConfig:n.toJson(),mapImageInfos:b.mapImageInfos,loadedMapPortalItems:b.loadedMapPortalItems,customLogo:a.customLogo};p.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(d));return d})})})},_prepareReportObjectJson:function(a){var b={},c;for(c in a)a[c]&&"object"!==typeof a[c]&&(b[c]=a[c]);return b},reportDataFromJson:function(h){return t().then(function(){var e=h.fieldData;e.featureData&&(e.areaData=e.featureData.map(function(a){return{mainCalculator:{data:a}}}),
delete e.featureData);var l={isMultiFeature:h.isMultiFeature,reportTitle:h.reportTitle,templateJson:u.deserialize(h.templateJson),reportObject:h.reportObject,fieldData:e,analysisAreas:c.areasFromJson(h.analysisAreas),combinedAreasInfo:h.combinedAreasInfo&&c.combinedAreasInfoFromJson(h.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:h.reverseAnalysisAreasOnMap,attachmentsStore:h.attachmentsStore&&q.getAttachmentsStoreFromJson(h.attachmentsStore),templateVariableProvider:h.templateVariableProvider&&
new y(h.templateVariableProvider),config:h.config||{},mapImageInfos:h.mapImageInfos,loadedMapPortalItems:h.loadedMapPortalItems,customLogo:h.customLogo};a.populateCombinedAreasInfo(l.combinedAreasInfo,l.analysisAreas);r.setGeoenrichmentUrl(null);e=!1;l.config.portalUrl&&m.setArcgisUrl(m.getPortalUrl(l.config.portalUrl));l.config.geometryServiceUrl?w.setGeometryServiceUrl(l.config.geometryServiceUrl):e=!0;l.config.printMapTaskUrl?v.setPrintMapTaskUrl(l.config.printMapTaskUrl):e=!0;n.fromJson(h.countryConfig);
return d(e&&b.tryConfigureServicesFromAGOLPublic()).then(function(){return l})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(k,g){function f(c,a){if(!c)return null;c.getLayer()&&(c=new k(c.geometry,c.symbol,c.attributes,c.infoTemplate));c=c.toJson();a&&delete c.infoTemplate;return c}function e(c){if(!c)return null;if(c instanceof k)return c;var a=c.infoTemplate&&new g(c.infoTemplate);
delete c.infoTemplate;c=new k(c);a&&c.setInfoTemplate(a);return c}function d(c){var a={},b;for(b in c){var d=c[b];if("string"===typeof d||"number"===typeof d&&!isNaN(d))a[b]=d}return a}return{areasToJson:function(c,a){var b=a&&a.excludeInfoTemplate;return c.map(function(a){var c=d(a);c.feature=f(a.feature,b);c.location=a.location&&f(a.location,b);c.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(function(a){return f(a,b)});c.geographies=a.geographies;c.buffer=a.buffer;c.featureServiceQueryInfos=
a.featureServiceQueryInfos;return c})},combinedAreasInfoToJson:function(c){var a=d(c);a.groups=c.groups&&c.groups.map(function(a){var b=d(a);b.indexes=a.indexes.slice();b.location=a.location&&f(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(f);return b});return a},areasFromJson:function(c){return c.map(function(a){var b=d(a);b.feature=e(a.feature);b.location=a.location&&e(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(e);b.geographies=
a.geographies;b.buffer=a.buffer;b.featureServiceQueryInfos=a.featureServiceQueryInfos;return b})},combinedAreasInfoFromJson:function(c){var a=d(c);a.groups=c.groups&&c.groups.map(function(a){var b=d(a);b.indexes=a.indexes.slice();b.location=a.location&&e(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(e);return b});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define("dojo/Deferred dojo/on esri/dijit/geoenrichment/when esri/arcgis/Portal ../../../utils/requests/UniversalClient ../commands/mapToImage/MapToURLUtil ../../../utils/CacheUtil ../../../utils/ProjectionUtil".split(" "),
function(k,g,f,e,d,c,a,b){return{getPortalInfo:function(b){var c=a.get("PortalManager");if(!c[b]){var d=new e.Portal(b),h=new k;g(d,"load",function(){if(d.user)return c[b]={user:new e.PortalUser({portal:d,credential:{userId:d.user.username,server:d.url,token:"",expires:9999999999999,creationTime:9999999999999,scope:"portal",resources:[d.portalUrl]}}),portal:d},h.resolve(c[b]);c[b]=f(d.signIn(),function(a){h.resolve({user:a,portal:d});return{user:a,portal:d}})});return h.promise}return c[b]},tryConfigureServicesFromAGOLPublic:function(){return d.requestPublicFirst("https://www.arcgis.com/sharing/rest/portals/self",
{},{retryOnAnyError:!1}).then(function(a){if(a=a&&a.helperServices)a.geometry&&b.setGeometryServiceUrl(a.geometry.url),a.printTask&&c.setPrintMapTaskUrl(a.printTask.url)}).otherwise(function(a){console.log(a)})}}})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(k,g,f,e,d,c,a,b,h,l,n,m){var p={options:{disableIdentityLookup:!0},
requestParams:{f:"json"}},t=function(a){function b(b){a[b]||(a[b]=function(){var c=arguments;return e.when(a,function(a){Array.prototype.unshift.call(c,a.results||a);return t(d[b].apply(d,c))})})}if(!a)return a;a.then&&(a=g.delegate(a));a.total||(a.total=e.when(a,function(a){return h.isDefined(a.total)?a.total:a.length||0}));b("forEach");b("filter");b("map");b("some");b("every");return a},q={useSSL:function(a,b){var c=p&&p.self||{};if(c&&!c.isPortal)return-1!==a.indexOf("https:")||c.allSSL?b.replace("http:",
"https:"):b;var d=q.getLocation(b);return-1<c.portalHostname.toLowerCase().indexOf(d.hostname.toLowerCase())&&d.port&&"80"!==d.port&&"443"!==d.port?(b=d.pathname,b=0===b.indexOf("/")?b:"/"+b,c.allSSL||-1<a.indexOf("https:")?"https://"+d.hostname+(c.httpsPort&&"443"!==c.httpsPort?":"+c.httpsPort:"")+b+d.search:"http://"+d.hostname+(c.httpPort&&"80"!==c.httpPort?":"+c.httpPort:"")+b+d.search):-1!==a.indexOf("https:")||c.allSSL?b.replace("http:","https:"):b},formatUrl:function(a){var b=p.currentToken;
return-1!==a.indexOf("null")?null:q.useSSL(window.location.protocol,b?a+(-1!==a.indexOf("?")?"\x26":"?")+("token\x3d"+b):a)},getLocation:function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},resultsToTypedArray:function(a,b,c){c=c?c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c:[];return d.map(c,function(c){c=g.mixin(c,
b||{});return a?new a(c):c})},clearFieldsFromObject:function(a,b){var c,d=a.length;if(g.isArray(a))for(c=0;c<d;c++)delete b[a[c]];else for(c in a)delete b[c];return b},requestToTypedArray:function(a,b,c,d,h){return t(q.request(a,b,c).then(g.partial(q.resultsToTypedArray,d,h)))},request:function(a,b,c){var d;b&&b.portal&&delete b.portal;b&&b.form&&(d=b.form,delete b.form);b=g.mixin(g.mixin({},b||{}),p.requestParams);c=g.mixin(c||{},p.options);return l({url:q.useSSL(window.location.protocol,a.url||
a),content:b,callbackParamName:"callback",timeout:c&&c.timeout||0,form:d},c)},formatQueryParams:function(a,b,c){a=g.mixin(g.mixin({},a),g.isString(b)?{q:b}:b||{});a.q=!c&&p.extraQuery?"("+a.q+")"+p.extraQuery:a.q;return a}},r=k([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(a){g.mixin(this,a);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),u=k([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(a){g.mixin(this,
a);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),y=k([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(a){g.mixin(this,a);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=q.formatUrl(this.itemUrl+
"/data");this.thumbnailUrl=q.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var a=this.type;return{source:-1<d.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===a?a:
null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(a){var b=g.isString(a)?{comment:a}:a;return q.request(this.itemUrl+"/addComment",b,{usePost:!0}).then(g.hitch(this,function(a){return new r(g.mixin(b,{id:a.commentId,item:this}))}))},updateComment:function(a){if(a&&a.url&&a.comment)return q.request(a.url+"/update",{comment:a.comment},{usePost:!0}).then(function(b){a.id=b.commentId;return a});
throw Error();},getComments:function(){return q.requestToTypedArray(this.itemUrl+"/comments",null,null,r,{item:this})},deleteComment:function(a){if(a&&a.url)return q.request(a.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(a){var b=g.isObject(a)?a:{rating:parseFloat(a)};return q.request(this.itemUrl+"/addRating",b,{usePost:!0}).then(g.hitch(this,function(a){return new u(g.mixin(b,{id:a.ratingId,item:this}))}))},getRating:function(){return q.request(this.itemUrl+"/rating").then(g.hitch(this,
function(a){return new u(g.mixin(a,{item:this}))}))},deleteRating:function(){return q.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===a||"Feature Collection"===a?c=-1<d.indexOf(b,"Table")?"Table":-1<d.indexOf(b,"Route Layer")?"Route Layer":-1<d.indexOf(b,"Markup")?"Markup":"Feature Layer":"Image Service"===a?c=-1<d.indexOf(b,"Elevation 3D Layer")?"Elevation Layer":-1<d.indexOf(b,"Tiled Imagery")?"Tiled Imagery Layer":
"Imagery Layer":"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?c=-1<d.indexOf(b,"Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?c="Locator":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":"GeoJson"===a?this.type=c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"netCDF"===a?c="NetCDF":"Map Service"===a?
c=-1===d.indexOf(b,"Spatiotemporal")&&(-1<d.indexOf(b,"Hosted Service")||-1<d.indexOf(b,"Tiled"))&&-1===d.indexOf(b,"Relational")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a?c="Big Data File Share":"Compact Tile Package"===a?c="Tile Package (tpkx)":"Raster function template"===a&&(c="Raster Function Template");return c},_getIconUrl:function(){var b=this.type&&this.type.toLowerCase()||"",c=this.typeKeywords||
[],h=!1,e=!1,l=!1,f=!1,g=!1,e=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(h=-1<d.indexOf(c,"Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(f=-1<d.indexOf(c,"Table"),e=-1<d.indexOf(c,"Route Layer"),l=-1<d.indexOf(c,"Markup"),b=(g=-1!==d.indexOf(c,"Spatiotemporal"))&&f?"spatiotemporaltable":f?"table":e?"routelayer":l?"markup":g?"spatiotemporal":h?"featureshosted":"features"):"map service"===b||"wms"===b||
"wmts"===b?(g=-1!==d.indexOf(c,"Spatiotemporal"),e=-1!==d.indexOf(c,"Relational"),b=g||e?"mapimages":h||-1<d.indexOf(c,"Tiled")||"wmts"===b?"maptiles":"mapimages"):b="scene service"===b?-1<d.indexOf(c,"Line")?"sceneweblayerline":-1<d.indexOf(c,"3DObject")?"sceneweblayermultipatch":-1<d.indexOf(c,"Point")?"sceneweblayerpoint":-1<d.indexOf(c,"IntegratedMesh")?"sceneweblayermesh":-1<d.indexOf(c,"PointCloud")?"sceneweblayerpointcloud":-1<d.indexOf(c,"Polygon")?"sceneweblayerpolygon":-1<d.indexOf(c,"Building")?
"sceneweblayerbuilding":"sceneweblayer":"image service"===b?-1<d.indexOf(c,"Elevation 3D Layer")?"elevationlayer":-1<d.indexOf(c,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"geoprocessing service"===b?-1<d.indexOf(c,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):b="web map"===b||"cityengine web scene"===
b?"maps":"web scene"===b?-1<d.indexOf(c,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<d.indexOf(c,
"ArcGIS Pro")||"explorer map"===b&&d.indexOf(c,"Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b||"netcdf"===b||"administrative report"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"sqlite geodatabase"===
b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"gml"===b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&-1<d.indexOf(c,"Explorer Mapping Application")||-1<d.indexOf(c,"Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===
b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"mobile scene package"===b?"mobilescenepackage":"tile package"===b||"compact tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===
b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"insights theme"===b?"insightstheme":"hub initiative"===b?"hubinitiative":"hub page"===b?"hubpage":"hub site application"===b?"hubsite":"hub event"===b?"hubevent":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"raster function template"===
b?"rasterprocessingtemplate":"vector tile package"===b?"vectortilepackage":"ortho mapping project"===b?"orthomappingproject":"ortho mapping template"===b?"orthomappingtemplate":"solution"===b?"solutions":"geopackage"===b?"geopackage":"deep learning package"===b?"deeplearningpackage":"real time analytic"===b?"realtimeanalytics":"big data analytic"===b?"bigdataanalytics":"feed"===b?"feed":"excalibur imagery project"===b?"excaliburimageryproject":"notebook"===b?"notebook":"storymap"===b?"storymap":"survey123 add in"===
b?"survey123addin":"mission"===b?"mission":"mission report"===b?"missionreport":"quickcapture project"===b?"quickcaptureproject":"pro report"===b?"proreport":"urban model"===b?"urbanmodel":"web experience"===b?"experiencebuilder":"web experience template"===b?"webexperiencetemplate":"workflow"===b?"workflow":"kernel gateway connection"===b?"kernelgatewayconnection":"insights script"===b?"insightsscript":"hub initiative template"===b?"hubinitiativetemplate":"storymap theme"===b?"storymaptheme":"maps";
return b?a.toUrl("../css/images/item_type_icons/"+b+"16.png"):null},_getIsPremiumContent:function(){var a=this.typeKeywords,b=!1;if(-1<d.indexOf(a,"Requires Subscription")||-1<d.indexOf(a,"Requires Credits"))b=!0;return b},_getPremiumIconUrl:function(){var b=this.typeKeywords,c;this.isPremiumContent&&(c=-1<d.indexOf(b,"Requires Credits")?"premiumcredits":"premiumitem");return c?a.toUrl("../css/images/item_type_icons/"+c+"16.png"):null},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=
(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),v=k([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(a){g.mixin(this,a);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?q.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):
"";this.largeThumbnail=this.largeThumbnail?q.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var b in this.listingProperties)this[b]&&(this.listingProperties[b]=this[b]);this.properties=this.properties||{systemRequirements:"",
termsAndConditions:"",version:"1.0"};this.screenshots=d.map(this.screenshots,g.hitch(this,function(a){return q.formatUrl(this.url+"/info/"+a)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?q.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):q.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return q.requestToTypedArray(this.commentsUrl,null,null,r,{item:this})},getVendor:function(){return this.vendor}}),
w=k([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(a){g.mixin(this,a);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=a.listing?new v(g.mixin(a.listing,{portal:this.portal})):null}}),A=k([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+
this.id;this.thumbnailUrl=q.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return q.request(this.url+"/users")},queryItems:function(a,b){a=q.formatQueryParams({},a,b);a.q="group:"+this.id+(a.q?" "+a.q:"");return this.portal.queryItems(a)},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}}),C=k([],{declaredClass:"esri.arcgis.PortalFolder",
constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return q.requestToTypedArray(this.url,null,null,y,{portal:this.portal,folderId:this.id})}}),z=k([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(a){g.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+
"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return t(q.request(this.url).then(g.hitch(this,function(a){return q.resultsToTypedArray(A,{portal:this.portal},a.groups)})))},getNotifications:function(){return q.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return q.requestToTypedArray(this.url+
"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return q.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,{num:1}).then(function(a){return a.folders}))},getItems:function(a){return t(this.getContent(a).then(function(a){return a.items}))},getItem:function(a){return q.request(this.portal.portalUrl+"content/items/"+a).then(g.hitch(this,function(a){return new y(g.mixin(a,{portal:this.portal}))}))},getContent:function(a,
b){var c=this.url.replace("/community/","/content/")+(a?"/"+a:"");return q.request(c,b).then(g.hitch(this,function(b){b.folders=q.resultsToTypedArray(C,{portal:this.portal},b.folders);b.items=q.resultsToTypedArray(y,{portal:this.portal,folderId:a},b.items);return b}))},getThumbnailUrl:function(a){var b=this.thumbnailUrl;b&&a&&(b+=(-1===b.indexOf("?")?"?":"\x26")+"w\x3d"+a);return b}});k={Portal:k([m],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(a){a=
g.isObject(a)?a:{url:a};this.registerConnectEvents();p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};a.self?(p.self=a.self,g.mixin(this,{url:a.url||n.getProtocolForWebResource()+"//"+(a.self.urlKey?a.self.urlKey+"."+a.self.customBaseUrl:a.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",a=a.self.user?this.signIn():this.init(this.url)):(a.url&&g.mixin(this,{url:a.url}),a=this.init(this.url));a.then(g.hitch(this,function(){this.emit("ready",
this);this.onLoad(this)}))},init:function(a,b){a=(a||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==a.indexOf("/sharing")?a+"/":a+"/sharing/rest/";return this._getSelf(this.portalUrl).then(g.hitch(this,function(a){p.self=g.mixin({},a);(a=a.user)&&b&&(p.currentToken=b&&b.token,p.loggedInUser=new z(g.mixin(a,{portal:this,credential:b})));p.self.id&&!1===p.self.canSearchPublic&&(p.extraQuery=" AND orgid:"+p.self.id);g.mixin(this,p.self);this.thumbnailUrl=q.formatUrl(this.portalUrl+"portals/self/resources/"+
this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),g.hitch(this,function(a){this.onError(a);throw a;}))},signIn:function(){var a=new e,b=g.hitch(this,function(){this._onSignIn().then(g.hitch(this,function(){a.resolve(p.loggedInUser)}),g.hitch(this,function(b){a.reject(b)}))});if(p&&p.self)p&&p.loggedInUser?setTimeout(function(){a.resolve(p.loggedInUser)},
0):b();else this.on("load",g.hitch(this,function(){b()}));return a},signOut:function(){p.loggedInUser.credential&&p.loggedInUser.credential.destroy();p.loggedInUser=null;p.options.disableIdentityLookup=!0;q.clearFieldsFromObject(p.self,this);p.self=null;return this.init(this.url)},getPortalUser:function(){return p.loggedInUser},addResource:function(a,b){return q.request(this.portalUrl+"portals/self/addResource",{key:a,text:b},{usePost:!0})},update:function(a){return q.request(this.portalUrl+"portals/self/update",
a,{usePost:!0})},queryGroups:function(a,b){return this._queryPortal(this.portalUrl+"community/groups",q.formatQueryParams({},a,b),A)},queryItems:function(a,b){return this._queryPortal(this.portalUrl+"search",q.formatQueryParams({},a,b),y)},queryListings:function(a){a=q.formatQueryParams({},a,!0);var b="";a.q&&-1<a.q.toLowerCase().indexOf("mylistings:true")?(a.q=a.q.toLowerCase().replace("mylistings:true",""),b="?mylistings\x3dtrue"):a.q||(a.q='""');return this._queryPortal(this.portalUrl+"content/listings"+
b,a,v)},queryCustomerList:function(a,b){a=q.formatQueryParams({},a,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",a)},getProvisions:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.purchases}))},getInterests:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.interests}))},getTrials:function(){return this.getCustomers().then(g.hitch(this,function(a){return a.trials}))},getCustomers:function(a){return q.request(this.portalUrl+
"portals/self/customers",{status:a||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(a){return a.purchases})},getMyInterests:function(){return this.getPurchases().then(function(a){return a.interests})},getPurchases:function(){return q.request(this.portalUrl+"portals/self/purchases").then(g.hitch(this,function(a){a.interests=d.map(a.interests,function(a){return g.mixin(a.provision,{listing:a.listing})});a.purchases=d.map(a.purchases,function(a){return g.mixin(a.provision,
{listing:a.listing})});a.trials=d.map(a.trials,function(a){return g.mixin(a.provision,{listing:a.listing})});a.interests=q.resultsToTypedArray(w,{portal:this},a.interests);a.trials=q.resultsToTypedArray(w,{portal:this},a.trials);a.purchases=q.resultsToTypedArray(w,{portal:this},a.purchases);return a}))},queryUsers:function(a,b){return this._queryPortal(this.portalUrl+"community/users",q.formatQueryParams({sortField:"username"},a,b),z)},_onSignIn:function(){p.options.disableIdentityLookup=!1;p.self=
null;return b.id.getCredential(this.portalUrl).then(g.hitch(this,"init",this.url)).then(function(){return p.loggedInUser},g.hitch(this,function(a){p.options.disableIdentityLookup=!0;this.onError(a);throw a;}))},_getSelf:function(a){var b;a+="portals/self";p.self?(b=new e,setTimeout(function(){b.resolve(p.self)},0)):b=q.request(a,{culture:f.locale});return b},_queryPortal:function(a,b,c){var d=g.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},b),h=["start","query","num","nextStart"];a=q.request(a,
d).then(g.hitch(this,function(a){a.results=q.resultsToTypedArray(c,{portal:this},a);a.queryParams=g.mixin({},d);a.nextQueryParams=g.mixin(d,{start:a.nextStart});return q.clearFieldsFromObject(h,a)}));a=g.delegate(a);a.queryParams=g.mixin({},d);a.nextQueryParams=e.when(a,function(a){return a.nextQueryParams});return t(a)}}),PortalFolder:C,PortalGroup:A,PortalItem:y,PortalUser:z,PortalComment:r,PortalRating:u,PortalUtil:q,PortalResult:t,PortalListing:v};c("extend-esri")&&g.mixin(g.getObject("arcgis",
!0,b),k);return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),function(k,g,f,e,d,c,a,b,h,l){function n(){var b=new f;
k("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(c,d,e,l,n,k){p=d;t=e;q=l;r=n;u=k;m=g(c,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(b,c){b="data:application/json;base64,"+a.base64FromJson(b.Web_Map_as_JSON);c([{value:{url:b}}]);return(new f).resolve()});return this.inherited(arguments)},_getPrintDefinition:function(a,
b){var c=this.inherited(arguments);this.returnJson&&this.mapName&&(c.title=this.mapName);console.log(c);return c},_createOperationalLayers:function(a,b){var c=this.inherited(arguments);if(b.__legendLayerId){var d=c.filter(function(a){return a.id===b.__legendLayerId})[0];c.splice(c.indexOf(d),1);c.push(d)}return c},_createFeatureCollection:function(a,b,c,d){var e=this.inherited(arguments);this.returnJson&&e&&("esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||
"esri.layers.GraphicsLayer"===a.declaredClass)&&e.featureCollection.layers.forEach(function(b){b.layerDefinition.name=a.arcgisProps&&a.arcgisProps.title||a._titleForLegend||a.name||a.id;b.layerDefinition.name=h.decodeXML(b.layerDefinition.name);b.layerDefinition.objectIdField="OBJECTID";b.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var c={OBJECTID:1},d=/[^\w]/g,e;b.featureSet.features.forEach(function(a,l){a.attributes=a.attributes||{};a.attributes.OBJECTID=l+1+"";a.attributes.__nameField||
(a.attributes.Name=h.decodeXML(a.attributes.Name||b.layerDefinition.name),e="Name");l=a.attributes.__fieldAliases;for(var f in a.attributes)if(0!==f.indexOf("__")){var g=f,n=a.attributes[f];"string"===typeof n&&(n=h.decodeXML(n));var m=l&&l[f];(m=m&&m.replace(d,"_"))&&void 0===a.attributes[m]&&(a.attributes[m]=n,g=m);a.attributes.__nameField===f&&(e=g);c[f]||(c[f]=1,b.layerDefinition.fields.push({name:g,type:"string"===typeof n?"esriFieldTypeString":"esriFieldTypeDouble"}))}});b.layerDefinition.displayField=
e});return e},_convertSvgSymbol:function(a){return a}});b.resolve()});return b.promise}var m,p,t,q,r,u,y,v={setPrintMapTaskUrl:function(a){y=a;l.registerCORS(a)},mapToURL:function(a,b,c,d){var h=v._getUrlForMap(a);if(h)return h;h=n().then(function(){return v._replaceDotDensityLayersWithPictureMarkers(a).then(function(h){return e(b&&u.legendToGraphicsLayer(b,a,c),function(b){b&&a.addLayer(b);return e(v._runPrintTask(a,c,b,d),function(c){b&&a.removeLayer(b);v._rollbackReplacing(a,h);var d=new f;setTimeout(function(){d.resolve(c.url)},
100);return d.promise})})})});v._putUrlToCache(a,h);return h},_replaceDotDensityLayersWithPictureMarkers:function(a){var b=[];for(i=0;i<a.graphicsLayerIds.length;i++)layer=a.getLayer(a.graphicsLayerIds[i]),layer.loaded&&layer.visible&&r.isDotDensity(layer)&&b.push(v._createGraphicsLayerFromDotDensityLayer(i,layer,a));return d(b)},_createGraphicsLayerFromDotDensityLayer:function(a,b,c){return r.createPictureMarkersFromDotDensityLayer(b,c.extent,c).then(function(d){if(!d)return null;var h=new q;d.map(function(a){h.add(a)});
c.addLayer(h,a);b.visible=!1;return{addedLayer:h,hiddenLayer:b}}).otherwise(function(a){console.log(a);return null})},_runPrintTask:function(a,b,d,h){function l(){var e=new m(y);e.returnJson=h&&h.replaceWithJson;e.mapName=h&&h.mapName;var l=new p;l.map=a;var f=new t;f.exportOptions={width:3.125*c.get(b,"width"),height:3.125*c.get(b,"height"),dpi:300};f.format="png32";f.showAttribution=!1;f.forceFeatureAttributes=!0;f.__legendLayerId=d&&d.id;l.template=f;return e.execute(l)}return e(l(),function(a){return a},
function(a){console.log(a);return e(l(),function(a){return a},function(a){console.log(a);return l()})})},_rollbackReplacing:function(a,b){b.forEach(function(b){b&&b.addedLayer&&a.removeLayer(b.addedLayer);b&&b.hiddenLayer&&(b.hiddenLayer.visible=!0)})},urlToSrc:function(a,c){return c&&c.saveImagesAsDataUrl?b.getRemoteImageDataUrl(a,{sizeLimit:1500}):a}},w,A=0;v.enableCaching=function(){w={}};v.clearCaching=function(){w=null};v._putUrlToCache=function(a,b){w&&b&&(a.__mapToImageUtilKey=A++,w[a.__mapToImageUtilKey]=
b)};v._getUrlForMap=function(a){return w&&w[a.__mapToImageUtilKey]};return v})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./CacheUtil","./ImageUtil","./UrlUtil"],function(k,g,f,e,d){var c=/^data:/i,a={getImageInfo:function(b,c,d){var h=d&&d.sizeLimit||1E5,l=f.get("ImageInfoUtil"),p=b+(d&&d.crossOrigin||"");l[p]||(l[p]=e.imageFromUrl(b,d).then(function(a){var b=e.imageToDataURL(a),c={dataUrl:b,contentType:e.getContentType(b),
width:a.width,height:a.height};setTimeout(function(){l[p]=c});return c}));return g(l[p],function(b){b=k.mixin({},b);c&&(b.filename=c&&c.replace(/\.\w+$/,".png").toLowerCase());return function(b){return g(a._processDataUrl(b,h),function(a){if(a&&a.dataUrl){var c=k.mixin({},b);c.dataUrl=a.dataUrl;c.width*=a.factor;c.height*=a.factor;return g(c)}return g(b)})}(b)})},ensureDataUrlForRemoveImage:function(b,d){return!b||c.test(b)?b:a.getRemoteImageDataUrl(b,d)},getRemoteImageDataUrl:function(b,c){function h(c,
d){return a.getImageInfo(c?p+"?"+b:b,null,{crossOrigin:d}).then(function(b){return g(a._processDataUrl(b,f),function(a){return a&&a.dataUrl||a})})}function e(){console.log("Failed to get data for URL: "+b);return b}if(!b)return b;var f=c&&c.sizeLimit||1E5,p=d.getProxyUrl();return h(!1,"anonymous").otherwise(function(){return h(!1,null)}).otherwise(function(){return p?h(!0,"anonymous"):e()}).otherwise(function(){return h(!0,null)}).otherwise(e)},_processDataUrl:function(a,c){var b=Math.max(a.width,
a.height);if(b<=c)return a.dataUrl;var d=c/b;return g(e.scaleImage(a.dataUrl,{factor:d}),function(a){return{dataUrl:a,factor:d}})}};return a})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],function(k,g,f){var e={base64DataToDataURL:function(d,c){if(/^data:image/.test(d))return d;c||(c=atob(d.substr(0,16)),c=e.getImageContentType(c));return"data:"+(c||"image/png")+";base64,"+d},getImageContentType:function(d){if("\u00ff\u00d8\u00ff"===
d.substr(0,3)&&"JFIF"===d.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===d.substr(0,8))return"image/png";if("GIF89a"===d.substr(0,6)||"GIF87a"===d.substr(0,6))return"image/gif"},base64DataFromDataURL:function(d){0==d.indexOf("data:")&&(d=d.substr(d.indexOf(",")+1));return d},getBase64DataIndex:function(d){d=0==d.indexOf("data:")?d.indexOf(";base64,"):-1;return 0<d?d+8:0},getContentType:function(d){var c=e.getBase64DataIndex(d);return c?d.substring(5,c-8):null},checkBase64FileSize:function(d,
c){return e.getBase64FileSize(d)<=c},getBase64FileSize:function(d){return.75*d.length},imageToDataURL:function(d,c){c=c||{};var a=document.createElement("canvas"),b=a.getContext("2d");a.width=c.width||d.width;a.height=c.height||d.height;var h=c.opacity;null!=h&&!isNaN(h)&&0<=h&&1>h&&(b.globalAlpha=+h,c.format="image/png");(h=c.pos)?b.drawImage(d,h.x||0,h.y||0):b.drawImage(d,0,0,a.width,a.height);return a.toDataURL(c.format)},imageFromUrl:function(d,c){var a=new k,b=new Image;0!==d.indexOf("data:")&&
c&&c.crossOrigin&&b.setAttribute("crossOrigin",c.crossOrigin);b.onload=function(){if(b.width&&b.height)a.resolve(b);else{var d=Error("Error of reading an image from URL.");c&&c.ignoreError?a.resolve(null):a.reject(d)}b.onload=b.onerror=null};b.onerror=function(d){c&&c.ignoreError?a.resolve(null):a.reject(d);b.onload=b.onerror=null};d=require.toUrl(d);/^http:/i.test(d)&&/^https/i.test(window.location.protocol)&&(d=f.toHttpsUrl(d));b.src=d;return a.promise},scaleImage:function(d,c){if("string"===typeof d)var a=
e.base64DataToDataURL(d),b=e.getContentType(a),a=e.imageFromUrl(a);return g(a||d).then(function(a){var d=1,h=a.width,f=a.height;if(c.factor)d=c.factor;else if(c.maxDim)d=c.maxDim/Math.max(h,f);else if(c.imageDim){var g=c.imageDim.w,k=c.imageDim.h;c.imageDim.preserveRatio?(d=Math.min(g/h,k/f),c.imageDim.reduceOnly&&1<d&&(d=1)):c.imageDim.reduceOnly?(h=Math.min(h,g),f=Math.min(f,k)):(h=g,f=k)}return e.imageToDataURL(a,{width:h*d,height:f*d,format:c.format||b,opacity:c.opacity})})},getImageViewType:function(d,
c){return 1E3<=c?(d/=c,.025>=Math.abs(d-2)?"360":2<d?"pano":null):null}};return e})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),function(k,
g,f,e,d,c,a,b,h){function l(a){return a&&a.spatialReference||a instanceof f&&a||a&&new f(a)||new f(d.WEB_MERCATOR_WKID)}function n(a,b){var c=[];try{for(var h=0;h<a.length;h++)c.push(d.toSpatialReference(a[h],b))}catch(C){console.log(C)}return(new g).resolve(c)}function m(a,b){function d(a){n.push(function(){return p(g,a,f,b)})}var l=a[0],f=e.getJsonType(l),g={outSR:b.wkid||b.toJson(),inSR:l.spatialReference.wkid||l.spatialReference.toJson()},n=[],m=0,k=[];1==a.length?k.push(l):a.forEach(function(a){var b=
c.getNumberOfPoints(a);m+=b;if(1E4<m){var h=[];k.length?(h.push(a),m=b):(k.push(a),m=0);d(k);k=h}else k.push(a)});k.length&&d(k);return h(n,{stopOnError:!0}).then(function(a){for(var b=a[0],c=1;c<a.length;c++)b=b.concat(a[c]);return b},function(a){console.log(a);return[]})}function p(a,c,d,h){a.geometries=t(c);return b.requestPublicFirst({url:r.getGeometryServiceUrl(),urlSuffix:"project"},{content:a}).then(function(a){return q(a.geometries,d,h)})}function t(a){var b=a.map(function(a){a=a.toJson();
delete a.spatialReference;return a});return{geometryType:e.getJsonType(a[0]),geometries:b}}function q(a,b,c){var d=e.getGeometryType(b),h={spatialReference:c.toJson()};return a.map(function(a){return new d(k.mixin(a,h))})}var r={},u;r.setGeometryServiceUrl=function(b){u=b;a.registerCORS(b)};r.getGeometryServiceUrl=function(a){return u};r.getSpatialReference=l;r.projectGeometries=function(a,b){var c=l(b);b=Array.isArray(a)?a:[a];if(!b.length)return(new g).resolve(a);var h={},e=b.slice(),f=0;b=b.filter(function(a,
b){if(a.spatialReference&&a.spatialReference.wkid!==c.wkid)return h[b]=f++,!0});return b.length?(d.testSpatialReferenceWKID(c)&&d.testSpatialReferenceWKID(b[0].spatialReference)?n(b,c):m(b,c)).then(function(b){e.forEach(function(a,c){void 0!==h[c]&&(e[c]=b[h[c]])});return Array.isArray(a)?e:e[0]}):(new g).resolve(a)};r.unionGeometries=function(a){var c=l(a[0].spatialReference);a={sr:c.wkid||c.toJson(),geometries:t(a)};return b.requestPublicFirst({url:r.getGeometryServiceUrl(),urlSuffix:"union"},{content:a}).then(function(a){return q([a.geometry],
a.geometryType,c)[0]})};return r})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],function(){var k={getNumberOfPoints:function(g){if(!g)return 0;Array.isArray(g)||(g=[g]);var f=0;g.forEach(function(e){f+=k.getGeometryPointCount(e.geometry||e)});return f},getGeometryPointCount:function(g){if(!g)return 0;var f=0,e=g.rings||g.paths;!e&&g.points&&(e=[g.points]);e?e.forEach(function(d){f+=d&&d.length||0}):f+="x"in g?1:2;return f}};return k})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(k,g,f){var e=k(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(d,c,a,b,h){this.requests=d;this.results=c;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=b;this.onProgress=h},execute:function(){this.isExecuting=!0;for(this.dfd=new g;this.tryStartNextRequest(););
return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;if(this.index==this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var d=this.requests[this.index++];this.executeCount++;var c=d.request;"function"===typeof c&&(c=c());var a=this,b=!0;f(c,function(c){a.processResult(c,d.key,c instanceof Error,b)},function(c){a.processResult(c,d.key,!0,b)});
b=!1;return!0},processResult:function(d,c,a,b){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=!1,this.onProgress&&this.onProgress(1),this.dfd.reject(d);else if(this.results[c]=d,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!b)for(;this.tryStartNextRequest(););}});return function(d,c){var a=!1,b=10,h=null;"boolean"===typeof c?a=c:c&&("number"===typeof c.chunkSize&&(b=c.chunkSize),"boolean"===typeof c.stopOnError&&(a=c.stopOnError),
"function"===typeof c.onProgress&&(h=c.onProgress));var l,f=[];if(Array.isArray(d))l=[],d.forEach(function(a,b){f.push({key:b,request:a})});else for(var g in d)l={},f.push({key:g,request:d[g]});return(new e(f,l,b,a,h)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],function(k){var g={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},
f={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},e={},d;for(d in f)e[f[d]]=!0;k.mixin(g,f);var c={};for(d in g)c[g[d]]=!0;g.isDynamic=function(a){return e[a]};g.isSupported=function(a){return c[a]};g.isTableLike=function(a){return a===g.AREA_DETAILS||a===g.LOCATOR_TABLE||a===g.COMPARISON_TABLE};g.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};g.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":
a};g.supportsMultiFeature=function(a){return a===g.COMPARISON_TABLE||a===g.LOCATOR_TABLE||a===g.ATTACHMENTS||a===g.AREA_DETAILS};g.supportsComparison=function(a){return a===g.ONE_VAR||a===g.AGE_PYRAMID||a===g.RELATED_VARS||a===g.COMPARISON_TABLE};g.isDynamicWithFiltering=function(a){return a===g.ONE_VAR||a===g.AGE_PYRAMID||a===g.RELATED_VARS};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector",
"../../../infographics/InfographicTypes"],function(k,g){var f={},e={process:function(d,c,a,b,h){var l=b;b=function(a,b,c){a&&l.apply(this,arguments)};h={processLevel:c,objJson:a,processFunc:b,ignoreComparisonCalculators:h&&h.ignoreComparisonCalculators};d!==c||"field"===d&&"field"===c?"document"===d?e._processTemplateJson(a,h):"section"===d?e._processSectionJson(a,h):"table"===d?e._processTableJson(a,h,null):"tableRow"===d?e._processTableDataObj(a,h,null):"field"===d&&e._processFieldInfo(a,h,null):
b(a)},_processTemplateJson:function(d,c){d.sectionsTables?d.sectionsTables.forEach(function(a){e._processTableJson(a,c)}):k.collectSectionJsons(d,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===c.processLevel&&c.processFunc(a)}}).forEach(function(a){e._processSectionJson(a,c)})},_processSectionJson:function(d,c){"section"===c.processLevel&&c.processFunc(d);d.stack&&d.stack.forEach(function(a){"sectionElement"===c.processLevel&&c.processFunc(a);"table"===a.id&&e._processTableJson(a,c)})},
_processTableJson:function(d,c,a){"table"===c.processLevel&&c.processFunc(d);d.data.data.forEach(function(b){"tableRow"===c.processLevel&&c.processFunc(b,a);e._processTableDataObj(b,c,a)});d.backgroundSectionJson&&e._processSectionJson(d.backgroundSectionJson,c);d.foregroundSectionJson&&e._processSectionJson(d.foregroundSectionJson,c);d.backgroundFloatingTablesSectionJson&&e._processSectionJson(d.backgroundFloatingTablesSectionJson,c);d.foregroundFloatingTablesSectionJson&&e._processSectionJson(d.foregroundFloatingTablesSectionJson,
c)},_processTableDataObj:function(d,c,a){if(d.fieldInfos)for(var b in d.fieldInfos)e._processFieldInfo(d.fieldInfos[b],c,a,"tableCell")},_processFieldInfo:function(d,c,a,b){if(d){"field"!==c.processLevel||c.skipVariables&&(d.hasVariable||d.script)||c.processFunc(d,a,b);d.triggerJson&&d.triggerJson.fieldInfo&&d.templateName!==d.triggerJson.fieldInfo.templateName&&e._processFieldInfo(d.triggerJson.fieldInfo,c,d,"trigger");d.dataDrillingPanelInfo&&e._processSectionJson(d.dataDrillingPanelInfo.sectionJson,
c);d.tooltipInfo&&d.tooltipInfo.fieldInfo&&e._processFieldInfo(d.tooltipInfo.fieldInfo,c,d,"fieldTooltip");d.linkFieldInfo&&e._processFieldInfo(d.linkFieldInfo,c,d,"linkFieldInfo");if(d.isRichText)for(var h in d.richTextJson.fieldInfos)e._processFieldInfo(d.richTextJson.fieldInfos[h],c,d,"richTextPart");d.isInfographic&&e._processInfographicFieldInfo(d,c);d.isChart&&e._processChartFieldInfo(d,c);d.isReportSection&&d.sectionJson&&e._processSectionJson(d.sectionJson,c)}},_processInfographicFieldInfo:function(d,
c){var a=d.infographicJson;switch(a.type){case g.STATIC:a.header&&e._processTableJson(a.header,c,d);a.variableTables&&a.variableTables.forEach(function(a){a.variable&&e._processFieldInfo(a.variable.fieldInfo,c,d,"staticInfographicVariable");a.description&&a.description.fieldInfo&&e._processFieldInfo(a.description.fieldInfo,c,d,"staticInfographicDescription")});if(a.dataDrilling)for(var b in a.dataDrilling){var h=a.dataDrilling[b];h&&h.sectionJson&&e._processSectionJson(h.sectionJson,c)}break;case g.AGE_PYRAMID:case g.TAPESTRY:case g.PRIZM5:case g.RELATED_VARS:case g.ONE_VAR:!c.ignoreComparisonCalculators&&
a.fieldInfos&&a.fieldInfos.forEach(function(a){e._processFieldInfo(a,c,d,"dynamicInfographicVariable")});break;case g.AREA_DETAILS:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,c,d);a.attributesSectionJson&&e._processSectionJson(a.attributesSectionJson,c,d);a.notesSectionJson&&e._processSectionJson(a.notesSectionJson,c,d);break;case g.LOCATOR_TABLE:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,c);e._processSectionJson(a.headerSectionJson,c);e._processSectionJson(a.dataSectionJson,
c);a.summarySectionJson&&e._processSectionJson(a.summarySectionJson,c);a.summaryFooterSectionJson&&e._processSectionJson(a.summaryFooterSectionJson,c);break;case g.COMPARISON_TABLE:a.titleSectionJson&&e._processSectionJson(a.titleSectionJson,c),c.ignoreComparisonCalculators||e._processSectionJson(a.dataSectionJson,c)}},_processChartFieldInfo:function(d,c){var a=d.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(a){e._processFieldInfo(a,c,d,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(a){e._processTableJson(a,
c,d,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(a){e._processTableJson(a,c,d,"floatingText")});c.ignoreComparisonCalculators&&d.chartJson.comparisonInfo&&(c=Object.assign({},c),c.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&e._processFieldInfo(a.tooltip.fieldInfo,c,d,"chartTooltip");d.chartJson.dataDrillingPanelInfo&&e._processSectionJson(d.chartJson.dataDrillingPanelInfo.sectionJson,c);d.chartJson.seriesItems.forEach(function(a){a.points.forEach(function(a){e._processFieldInfo(a.fieldInfo,
c,d,"chartPointField");a.iconFieldInfo&&e._processFieldInfo(a.iconFieldInfo,c,d,"chartPointIcon");a.captionFieldInfo&&e._processFieldInfo(a.captionFieldInfo,c,d,"chartPointCaption")})})}};f.DOCUMENT="document";f.SECTION="section";f.TABLE="table";f.SECTION_ELEMENT="sectionElement";f.TABLE_ROW="tableRow";f.FIELD="field";f.process=e.process;f.processTemplateFieldInfos=function(d,c,a){e.process("document","field",d,c,a)};f.processSectionFieldInfos=function(d,c,a){e.process("section","field",d,c,a)};f.processSectionElements=
function(d,c){e.process("document","sectionElement",d,c)};f.processTableFieldInfos=function(d,c,a){e.process("table","field",d,c,a)};f.processChartFieldInfos=function(d,c){d.seriesItems.forEach(function(a){a.points.forEach(function(a){a.fieldInfo&&c(a.fieldInfo,"series")})});var a=d.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText)for(var b in a.fieldInfo.richTextJson.fieldInfos)c(a.fieldInfo.richTextJson.fieldInfos[b],"tooltip");d.dataDrillingPanelInfo&&f.processSectionFieldInfos(d.dataDrillingPanelInfo.sectionJson,
function(a){c(a,"dataDrilling")})};f.processDataDrillingPanelInfos=function(d,c){f.processTemplateFieldInfos(d,function(a){if(a.isInfographic&&a.infographicJson.dataDrilling)for(var b in a.infographicJson.dataDrilling){var d=a.infographicJson.dataDrilling[b];d&&c(d)}else a.isChart&&a.chartJson.dataDrillingPanelInfo?c(a.chartJson.dataDrillingPanelInfo):a.dataDrillingPanelInfo&&c(a.dataDrillingPanelInfo)})};f.hasMultiFeatureChart=function(d){var c=!1;f.processTemplateFieldInfos(d,function(a){a.isChart&&
(c=c||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return c};f.hasComparisonInfographicTable=function(d){var c=!1;f.processTemplateFieldInfos(d,function(a){a.isInfographic&&(c=c||a.infographicJson&&a.infographicJson.type===g.COMPARISON_TABLE)});return c};f.isGraphicReport=function(d){return!!d.sectionsTables};f.hasDynamicColumns=function(d){return f._checkTableAttributes(d,function(c){return 0<c.dynamicColumns})};f.hasDynamicRows=function(d){return f._checkTableAttributes(d,function(c){return 0<
c.dynamicRows})};f._checkTableAttributes=function(d,c){var a;f.isGraphicReport(d)?f.processTemplateFieldInfos(d,function(b){b.isReportSection&&b.sectionJson&&b.sectionJson.stack&&b.sectionJson.stack.some(function(b){if("table"===b.id&&b.attributes&&c(b.attributes))return a=!0})}):a=f.collectSectionJsons(d).some(function(a){return a.stack&&a.stack.some(function(a){return"table"===a.id&&a.attributes&&c(a.attributes)})});return a};f.hasMultiFeatureSections=function(d){return f.isGraphicReport(d)?f.hasMultiFeatureChart(d)||
f.hasDynamicColumns(d)||f.hasComparisonInfographicTable(d):!1};f.calcNumberOfMaps=function(d,c){var a=0;f.collectSectionJsons(d).forEach(function(b){a+=f.calcNumberOfMapsInSectionJson(b,c)});return a};f.calcNumberOfMapsInSectionJson=function(d,c){var a=0;d.stack&&d.stack.forEach(function(b){b.isMap&&(c&&c(b),a++)});f.processSectionFieldInfos(d,function(b){b.isMap&&(c&&c(b.mapJson),a++)});return a};f.calcNumberOfMapsInTableJson=function(d,c){var a=0;f.processTableFieldInfos(d,function(b){b.isReportSection&&
(a+=f.calcNumberOfMapsInSectionJson(b.sectionJson,c))});return a};f.collectSectionJsons=k.collectSectionJsons;f.getParentBox=k.getParentBox;f.setParentBox=k.setParentBox;f.getParentStyle=k.getParentStyle;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],
function(k,g,f,e){var d={},c={provideParentInfo:function(b,c,d,e,f,g){a.collectStatistics(c);var h;a:{switch(f){case "floating":h=c.style.left+g.left;break a;case "page":h=a.calcX(c,d,e)+g.left;break a}h=void 0}a:{switch(f){case "floating":f=c.style.top+g.top;break a;case "page":f=a.calcY(c,d,e)+g.top;break a}f=void 0}b._parentBox={x:h,y:f,w:a.calcFullWidth(c,d,e),h:a.calcFullHeight(c,d,e)};c=e.field;d.style.fields=d.style.fields||{};d=(d.style.fields[c]=d.style.fields[c]||{}).backgroundColor;b._parentStyle=
{backgroundColor:d}},sanitize:function(b){a.sanitize(b)}},a={collectStatistics:function(b){if(!b._measureInfo){var c={},d={},h;b.data.columns.forEach(function(a){h&&(d[h.field]=a);h=a;c[a.field]=a});var e={},f={},g={},k={},u={},y={};b.data.data.forEach(function(c,d){b.data.columns.forEach(function(b,h){var l=u[h]||0,n=y[d]||0,m=a._getDataHeight(c,b.field);b=a._getFieldWidth(c,b);l+=m;n+=b;u[h]=l;y[d]=n;m=h+"_"+d;f[m]=l;e[m]=n;g[m]=e[h-1+"_"+d]||0;k[m]=f[h+"_"+(d-1)]||0})});b._measureInfo={xPositions:g,
yPositions:k,columnsHash:c,nextColumnHash:d}}},calcX:function(a,b,c){c=a.data.columns.indexOf(c);b=a.data.data.indexOf(b);return a._measureInfo.xPositions[c+"_"+b]||0},calcY:function(a,b,c){c=a.data.columns.indexOf(c);b=a.data.data.indexOf(b);return a._measureInfo.yPositions[c+"_"+b]||0},calcFullWidth:function(b,c,d){d=d.field;var h=a._getFieldWidth(c,b._measureInfo.columnsHash[d]),e=c.columnSpans&&c.columnSpans[d]||1;if(1<e)for(var l,f=0;f<e-1;f++)l=b._measureInfo.nextColumnHash[l?l.field:d],h+=
a._getFieldWidth(c,l);return h},_getFieldWidth:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b.field]=a.style.fields[b.field]||{}).width||b.style.width},calcFullHeight:function(b,c,d){d=d.field;var h=b.data.data.indexOf(c),e=a._getDataHeight(c,d);c=c.rowSpans&&c.rowSpans[d]||1;if(1<c)for(var l=h+1,f=0;f<c-1;f++)h=b.data.data[l++],e+=a._getDataHeight(h,d);return e},_getDataHeight:function(a,b){a.style.fields=a.style.fields||{};return(a.style.fields[b]=a.style.fields[b]||{}).height||
a.style.height},sanitize:function(a){delete a._measureInfo}},b={getIntersectingTableJsonsBehind:function(a,b,c,d,p){function h(a){var d=a.data.data[0].fieldInfos[a.data.columns[0].field];return f.isTextLikeCell(d)||f.isShapeCell(d)||f.isImageCell(d)?g.checkRectsIntersect([c,{x:a.style.left+b.left,y:a.style.top+b.top,w:e.getTableWidth(a),h:e.getTableHeight(a)}]):!1}function l(a){return g.checkRectsIntersect([c,{x:a.style.left+b.left,y:a.style.top+b.top,w:a.style.width,h:a.style.height}])}var n=[],
m=[];a.backgroundFloatingTablesSectionJson&&a.backgroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(-1===d||p||d!==b)if("table"===a.id&&h(a)||"img"===a.id&&l(a))-1===d||p||d>b?n.push(a):m.push(a)});a.foregroundFloatingTablesSectionJson&&a.foregroundFloatingTablesSectionJson.stack.forEach(function(a,b){if(p&&d===b)return!0;if("table"===a.id&&h(a)||"img"===a.id&&l(a))p&&d>b?n.push(a):m.push(a)});return{elementJsonsBehind:n,elementJsonsAbove:m}}};d.collectSectionJsons=function(a,b){b=b||
{};var c=[];if(!a)return[];if(a.sections)return a.sections;if(!a.sectionsTables)return[];b.processSectionJson=b.processSectionJson||function(){};a.sectionsTables.forEach(function(h,e){var l={addBackground:function(){!1!==b.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&c.push(h.backgroundSectionJson)},addBackgroundTables:function(l){var f=[];!1!==b.floatingTables&&h.backgroundFloatingTablesSectionJson&&h.backgroundFloatingTablesSectionJson.stack.forEach(function(c,e){"table"===
c.id&&d._processTableJson(c,f,"floating",a.documentOptions,b,h,e,!1)});l&&f.reverse();f.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});c=c.concat(f)},addInGridSections:function(){var l=[];d._processTableJson(h,l,"page",a.documentOptions,b,h);l.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"grid",index:a.__inGridIndex});delete a.__inGridIndex});c=c.concat(l)},addForegroundTables:function(l){var f=
[];!1!==b.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(c,e){"table"===c.id&&d._processTableJson(c,f,"floating",a.documentOptions,b,h,e,!0)});l&&f.reverse();f.forEach(function(a){b.processSectionJson(a,{pageIndex:e,source:"foreground",floatingIndex:a.__floatingIndex});delete a.__floatingIndex});c=c.concat(f)},addForeground:function(){!1!==b.backgroundForeground&&h.foregroundSectionJson&&h.foregroundSectionJson.stack&&c.push(h.foregroundSectionJson)}};
b.topFirst?(l.addForeground(),l.addForegroundTables(!0),l.addInGridSections(),l.addBackgroundTables(!0),l.addBackground()):(l.addBackground(),l.addBackgroundTables(),l.addInGridSections(),l.addForegroundTables(),l.addForeground())});return c};d._processTableJson=function(a,d,e,f,g,t,q,r){a.data.data.forEach(function(h,l){h.fieldInfos&&a.data.columns.forEach(function(n,m){var p=h.fieldInfos[n.field];if(p&&p.sectionJson&&p.sectionJson.stack){g.processFieldInfoFunc&&g.processFieldInfoFunc(p);(!1!==g.saveParentInfo||
g.populateWithFloatingElementsBehind)&&c.provideParentInfo(p.sectionJson,a,h,n,e,f);if(g.populateWithFloatingElementsBehind){n=function(a){a=k.clone(a);a.isContextFloatingElement=!0;a.style.left=a.style.left+f.left-u._parentBox.x;if("table"===a.id)a.style.top=a.style.top+f.top-u._parentBox.y;else if("img"===a.id||"map"===a.id)a.style.top=a.style.top+f.top-u._parentBox.y;return a};var u=k.clone(p.sectionJson),y;"page"===e?y=b.getIntersectingTableJsonsBehind(t,f,u._parentBox,-1,void 0):"floating"===
e&&(y=b.getIntersectingTableJsonsBehind(t,f,u._parentBox,q,r));p=y.elementJsonsBehind.map(n);y=y.elementJsonsAbove.map(n);u.stack=p.concat(u.stack);u.stack=u.stack.concat(y);d.push(u)}else d.push(p.sectionJson);y=d[d.length-1];"page"===e?y.__inGridIndex=l*a.data.columns.length+m:y.__floatingIndex=q}})});c.sanitize(a)};d.getParentBox=function(a){return a&&a._parentBox};d.setParentBox=function(a,b){a._parentBox=b};d.getParentStyle=function(a){return a&&a._parentStyle};return d})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],
function(){function k(c){return Array.isArray(c)?c:[c.x,c.y]}function g(c){return Array.isArray(c)?c:[c.x,c.y,c.x+c.w,c.y+c.h]}function f(c){return Array.isArray(c)?{x:c[0],y:c[1],w:c[2]-c[0],h:c[3]-c[1]}:c}function e(c){return[[c[0],c[1]],[c[2],c[1]],[c[2],c[3]],[c[0],c[3]],[c[0]+(c[2]-c[0])/2,c[1]+(c[3]-c[1])/2]]}var d={rotatePointAroundPoint:function(c,a,b){b=d.degToRad(b);var h=k(c),e=k(a);a=Math.cos(b)*(e[0]-h[0])-Math.sin(b)*(e[1]-h[1])+h[0];b=Math.sin(b)*(e[0]-h[0])+Math.cos(b)*(e[1]-h[1])+
h[1];return Array.isArray(c)?[a,b]:{x:a,y:b}},degToRad:function(c){return c*Math.PI/180},radToDeg:function(c){return 180*c/Math.PI},cosDeg:function(c){return Math.cos(d.degToRad(c))},sinDeg:function(c){return Math.sin(d.degToRad(c))},angleTo180_180Range:function(c){c=(c+180)%360;0>c&&(c=360+c);return c-180},angleTo0_360Range:function(c){c%=360;0>c&&(c=360+c);return c},calcVectorLength:function(c){var a=c[0]-c[2];c=c[1]-c[3];return Math.sqrt(a*a+c*c)},addPointToVector:function(c,a){a=k(a);c=c.slice();
c[0]+=a[0];c[1]+=a[1];c[2]+=a[0];c[3]+=a[1];return c},subtractPointFromVector:function(c,a){a=k(a);c=c.slice();c[0]-=a[0];c[1]-=a[1];c[2]-=a[0];c[3]-=a[1];return c},putVectorToOrigin:function(c){return d.subtractPointFromVector(c,[c[0],c[1]])},normalizeVector:function(c){c=d.putVectorToOrigin(c);var a=d.calcVectorLength(c);c[2]/=a;c[3]/=a;return c},calcDotProduct:function(c,a){c=d.putVectorToOrigin(c);a=d.putVectorToOrigin(a);return c[2]*a[2]+c[3]*a[3]},calcAngleBetweenVectors:function(c,a){c=d.normalizeVector(c);
a=d.normalizeVector(a);return Math.acos(d.calcDotProduct(c,a))},addLengthToVector:function(c,a){var b=d.calcVectorLength(c),h=[c[0],c[1]];c=d.normalizeVector(c);c[2]*=b+a;c[3]*=b+a;return d.addPointToVector(c,h)},rotateVectorAroundPoint:function(c,a,b){a=k(a);var h=d.rotatePointAroundPoint(a,[c[0],c[1]],b);c=d.rotatePointAroundPoint(a,[c[2],c[3]],b);return[h[0],h[1],c[0],c[1]]},toLineABC:function(c){var a=c[3]-c[1],b=c[0]-c[2];return[a,b,-a*c[0]-b*c[1]]},intersect2Lines:function(c,a){var b=d.toLineABC(c),
h=d.toLineABC(a);a=b[0];c=b[1];var b=b[2],e=h[0],f=h[1],h=h[2],g=a*f-e*c;return 0===g?null:[(h*c-b*f)/g,(e*b-a*h)/g]},intersectLineWithRect:function(c,a){function b(b,h){(b=d.intersect2Lines(c,[b[0],b[1],h[0],h[1]]))&&d.isPointInRect(a,b)&&p.push(b)}var h=e(a),l=h[0],f=h[1],g=h[2],h=h[3],p=[];b(l,f);b(f,g);b(g,h);b(h,l);if(2!==p.length)return null;l=[p[0][0],p[0][1],p[1][0],p[1][1]];return d.calcVectorLength(l)?l:null},isPointInRect:function(c,a){c=g(c);a=k(a);var b=c[2]-c[0],d=c[3]-c[1];return!(a[0]<
c[0]||a[0]>c[0]+b||a[1]<c[1]||a[1]>c[1]+d)},isRectInRect:function(c,a){return d.checkRectsIntersect([c,a])&&e(g(c)).every(function(b){return d.isPointInRect(a,b)})},checkRectsIntersect:function(c){c=c.map(g);return c.every(function(a){var b=e(a);return c.every(function(c){return a===c?!0:b.some(function(a){return d.isPointInRect(c,a)})||e(c).some(function(b){return d.isPointInRect(a,b)})})})},getRotatedRectBox:function(c,a){var b=!Array.isArray(c);c=g(c);var h=e(c);c=h[0];var l=h[1],n=h[2],m=h[3],
h=h[4];c=d.rotatePointAroundPoint(h,c,a);l=d.rotatePointAroundPoint(h,l,a);n=d.rotatePointAroundPoint(h,n,a);m=d.rotatePointAroundPoint(h,m,a);c=d.getPointsExtent([c,l,n,m]);return b?f(c):c},uniteRects:function(c){var a=!Array.isArray(c[0]);c=c.map(g);var b=[];c.forEach(function(a){b=b.concat(e(a))});c=d.getPointsExtent(b);return a?f(c):c},getPointsExtent:function(c){var a=!Array.isArray(c[0]),b=Infinity,d=-Infinity,e=Infinity,g=-Infinity;c.forEach(function(a){a=k(a);b=Math.min(b,a[0]);d=Math.max(d,
a[0]);e=Math.min(e,a[1]);g=Math.max(g,a[1])});c=[b,e,d,g];return a?f(c):c}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e,d){var c={getFieldCellValue:function(a){return a.gridData&&a.gridData[a.column.field]},
setFieldCellContent:function(a,b){a.set("value",b);a.gridData[a.column.field]=b},clearFieldInfo:function(a,b){a.fieldInfos&&delete a.fieldInfos[b];a[b]="";c.setNumericDataValue(void 0,a,b)},getNumericCellValue:function(a){return c.getNumericDataValue(a.gridData,a.column.field)},setNumericCellValue:function(a,b){return c.setNumericDataValue(b,a.gridData,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,b,c){b[c+"_numeric"]=a},getRenderedValue:function(a,
b,h){var l={parentGrid:a,gridData:b,column:h};a=a._getCellRenderer().getRenderedContent(l);if(a.isUnavailableData)return{};var f;"number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(l=e.parsePercentOrCurrency(a.formattedValue,d.getCurrencyFormat()),isNaN(l)||(f=l)):f=a.value;"number"!==typeof f&&(f=c.getNumericDataValue(b,h.field));return{numericValue:f,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.gridData[a.column.field]&&!c.getFieldInfo(a)},
hasSpans:function(a){return c.getColumnSpan(a)||c.getRowSpan(a)},getColumnSpan:function(a){return a&&a.gridData&&a.gridData.columnSpans&&a.gridData.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.gridData&&a.gridData.rowSpans&&a.gridData.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.gridData&&a.column&&a.gridData.fieldInfos&&
a.gridData.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return c.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.gridData&&(a.gridData.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){c.setFieldInfo(a,c.getFieldInfo(a)||{});return c.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:c.getConditionalFormatting(a),dataDrilling:c.getDataDrilling(a),tooltipInfo:c.getTooltipInfo(a)}},setPreservableSettings:function(a,b){c.setConditionalFormatting(a,
b&&b.triggerJson);c.setDataDrilling(a,b&&b.dataDrilling);c.setTooltipInfo(a,b&&b.tooltipInfo)},getCellStyle:function(a,b){if(!a||!a.gridData||!a.column)return null;var d=a.gridData.style&&a.gridData.style.fields&&a.gridData.style.fields[a.column.field];!d&&b&&(d={},c.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.gridData&&a.column?a.gridData.themeStyle&&a.gridData.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,b){var c=a.gridData.style=a.gridData.style||{};
c.fields=c.fields||{};c.fields[a.column.field]=b},updateCellStyle:function(a,b){a=c.getCellStyle(a,!0);k.mixin(a,b)},copyFieldStyle:function(a,b,d){a=c.getCellStyle(a);b=c.getCellStyle(b,!0);for(var h in d)void 0!==a[h]&&(b[h]=a[h])},getFieldCellUrl:function(a){if(a.gridData&&a.gridData.urls&&a.column)return a.gridData.urls[a.column.field]},setFieldCellUrl:function(a,b){a.gridData&&a.column&&(a.gridData.urls=a.gridData.urls||{},void 0===b?delete a.gridData.urls[a.column.field]:a.gridData.urls[a.column.field]=
b)},getConditionalFormatting:function(a){return(a=c._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,b){var d=c.getFieldInfo(a);d.triggerJson=null;if(b){if(a=c.isVariableLikeFieldCell(a))b.fieldInfo=d;b.fieldInfo===d&&(b.fieldInfo=k.clone(b.fieldInfo),delete b.fieldInfo.triggerJson,a&&(delete b.fieldInfo.tooltipInfo,delete b.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=b},getDataDrilling:function(a){return(a=c.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,
b){if(a=c.getSourceFieldInfo(a))a.dataDrillingPanelInfo=b},getTooltipInfo:function(a){return(a=c.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,b){if(a=c.getSourceFieldInfo(a))a.tooltipInfo=b},getSourceFieldInfo:function(a){var b=c._toFieldInfo(a);a=c.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},_toFieldInfo:function(a){return a?a.gridData?c.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isReportSection)},
isInfographicCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=c._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=c._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=
c._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!c._toFieldInfo(a)||c.isRichTextCell(a)||c.isVariableLikeFieldCell(a)||c.isSpecialFieldCell(a)},isRichTextCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=c._toFieldInfo(a);
return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name)},isVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=c._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=c._toFieldInfo(a))?a.hasVariable&&f.isNumericField(a)||a.script&&!a.script.isUneditableScript&&"String"!==a.script.type||
"headers.CHART_POINT_VALUE"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return c.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var b=c._toFieldInfo(a);return b&&("headers.CHART_POINT_VALUE"===b.name||!c.isVariableLikeFieldCell(a)&&g.hasField(b.name))}};return c})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],
function(){function k(d){return("string"===typeof d?d:d&&d.type)||""}var g={isNumericField:function(d){switch(k(d)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(d){return"esriFieldTypeString"==k(d)||!1},isDateField:function(d){return"esriFieldTypeDate"==k(d)||!1}},f=/DISTANCE$/;g.isDistanceField=function(d){return f.test(k(d))};var e=/^(SHAPE__Area|SHAPE__Length)$/i;g.canShowField=
function(d,c){if(!d||!d.name||"esriFieldTypeOID"===d.type)return!1;if("esriFieldTypeDate"===d.type)return"d";var a=g.isNumericField(d)||g.isStringField(d);if("f"===a&&!1===d.editable&&e.test(d.name))return null;void 0===c&&(c=/^(OBJECTID|OID|FID)$/i);return c&&c.test(d.name)?!1:!0===a?"s":a};g.createFieldInfo=function(d){var c=g.canShowField(d);d={fieldName:d.name,label:d.alias||d.name,isEditable:!!d.editable,visible:!!c};switch(c){case "i":d.format={places:0,digitSeparator:!0};break;case "f":d.format=
{digitSeparator:!0};break;case "s":d.stringFieldOption="textbox"}return d};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],function(k,g,f,e,d){var c={createTable:function(a){var b=a.numColumns,c=a.numRows,d=a.width,e=
a.widths,f=a.style,p=a.attributes&&a.attributes.fixedColumns,t=a.attributes&&a.attributes.dynamicColumns;if(d)if(e)e=e.map(function(a){return d*Number(a.replace("%",""))/100});else for(var q=d/b,e=[],r=0;r<b;r++)e.push(q);if(e)d||isNaN(Number(e[0]))||(d=0,e.forEach(function(a){d+=a}));else for(q=Number(100/b).toFixed(3)+"%",e=[],r=0;r<b;r++)e.push(q);q=[];for(r=0;r<b;r++)q.push({field:"field"+r,style:{width:e[r]}});for(var e=[],u=!0,y=a.height?a.height/c:a.rowHeight||15.07,v=0;v<c;v++){for(var w=
{style:{height:y,fields:{}},fieldInfos:{}},r=0;r<b;r++){var A="field"+r;!1!==a.useDefaultTheme&&(w.style.fields[A]=k.mixin({horizontalAlign:0===r?"left":"right",overrideStyle:0===v?1<c?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:u?"AlternatingRow":"Default"},a.cellParams));t&&r>=p&&0===v&&(w.fieldInfos[A]=g.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(w,A,v,r,a)}e.push(w);u=!u}return{id:"table",attributes:k.mixin({},a.attributes),style:k.mixin({width:d||
772.33},f),data:{columns:q,data:e}}},createSingleCellTable:function(a){a=a||{};var b=c.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});c.modifyTableJson(b,0,0,a);return b},modifyTableJson:function(a,b,c,d){b=a.data.data[b];c=a.data.columns[c];var h=c.field;d.text&&(b[h]=d.text);d.fieldInfo&&(b.fieldInfos[h]=d.fieldInfo);d.cellStyle&&(b.style.fields[h]=d.cellStyle);d.columnSpan&&(b.columnSpans=b.columnSpans||{},b.columnSpans[h]=d.columnSpan);d.rowSpan&&(b.rowSpans=
b.rowSpans||{},b.rowSpans[h]=d.rowSpan);b.themeStyle=d.themeStyle;d.width&&(a.style.width=d.width,c.style.width=d.width);d.height&&(b.style.height=d.height);void 0!==d.left&&(a.style.left=d.left);void 0!==d.top&&(a.style.top=d.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var b=0;a.data.data.forEach(function(a){b+=a.style?a.style.height:0});return b},calcTableBox:function(a){return{x:a.style.left||0,y:a.style.top||0,w:c.getTableWidth(a),h:c.getTableHeight(a)}},createDetailsSection:function(a){return{type:d.DETAILS,
stack:[c.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,b){return{type:d.DETAILS,stack:[function(){var d=c.createTable(k.mixin({numColumns:2,numRows:a.length+1},b));d.data.data.forEach(function(b,c){0===c?b.field0=a[0].hasVariable?a[0].fieldCategory:"":(c=a[c-1],b.field0=c.script?c.script.alias:c.hasVariable?c.alias:f.getFieldLabel(c.name)||"",b.fieldInfos.field1=c)});c.provideSpaceAfter(d);return d}()]}},createDetailsSectionForFieldInfoGroups:function(a,b){return{type:d.DETAILS,stack:[function(){var d=
c.createTable(k.mixin({numColumns:a.length+1,numRows:a[0].length+1},b));d.data.data.forEach(function(b,c){d.data.columns.forEach(function(d,h){0!==h&&(0===c?b[d.field]=a[h-1][0].fieldCategory||"":(h=a[h-1][c-1],b.field0=b.field0||(h.script?h.script.alias:h.alias),b.fieldInfos[d.field]=h))})});c.provideSpaceAfter(d);return d}()]}},provideSpaceAfter:function(a,b){a.style.spaceAfter=Math.max(b||0,90-15.07*a.data.data.length)},applyDefaultStyling:function(a){var b=!0;a.data.data.forEach(function(c,d){a.data.columns.forEach(function(a){c.style.fields[a.field].overrideStyle=
0===d?"TableHeader":b?"AlternatingRow":void 0});b=!b})},setTableHeaderStyle:function(a){if(a.style)for(var b in a.style.fields)(a.style.fields[b]=a.style.fields[b]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return a.isGrid?!a.columns||!a.columns.length||!a.store||!a.store.data.length:a.data?!a.data.columns||!a.data.columns.length||!a.data.data||!a.data.data.length:!1},isSingleCelledTable:function(a){return a.isGrid?a.store&&1===a.store.data.length&&a.columns&&
1===a.columns.length:a.data?1===a.data.columns.length&&1===a.data.data.length:!1},isMultiDataTable:function(a){return a.isGrid?1<a.columns.length||2<a.store.data.length:a.data?1<a.data.columns.length||2<a.data.data.length:!1},getTableSubtype:function(a){if(!c.isSingleCelledTable(a))return null;a=c.getFirstFieldInfo(a);return e.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},getFirstFieldInfo:function(a){return a.isGrid?a.store.data[0].fieldInfos&&
a.store.data[0].fieldInfos[a.columns[0].field]:a.data.data[0].fieldInfos&&a.data.data[0].fieldInfos[a.data.columns[0].field]},tableJsonHasInfographic:function(a){return!!c.getTableJsonInfographic(a)},getTableJsonInfographic:function(a){var b;a.data.data.some(function(a){if(a.fieldInfos)for(var c in a.fieldInfos){var d=a.fieldInfos[c];if(d&&d.isInfographic)return b=d.infographicJson,!0}});return b},getTableJsonFirstFieldInfo:function(a){return a.data.data[0].fieldInfos[a.data.columns[0].field]},tableJsonHasChart:function(a){return a.data.data.some(function(a){if(a.fieldInfos)for(var b in a.fieldInfos){var c=
a.fieldInfos[b];if(c&&c.isChart)return!0}})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils","dojo/i18n!esri/nls/jsapi"],function(k,g){function f(a){Object.keys(a).forEach(function(b){var c=a[b];void 0!==c&&null!==c||delete a[b]})}g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;var e={NUMBER:"n/",createFieldInfoFromCalculator:function(a,c,d){if(!a)return null;a=(c="function"===typeof a.getDescriptionWithType?
a:null)?c.variable:a;var b=d&&d.format,h=d&&d.autoformatCurrency,e=d&&d.additionalText,l=d&&d.calculatorName,g=d&&d.defaultDistanceUnits;d=d&&d.summaryType;var r=c&&c.getToggleGroup&&c.getToggleGroup();d={alias:c?c.getDescriptionWithType()||c.getAliasWithType():a.description||a.alias,hasVariable:!0,variableID:a.id,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,statefulName:r?r.value:"n/"+a.fullName,summaryType:d};c=c?c.getCalcType().charAt(0):"n";d.name=k.name.createFieldNameFromSource(a,
c);b?k.format.setFieldInfoFormat(d,b):(d.decimals=a.precision,d.showCurrency=!(!h||"n"!==c||!a.units||"CURRENCY"!==a.units.toUpperCase()),d.showPercent=!d.showCurrency&&("p"===c||"n"===c&&a.units&&"PCT"===a.units.toUpperCase()),d.useThousandsSeparator=!0);a.isWebMap&&(d.isWebMap=!0,d.webMapFieldName=a.fieldName,d.webMapField=a.field,d.webMapId=a.webMapId,d.layerUrl=a.layerUrl,!b&&a.fieldInfo&&a.fieldInfo.format&&(d.decimals=a.fieldInfo.format.places,d.useThousandsSeparator=!1!==a.fieldInfo.format.digitSeparator));
a.customDataCollection&&(d.isCustomDataCollection=!0,d.customDataCollectionId=a.customDataCollection.id,d.customDataCollectionUrl=a.customDataCollection.url,d.customDataCollectionPortalUrl=a.customDataCollection.portalUrl);a.isSiteAttribute&&(d.isSiteAttribute=!0,d.attribute=a.attribute,d.type=a.attribute.type,!b&&0<a.attribute.places&&(d.decimals=a.attribute.places));a.isDataLayerAttribute&&(d.isDataLayerAttribute=!0,d.layerID=a.layerID,d.layerUrl=a.layerUrl,d.layerName=a.layerName,d.attribute=a.attribute,
d.type=a.attribute.type,!b&&0<a.attribute.decimals&&(d.decimals=a.attribute.decimals),"DISTANCE"===a.attribute.name&&(d.units=a.attribute.units||g||"esriMiles"));"string"===typeof e&&(d.additionalText=e);d.usedFields=a.usedFields;d.expressionText=a.expressionText;k.name.provideQualifiedFieldInfoTemplateName(d,l);f(d);return d},fieldInfoToVariable:function(a){if(!a.hasVariable)return null;var b={id:a.variableID,fullName:a.fullName,fieldCategory:a.fieldCategory,vintage:a.vintage,type:a.type,precision:a.decimals,
usedFields:a.usedFields,expressionText:a.expressionText};a.isWebMap&&(b.isWebMap=!0,b.fieldName=a.webMapFieldName,b.field=a.webMapField,b.webMapId=a.webMapId,b.layerUrl=a.layerUrl);a.isSiteAttribute&&(b.isSiteAttribute=!0,b.attribute=a.attribute);return b},createFieldInfoFromScript:function(a,c){var b=c&&c.format,d=c&&c.additionalText;c=c&&c.calculatorName;a=a||{};a.name=a.name||k.name.DEFAULT_SCRIPT_NAME;a.alias=a.alias||g.scriptNameDefault;a.decimals=Number(a.decimals)||0;var h={};h.name=k.name.createFieldNameFromScript(a);
k.name.provideQualifiedFieldInfoTemplateName(h,c);h.script=a;b?k.format.setFieldInfoFormat(h,b):(h.decimals=Number(a.decimals),h.showCurrency=!1,h.showPercent=!1,h.useThousandsSeparator=!0);"string"===typeof d&&(h.additionalText=d);f(h);return h},createFieldInfoFromImage:function(a,c){return{isImage:!0,imageJson:a,triggerJson:c}},createFieldInfoFromMap:function(a){return{isMap:!0,mapJson:a}},createFieldInfoFromShape:function(a){return{isShape:!0,shapeJson:a}},createFieldInfoFromChart:function(a){return{isChart:!0,
chartJson:a}},createFieldInfoFromInfographic:function(a){return{isInfographic:!0,infographicJson:a}},createFieldInfoFromSection:function(a){return{isReportSection:!0,sectionJson:a}},createFieldInfoFromMissingVariable:function(a,c){return{name:a&&a.substr(a.indexOf(".")+1),templateName:a,isMissing:!0,alias:c}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},d=/^\[\w+\]$/,c=/\[\w+\]/;e.createFieldInfoFromLabel=function(a,h){if("string"!==typeof a)return null;a=a.trim();
var b=d.test(a);if(!h||b){if(!b)return null;a=a.replace(/\[|\]/g,"").toUpperCase();return e.createFieldInfoFromSpecialFieldName(k.fields.uiToTemplate(a))}return c.test(a)?k.richText.createFieldInfoFromRenderedXMLString(a):null};e.createFieldInfoFromSpecialFieldName=function(a,c){if("string"!==typeof a)return null;var b;a=k.fields.trimTemplateHeaderName(a);a=a.toUpperCase();"GROUPCOUNT"===a?b={name:k.fields.GROUPCOUNT_FIELD_NAME,alias:k.fields.GROUPCOUNT_FIELD_ALIAS}:"CURRDATE"===a?b={name:k.fields.DATE_FIELD_NAME,
alias:k.fields.DATE_FIELD_ALIAS,format:c||k.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===a?b={name:k.fields.qualifyTemplateHeaderName(k.fields.SITENOTES_FIELD_NAME),alias:k.fields.SITENOTES_FIELD_ALIAS,type:"esriFieldTypeString"}:0===a.indexOf("SITENOTE")&&(b=k.fields.getSiteNoteFieldNameAt(a.replace("SITENOTE","")),b={name:k.fields.qualifyTemplateHeaderName(b),alias:b,type:"esriFieldTypeString"});if(b)return b;var d=k.fields.templateToUIHeader(a);d?(b={name:k.fields.qualifyTemplateHeaderName(a),
alias:d,type:"esriFieldTypeString"},k.fields.isChartAttribute(a)&&(b.isChartAttribute=!0),"CHART_POINT_VALUE"===a&&(b.type="esriFieldTypeDouble",b.decimals=0,b.useThousandsSeparator=!0,c&&k.format.setFieldInfoFormat(b,c))):(c=k.fields.templateToUIReportVar(a))&&(b={name:c,alias:c,type:"esriFieldTypeString"});b&&(b.templateName=b.name);return b};var a=/_P$/i;e.isFieldInfoInPercentState=function(b){return b?b.statefulName&&("p"===b.statefulName.charAt(0)||a.test(b.statefulName))||b.alias&&-1!==b.alias.indexOf("(%)"):
!1};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(k,g){var f={},e;f.init=function(){if(e)return e.promise;e=new k;g("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(d,c,a,b,h,l){f.builder=d;f.format=c;f.name=a;f.renderer=b;f.richText=h;f.fields=l;e.resolve()});return e.promise};
f.init();return f})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",
INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/map/WebMapJsonUtil ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y){return k(null,{reportDataToServerData:function(a){return null},reportDataFromServerData:function(k,w){function v(a){z.some(function(a){return"metadata.xml"===a.name})||z.push({name:"metadata.xml",data:u.recoverMetadataFromAreaData(H.areaData,a)})}function C(a){k.sites=[];var b={},c=1;H.areaData.forEach(function(a){a=a.headers&&a.headers.data||{};var d=a.SITE_NAME||a.STORE_NAME,h=a.STORE_ID||"unclassified."+c++;"number"!==typeof b[h]&&(b[h]=k.sites.length,
k.sites.push({locationName:d,name:null,shortName:null,description:null,address:a.STORE_ADDR,latitude:a.STORE_LAT,longitude:a.STORE_LONG,areas:[]}));k.sites[b[h]].areas.push({locationName:d,name:a.AREA_DESC?d+" ("+a.AREA_DESC+")":d,shortName:a.AREA_DESC,description:a.AREA_DESC2,address:a.STORE_ADDR,latitude:a.STORE_LAT,longitude:a.STORE_LONG,feature:{attributes:{STORE_ID:a.STORE_ID,AREA_ID:a.AREA_ID}}})});k.sites.forEach(function(a){var b=!1;a.shortName=a.areas.map(function(a){return b=!!a.shortName,
a.shortName}).join(", ");b&&(a.name=a.locationName+" ("+a.shortName+")");var c=a.areas.map(function(a){return a.description});a.description=1<c.length?c[0]===c[1]?c[0]:c.join(", "):c[0]||""});H.reportInfo.sites&&H.reportInfo.sites.forEach(function(b,c){if(c=k.sites[c])c.attributes=b.attributes,c.notes=b.notes,c.images=b.images,c.images&&c.images.forEach(function(b){function c(b){return(b=a[b])&&f.base64DataToDataURL(b,"image/png")}b.url=c(b.url);b.thumbnail=c(b.thumbnail)})})}y.reset();var z=k.reportItem.resources,
D;if(!Array.isArray(z)){var F=z,z=[],B;for(B in F)z.push({name:B,data:F[B]})}z.forEach(function(a){"theme.css"===a.name&&(a.name="theme.css.txt")});var E=z.filter(function(a){return"report.xml"===a.name})[0],G=z.filter(function(a){return"data.xml"===a.name})[0],H;(function(){var a=/.*\.(png|jpg|jpeg)$/i,b=/(.*\.(json)$)|(^maps\/.*\.(png)$)/i,c={},h={};z.forEach(function(d){a.test(d.name)&&(c[d.name]=d.data,"logo.png"===d.name&&(D=f.base64DataToDataURL(d.data,"image/png")));b.test(d.name)&&(-1!==d.data.indexOf("operationalLayers")?
h[d.name]=m.processWebMapJson(d.name,d.data):h[d.name]=d.data)});var e={},l=E.data.match(/<section[^<>]*query=("|').+?("|').*?>/g);l&&l.forEach(function(a){a=a.replace(/.*?query=("|')/,"");a=a.replace(/("|').*/,"");e[a]=1});var g={};H=d.parse(G.data,function(a,b,d){return(a=h[b])?g[d]=a:c[b]||b});v({map:g,locator:e});C(c)})();var J=new r;return g(function(a){var b=E.data.indexOf("\x3csection"),c={isGraphicReport:E.data.indexOf("\x3ctable")<b,isMultiFeature:!1,defaultComparisonZoom:null,type:l.STANDARD,
portalJson:{files:z}};return g(n.provideEditorJson(c,{variableProvider:a}),function(){c.templateJson=q.deserialize(c.templateJson);c.isMultiFeature=p.hasMultiFeatureSections(c.templateJson);delete c.portalJson;return c})}(J),function(d){c.parseSites(k);var f=a.areasFromJson(k.analysisAreas),l=k.combinedAreasInfo&&a.combinedAreasInfoFromJson(k.combinedAreasInfo)||{},n=k.attachmentsProvider&&t.getAttachmentsStoreFromJson(k.attachmentsProvider),m={isMultiFeature:d.isMultiFeature&&1<f.length,reportTitle:null,
templateJson:d.templateJson,reportObject:d,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:f,combinedAreasInfo:l,reverseAnalysisAreasOnMap:!0,attachmentsStore:n,templateVariableProvider:J,customLogo:D,config:{}};c.populateCombinedAreasInfo(m.combinedAreasInfo,m.analysisAreas);b.provideAreasIndexes(m);h.setGeoenrichmentUrl(null);w&&w.forEach(function(a){switch(a){case "Maps":h.addCapability("FormatInfographicsMaps");
break;case "ImageUrls":h.addCapability("FormatInfographicsImageUrls")}});return g(e.applyRunReportAndGetDataResults(H,m)).then(function(){return m})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u){return{runReportAndGetData:function(a,c){return g([b.getCustomReportByID(a),c]).then(function(b){var c=b[0];b=b[1];return(new d).execute({portalUrl:a.portalUrl,analysisAreas:a.analysisAreas,countryID:a.countryID,hierarchy:a.hierarchy,report:{reportID:c.reportID,portalUrl:c.templateData.getPortalUrl(!0),modified:c.modified,isMultiFeature:c.isMultiFeature},attachmentsStore:b,cacheResult:r.runReportTask.cacheResult}).then(function(a){return{taskIDs:a.taskIDs,
areaData:a.areaData,reportInfo:a.reportInfo}},function(b){a.fieldData.errors.push(b);return(new f).reject(b)})})},runReportFromVariables:function(b){var d={};b.variables.fullNames.forEach(function(a){var b=m.createFieldNameFromSource(a);d[a.substr(a.indexOf(".")+1)]=b});return(new e).enrichAreas({portalUrl:b.portalUrl,analysisAreas:b.analysisAreas,countryID:b.countryID,hierarchy:b.hierarchy,fields:a.convertForEnrich(b.variables),comparisonLevels:b.comparisonLevels||q.getDefaultLevels()}).then(function(a){var h=
b.analysisAreas.map(function(){return{}});c.addEnrichFeatures(a,d,m.DATA_COLLECTIONS_CALCULATOR_NAME,h);return{areaData:h}},function(a){b.fieldData.errors.push(a);return(new f).reject(a)})},applyRunReportAndGetDataResults:function(a,b){if(a&&a.areaData){var c=b.templateJson;b.fieldData.specialTradeAreaCalculatorName=c.metadata&&c.metadata.specialTradeAreaCalculatorName;delete c.metadata;b.fieldData.runReportTaskIDs=a.taskIDs;b.fieldData.areaData=a.areaData;(b.fieldData.reportInfo=a.reportInfo)&&this._populateReportDataFromReportInfo(a.reportInfo,
b);this._reportDataFromAreas(b.analysisAreas,b.fieldData.areaData);this._reportDataFromReport(b.reportObject,b.fieldData,b.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(b)}},_populateReportDataFromReportInfo:function(a,b){b.reportTitle=b.reportObject.title=b.reportTitle||a.Title||"";a.country&&!u.getCurrentCountry()&&(u.setCountry(a.country),u.setHierarchyID(null));a.stdLevels&&!u.getGeographiesModel()&&u.setGeographiesModel(new h({levels:a.stdLevels}));if(r.updateVariableInfoFromDataXml||
r.isPlayerOnServer){var c=a.variables;p.processTemplateFieldInfos(b.templateJson,function(a){if(a.hasVariable&&a.variableID&&a.templateName){var d=a.templateName.indexOf("."),h=a.templateName.substr(0,d),d=a.templateName.substr(d+1);(h=c[h]&&c[h][d])&&h.alias&&(a.alias=h.alias,a=b.templateVariableProvider.get(a.templateName))&&(a.alias=h.alias,h.vintage&&(a.vintage=h.vintage),h.source&&(a.source=h.source))}})}a=t.collectVariablesStats(b.templateJson);if(a=b.templateVariableProvider.getVariablesDataVintageDescription({usedVariablesCache:a}))b.reportObject.dataVintageDescription=
a},_populateReportDataFromAttachmentsStore:function(a){var b=a.attachmentsStore,d=[];a.analysisAreas.forEach(function(h,e){b.supportsMultipleAreas&&b.setCurrentAnalysisAreaIndex(e);d.push(k(b.getNotes(),function(b){if(b&&b.length){var d={attributes:{}};d.attributes[n.SITENOTES_FIELD_NAME]=b.map(function(a){return a.text}).join("\x3cbr/\x3e\x3cbr/\x3e");b.forEach(function(a,b){d.attributes[n.getSiteNoteFieldNameAt(b+1)]=a.text});(b=a.fieldData.areaData[e])&&c.addFeatureAttributesCalculator(d,b)}}));
d.push(k(b.getAttributes(),function(b){if(!b||!b.length)return null;var d={attributes:{}};b.forEach(function(a){d.attributes[a.name]=a});(b=a.fieldData.areaData[e])&&c.addFeatureAttributesCalculator(d,b)}))});return g(d)},_reportDataFromAreas:function(a,b){a.forEach(function(a,d){if(d=b[d])c.addFeatureAttributesCalculator(a.feature,d),c.addAreaInfoCalculator(a,d)})},_reportDataFromReport:function(a,b,c){var d=b.metadata;a&&!d.Title&&(d.Title=a.title);d.Subtitle=b.reportInfo&&b.reportInfo.Subtitle||
"";d.Source=a.dataVintageDescription||"Esri";d.Date=l.getReportFooterDate();d.Copyright="\u00a9 "+l.getFullYear()+" Esri";d.ProductLabel="";d.ProductUrl="";d.PhoneNumber="";d.TrialUrlText="";a.isMultiFeature&&(d.SITE_NAME=c.locationName||c.name,d.STORE_NAME=c.locationName||c.name,d.AREA_DESC2=c.description||c.name,d.STORE_ADDR=c.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t){function q(a){return(a=a&&d.id.findCredential(a)||d.id.credentials[0])&&a.token}return k(null,{enrichAreas:function(a){var b={};return f(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,a.comparisonLevels),function(c){b.studyAreas=c;a.report?b.analysisVariables=[{itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl),outFields:["*"]}]:a.fields&&(b.analysisVariables=a.fields);return this._doRunTask(b,a,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(a){var b={f:"bin",format:"xml",reportfields:{}};b.report={itemid:a.report.reportID,url:a.report.portalUrl,token:q(a.portalUrl)};return f(this._analysisAreasToStudyAreas(a.analysisAreas,a.countryID,null,a.getAttributes),function(c){b.studyAreas=c;return this._doRunTask(b,a,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(a,b,c,d){var h=this;c=c&&c.map(function(a){return{layer:a}});return e(a.map(function(a,f){var l;a.geographies&&a.geographies.length?(l=h._studyAreaFromGeographies(a.geographies,
b,!0),a.feature&&a.feature.attributes&&(l.attributes=g.mixin({},l.attributes,a.feature.attributes))):l={attributes:g.mixin({},a.feature.attributes),geometry:a.feature.geometry.toJson()};c&&(l.comparisonLevels=c);return e([h._getStorePointForArea(a),d&&d(a)]).then(function(a){var b=a[0];a=a[1];l.attributes=l.attributes||{};b&&(l.attributes.STORE_LAT=l.attributes.STORE_LAT||b.STORE_LAT,l.attributes.STORE_LONG=l.attributes.STORE_LONG||b.STORE_LONG);l.attributes.STORE_ID=f+"";a&&a.forEach(function(a){l.attributes[a.name]=
n.formatAttributeValueForStudyArea(a)});return l})}))},_getStorePointForArea:function(a){if(a=a.location&&a.location.geometry||a.buffer&&a.buffer.point){a=a instanceof b?a:new b(a);var d=l.geometryToLatLong(a);return d?d:f(m.projectGeometries(a,new c(t.WGS_84_WKID)),function(a){return l.geometryToLatLong(a)})}},createFeatureForGeographies:function(a,b){return this._createFeaturesForGeographies(a,b,!0).then(function(a){return a[0]})},createFeaturesForGeographies:function(a,b){return this._createFeaturesForGeographies(a,
b,!1)},_createFeaturesForGeographies:function(a,b,d){a={returnGeometry:!0,outSR:b.outSR||new c(t.WEB_MERCATOR_WKID),studyAreas:d?[this._studyAreaFromGeographies(a,b.countryID,!0,b.generalizationLevel)]:a.map(function(a){return this._studyAreaFromGeographies([a],b.countryID,!1,b.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(a,b,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(a,b,c,d){var h={sourceCountry:b,layer:null,
ids:null},e=null,f=[],l;a.forEach(function(a){if(!a||!a.id)throw Error("Wrong geography.");var b=a.levelId;if(b)if(!e)e=b;else if(c&&e!==b)throw Error("Geographies have different level IDs.");f.push(a.id);a.sourceCountry&&(h.sourceCountry=a.sourceCountry);a.hierarchy&&(h.hierarchy=a.hierarchy);a.attributes&&(l=g.mixin(l||{},a.attributes))});h.layer=e;h.ids=c?[f.join(",")]:f;h.attributes=l;h.generalizationlevel=d;return h},createFeaturesForBuffer:function(a,b){b=b||{};var d={bufferUnits:a.units,bufferRadii:a.radii||
[a.radius],areaType:a.areaType||"RingBuffer"};"NetworkServiceArea"===d.areaType&&(d.travelMode=a.travelMode,d.networkOptions=a.networkOptions);a=a.point||a.polyline;d={returnGeometry:!0,outSR:b.outSR||a.spatialReference||new c(t.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:d,studyAreas:[{geometry:a.toJson?a.toJson():a}]};return this._doRunTask(d,b,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(a,b){function c(a){var b=a.point||
a.polyline;return JSON.stringify(b.toJson?b.toJson():b)+";"+a.units+";"+a.areaType+";"+a.travelMode+";"+JSON.stringify(a.networkOptions)}var d={},h=[];a.forEach(function(a){var b=c(a),e=d[b],f=!1;if(e){var l=a.radii||[a.radius];e.radii.some(function(a){return-1!==l.indexOf(a)})&&(e=null,f=!0)}e||(e=g.clone(a),f||(d[b]=e),delete e.radius,e.radii=[],h.push(e));a.radii?e.radii=e.radii.concat(a.radii):e.radii.push(a.radius)});return e(h.map(function(a){return this.createFeaturesForBuffer(a,b)},this)).then(function(a){var b=
[];a.forEach(function(a){b=b.concat(a)});return b})},_doRunTask:function(a,b,c){a=g.mixin({useData:{sourceCountry:b.countryID,hierarchy:b.hierarchy||p.getHierarchyID()},forStorage:!1},a);return h[c](a)},_handleFeatureSetsRequest:function(b){return(new a(b[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(k,g,f,e){var d={composeAttributesFromFieldInfos:function(c,a){return c&&c.filter(function(a){return a.visible}).map(function(b){var c=b.fieldName,d=b.label,e=b.format&&b.format.places,f=b.format&&b.format.digitSeparator,g=b.format&&b.format.dateFormat,k=a[b.fieldName];b=(b=b.format)&&b.dateFormat?"esriFieldTypeDate":b&&void 0!==b.places?0<b.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:c,alias:d,places:e,digitSeparator:f,dateFormat:g,value:k,type:b,
domain:null,length:void 0}})},formatAttributeValue:function(c,a){a=a||{};var b=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!c||null===c.value||void 0===c.value)return b;if(!a.skipFormattedValue&&c.formattedValue&&c.formattedValue!==b)return c.formattedValue;var d=c.domain&&"codedValue"===c.domain.type?new g(c.domain):null;d?(a=d.getName(c.value))||(a=c.value+""):"esriFieldTypeString"===c.type?a=c.value:"esriFieldTypeDate"===c.type?a=f.formatDateShort(c.value):(a=a.format,
a=e.formatNumber(c.value,{places:a&&void 0!==a.decimals?a.decimals:c.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===c.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?b:a},formatAttributeValueForStudyArea:function(c){var a;c&&null!==c.value&&void 0!==c.value||(a=!0);a||(a=c.domain&&"codedValue"===c.domain.type||"esriFieldTypeDate"===c.type);return a?d.formatAttributeValue(c):c.value},getAttributeTypeForStudyArea:function(c){return"esriFieldTypeDate"===
c.type?"esriFieldTypeString":c.type},attributeToJson:function(c){return{name:c.name,alias:c.alias,type:c.type,value:c.value,domain:c.domain&&(c.domain.toJson?c.domain.toJson():k.clone(c.domain)),places:c.places,digitSeparator:c.digitSeparator,dateFormat:c.dateFormat,length:c.length}},attributeFromJson:function(c){return{name:c.name,alias:c.alias,type:c.type,value:c.value,domain:c.domain,places:c.places,digitSeparator:c.digitSeparator,dateFormat:c.dateFormat,length:c.length}}};return d})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale",
"esri/moment"],function(k,g){var f={formatDate:function(e,d){return(e=f.objectToDate(e))?k.format(e,d):""},formatMoment:function(e,d){return(e=f.objectToTime(e))?g(e).format(d):""},formatDateShort:function(e){return f.formatMoment(e,"L")},formatDateTimeShort:function(e){return f.formatMoment(e,"L LT")},formatLiveTime:function(e){var d=f.formatMoment(e,"l, LT").replace(/\d\d\d\d/,function(c){return c.substr(2)});return d?d+" "+f.formatDate(e,{datePattern:"ZZZZ",selector:"date"}):""},formatTypicalTime:function(e){return f.formatMoment(e,
"ddd LT")},parseDateShort:function(e){return(e=+g(e,"L"))?new Date(e):null},getReportFooterDate:function(e){return k.format(e||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(e){if(!e)return null;e="string"===typeof e?new Date(e):e;return e.getTime?e.getTime():Number(e)||null},objectToDate:function(e){return e?e.getTime?e:new Date(e):null}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(k,g,f,e,d){function c(a,b){return d.projectGeometries(a,b)}k=k(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,b){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var c=new g;this._pendingInfos.push({geom:a,mapOrSR:b,dfd:c,index:this._pendingInfos.length});
return c.promise},project:function(){function a(a){var b=l[a];return f(c(b.geoms,b.mapOrSR),function(a){a.forEach(function(a,c){c=b.indexMap[c];m[c]=a;h[c].resolve(a)})})}var b=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var h=[],l={};this._pendingInfos.forEach(function(a){h.push(a.dfd);var b=a.geom.type+";"+a.geom.spatialReference.wkid+";"+d.getSpatialReference(a.mapOrSR).wkid,b=l[b]=l[b]||{geoms:[],indexMap:{},mapOrSR:a.mapOrSR};b.geoms.push(a.geom);
b.indexMap[b.geoms.length-1]=a.index});this._pendingInfos.length=0;var g=[],m=[],p;for(p in l)g.push(a(p));return e(g).then(function(){b._isBusy=!1;return m})}});k.needProject=function(a,b){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==d.getSpatialReference(b).wkid};k.projectGeometries=c;return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){var p={_getCache:function(){return l.get("CreateReportResultCache")},_buildKey:function(a){return[a.countryID,a.hierarchy,JSON.stringify(b.areasToJson(a.analysisAreas,{excludeInfoTemplate:!0})),a.report.reportID,a.report.portalUrl,a.report.modified].join("_")},getCopy:function(a){a=this._buildKey(a);return(a=this._getCache()[a])&&g.clone(a)},copyAndPut:function(a,b){a=this._buildKey(a);this._getCache()[a]=b&&g.clone(b)},getResults:function(){var a=[],b;for(b in this._getCache())a.push(this._getCache()[b]);
return a}},t={execute:function(b){var l=b.cacheResult&&p.getCopy(b);if(l)return d(l);var l=h.splitArrayToBunches(b.analysisAreas,10),k;return f(l.map(function(h){function f(){var f=g.mixin({},b,{analysisAreas:h});f.getAttributes=function(a){if(!b.attachmentsStore)return null;if(!b.attachmentsStore.supportsMultipleAreas&&k)return k;b.attachmentsStore.supportsMultipleAreas&&b.attachmentsStore.setCurrentAnalysisAreaIndex(b.analysisAreas.indexOf(a));return d(b.attachmentsStore.getAttributes(),function(a){k=
k||a;return a})};return(new a).createReport(f).then(function(a){var b=a&&a.taskID;a=a&&a.result;try{m.emulateErrors.createReportError&&(a={error:{message:"Error test: something crashed on the server!"}});var d;a&&"object"===typeof a&&(d=a.error);if(!d&&"string"===typeof a&&-1!==a.indexOf("{"))try{var h=JSON.parse(a);d=h&&h.error}catch(B){}if(d)if(n.runReportTask.ignoreErrors)a=[];else return(new e).reject(d);var f=c.parse(a);return{taskID:b,areaData:f.areaData,reportInfo:f.reportInfo,originalXML:a,
error:d}}catch(B){return(new e).reject(B)}})}return d(f(),function(a){return!a||a.error?n.runReportTask.secondAttempt?f():a:a},function(a){return n.runReportTask.secondAttempt?f():(new e).reject(a)})})).then(function(a){var c={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};a.forEach(function(a){c.taskIDs.push(a.taskID);c.originalXMLs.push(a.originalXML);a.error&&c.errors.push(a.error);c.areaData=c.areaData.concat(a.areaData);c.reportInfo=a.reportInfo});b.cacheResult&&!c.errors.length&&
p.copyAndPut(b,c);return c})}};k=k(null,{execute:function(a){console.log("Creating a new report...");return t.execute(a)}});k.CreateReportResultCache=p;return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(k,g,f,e,d,c,a,b){function h(a){return a.innerHTML?a.innerHTML:a.tags&&a.tags.length&&a.tags[0].text||""}function l(a){var b={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};a.tags&&a.tags.forEach(function(a){"ReportTitle"===a.name&&(b.Title=h(a));"ReportTitle2"===a.name&&(b.Subtitle=h(a));if("CurrencyFormat"===a.name){a=h(a);var c=a.split(";")[0].replace("0","").trim();b.country={id:null,currencySymbol:c,currencyFormat:a}}else if("ReportLayout"===a.name){var e=
b.exportSettings={};a.tags&&a.tags.forEach(function(a){if("Options"===a.name&&a.attributes)e.addHeader=!!a.attributes.header,e.addDataSource=!!a.attributes.dataSource,e.addFooter=!!a.attributes.footer;else if("Page"===a.name&&a.attributes){e.pageSettings={};var b=a.attributes;if(b.width&&b.height&&b.units){a=Number(b.width);var c=Number(b.height);if(b=b.units===k.MILLIMETERS?"mm":b.units===k.CENTIMETERS?"cm":b.units===k.INCHES?"in":b.units===k.POINTS?"pt":null)e.pageSettings.pagesize=d.combineCustomSizeString(a,
c,b)}else b.size&&b.orientation&&(e.pageSettings.pagesize=b.size.toLowerCase(),e.pageSettings.orientation=b.orientation.toLowerCase())}})}});b.exportSettings&&b.Subtitle&&(b.exportSettings.reportSubtitle=b.Subtitle);return b}function n(a){function b(a){a.tags&&a.tags.forEach(function(a,b){b=a.attributes&&a.attributes.STORE_ID||b+"";var c=h[b];c||(c={attributes:null,notes:null,images:null},h[b]=c,d.sites.push(c));a.tags&&a.tags.forEach(function(a){"Attributes"===a.name&&a.tags&&(c.attributes=a.tags.map(function(a){return{name:a.attributes.Name,
alias:a.attributes.Alias,type:a.attributes.Type,value:g.isNumericField(a.attributes.Type)?Number(a.attributes.Value):a.attributes.Value}}));"Notes"===a.name&&a.tags&&(c.notes=a.tags&&a.tags.map(function(a){return{text:a.attributes.Text}}));"Images"===a.name&&a.tags&&(c.images=a.tags&&a.tags.map(function(a){return{url:a.attributes.Source,thumbnail:a.attributes.Thumbnail,description:a.attributes.Description,imageViewType:null}}))})})}function c(a){var b;d.stdLevels=a.tags&&a.tags.map(function(a,c){b=
b||a.attributes.Id.substr(0,a.attributes.Id.indexOf("."));return{id:a.attributes.Id,name:a.attributes.Caption,isWholeCountry:a.attributes.IsWholeCountry||0===c}});"US"===b&&(d.countrId="US");"CAN"===b&&(d.countrId="CA")}var d={sites:[],stdLevels:null,countrId:null},h={};a.tags&&a.tags.forEach(function(a){"StudyAreas"===a.name?b(a):"StandardGeographyLevels"===a.name&&c(a)});return d}function m(d,f){function l(d){if(d=function(d){var e={},l,g,p;d.tags.forEach(function(a){var c=h(a),n=c,m=k[d.name][a.name];
"string"===(m&&m.type)?c=String(c):(c=Number(c),isNaN(c)&&(c=n),b.emulateErrors.createReportNaN&&(c=NaN),b.emulateErrors.createReportNull&&(c=null));f&&(c=f(a.name,c,d.name));void 0===e[a.name]&&(e[a.name]=c);"AREA_ID"===a.name&&(l=c);"IDFNDFIELD"===a.name&&(g=c);"STORE_ID"===a.name&&(p=c)});l=l||g;if(!l&&!p)return null;var q;!l&&p&&(q=Number(p));l&&void 0===n[l]&&(n[l]=m++);c.cleanUpAttrs(e,a.isPlayerOnServer?{STORE_ID:1,AREA_ID:1}:null);return{name:d.name,attrs:e,areaIndex:void 0!==q?q:n[l]}}(d)){var l=
g[d.areaIndex]=g[d.areaIndex]||{};l[d.name]?l[d.name].comparisonLevels.push(d.attrs):l[d.name]=e.createCalculator(d.attrs)}}var g=[],n={},m=0,k;d.tags[0].tags.forEach(function(a){"xs:schema"===a.name?k=p.parseSchema(a):l(a)});return{areaData:g,schemaParseResult:k}}var p={parseSchema:function(a){var b={};a.tags.forEach(function(a){"xs:element"===a.name&&a.attributes&&"ReportData"===a.attributes.name&&f.queryJson(a,"xs:element").filter(function(a){return!!a.tags}).forEach(function(a){var c=b[a.attributes.name]=
{};f.queryJson(a,"xs:element").forEach(function(a){c[a.attributes.name]={type:"xs:string"===a.attributes.type?"string":"number",alias:a.attributes["msdata:Caption"]||"",vintage:a.attributes["msdata:Vintage"]||"",source:a.attributes["msdata:Source"]||""}})})});return b}};return{parse:function(a,b){return this._parseDataXmlJson(f.parseXml(a,{saveInnerHTML:!0}),b)},_parseDataXmlJson:function(a,c){if(!a||!a.tags||2>a.tags.length)return[];var d,h,e,f;a.tags.forEach(function(a){"ReportInfo"===a.name?d=
l(a):"ReportArea"===a.name?h=n(a):"ReportData"===a.name&&(a=m(a,c),f=a.areaData,e=a.schemaParseResult)});b.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(f));h&&(d.country.id=h.countrId,d.sites=h.sites,d.stdLevels=h.stdLevels);d.variables=e;return{reportInfo:d,areaData:f}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(k,g){function f(c,d,e,f){return b(e,f)+"\x3c"+c+(d?a(d):"")+"\x3e"+(f?"\n":"")}function e(a,
c,d){return b(c,d)+"\x3c/"+a+"\x3e"+(d?"\n":"")}function d(c,d,e,f){return b(e,f)+"\x3c"+c+(d?a(d):"")+" /\x3e"+(f?"\n":"")}function c(a,c,d){a=g.encodeXML(a,!1);return b(c,d)+a+(d?"\n":"")}function a(a){var b="",c;for(c in a){var d=a[c];Array.isArray(d)&&(d=d.join(";"));void 0===d||null===d||""===d||"number"===typeof d&&isNaN(d)||(b+=" "+c+'\x3d"'+g.encodeXML(d,!0)+'"')}return b}function b(a,b){if(!b)return"";b="";for(var c=0;c<a;c++)b+="     ";return b}return k(null,{parseJson:function(a,b){function h(a,
b){a.text||"#text"===a.name?g+=c(a.text,b,l):a.name&&(a.tags&&a.tags.length?(g+=f(a.name,a.attributes,b,l),a.tags&&a.tags.forEach(function(a){h(a,b+1)}),g+=e(a.name,b,l)):g+=d(a.name,a.attributes,b,l))}var l=b&&b.prettify,g="";b&&b.addDocumentOptions&&(g+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');h(a,0);return g=decodeURIComponent(encodeURIComponent(g).replace("%19",""))},parseXml:function(a,b){function c(a,e){a.name=e.nodeName;b.saveInnerHTML&&(a.innerHTML=e.innerHTML);if(e.attributes&&
e.attributes.length){a.attributes={};for(var f=0;f<e.attributes.length;f++){var l=e.attributes[f],n=l.value;if(!0===n||"true"===n)n=!0;else if(!1===n||"false"===n)n=!1;else if(d&&n){var m=Number(n);isNaN(m)||(n=m)}a.attributes[l.nodeName]=n}}if(e.childNodes&&e.childNodes.length)for(a.tags=[],f=0;f<e.childNodes.length;f++){if(n=l=e.childNodes[f],"#text"!==n.nodeName||(h?n.nodeValue.trim():n.nodeValue))n={},a.tags.push(n),c(n,l)}else"#text"===e.nodeName&&(delete a.name,a.text=g.decodeXML(e.nodeValue))}
b=b||{};var d=b.parseNumbers,h=b.ignoreWhiteSpacedTextNodes,h=void 0===h?!0:h,e={},f;a=(new DOMParser).parseFromString(a,"text/xml").childNodes;for(var l=0;l<a.length;l++)if(1===a[l].nodeType){f=a[l];break}f&&c(e,f);return e},queryTopJson:function(a,b){return this.queryJson(a,b,!0)},queryJson:function(a,b,c){function d(a,e){a.tags&&a.tags.forEach(function(a){(b.test?b.test(a.name):a.name===b)&&h.push(a);c&&0===e||d(a,e+1)})}var h=[];d(a,0);return h},traverseJson:function(a,b){function c(a){d||(!0===
b(a)?d=!0:a.tags&&a.tags.forEach(c))}var d=!1;c(a)},getInnerHTML:function(a){return a.innerHTML?a.innerHTML.trim():this.parseJson(a).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(a){return(a=String(a))&&this._IS_RICH_RE.test(a)},unrichHTML:function(a){if(!a)return"";a=g.decodeXML(String(a).trim()).replace(this._UNRICH_RE,"");0===a.indexOf("\x3c")&&-1!==a.indexOf("\x3e")&&(a="");return a}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(k,g,f){var e={},d={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};e.PAPER_SIZES=
d;var c={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var b;b=2===a.length?d[a[0]][a[1]]:d[a];c[a]={portrait:{w:g.mmToIn(b[0]),h:g.mmToIn(b[1])},landscape:{w:g.mmToIn(b[1]),h:g.mmToIn(b[0])}}});e.SIZE_TYPE_TO_DIM_HASH=c;e.hasStandardSize=function(a){return c[a]};e.getSupportedPageSizes=function(){var a=[],b;for(b in d)1===b.length?d[b].forEach(function(c,d){a.push(b+d)}):a.push(b);return a};e.getPageDim=function(a,b,d){c[a]?a=c[a][b||"portrait"]:(a=a.split("x"),
a={w:g.ptToIn(Number(a[0])),h:g.ptToIn(Number(a[1]))});d&&(a=k.clone(a),g.roundNDigitsObj(a,d.places));return a};e.getPageBox=function(a){if(!a)return null;var b=e.getPageDim(a.pagesize,a.orientation),c=g.inToPx(b.w),b=g.inToPx(b.h);return{w:c,h:b,contentW:c-(a.left||0)-(a.right||0),contentH:b-(a.top||0)-(a.bottom||0)}};e.combineCustomSizeString=function(a,b,c){return g.convert(a,c,"pt",5)+"x"+g.convert(b,c,"pt",5)};e.getDefaultDocumentOptions=function(a){return k.mixin({pagesize:"letter",orientation:"portrait",
left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:f.DEFAULT_FONT_FAMILY_CLASSIC},a)};e.getDefaultDocumentOptionsGraphicReport=function(a){return k.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.493,fontSize:10,fontFamily:f.DEFAULT_FONT_FAMILY_GRAPHIC},a)};e.getClosestStandrdSizes=function(a,b){function d(a){var b=a.w/f.w;a=a.h/f.h;return Math.max(1-(1<b?1/b:b),1-(1<a?1/a:a))}b=void 0===
b?.4:b;var f=e.getPageDim(a.pagesize,a.orientation);a=[];for(var g in c){var m=c[g];a.push({pagesize:g,orientation:"portrait",score:d(m.portrait)});a.push({pagesize:g,orientation:"landscape",score:d(m.landscape)})}a=a.filter(function(a){return a.score<=b});a.sort(function(a,b){return a.score-b.score});return a};e.tryGetStandardPageSize=function(a,b){function c(a){var c="portrait"===b?1:0;return a["portrait"===b?0:1]===f&&a[c]===m}if(e.SIZE_TYPE_TO_DIM_HASH[a])return a;var d=a.split("x"),f=g.convert(Number(d[0]),
"pt","mm",0),m=g.convert(Number(d[1]),"pt","mm",0),k,t;for(t in e.PAPER_SIZES)if(d=e.PAPER_SIZES[t],1===t.length){if(d.some(function(a,b){if(c(a))return k=t+b,!0}))break}else if(c(d)){k=t;break}return k||a};return e})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(k){function g(d,c,a){a&&(d=k.mixin({},d));for(var b in d){var h=d[b];null!==h&&""!==h&&"boolean"!=typeof h&&("object"==typeof h?d[b]=g(h,c,a):(h=Number(h),isNaN(h)||(d[b]=c(h))))}return d}
var f={},e="px pt mm cm in twip".split(" ");e.forEach(function(d){e.forEach(function(c){if(d!==c){var a=d+"To"+c.charAt(0).toUpperCase()+c.substr(1);f[a]=function(a,h){return f.convert(a,d,c,void 0!==h?h:5)}}})});f.convert=function(d,c,a,b){d=Number(d)||0;switch(c){case "in":d*=72;break;case "px":d*=.75;break;case "mm":d=d/25.4*72;break;case "cm":d=d/2.54*72;break;case "twip":d/=20}switch(a){case "in":d/=72;break;case "px":d/=.75;break;case "mm":d=d/72*25.4;break;case "cm":d=d/72*2.54;break;case "twip":d=
Math.round(20*d)}void 0!==b&&(d=f.roundNDigits(d,b));return d};f.pxToPtObj=function(d,c){return g(d,f.pxToPt,!c)};f.ptToPxObj=function(d,c){return g(d,f.ptToPx,!c)};f.roundNDigits=function(d,c){return Number(Number(d).toFixed(c))};f.roundNDigitsObj=function(d,c){for(var a in d){var b=d[a];"object"==typeof b?f.roundNDigitsObj(b,c):d[a]=f.roundNDigits(b,c)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var k={},
g="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");k.cleanUpAttrs=function(f,e){f&&g.forEach(function(d){e&&e[d]||delete f[d]})};return k})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(k){var g={},f={}.toString();g.arraysEqual=function(e,d){if(!e&&!d)return!0;if(!e||!d||e.length!==d.length)return!1;for(var c=0;c<e.length;c++)if(e[c]!==d[c])return!1;return!0};g.composeIdentityFunction=function(e,d){var c="function"===
typeof e?e:e?function(a){return a[e]}:function(a){return a};return function(a){return(a=c(a))&&a.toString?a.toString():d&&void 0===a?a:String(a)}};g.removeDuplicates=function(e,d){var c=[],a={};d=g.composeIdentityFunction(d,!0);k.forEach(e,function(b,h){var e=d(b);e===f&&(void 0===b["__ArrayUtil.js_uniqueKey__"]&&(b["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+h),e=b["__ArrayUtil.js_uniqueKey__"]);void 0===e||e in a||(a[e]=b,c.push(b))});return c};g.splitArrayToBunches=function(e,d){d=
d||100;for(var c=[],a,b=0,h=e.length;b<h;b++)a&&a.length!==d||(a=[],c.push(a)),a.push(e[b]);return c};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],function(k,g,f){return{addFeatureAttributesCalculator:function(e,d,c){c=c||g.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in e.attributes)k.setAreaDataObjectValue(a,
e.attributes[a],d,c)},addAreaInfoCalculator:function(e,d,c){c=c||g.AREA_ATTRIBUTES_CALCULATOR_NAME;k.setAreaDataObjectValue("SITE_NAME",e.locationName||e.name,d,c);k.setAreaDataObjectValue("STORE_NAME",e.locationName||e.name,d,c);k.setAreaDataObjectValue("AREA_DESC",e.shortName||e.name,d,c);k.setAreaDataObjectValue("AREA_DESC2",e.description||e.name,d,c);k.setAreaDataObjectValue("AREA_DESC3",e.description||e.name,d,c);k.setAreaDataObjectValue("STORE_ADDR",e.address||"",d,c);k.setAreaDataObjectValue("STORE_LAT",
e.latitude||"",d,c);k.setAreaDataObjectValue("STORE_LONG",e.longitude||"",d,c)},addEnrichFeatures:function(e,d,c,a){var b={},h={},l;for(l in d)b[l.toLowerCase()]=d[l],h[l.toUpperCase()]=d[l];e=f.parse(e,c||g.ENRICHED_DATA_NO_LEVELS,function(a){return d[a]||b[a.toLowerCase()]||h[a.toUpperCase()]});k.mergeAreaData(e,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],function(k){var g={ID_FIELDS:["ID","AREA_ID",
"IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(f,e,d){if(!f)return[];f=f.features||f;if(!f.length)return[];var c=[],a={},b=0;f.forEach(function(h){var f=h.attributes[g.ID_FIELDS[0]]||h.attributes[g.ID_FIELDS[1]];if(f){void 0===a[f]&&(a[f]=b++);var n={},m;for(m in h.attributes){var p=g.KNOWN_ATTRIBUTES[m]?m:d?d(m):m;p&&(n[p]=h.attributes[m])}k.cleanUpAttrs(n);h={name:e,attrs:n,areaIndex:a[f]}}else h=null;h&&(f=c[h.areaIndex]=c[h.areaIndex]||
{},f[h.name]?f[h.name].comparisonLevels.push(h.attrs):f[h.name]={data:h.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(c);return c}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],function(k){var g={preprocessVariables:function(f,e){var d=g.convertForEnrich(g._splitVariables(f)).filter(function(c){return c.itemid});return k.loadCustomDataVariables(d,
{forceLowerCase:!0,portalUrl:e}).then(function(c){return g._splitVariables(f,c)})},_splitVariables:function(f,e){var d=[],c={};f.forEach(function(a){"string"===typeof a?d.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(b,h){h=a.itemid+"."+b;h=h.toLowerCase();d.push(h);c[h]={itemid:a.itemid,url:a.url,token:a.token,variable:e?e.fullNameToVariableCache[h]:{id:b}}})});return{fullNames:d,customDataMapping:c}},convertForEnrich:function(f){var e={},d=[];f.fullNames.forEach(function(c){var a=
f.customDataMapping[c];a?(c=e[a.itemid],c||(c={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},c.url||delete c.url,c.token||delete c.token),c.outFields.push(a.variable.id),e[c.itemid]||(e[c.itemid]=c,d.push(c))):d.push(c)});return d}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define("esri/dijit/geoenrichment/promise/all ../GEUtil ../ReportTemplateData esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,d,c){return{canLoad:function(){return g.canMakeRequests()},loadVariables:function(a){var b=e.get("DataCollectionsLoader"),c="*"===a.outFields,d=c?["*"]:a.outFields,f=a.countryID+";"+a.hierarchy+";"+d.join(";")+";"+!!a.forceLowerCase;b[f]||(c||(d=d.slice(),-1===d.indexOf("id")&&d.push("id")),b[f]=g.getDataCollections(a.countryID,a.hierarchy,{f:"json",outFields:c?"*":JSON.stringify(d),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(b){var h={dataCollections:b,idToVariableCache:{},
fullNameToVariableCache:{}};b.forEach(function(b){b.data.forEach(function(e){function f(b){return a.forceLowerCase?b.toLowerCase():b}function g(a){if(c)return Object.keys(a).length;var b=0;d.forEach(function(c){void 0!==a[c]&&b++});return b}var l=h.idToVariableCache[f(e.id)];if(!l||g(e)>g(l))h.idToVariableCache[f(e.id)]=e;h.fullNameToVariableCache[f(b.dataCollectionID+"."+e.id)]=e})});return h}));return b[f]},loadCustomDataVariables:function(a,b){b=b||{};var h={idToVariableCache:{},fullNameToVariableCache:{}};
return k(a.map(function(a){var e=c.combineMulti([a.url||b.portalUrl,"sharing/rest/content/items",a.itemid,"resources/metadata.xml"]);return f.loadResource(e,a.token||c.getToken(b.portalUrl)).then(function(c){var e=d.parseXml(c.data);c=[];var f=d.queryJson(e,"Fields")[0];f&&(c=c.concat(d.queryJson(f,"Field")));(e=d.queryJson(e,"CalculatedFields")[0])&&(c=c.concat(d.queryJson(e,"Script")));c.forEach(function(c){function d(a){return b.forceLowerCase?a.toLowerCase():a}c=c.attributes;c={id:c.Name,fullName:a.itemid+
"."+c.Name,alias:c.Alias,description:c.Alias,type:"esriFieldType"+c.Type,precision:c.Precision?Number(c.Precision):void 0,vintage:c.Vintage};h.idToVariableCache[d(c.id)]=c;h.fullNameToVariableCache[d(c.fullName)]=c})})})).then(function(){return h})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){function p(c,d){var h=c.substr(c.lastIndexOf("/")+1),e=a.getProxyRule(c);return f(e&&e.proxyUrl?e.proxyUrl+"?"+c:c,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+d,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(a){var c=!/\.xml$|\.txt$|\.json$/i.test(h);return{name:h,data:c?b.base64FromByteSource(a):decodeURIComponent(escape(b.binaryStringFromByteSource(a)))}})}k=k(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(a,b){this.id=a.id;this._portalUrl=b;this._baseUrl=l.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var a=this;return this._getResources().then(function(b){var c=[];b.map(function(b){b=b.resource;"thumbnail.png"!==b&&c.push(a.getFileByName(b))});return e(c)})},getFileByName:function(a){return p(this.getItemResourceUrl(a,!1),this._getToken())},getItemResourceUrl:function(a,b){a=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+a);return b?
l.addQueryPart(a,"token\x3d"+this._getToken()):a},updateFile:function(a,b){var c=this;return m.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(d){var h=n.fromFileData(a,b);return m.request({url:c._baseUrl,urlSuffix:"content/users/"+d.owner+"/"+d.ownerFolder+"/items/"+c.id+"/updateResources"},{content:{file:h,filename:a}})})},_contentItemPath:function(a){return"content/items/"+a},_getToken:function(){var a=d.id.findCredential(this._portalUrl)||d.id.credentials[0];return a&&
a.token},_getResources:function(){var a=this;return h.query(function(b){return c({url:a._baseUrl+"/"+a._contentItemPath(a.id+"/resources"),content:g.mixin({f:"json",token:a._getToken()},b),handleAs:"json"},{usePost:!0})},null,"resources").then(function(a){return a.resources})},getPortalUrl:function(a){return a?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});k.loadResource=p;return k})},"esri/dijit/geoenrichment/utils/PortalUtil":function(){define(["dojo/_base/lang","esri/kernel","esri/request",
"./requests/EveryRequest"],function(k,g,f,e){var d={query:function(c,a,b,d){a=a||{};b=b||"results";d=d||100;var h="number"===typeof a.num?a.num:-1,f=a.num=0>h||a.num>d?d:a.num;a.start=a.start||1;return c(a).then(function(d){var g=d[b],l=d.total-a.start+1;0<=h&&l>h&&(l=h);l-=f;if(0>=l)return d;a.num=f;for(var n=[];0<l;)a.start+=f,n.push(c.bind(null,k.mixin({},a))),l-=f;return e(n,{stopOnError:!0}).then(function(a){a.forEach(function(a){Array.prototype.push.apply(g,a[b])});return d})})},queryCommon:function(c,
a){return d.query(function(b){var d=g.id.findCredential(c)||g.id.credentials[0];return f({url:c,content:k.mixin({f:"json",token:d?d.token:void 0},a,b),handleAs:"json"},{usePost:!0})}).then(function(a){return a.results})}};return d})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){var p={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",resetCache:function(){a.set("CustomReportsManager",{})},_getCache:function(){return a.get("CustomReportsManager")},getCustomReports:function(a){var c=this,d=l.getPortalUrl(a.portalUrl);
return f(e.getPortalInfo(d),function(e){var f=e.user.username,f={q:h.combineQueryString({type:"Report Template",typeKeywords:a.typeKeywords,owner:!a.publicOnly&&f}),sortField:"modified",sortOrder:"desc"};return b.queryCommon(l.combine(d,"sharing/rest/search"),f).then(function(b){b=b.map(function(b){return c.prepareCustomReportFromItem(b,e.portal.url,a)});return c._getCountryReports(b,a.countryID)})})},_getCountryReports:function(a,b){return a&&("*"===b?a:a.filter(function(a){return!a.countries||a.countries.split(",").some(function(a){return b===
a.trim()})}))},prepareCustomReportFromItem:function(a,b,c){function e(a){return"string"===typeof a?"true"===a:!!a}var h=k.mixin({},a.properties||a.details);h.isGraphicReport=e(h.isGraphicReport);h.isMultiFeature=e(h.isMultiFeature);h.reportID=a.id;b={title:a.title,templateData:b&&new d(a,b),modified:a.modified instanceof Date?a.modified.getTime():a.modified};c&&c.attachItemProperty&&(b[c.attachItemProperty]=a);k.mixin(b,h);return b},getCustomReportByID:function(a){var b=this,c=this._getCache()[a.reportID];
if(c)return c;c=l.getPortalUrl(a.portalUrl);return this._getCache()[a.reportID]=f(e.getPortalInfo(c),function(c){return c.user.getItem(a.reportID).then(function(d){return d&&b.prepareCustomReportFromItem(d,c.portal.url,a)})}).otherwise(function(c){delete b._getCache()[a.reportID];return a.ignoreError?null:(new g).reject(c)})},tryFindReportIdByAlias:function(a){var b=this,d=c.aliasToID(a.countryID,a.reportID);if(!d)return null;var h=l.getPortalUrl(a.portalUrl);return f(this.getCustomReportByID({reportID:d,
portalUrl:h,ignoreError:!0,attachItemProperty:a.attachItemProperty}),function(c){return c?c&&(a.returnObject?c:c.reportID):f(b.getCustomReports({portalUrl:h,countryID:a.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:a.attachItemProperty}),function(b){function c(a){a=a.split(".");return Number((Number(a[0])+Number(a[1])/100).toFixed(2))}var d=c(n.jsapiVersion),h,e,f=-Infinity,g=Infinity;b.forEach(function(b){if(b.playerAlias===a.reportID){var l=c(b.jsapiVersion);
d>=l&&l>f&&(f=l,h=b);d<l&&l<g&&(g=l,e=b)}});b=h||e;a.strictVersionCheck&&b&&b.jsapiVersion!==n.jsapiVersion&&(b=null);return b&&(a.returnObject?b:b.reportID)})})},itemUpdated:function(a){delete this._getCache()[a]},getFakeCustomReportByContext:function(a){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:a.countryID,countries:a.countryID,hierarchy:a.hierarchy||m.getHierarchyID(),isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};p.resetCache();return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang",
"../../config","dojo/i18n!esri/nls/jsapi"],function(k,g,f){function e(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",
alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",
alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",
alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},
"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",
alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},
{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",
alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},
{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},
{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},
{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",
alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},
{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",
alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",
alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},
{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],
"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",
alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",
alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],
"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",
alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],
"PR.PRI_ACS_2020":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},
"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",
alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},
{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",
alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},
{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",
alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},
{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},
{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",
alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},
{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",
alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",
alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",
alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},
{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",
alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},
{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},
{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},
{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},
{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},{id:"d9d8109c537943a78a24d65110291b43",alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",
alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",alias:"commute-profile"},{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",
alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},{id:"c5efcef364ac4d8f82a6d54010ff75c7",alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",
alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},{id:"41864cea64f3432a90006eb9a1f97608",alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",
alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},
{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]},"3.34":{"US.census":[{id:"13cd4abfa97e43b9a5f9d4ddcb43f492",alias:"demographic-summary"},
{id:"8861429ac06948f79cdcaaadb39d597f",alias:"key-facts"},{id:"1056cbef133f49a18409a192fbdc221a",alias:"at-risk-population"},{id:"25145b3ca4284dcc999c8d05182588cd",alias:"skyscraper"},{id:"7db2109b9f844be48f3e9154e992699f",alias:"executive-summary-call-outs"},{id:"f43c00c7b10241c097fb71fd5acf1ec2",alias:"tapestry-profile"},{id:"5fb04926a70345c18d6e21d9972ea347",alias:"nearby-restaurants"},{id:"fdd0406e7815402cbf70716c68f4f7d6",alias:"multi-area-comparison"},{id:"7b716975146743b3a56762befaca71ad",
alias:"property-details"},{id:"2c0be4fe4d7245e39b4afd9b8eb607a9",alias:"employment-overview"},{id:"c7f42910bc4b49209835e333c6078e71",alias:"office-market-profile"},{id:"7517a7a0409d42748c7ad94f81322bc2",alias:"health-care-and-insurance"},{id:"9919270d8b4846cb86761103def73e76",alias:"demographic-profile"},{id:"0bb0cc183ae145febbf3585518eeaae6",alias:"commute-profile"},{id:"27853eda823e4574b0666d533ba39061",alias:"target-market-summary"},{id:"1df7c5b56b6e431982ef2da037c081c8",alias:"population-trends"},
{id:"aaf4cc69e58f43ea87a0c1e493431dd8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"3a2fb82b034d48bbb9474f8c158c32a8",alias:"key-facts"},{id:"100f5b4d3cca46b38fd651e39cce97b1",alias:"multi-area-comparison"},{id:"41f7b7cfe9cb490593ace88aa627c6ca",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"f5b0ec07181f4b58a01ee0ca1df8201a",alias:"housing-profile"},{id:"a5e0b9b228da4ba5baaa5811c57f6552",alias:"insurance-profile"},{id:"5d24250e3cc14b0db3b3f9884462efbf",alias:"media-profile"},{id:"f216c6574ae0453c951e66ee8fb6b20f",
alias:"personicx-segmentation"},{id:"267c816948334e72ab9ed94253790e22",alias:"spending-profile"}],"JP.EsriJapan":[{id:"434e01eacc8e432c8400f5a5aef6f3e4",alias:"base-demographic-profile"},{id:"c44be13f1f8e412288e58048136681d6",alias:"demographic-comparison-profile"},{id:"35c0c12ce88645e7b7cbc0ffe73af85d",alias:"future-population-profile"},{id:"e87fb84cffaa49dba14b104d5b994aa5",alias:"population-households-profile"},{id:"31a4988db08c41d6b9ce755b21ea0b26",alias:"consumer-spending-profile"},{id:"bf9f0203a4c14d03823beadb3f7ac043",
alias:"base-demographic-profile-ja"},{id:"fdbe0d4286ab419981bc80a96b46bdb1",alias:"demographic-comparison-profile-ja"},{id:"7541a90960e345308f73e99e4da5c0a8",alias:"future-population-profile-ja"},{id:"f17ecec5cb8d4baeab7af68e1e9ce683",alias:"population-households-profile-ja"},{id:"ddaf4fb6c09447f6beaf4218139bfa20",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"80c74804e91440f08695ba11456f96af",alias:"base-demographic-profile"},{id:"eb49e7ee98f04e1e914a4ce29bbfc7d3",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"2e82d587530548569ad792556044342b",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"b473aa30469e4e2eabcca3da3f306e94",alias:"at-risk-population"},{id:"4e91594fb4fe4bf3be24380408f1b0c6",alias:"commute-profile"},{id:"321c818398684510ac62e3403ad6628f",alias:"demographic-summary"},{id:"1c3d60191b12460ca9a23dfcbce0c1db",alias:"health-care-and-insurance"},{id:"5e6d78b1c4aa4168b7a3af5751d92261",alias:"coronavirus-impact-planning"}],"*.census":[{id:"530b6aa054664166a7a3ab5f1e82e19b",
alias:"key-facts"},{id:"4b8ddef8e8f0406ea9b0a6c3d062186a",alias:"multi-area-comparison"}]}}}function d(a){a=a||g.jsapiVersion;var b={};a=e()[a];for(var c in a){var d={};a[c].forEach(function(a){d[a.alias]=a.id});var h=c.substr(0,c.indexOf("."));b[h]=d}return b}function c(a,b){b=d(b);return k.mixin({},b["*"],b[a])}f=f.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,b={"demographic-summary":f.demographicSummary,"key-facts":f.keyFacts,"marketing-profile":f.marketingProfile,"at-risk-population":f.atRiskPopulation,
"portrait-property-flyer":f.portraitPropertyFlyer,skyscraper:f.skyscraper,"transportation-to-work":f.transportationToWork,"health-care":f.healthCare,"executive-summary-call-outs":f.executiveSummaryCallOuts,"tapestry-profile":f.tapestryProfile,"nearby-restaurants":f.nearbyRestaurants,"multi-area-comparison":f.multiAreaComparison,"property-details":f.propertyDetails,"employment-overview":f.employmentOverview,"office-market-profile":f.officeMarketProfile,"health-care-and-insurance":f.healthCareAndInsuranceStatistics,
"demographic-profile":f.demographicProfile,"commute-profile":f.commuteProfile,"target-market-summary":f.targetMarketSummary,"population-trends":f.populationTrends,"coronavirus-impact-planning":f.coronavirusImpactPlanning,"prizm-profile":f.prizmProfile,"housing-profile":f.housingProfile,"insurance-profile":f.insuranceProfile,"media-profile":f.mediaProfile,"personicx-segmentation":f.personicxSegmentation,"spending-profile":f.spendingProfile,"base-demographic-profile":f.baseDemographicProfile,"demographic-comparison-profile":f.demographicComparisonProfile,
"future-population-profile":f.futurePopulationProfile,"population-households-profile":f.populationHouseholdsProfile,"consumer-spending-profile":f.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","household-profile":f.householdProfile},h={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",aliasToID:function(a,b,d){return c(a,d)[b]},aliasToLabel:function(a){return b[a]},getAliases:function(a,b){a=Object.keys(c(a,b));a.sort(function(a,b){return a.localeCompare(b)});return a},getListOptions:function(a,c){return h.getAliases(a,c).map(function(d){return{value:h.aliasToID(a,
d,c),label:b[d]}})},getSupportedCountries:function(a){return Object.keys(d(a)).map(function(a){return"*"===a?"AU":a})},getLibrary:function(){var a=k.clone(e()),b;for(b in a){var c=a[b];c["AU.census"]=c["*.census"];delete c["*.census"]}return a}};return h})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var k={combineQueryString:function(g){var f="";g.type&&(f+='type:"'+g.type+'"');g.typeKeywords?f=Array.isArray(g.typeKeywords[0])?f+(" typekeywords:("+g.typeKeywords.map(function(e){return k.combineTypeKeywords(e)}).join(" OR ")+
")"):f+(" typekeywords:"+k.combineTypeKeywords(g.typeKeywords,g.typeKeywordsNot)):g.typeKeywordsNot&&(f+=" typekeywords:"+k.combineTypeKeywords(null,g.typeKeywordsNot));g.owner&&(f+=" owner:"+g.owner);g.isShared&&(f+=g.orgId?" ((orgid:"+g.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');g.ownerNot&&(f+=" NOT owner:"+g.ownerNot);return f},combineTypeKeywords:function(g,f){g=g?k._combineArray(g):"";return f?(f=k._combineArray(f," OR "),"("+g+" NOT "+
f+")"):g},_combineArray:function(g,f){var e="string"===typeof g?g:1===g.length?g[0]:null;return e?"("===e.charAt(0)||'"'===e.charAt(0)?e:'"'+e+'"':"("+g.map(function(d){return'"'+d+'"'}).join(f||" ")+")"}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(k){return{collectVariablesStats:function(g){var f={};k.processTemplateFieldInfos(g,function(e){e.infographicJson&&e.infographicJson.variables?
e.infographicJson.variables.forEach(function(d){f[d]=1}):e.hasVariable&&(e.usedMapTos?e.usedMapTos.forEach(function(d){f[d]=1}):e.fullName&&(f[e.fullName]=1))});return f},collectMapItemIds:function(g){var f={};k.calcNumberOfMaps(g,function(d){d.webMapId&&(f[d.webMapId]=1);d.defaultBasemapId&&(f[d.defaultBasemapId]=1)});g=[];for(var e in f)g.push(e);return g}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config",
"esri/dijit/geoenrichment/utils/ArrayUtil"],function(k,g){var f={getDefaultLevels:function(){var e=k.levels.slice();e.push(k.highestLevel);return e},getLevels:function(e){e=e.levels&&e.levels.length?e.levels:f.getDefaultLevels();return g.removeDuplicates(e)},getSubLevels:function(e){e=f.getLevels(e);e.pop();return e},getHighestLevel:function(e){e=f.getLevels(e);return e[e.length-1]},setLevels:function(e,d){d=g.removeDuplicates(d||[]);e.levels=d.length?d:f.getDefaultLevels()},getDataDrilling:function(e,
d){"string"!==typeof d&&(d=(d=e.variableTables&&e.variableTables[d])&&d.variable.fieldInfo&&d.variable.fieldInfo.templateName);return e.dataDrilling&&e.dataDrilling[d]},setDataDrilling:function(e,d,c){d&&(e.dataDrilling=e.dataDrilling||{},c?e.dataDrilling[d]=c:delete e.dataDrilling[d])},validateDataDrilling:function(e){var d=e.dataDrilling;if(d){var c={};e.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(c[a.variable.fieldInfo.templateName]=
!0)});Object.keys(d).forEach(function(a){c[a]||delete d[a]})}},analyzeVariables:function(e){e=e.fieldInfos?e.fieldInfos.map(function(a){return a.fullName}):e.variables;if(1===e.length&&-1!==e[0].indexOf(".*"))return{dataCollectionID:e[0].substr(0,e[0].indexOf("."))};var d={},c,a;e.forEach(function(b,h){d[b.substr(0,b.indexOf("."))]=1;c=b.substr(b.indexOf(".")+1);a=b});return{dataCollectionID:1===Object.keys(d).length?Object.keys(d)[0]:null,variableID:1===e.length?c:null,fullName:1===e.length?a:null}}};
return f})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],function(k){k=k.getProtocolForWebResource();return{portalUrl:k+"//arcgis.com",server:k+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:k+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){var m={preprocessAreas:function(b,c){c=c||{};b.analysisAreas=b.analysisAreas.filter(function(a){return a.feature&&a.feature.geometry&&"polygon"===a.feature.geometry.type||a.geographies&&a.geographies.length||a.buffer});-1!==c.analysisAreasLimit&&(c.analysisAreasLimit=c.analysisAreasLimit||20,b.analysisAreas.length=Math.min(b.analysisAreas.length,c.analysisAreasLimit));m.provideAreasIndexes(b);b.analysisAreas.forEach(function(a){a.feature&&!a.feature.attributes&&(a.feature.attributes=
{})});b.analysisAreas.forEach(function(b){b.name=b.name||b.shortName;if(!b.name&&b.feature){var c=a.guessFeatureName(b.feature);c&&(b.name=b.shortName=c)}});return g(p.generalize(b.analysisAreas),function(){return f([t.provideGeographyFeatures(b),q.provideBufferFeatures(b)])})},provideAreasIndexes:function(a){var b=a.combinedAreasInfo.groups,c=b&&b.length;a.analysisAreas.forEach(function(a,d){a.index=d;b&&(b.forEach(function(b,c){-1!==b.indexes.indexOf(d)&&(a.isGrouped=!0,a.groupIndex=c)}),"number"!==
typeof a.groupIndex&&(a.isGrouped=!1,a.groupIndex=c++))})},removeGroupInfo:function(a){a.forEach(function(a){delete a.isGrouped;delete a.groupIndex})}},p={generalize:function(a){var b=[],c=[];a.forEach(function(a,d){!a.feature||a.geographies&&a.geographies.length||(b.push(a.feature),c.push(d))});return g(function(a){function b(a){var b=0;a.geometry.rings.forEach(function(a){b+=a.length});return b}var c,e,f=h.needGeneralizeGeometry(a,l.generalization.factor,l.generalization.maxVerticesInAllFeatures,
l.generalization.numVerticesPerFeature),n;f&&(c=!0,e=[],a=a.map(function(a){e.push(b(a));return new d(a.geometry,a.symbol,a.attributes)}),n=h.generalizeGeometry(a,f,l.generalization.numVerticesPerFeature,!0));return g(n,function(){c&&(console.log("Generalize features:"),a.forEach(function(a,c){console.log("#"+c+" "+e[c]+" \x3d\x3e "+b(a))}));return a})}(b),function(b){c.forEach(function(c){a[c].feature=b.shift()})})}},t={provideGeographyFeatures:function(a){return f(a.analysisAreas.map(function(d){if(!d.feature&&
d.geographies&&d.geographies.length)return(new b).createFeatureForGeographies(d.geographies,{countryID:a.countryID,hierarchy:a.hierarchy}).then(function(a){d.feature=a;d.name=d.name||d.feature.attributes.StdGeographyName;d.description=d.description||n.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;d.address=d.address||d.name;d.geographies[0].attributes&&k.mixin(d.feature.attributes,d.geographies[0].attributes);if(a=d.geographies[0].symbol)a=a.toJson?a:c.fromJson(a),d.feature.setSymbol(a)})}))}},
q={provideBufferFeatures:function(a){var c=this,d=a.analysisAreas.filter(function(a){return!a.feature&&a.buffer}),h=d.map(function(a){return a.buffer});return(new b).createFeaturesForBuffers(h,{countryID:a.countryID}).then(function(a){a.forEach(function(a,b){b=d[b];b.feature=a;c._applyBufferParamsToArea(b)})})},_applyBufferParamsToArea:function(a){var b=a.buffer;if(!a.name){var d=n.geoenrichment.dijit.bufferTitle.pointRing;d[b.units]&&(a.name=e.substitute(d[b.units],{radius:b.radius}))}a.description=
a.description||"Ring";b.attributes&&k.mixin(a.feature.attributes,b.attributes);if(b=b.symbol)b=b.toJson?b:c.fromJson(b),a.feature.setSymbol(b)}};return m})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(k){var g=Object.keys(k.attributes),f;this._nameScores.some(function(e){return g.some(function(d){if(e.test(d))return f=
d,!0})});return k.attributes[f]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),function(k,g,f,e,d,c){function a(a,b,c){var d=new g,h=new e("./mutableWorker",function(){h.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){h.postMessage({rings:a,maxAllowableOffset:c}).then(function(a){var c=
a.rings;b.forEach(function(a){for(var b=a.source.length=0;b<a.count;b++)a.source.push(c.shift())});d.resolve();h.terminate()})})},!0);return d.promise}var b=k.mixin({},c);b.calculateMaxAllowableOffset=function(a,b){void 0===b&&(b=1);return a.extent.getWidth()/a.width*b};b.getNumberOfPoints=d.getNumberOfPoints;b.needGeneralizeGeometry=function(a,c,d,e){if(!a||!c)return!1;e=e||(d?d/10:500);d=d||5E3;Array.isArray(a)||(a=[a]);var h=0>c,f=0,g=Math.abs(c)/100,l=0,n=0,m;a.forEach(function(a){a=a.geometry||
a;if(!a.rings||!a.getExtent)return!1;var e=a.getExtent();if(e=e.getWidth()*e.getHeight())e=Math.sqrt(e),a=b.getNumberOfPoints(a),l+=a,n=Math.max(n,a),h&&(f=Math.max(f,e*g)),m||(m=h?l>d:a*c>4*e)});return m&&n>e?f||c:0};b.generalizeGeometry=function(c,d,e,g){if(!c||!d||0>d)return!1;e=e||500;Array.isArray(c)||(c=[c]);var h=[],l=[];c.map(function(a){var c=a.geometry||a;if(c!=a&&c.rings){a.geometry=new f;a.geometry.setSpatialReference(c.spatialReference);var d=a.geometry.rings}d&&c.rings.forEach(function(a){d.push(a.slice())});
b.getNumberOfPoints(c)>e&&(a=d||c.rings,h=h.concat(a),l.push({source:a,count:a.length}))});if(g&&window.Worker)return a(h,l,d);h.forEach(function(a){(new b.RingInfo(a)).generalize(d,.8)})};return b})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(k,g,f,e,d,c,a,b,h){var l=window.Blob||window.webkitBlob||window.mozBlob,n=window.URL||window.webkitURL||window.mozURL;
k=g([k],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(a,b,d){this._isIE=c("ie");this.returnDeferreds=!!d;this._queue={};this._acceptMessage=e.hitch(this,this._acceptMessage);this._errorMessage=e.hitch(this,this._errorMessage);a&&this.setWorker(a,e.hitch(this,function(a){this.worker=a;b(a)}))},setWorker:function(a,c){if(a instanceof Array){var d=a;a=d.shift()}var h=this._getUrl(a),h=b.normalize(h);a=!b.hasSameOrigin(h,location.href);var f;
if(!1===h)return console.log("Can not resolve worker path"),!1;this.worker&&(f=this.worker,f.removeEventListener("message",this._acceptMessage,!1),f.removeEventListener("error",this._errorMessage,!1),f.terminate(),f=null);if(a){a=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(a,e.hitch(this,function(a){a=n.createObjectURL(new l([a],{type:"text/javascript"}));c(this._createWorker(a,h))}))}catch(u){try{a=b.getProxyUrl(a).path+"?"+encodeURI(a),this._useProxy=!0,c(this._createWorker(a,d))}catch(y){return console.log("Can not create worker"),
!1}}}else setTimeout(e.hitch(this,function(){c(this._createWorker(h,d))}),0)},_createWorker:function(a,b){a=new Worker(a);a.addEventListener("message",this._acceptMessage,!1);a.addEventListener("error",this._errorMessage,!1);this.worker=a;b&&this.importScripts(b);return a},postMessage:function(a,b){if(a instanceof Array||"object"!=typeof a)a={data:a};var c=Math.floor(64E9*Math.random()).toString(36);a.msgId=c;c=this._queue[c]=new f;this.worker?(b?this.worker.postMessage(a,b):this.worker.postMessage(a),
this.emit("start-message",{target:this,message:a})):c.reject({message:"No worker was set."});return this.returnDeferreds?c:c.promise||c},terminate:function(){var a=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var b=a.length-1;0<=b;b--)this._queue[a[b]].cancel("terminated"),delete this._queue[a[b]]},addWorkerCallback:function(a,b){var c=this._getUrl(a,!0);!1===c?(b=new f,b.reject({message:"Could not load text from "+a})):(b=this.postMessage({action:"add-callback",url:c,cbName:b||
"main"}),b.then(e.hitch(this,function(a){a.target=this;this.emit("callback-added",a)})));return b},importScripts:function(a){Array.isArray(a)||(a=[a]);a=a.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!b.hasSameOrigin(a,location.href)&&(a=b.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);a=this.postMessage({action:"import-script",url:a});a.then(e.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return a},_acceptMessage:function(a){var b=a.data,c=b.msgId;if(b.status&&
"debug"==b.status)console[b.showAs||"debug"](b);else if(c&&c in this._queue){var d=this._queue[c];"progress"==b.status?d.progress(a.data):("error"==b.status?d.reject(a.data):d.resolve(a.data),delete this._queue[c])}this.emit("message",{message:a.data,event:a,target:this})},_errorMessage:function(a){this.onerror||this.onError?this.onerror?this.onerror(a):this.onError(a):console.log("Worker Error: "+a.message+"\nIn "+a.filename+" on "+a.lineno)},_getUrl:function(a,c){if(!a)return console.error("can not resolve empty path"),
!1;a.match(/\.js$/)||(a+=".js");a=h.toUrl(a);return c?b.getAbsoluteUrl(a):a},_getRemoteText:function(a,b){(a=this._getUrl(a))&&d.get(a,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(a){b(a)})},_startBlobWorker:function(){var a=this._xdSource;a||(a=this._getUrl("./mutableWorker"),a=new l(["if(!self._mutable){importScripts('"+a+"');}"],{type:"text/javascript"}),a=this._xdSource=n.createObjectURL(a));try{return new Worker(a)}catch(p){return console.log(p.message),
!1}}});c("extend-esri")&&e.setObject("workers.WorkerClient",k,a);return k})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(k){function g(a,c){var b=a.length;if(3>b)return 0;c||(c=a[0]);var d=c[0];c=c[1];for(var e=a[b-1],b=e[0]-d,h=e[1]-c,f=0,g=0,k=a.length;g<k;g++)var e=a[g],u=e[0]-d,e=e[1]-c,f=f+(u*h-b*e),b=u,h=e;return f/2}var f={};f.calculateRingArea=g;f.calculateRingCentroid=function(a,c){var b=a.length;if(!b)return null;c||(c=a[0]);var d=c[0];c=c[1];var e=0,h=0,f=0;
if(2<b)for(var g=a[b-1],b=g[0]-d,k=g[1]-c,u=0,y=a.length;u<y;u++)var g=a[u],v=g[0]-d,g=g[1]-c,w=v*k-b*g,e=e+w,h=h+(b+v)*w,f=f+(k+g)*w,b=v,k=g;0==e?h=f=0:(h/=3*e,f/=3*e);return[d+h,c+f]};f.INTERIOR=1;f.EXTERIOR=-1;f.BOUNDARY=0;f.createRingInfo=function(a,d){return new c(a,d)};f.createSegmentCoordinates=function(b){return new a(null,0,0,b)};var e=function(a){return function(){for(var b in a){var c=a[b];this[b]="function"===typeof c?c.bind(this):c}a.ctr.bind(this).apply(this,arguments)}},d=e({xmin:null,
ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(a,c,d,e,f){this.xmin=a;this.ymin=c;this.xmax=d;this.ymax=e;this.spatialReference=f},printOut:function(){console.log([this.xmin,this.xmax,this.ymin,this.ymax].join(" "))}}),c=e({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(a,c){this.ring=a;this.origin=c;a=this.ring.length-1;if(!(0>a)){if(!a)a++;else if(this.ring[a][0]!=this.ring[0][0]||this.ring[a][1]!=this.ring[0][1])a++,this.ring.push(this.ring[0].slice());
var b=0,e=0;c=!c;this.extent=new d(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<a;h++){var f=this.ring[h],k=f[0];c&&(b+=k);k<this.extent.xmin?this.extent.xmin=k:k>this.extent.xmax&&(this.extent.xmax=k);k=f[1];c&&(e+=k);k<this.extent.ymin?this.extent.ymin=k:k>this.extent.ymax&&(this.extent.ymax=k)}c&&(this.origin=[b/a,e/a]);this.area=g(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(a){this.clockwise==!a&&(this.ring.reverse(),
this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(a,c){a=this.getRingCoordinates(c).testPoint(a[0]-this.origin[0],a[1]-this.origin[1]);return this.clockwise?a:-a},generalize:function(a,c,d){function b(b,d,e){v=b;w=d;if(e||z<y)y=a,A=v-k,C=w-k,z=Math.sqrt(A*A+C*C),z>a*c?(A/=z,C/=z):z=0;y*=c}function e(){if(!z)return!0;var a=h.dx,b=h.dy,c=Math.sqrt(a*a+b*b);return c-a*A-b*C>=.9*c}c=c||.75;var h=this.getRingCoordinates(a),f=h.xs,l=h.ys,k=f[0],u=l[0],y,v,w,A,C,z=0,D=f.length-1;b(f[D],
l[D],!0);for(var F=this,B=this.clockwise?function(a){F.ring.splice(a,1)}:function(a){F.ring.splice(-a-1,1)};0<D--&&4<f.length;){var E=f[D],G=l[D];h.setSegment(k,u,E,G)&&h.testPointOnTouch(v,w,y)&&e()?(f.splice(D+1,1),l.splice(D+1,1),B(D+1),b(E,G)):(k=v,u=w,b(E,G,!0))}this._coords=null;d&&(this.area=g(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(b,c){if(c)return new a(this.ring,c[0],c[1],b,this.extent,this.clockwise);this._coords&&this._coords.eps==b||
(this._coords=new a(this.ring,this.origin[0],this.origin[1],b,this.extent,this.clockwise));return this._coords}});f.RingInfo=c;var a=e({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,_sy:null,ctr:function(a,c,e,f,g,k){this.xs=[];this.ys=[];a||(a=[]);void 0===c&&(c=0);void 0===e&&(e=0);void 0===f&&(f=0);this.eps=Math.max(f,0);g&&(f=this.eps/2,this.extent=new d(g.xmin-c-f,g.ymin-e-f,g.xmax-c+f,g.ymax-e+f));var b=a.length-1;if(!(0>b))for(g=b?a[b][0]==a[0][0]&&a[b][1]==a[0][1]?b:b+1:1,f=
k?1:-1,k=k?0:b;g--;k+=f)b=a[k],this.xs.push(b[0]-c),this.ys.push(b[1]-e)},testPoint:function(a,c){if(!this._pointBelongsToExtent(a,c))return-1;var b=this.xs.length,d=!1;this.dy=this.ys[0]-this.ys[b-1];if(0==this.dy){for(d=b;1<d--&&(this.dy=this.ys[d]-this.ys[d-1],0==this.dy););if(0==this.dy)return 0}for(var d=0<this.dy,e=0,h=this.xs[0],f=this.ys[0],g,k,u=1;u<=b;u++,h=g,f=k)if(k=u==b?0:u,g=this.xs[k],k=this.ys[k],this.setSegment(h,f,g,k)){var y=f-c,v=k-c,w=!1;0>y&&(y=-y,v=-v,w=!0);if(!(y>this.eps&&
v>this.eps)){if(this.testPointOnTouch(a,c,this.eps))return 0;0==y?0!==v&&(0>v&&(d=!d),a<h&&d&&e++):0==v?d=w:0>v&&a<h+this.dx/this.dy*(c-f)&&e++}}return 0!=e%2?1:-1},testPointOnTouch:function(a,c,d){var b=this.findIntersectionDelta(a,c,a-this.dy,c+this.dx);a=this._sx+b*this.dx-a;c=this._sy+b*this.dy-c;return a*a+c*c<=d*d},_pointBelongsToExtent:function(a,c){return a>=this.extent.xmin&&a<=this.extent.xmax&&c>=this.extent.ymin&&c<=this.extent.ymax},setSegment:function(a,c,d,e){this._sx=a;this.dx=d-a;
this._sy=c;this.dy=e-c;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(a,c,d,e,f){void 0===f&&(f=!0);d-=a;e-=c;var b=this.dy*d-this.dx*e;if(0==b)return 0;var h=a-this._sx,g=c-this._sy,l=g*d-h*e,h=f?0:g*this.dx-h*this.dy;0>b&&(b=-b,l=-l,h=-h);return f||(h=0>h?0:h<b?h/b:1,this.testPointOnTouch(a+h*d,c+h*e,this.eps))?0>=l?0:l<b?l/b:1:-1},addPointOfSegmentAt:function(a){this.xs.push(this._sx+a*this.dx);this.ys.push(this._sy+a*this.dy)}});f.RingCoordinates=a;k.document?define(function(){return f}):
k.GeometryUtil_base=f})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){return{provideEditorJson:function(p,t){function q(){function a(a,b,c){return k(t.preProcessFile&&t.preProcessFile(a,b,r),function(d){if(!1!==d)return k(c&&c(),function(){return t.postProcessFile&&t.postProcessFile(a,b,r)})})}if(u&&u.files&&u.files){var b=t.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],d={"theme.css.txt":function(b){return a(b,"theme.css.txt",function(){r.theme=l.fromCssText(b.data,t)})},"metadata.xml":function(b){return a(b,"metadata.xml",
function(){return e.parseMetadataXML(b,r,t)})},"report.xml":function(b){return a(b,"report.xml",function(){return f.parseReportXML({report:p,parsers:c,file:b,templateJson:r,variableProvider:t.variableProvider,useVariableProviderToCollectOnly:t.useVariableProviderToCollectOnly,tableDefaultStyles:t.tableDefaultStyles,processFileName:v,putImageData:function(a,b){a=v(a);b=b||y[a];h.putImageData(a,b);return b},log:w,queryMetaDataFunc:function(a){return t.queryMetaDataFunc&&t.queryMetaDataFunc(a,r)},postProcessChartJson:function(a,
b){t.postProcessChartJson&&t.postProcessChartJson(r,a,b)},postProcessMapJson:function(a,b){t.postProcessMapJson&&t.postProcessMapJson(r,a,b)},postProcessInfographicJson:function(a,b){t.postProcessInfographicJson&&t.postProcessInfographicJson(r,a,b)},postProcessTableInSection:function(a,b){t.postProcessTableInSection&&t.postProcessTableInSection(r,a,b)}})})},generic:function(b,c){return a(b,c)}},q=new n;b.forEach(function(a){var b=u.files.filter(function(b){return b.name===a})[0],c=b&&(d[a]||d.generic);
c&&q.add(function(){return k(g.isPlayerOnServer?k():m.delay(50)).then(function(){return c(b,a)}).otherwise(function(a){r.metadata.parseErrors.push(a);console.log(a)})})});return q.getPromise()}}t=t||{};t.variableProvider=t.variableProvider||new a;t.tableDefaultStyles=t.tableDefaultStyles||new b;var r={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},u=p.portalJson,y={};t.getImageData=
function(a){return y[v(a)]};var v=function(a){return a?a.toLowerCase():""},w=t.log||function(a){};return k(c.initialize(),function(){return k(d.collectImageResources(u,y,v),function(){for(var a in y)h.putImageData(a,y[a]);return k(q(),function(){r.metadata.parseErrors.length||(p.templateJson=r)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser",
"./ClassicReportSectionsParser"],function(k,g,f){return{parseReportXML:function(e){e.log(e.file.data);var d=k.parseXml(e.file.data);e.parsers.getParser("document").parseDocument(d,e);e.report.isGraphicReport?(e.templateJson.sectionsTables=[],g.parseSectionsGraphic(d,e)):(e.templateJson.sections=[],f.parseSectionsClassic(d,e))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(k){return{parseSectionsGraphic:function(g,f){k.queryTopJson(g,"table").forEach(function(e){try{f.templateJson.sectionsTables.push(f.parsers.getParser("section").parseTable(e,f,{fixTableWidthsForPage:!0}))}catch(d){console.log(d)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(k){return{parseSectionsClassic:function(g,f){k.queryTopJson(g,"section").forEach(function(e){f.templateJson.sections.push(f.parsers.getParser("section").parseSection(e,
f,{fixTableWidthsForPage:!0}))});this._splitSections(f)},_splitSections:function(g){g=g.templateJson;var f=[];g.sections.forEach(function(e){function d(){c={type:e.type,stack:[]};f.push(c)}var c;d();e.stack.forEach(function(a){if("hr"===a.id){var b=!!c.stack.length;c.stack.push(a);b&&d()}else"table"===a.id?(c.stack.some(function(a){return"table"===a.id})&&d(),c.stack.push(a)):"pageBreak"===a.id?(c.stack.length&&d(),c.stack.push(a),d()):c.stack.push(a)})});f=f.filter(function(e){return!!e.stack.length});
g.sections=f}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(k,g,f,e,d,c,a){return{parseMetadataXML:function(b,h,l){l.log&&l.log(b.data);var n=g.parseXml(b.data);if(n&&n.tags)return k([a.parseTradeAreaCalculators(n,
h,l),f.parseDataCollectionsCalculators(n,h,l),e.parseScriptsCalculators(n,h,l),d.parseLocatorCalculators(n,h,l)]).then(function(){return c.parseMapCalculators(n,h,l)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(k,g,f){return{parseDataCollectionsCalculators:function(e,d,c){k.queryJson(e,"DataCollections").forEach(function(a){var b=
k.queryJson(a,"ComparisonLevel");if(f.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");var e;if(c.variableProvider.isPlayerOnly||b.length)e=g.getObjects(a);b.length&&(a={calculatorName:a.attributes.Name,levels:b.map(function(a){return a.attributes.Name}).filter(function(a){return!c.validateGeographyLevelFunc||c.validateGeographyLevelFunc(a)}),variableObjects:e.variableObjects},d&&(d.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));c.variableProvider.isPlayerOnly&&(e.variableObjects.forEach(function(a){c.variableProvider.addVariable(a)}),e.scriptObjects.forEach(function(a){c.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(k,g){var f={getObjects:function(e,d){d=f._getVariableInfo(e,d);e=f._getScriptObjects(e,
d.fieldNameToVariableCache);return{variables:d.variables,variableObjects:d.variableObjects,scriptObjects:e}},_getVariableInfo:function(e,d){var c=[];k.queryJson(e,d?/^(RawFields|Fields)$/:"Fields").forEach(function(a){c=c.concat(k.queryJson(a,/^(Field|PortalField)$/))});var a=[],b=[],h={};c.forEach(function(c){a.push(c.attributes.MapTo);if(c=g.fieldTagToVariable(c,e.attributes.Name))h[c.fieldName]=c,b.push(c)});return{variables:a,variableObjects:b,fieldNameToVariableCache:h}},_getScriptObjects:function(e,
d){var c=k.queryJson(e,"Scripts"===e.name?"Fields":"CalculatedFields")[0],c=c&&k.queryJson(c,"Script")||[];"Scripts"===e.name&&(c=c.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return c.map(function(a){var b=g.scriptTagToVariable(a,e.attributes.Name);b.usedFields&&(b.usedMapTos=[],b.usedFields.forEach(function(a){var c=d[a];c?c.usedMapTos?b.usedMapTos=b.usedMapTos.concat(c.usedMapTos):b.usedMapTos.push(c.fullName):console.log("Error parsing used fields for "+
a)}),d[b.fieldName]=b);return b})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var k={getType:function(g,f){return g?0===g.indexOf("esriFieldType")?g:"esriFieldType"+g:f},fieldTagToVariable:function(g,f){return g.attributes.MapTo&&"AREA_ID"!==g.attributes.Name?{id:g.attributes.MapTo.substr(g.attributes.MapTo.lastIndexOf(".")+1),fullName:g.attributes.MapTo,alias:g.attributes.Alias,fieldName:g.attributes.Name,
precision:Number(g.attributes.Decimals)||0,calculatorName:f,templateName:f+"."+g.attributes.Name,type:k.getType(g.attributes.Type,g.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(g,f){return{id:g.attributes.Name,fullName:f+"."+g.attributes.Name,fieldName:g.attributes.Name,alias:g.attributes.Alias,precision:Number(g.attributes.Decimals)||0,usedFields:g.attributes.usedFields?g.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:g.tags[0].text,calculatorName:f,templateName:f+"."+g.attributes.Name,type:k.getType(g.attributes.Type,g.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(k,g){return{parseScriptsCalculators:function(f,e,d){k.queryJson(f,"Scripts").forEach(function(c){d.variableProvider.isPlayerOnly&&
(c=g.getObjects(c),c.variableObjects.forEach(function(a){d.variableProvider.addVariable(a)}),c.scriptObjects.forEach(function(a){d.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(k,g,f,e){return{parseLocatorCalculators:function(d,
c,a){d=f.queryJson(d,"Locator");return k(d.map(function(b){var d=[];f.queryJson(b,/^(PointFields|Fields)$/).forEach(function(a){d=d.concat(f.queryJson(a,/^(Field|Direction|Distance)$/))});var l=[];d.forEach(function(a){"Direction"===a.name?a.attributes.MapTo="DIRECTION":"Distance"===a.name&&(a.attributes.MapTo="DISTANCE");(a=e.fieldTagToVariable(a,b.attributes.Name))&&l.push(a)});var n={calculatorName:b.attributes.Name,variableObjects:l,layerID:null,layerUrl:null,layerName:b.attributes.LayerName};
b.attributes.Points&&0===b.attributes.Points.indexOf("std:")?n.layerID=b.attributes.Points.replace("std:",""):n.layerUrl=b.attributes.Layer;c.metadata.locatorCalculatorsHash[b.attributes.Name]=n;a.variableProvider.isPlayerOnly&&l.forEach(function(b){a.variableProvider.addVariable(b)});return g(!a.validateLocatorCalculator||a.validateLocatorCalculator(n.layerID,n.layerUrl),function(a){n.isValid=a})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(k,g,f,e){var d={parseMapCalculators:function(c,a,b){k.queryJson(c,"Maps").forEach(function(c){k.queryJson(c,"Map").forEach(function(e){var h=d._parsePortalLayers(e),f=d._parseStudyAreas(e),h={fieldName:e.attributes.Name,width:Number(e.attributes.Width),height:Number(e.attributes.Height),defaultBasemapId:h.defaultBasemapId,webMapId:h.webMapId,additionalLayerInfos:d._parseAdditionalLayers(e,a),pinSymbolJson:d._parseSiteLayerPinSymbol(e,
b),areaSymbolJsons:f.symbolJsons,areaSymbolRamp:f.ramp,mapScale:Number(e.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[c.attributes.Name+"."+e.attributes.Name]=h)})})},_parsePortalLayers:function(c){var a;c=k.queryJson(c,"Layer").filter(function(a){return!!a.attributes.PortalItemId});1<c.length&&(a=c.shift());c=c.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,webMapId:c&&c.attributes.PortalItemId}},_parseAdditionalLayers:function(c,a){var b=[];k.queryJson(c,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(a){return!!a.attributes.ServiceUrl||
"LocatorResultsLayer"===a.name||"ComparisonResultsLayer"===a.name}).forEach(function(c){if(c.attributes.ServiceUrl)b.push({url:c.attributes.ServiceUrl});else if("LocatorResultsLayer"===c.name){var d=c.tags&&c.tags.filter(function(a){return"Renderer"===a.name})[0],e=a.metadata.locatorCalculatorsHash[c.attributes.CalculatorName];e&&e.isValid&&b.push({isLocatorLayer:!0,layerName:c.attributes.LayerName,calculatorName:c.attributes.CalculatorName,calculatorInfo:e,rendererJson:d&&g.parseRendererJson(d)})}else"ComparisonResultsLayer"===
c.name&&((d=(d=c.tags&&c.tags.filter(function(a){return"Renderer"===a.name})[0])&&g.parseRendererJson(d))&&"esriTS"===d.uniqueValueInfos[0].symbol.type?b[b.length-1].labelRendererJson=d:(e=(e=c.tags&&c.tags.filter(function(a){return"LabelingInfo"===a.name})[0])&&g.parseLabelRendererJson(e),b.push({isComparisonLayer:!0,calculatorName:c.attributes.CalculatorName,rendererJson:d,labelRendererJson:e})))});return b.length&&b},_parseSiteLayerPinSymbol:function(c,a){var b;if(c=k.queryJson(c,"SiteLayer")[0])if((c=
k.queryJson(c,"Symbol")[0])&&"Image"===c.attributes.Type)(a=a.getImageData(c.attributes.Name))&&(b={type:"esriPMS",contentType:e.getContentType(a),imageData:e.base64DataFromDataURL(a),url:c.attributes.Url,width:Number(c.attributes.Width),height:Number(c.attributes.Height),angle:Number(c.attributes.Angle)||0,xoffset:Number(c.attributes.XOffset)||0,yoffset:Number(c.attributes.YOffset)||0});else if(c&&"Marker"===c.attributes.Type){b=(b=k.queryJson(c,"Fill")[0])&&k.queryJson(b,"Color")[0];var d=(a=k.queryJson(c,
"Outline")[0])&&k.queryJson(a,"Color")[0];b={type:"esriSMS",style:"esriSMS"+(c.attributes.Style||"Circle"),size:Number(c.attributes.Size),angle:Number(c.attributes.Angle)||0,xoffset:Number(c.attributes.XOffset)||0,yoffset:Number(c.attributes.YOffset)||0,color:f.parseColorTag(b),outline:a&&{type:"esriSLS",color:f.parseColorTag(d),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return b},_parseStudyAreas:function(c){var a=(c=k.queryJson(c,
"StudyAreasLayer")[0])&&k.queryTopJson(c,"SymbolsPalette")[0];c=(a&&k.queryTopJson(a,"Symbol")||[]).map(d._parseAreaSymbol);var b=a&&k.queryTopJson(a,"SymbolRamp")[0],e;b&&(a=k.queryTopJson(b,"First")[0],b=k.queryTopJson(b,"Last")[0],a=a&&k.queryTopJson(a,"Symbol")[0],b=b&&k.queryTopJson(b,"Symbol")[0],a&&b&&(e=[a,b].map(d._parseAreaSymbol)));return{ramp:e,symbolJsons:c}},_parseAreaSymbol:function(c){var a=k.queryJson(c,"Fill")[0],a=a&&k.queryJson(a,"Color")[0],b=(c=k.queryJson(c,"Outline")[0])&&
k.queryJson(c,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:f.parseColorTag(a)||[0,0,0,1],outline:c&&{type:"esriSLS",color:f.parseColorTag(b),style:"esriSLS"+(c.attributes.Style||"Solid"),width:void 0===c.attributes.Width?0:Number(c.attributes.Width)}}}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(k,g){return{parseRendererJson:function(f){return k.parseXml(g.parseJson(f))},parseLabelRendererJson:function(f){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:k.parseXml(g.parseJson(f)).map(function(e){return{value:e.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:e.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(k,g){return k(null,{parseJson:function(f,e){function d(a,e){if("string"===
typeof a)b+="\x3c"+e+' type\x3d"string"\x3e'+g.encodeXML(a,!1)+"\x3c/"+e+"\x3e";else if("number"===typeof a)b+="\x3c"+e+' type\x3d"number"\x3e'+a+"\x3c/"+e+"\x3e";else if("boolean"===typeof a)b+="\x3c"+e+' type\x3d"boolean"\x3e'+a+"\x3c/"+e+"\x3e";else if(Array.isArray(a))c(a,e);else if(a&&"object"===typeof a){b+="\x3c"+e+' type\x3d"object"\x3e';for(var h in a)d(a[h],h);b+="\x3c/"+e+"\x3e"}}function c(a,c){b+="\x3c"+c+' type\x3d"array"\x3e';a.forEach(function(a){d(a,"item")});b+="\x3c/"+c+"\x3e"}
var a=e&&e.rootName||"root",b="";e&&e.addDocumentOptions&&(b+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');d(f,a);return b=decodeURIComponent(encodeURIComponent(b).replace("%19",""))},parseXml:function(f){function e(a){if(!a.attributes)return null;for(var b=0;b<a.attributes.length;b++){var c=a.attributes[b];if("type"===c.name)return c.value}return null}function d(a,b){if(b.childNodes)for(var d=0,e=b.childNodes.length;d<e;d++){var h=b.childNodes[d],f=c(h);void 0!==f&&(a[h.nodeName]=f)}return a}
function c(b){var c=e(b);if(b.nodeName&&c)switch(c){case "string":return b.childNodes[0]?g.decodeXML(b.childNodes[0].nodeValue):"";case "number":return Number(b.childNodes[0].nodeValue);case "boolean":return"true"===b.childNodes[0].nodeValue;case "object":return d({},b);case "array":return a([],b)}}function a(a,b){if(b.childNodes)for(var d=0,e=b.childNodes.length;d<e;d++)a[d]=c(b.childNodes[d]);return a}var b,h;f=(new DOMParser).parseFromString(f,"text/xml").childNodes;for(var l=0;l<f.length;l++)if(1===
f[l].nodeType){h=f[l];break}h&&(f=e(h),"object"===f?d(b={},h):"array"===f&&a(b=[],h));return b}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(k){if(!k)return null;k=k.attributes;return[Number(k.Red)||0,Number(k.Green)||0,Number(k.Blue)||0,k.Transparency?255*(1-Number(k.Transparency)/100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(k,g,f){return{parseTradeAreaCalculators:function(e,d,c){e=k.queryJson(e,"SpecialTradeAreaFields");d.metadata.specialTradeAreaCalculatorName=e[0]&&e[0].attributes&&e[0].attributes.Name;e.forEach(function(a){c.variableProvider.isPlayerOnly&&g.getObjects(a,!0).variableObjects.forEach(function(a){a.alias=a.alias||f.getFieldLabel(a.id);c.variableProvider.addVariable(a)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(k,g,f,e,d){return{collectImageResources:function(c,a,b){function h(b){return k(d.getImageInfo(a[b],b),null,function(){delete a[b]})}c&&c.files&&c.files.forEach(function(c){var d=f.getContentType(c.name);d&&"image/"===d.substr(0,6)&&(a[b(c.name)]=e.base64DataToDataURL(c.data,d))});c=[];for(var l in a)c.push(h(l));return g(c)}}})},
"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(k,g){var f={},e={},d;f.initialize=function(){if(d)return d.promise;d=new k;g("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(c,a,b,h,f,g,k,p){e.document=c;e.chart=a;e.infographic=
b;e.section=h;e.field=f;e.filter=g;e.sorting=k;p.init().then(d.resolve)});return d.promise};f.getParser=function(c){return e[c]};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.Variables;var d=k(null,{variable:null,constructor:function(c){this.variable=c},calculate:function(c){return 0},
getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return k(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,_templateNameToVariableCache:null,constructor:function(c){this._templateNameToVariableCache=c&&c.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)c=this._templateNameToVariableCache[a],
this._fieldNameToVariableCache[c.fieldName]=c},get:function(c){return this._templateNameToVariableCache[c]||this._fieldNameToVariableCache[c]},toCalculator:function(c){return(c=this.get(c))&&new d(c)},addVariable:function(c){this._fieldNameToVariableCache[c.fieldName]=c;this._templateNameToVariableCache[c.templateName]=c},addScriptVariable:function(c){this._fieldNameToVariableCache[c.fieldName]=c;this._templateNameToVariableCache[c.templateName]=c},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(c){return this._fieldNameToVariableCache[c]},
this)},getVariablesDataVintageDescription:function(c){var a={},b={},d={};this.getVariables().forEach(function(a){a.fullName&&(d[a.fullName.toLowerCase()]=a)});for(var g in c.usedVariablesCache)if(c=d[g.toLowerCase()])c.vintage&&(b[c.vintage]=1),c.source&&(a[c.source]=1);if(!Object.keys(a).length&&!Object.keys(b).length)return"";g=[];Object.keys(a).length&&g.push(f.substitute(e.sourcePattern,{source:Object.keys(a).join(", ")}));Object.keys(b).length&&g.push(f.substitute(e.vintagePattern,{vintage:Object.keys(b).join(", ")}));
return g.join(" ")},toJson:function(){return{templateNameToVariableCache:g.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(k,g,f){return k(null,{_styles:null,_stylesArray:null,constructor:function(e){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};g.mixin(this._styles,e);this._stylesArray=[];for(var d in this._styles)this._stylesArray.push(d)},
getStyle:function(e){return this._styles[e]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(e,d,c){if(d=this.getStyle(d))for(var a in d)c&&void 0!==e[a]||(e[a]=d[a])},findDefaultStyle:function(e){var d,c=this;this.getStylesArray().some(function(a){var b=c.getStyle(a),h;for(h in b){if(!e[h])return!1;if("color"===h||"backgroundColor"===h){if(!f.colorsEqual(e[h],b[h]))return!1}else if(e[h]!==b[h])return!1}d=a;return!0});return d}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define(["esri/dijit/geoenrichment/utils/CacheUtil"],
function(k){function g(){return k.get("ImageDataHolder.imageData")}function f(){return k.get("ImageDataHolder.fileNameToOriginal")}return{putImageData:function(e,d){if("string"===typeof e&&d){var c=e.toLowerCase();f()[c]=e;g()[c]=d}else console.error("Invalid image filename or data!")},getImageData:function(e){return"string"!==typeof e?null:g()[e.toLowerCase()]},findFileNameByData:function(e){var d=g(),c;for(c in d)if(e===d[c])return f()[c];return null}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles",
"../ThemeUpdateUtil","../../../_devConfig"],function(k,g,f){var e={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},d={colors:1,colors3series:1};return{fromCssText:function(c){function a(a){var b=n;a.split("@").forEach(function(a){b=b[a]=b[a]||
{}});return b}function b(a,b){if(b.borderStyle||b.border)if(a.border={},a.border.style=k.toSupportedValue(b.borderStyle),"string"===typeof b.border){var c=b.border.split(" ");3===c.length&&(a.border.thickness=Number(c[0].replace("px","")),a.border.lineStyle=c[1],a.border.color=c[2])}for(var d in b)if("border"!==d&&"borderStyle"!==d){var c=b[d],f;f=d;var g=c,l=a;"font-size"===f?(l[e[f]]=h(g.replace("px","")),f=!0):"background-repeat"===f?(l[e[f]]=h("repeat"===g),f=!0):"background-size"===f?(l[e[f]]=
h("contain"===g||"cover"===g),l.size="auto"===g?null:g,f=!0):f=!1;f||(a[e[d]||d]=h(c))}}function h(a){if(void 0===a||null===a||"null"===a||"undefined"===a)return"";if("true"===a)return!0;if("false"===a)return!1;if(!0===a)return!0;if(!1===a)return!1;var b=Number(a);return isNaN(b)?a:b}function l(a){if(f.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof a)for(var b in a){var c=a[b];if(d[b]){var e=[],h=Object.keys(c);if(h.length){var g=
h.every(function(a){return-1!==a.indexOf("_")});h.forEach(function(a,b){e[g?a.split("_")[1]:b]=c[a]})}a[b]=e}else l(c)}}var n={};c=c.replace(/\r?\n|\r/g,"");c=c.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");c=c.replace("data:","dataM");c=c.replace(";base64","Mbase64");var m=function(){var a={};(c.match(/\..*?\}/g)||[]).forEach(function(b){var c=b.substring(1,b.indexOf("{")).trim(),d={};b.substring(b.indexOf("{")+1,b.indexOf("}")).trim().split(";").forEach(function(a){if(a=a.trim()){a=a.split(":");var b=a[1].trim(),
b=b.replace("dataM","data:"),b=b.replace("Mbase64",";base64");d[a[0].trim()]=b}});a[c]=d});return a}(),p;for(p in m)b(a(p),m[p]);delete n.themeMetadata;l(n);g.populateMissingStyles(n);return n}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(k,g,f,e){return{populateMissingStyles:function(d){if(d){d.table&&d.table.overrideStyles||(d.table={overrideStyles:k.mixin({},
d.table)});d.icon||(d.icon=k.clone(d.infographic.staticInfographic.icon),d.highlightedIcon=k.clone(d.infographic.staticInfographic.highlightedIcon));d.chart.icon||(d.chart.icon=k.clone(d.infographic.staticInfographic.icon));d.chart.xAxis.lineColor||(d.chart.xAxis.lineColor=d.chart.xAxis.axisStyle.color,d.chart.yAxis.lineColor=d.chart.yAxis.axisStyle.color);var c=e.getThemeColors(d),a=d.chart.colors.slice(),b=d.chart.colors3series&&d.chart.colors3series.slice(),h=f.getDefaultTheme({defaultFontFamilty:d.document.fontFamily,
defaultFontSize:d.document.fontSize});e.applyThemeColorsToTheme({theme:h,colors:c,chartColors:a,colors3series:b});g.populateObject(d,h,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(k,g,f,e,d,c){var a=k(d,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(a){g.mixin(this,
a)},add:function(a,d){d=d||{};var b=this;if(!this._isDestroyed){this._lastDfd||(this.onStarted(),this._lastDfd=new f);this._isFinished=!1;var h=function(){var h=function(){if(!b._isDestroyed)try{return"function"===typeof a?a():a}catch(q){return(new f).reject(q)}},g=0<=d.delayBefore?function(){return c.delay(h,d.delayBefore)}:h;return(0<=d.delayAfter?function(){return e(g(),function(a){return c.delay(function(){return a},d.delayAfter)})}:g)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=
e(h()):this._lastPromise=e(this._lastPromise).then(h);var g=this._lastPromise;e(g,function(a){g!==b._lastPromise||b._isDestroyed||b._isFinished||g&&!g.isFulfilled()||(b._isFinished=!0,b._lastDfd.resolve(a),b._lastResult=a,b._lastDfd=null,b.onFinished(a))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},
destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(a){}});a.executeFunctions=function(b,c,d){d=d||{};var h=new a,f=[];b.forEach(function(a,b){h.add(function(){return e(a(),function(a){f.push(a);return a})},{delayBefore:0===b?void 0:c})});d.onQueueReady&&d.onQueueReady(h);return e(h.getPromise(),function(a){return d.collectResults?f:a})};a.processArrayInBatches=function(a,c){function b(){if(a.length){for(var e=[],h=0;h<c.batchSize&&a.length;h++)e.push(a.shift());c.processBatch?
c.callback(e):e.forEach(c.callback);setTimeout(b,c.timeout||0)}else d.resolve()}a=a.slice();var d=new f;b();return d.promise};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/WebMapJsonUtil":function(){define([],function(){return{processWebMapJson:function(k,g){function f(d,c,a){d=d.featureCollection.layers[0].featureSet.features[0];d.attributes=d.attributes||{};d.attributes[c]=a}var e=JSON.parse(g);e.operationalLayers.forEach(function(d){var c;c=d.featureCollection&&d.featureCollection.layers&&
1===d.featureCollection.layers.length?d.featureCollection.layers[0].id:void 0;"string"===typeof c&&0===c.indexOf("SiteLayer")?(d.isSiteLayer=!0,(c=0===c.indexOf("SiteLayer.")?c.replace("SiteLayer.",""):void 0)&&f(d,"STORE_ID",c)):"string"===typeof c&&0===c.indexOf("StudyAreasLayer.")?(d.isSiteLayer=!0,f(d,"AREA_ID",c.replace("StudyAreasLayer.",""))):"string"===typeof c&&0===c.indexOf("LocatorResultsLayer.")?(d.isLocatorLayer=!0,d.calculatorName=c.replace("LocatorResultsLayer.","")):"string"===typeof c&&
0===c.indexOf("ComparisonResultsLayer.")?(d.isComparisonLayer=!0,d.calculatorName=c.replace("ComparisonResultsLayer.","")):d.isOtherLayer=!0});return{fileName:k,originalString:g,webMapJson:e}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),
function(k,g,f,e,d,c){return{getAttachmentsStoreJson:function(a,b){function d(a){if(b.noCache)return a;m=m||{};for(var c in m)if(m[c]===a)return c;c="image_"+n++;m[c]=a;return c}function l(){return g([b.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(a){var b=a[0]||[],h=a[1]||[],l=a[2]||[];return g(b.map(function(a){return g([k(a.getThumbnail(),function(a){return c.ensureDataUrlForRemoveImage(a)}),k(a.getUrl(),function(a){return c.ensureDataUrlForRemoveImage(a)})]).then(function(b){a.__thumbnail=
d(b[0]);a.__url=d(b[1])})})).then(function(){return{images:b.map(function(a){var b=a.__thumbnail,c=a.__url;delete a.__thumbnail;delete a.__url;return{description:a.description,thumbnail:b,url:c,filename:a.filename,imageViewType:a.imageViewType}}),attributes:h.map(function(a){return f.attributeToJson(a)}),notes:l.map(function(a){return e.noteToJson(a)})}})})}if(!a)return null;var n=0,m,p=[],t=[];if(a.supportsMultipleAreas)for(var q=0;q<b.numAreas;q++)a.setCurrentAnalysisAreaIndex(q),t.push(k(l(),function(a){p.push(a)}));
else t.push(k(l(),function(a){p.push(a)}));return g(t).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,areaAttachments:p,imageDataCache:m}})},getAttachmentsStoreFromJson:function(a){return a&&new d(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(k){return{text:k.text}},noteFromJson:function(k){return{text:k.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when"],function(k,g){var f={fromJson:function(e){function d(c){return e.imageDataCache&&e.imageDataCache[c]||c}e.areaAttachments=e.areaAttachments||e.areaAttachements;delete e.areaAttachements;return{getImagesForAreaAt:function(c){c=e.supportsMultipleAreas?c:0;return(e.areaAttachments[c]&&(e.areaAttachments[c].images||e.areaAttachments[c].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return d(a.thumbnail)},
getUrl:function(){return d(a.url)}}})},getAttributesForAreaAt:function(c){c=e.supportsMultipleAreas?c:0;return e.areaAttachments[c]&&e.areaAttachments[c].attributes||[]},getNotesForAreaAt:function(c){c=e.supportsMultipleAreas?c:0;return e.areaAttachments[c]&&e.areaAttachments[c].notes||[]}}}};return k(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(e){(this._provider=e.getAttachmentsForAreaAt||e.getImagesForAreaAt||e.getAttributesForAreaAt||e.getNotesForAreaAt?
e:f.fromJson(e))&&this._provider.getAttachmentsForAreaAt&&(e.getImagesForAreaAt=function(d){return e.getAttachmentsForAreaAt(d)});this.supportsMultipleAreas=e.supportsMultipleAreas},initialize:function(){},getImages:function(){function e(c){c.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var d=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return d?Array.isArray(d)?(e(d),d):g(d,function(c){e(c);
return c}):d},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(e){this._currentAreaIndex=e}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder",
"../conditionalStyling/ConditionalStyleUtil"],function(k,g,f){return{serialize:function(e){this._attachImagesToTemplateJson(e);return e},_attachImagesToTemplateJson:function(e){function d(a){var b=g.getImageData(a);b&&(c[a]=b)}var c={};k.processTemplateFieldInfos(e,function(a){a.isImage?(d(a.imageJson.fileName),a.triggerJson&&f.collectImageFileNames(a.triggerJson).forEach(d)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(a){a.image&&d(a.image.imageJson.fileName)})});
k.processSectionElements(e,function(a){"img"===a.id&&d(a.fileName)});e.imageData=c},deserialize:function(e){this._takeImagesFromTemplateJson(e);return e},_takeImagesFromTemplateJson:function(e){for(var d in e.imageData)g.putImageData(d,e.imageData[d]);delete e.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter"],function(k){var g={},f={FontSize:"fontSize",FontColor:"fontColor",
FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},e={},d;for(d in f)e[f[d]]=d;g.getConditionalStyle=function(a,b){return(a=g.getMatchedCase(a,b))?g.styleFromSetters(a.setters):null};g.getMatchedCase=function(a,b){if(null!==a&&""!==a&&(a=Number(a),b&&!isNaN(a))){var c;b.cases.some(function(b){if(g._checkValueMatchesCase(a,b))return c=b,!0});return c}};g._checkValueMatchesCase=function(a,b){function c(a,b,c){switch(b){case "\x3d":return a===c;case "\x3c":return a<c;case "\x3e":return a>
c;case "\x3c\x3d":return a<=c;case "\x3e\x3d":return a>=c}return!1}return b.compareInfos.length&&b.compareInfos.every(function(b){return c(a,b.operator,Number(b.value))})};g.styleFromSetters=function(a){if(!a)return null;var b={};a.forEach(function(a){f[a.property]&&(b[f[a.property]]=a.value);"IsBold"===a.property&&(b.fontWeight="True"===a.value?"bold":"normal");"IsItalic"===a.property&&(b.fontStyle="True"===a.value?"italic":"normal");"IsUnderlined"===a.property&&(b.textDecoration="True"===a.value?
"underline":"none")});k.ptToPxObj(b);return b};g.settersFromStyle=function(a){var b=[];a=k.pxToPtObj(a,!0);for(var c in a){var d=e[c],f=a[c];!d||"string"!==typeof f&&isNaN(f)||b.push({property:d,value:f});"fontWeight"===c?b.push({property:"IsBold",value:"bold"===f?"True":"False"}):"fontStyle"===c?b.push({property:"IsItalic",value:"italic"===f?"True":"False"}):"textDecoration"===c&&b.push({property:"IsUnderlined",value:"underline"===f?"True":"False"})}return b};g.processImageJsonForTrigger=function(a,
b,c){var d=g.getMatchedCase(b,c);d||c.cases.some(function(a){if("default"===a.compareInfos[0].value)return d=a,!0});d&&(a.fileName=d.setters[0].value)};g.getStatistics=function(a){var b=Infinity,c=-Infinity,d,e,f;a&&a.cases.forEach(function(a){a.compareInfos&&a.compareInfos.forEach(function(a){var h=Number(a.value);isNaN(h)||(h<b&&(b=h,e="\x3c"===a.operator||"\x3c\x3d"===a.operator),h>c&&(c=h,f="\x3e"===a.operator||"\x3e\x3d"===a.operator),d=!0)})});return d&&-1E12<b&&1E12>b&&-1E12<c&&1E12>c?{min:b,
max:c,canFallBelowMin:e,canFallAboveMax:f}:null};var c=/\.png$/i;g.collectImageFileNames=function(a){var b=[];a&&a.cases&&a.cases.forEach(function(a){a.setters&&a.setters.forEach(function(a){"Source"===a.property&&c.test(a.value)&&b.push(a.value)})});return b};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./map/RendererToMetadataConverter"],function(k,g){var f=
{},e={STORE_ID:1,AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1};f.recoverMetadataFromAreaData=function(d,c){d=d[0];var a={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},b={},h;for(h in d){var f=d[h].data,n=d[h].comparisonLevels,m=c.map[h],p=!!m,m=p&&"object"===typeof m&&m.webMapJson||null,t=c.locator[h],t={name:p?"Maps":t?"Locator":"DataCollections",attributes:{Name:h},tags:[]};a.tags[0].tags.push(t);var q=[];if(p)for(var r in f){if(!e[r]){var u={name:"Map",attributes:{Name:r},
tags:[{name:"Layers",tags:[]}]};m&&m.operationalLayers.forEach(function(a){if(a.isLocatorLayer){var c={name:"LocatorResultsLayer",attributes:{CalculatorName:a.calculatorName},tags:[g.convertRendererJson(a.featureCollection.layers[0].layerDefinition.drawingInfo.renderer)]};b[a.calculatorName]=a.featureCollection.layers[0].title;u.tags[0].tags.push(c)}a.isComparisonLayer&&(c=a.featureCollection.layers[0].layerDefinition.drawingInfo,a={name:"ComparisonResultsLayer",attributes:{CalculatorName:a.calculatorName},
tags:[g.convertRendererJson(c.renderer)]},c.labelingInfo&&a.tags.push(g.convertLabelingInfo(c.labelingInfo)),u.tags[0].tags.push(a))});q.push(u)}}else for(r in f)q.push({name:"Field",attributes:{Name:r,Alias:r,MapTo:"DC."+r,Type:"number"===typeof f[r]?"Double":"String"}});t.tags.push({name:"Fields",tags:q});if(n&&n.length){var y=[],v={};n.forEach(function(a){a.StdGeographyLevel&&!v[a.StdGeographyLevel]&&(v[a.StdGeographyLevel]=1,y.push(a.StdGeographyLevel))});y.length&&t.tags.push({name:"ComparisonLevels",
tags:y.map(function(a){return{name:"ComparisonLevel",attributes:{Name:a}}})})}}a.tags[0].tags.forEach(function(a){if("Locator"===a.name){var c=b[a.attributes.Name];c&&(a.attributes.LayerName=c)}});return k.parseJson(a)};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/RendererToMetadataConverter":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(k,
g,f){var e={convertRendererJson:function(d){switch(d.type){case "simple":"esriPMS"===d.symbol.type&&(d=k.clone(d),delete d.symbol.url)}return f.parseXml(g.parseJson(d,{rootName:"Renderer"}))},convertLabelRendererJson:function(d){d=d.uniqueValueInfos.map(function(c){return{labelExpressionInfo:{expression:"$feature.StdGeographyName"},where:"StdGeographyLevel\x3d'"+c.value+"'",labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:c.symbol}});return e.convertLabelingInfo(d)},convertLabelingInfo:function(d){return f.parseXml(g.parseJson(d,
{rootName:"LabelingInfo"}))}};return e})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/CacheUtil ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){var m={_getCache:function(){return e.get("TemplateJsonLoader")},getCachedTemplateJsonPromise:function(a,b){a=a+";"+b.reportID;return(a=this._getCache()[a])&&a.modified===b.modified?a.promise.then(function(a){return{templateJson:k.clone(a.templateJson),templateVariableProvider:a.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(a,b,c){b=b+";"+c.reportID;this._getCache()[b]={modified:c.modified,promise:a}}};return{getTemplateJsonByID:function(a,
c){var e=this,l=new g;f(d.getCustomReportByID(a),function(d){if(d){var g=c&&m.getCachedTemplateJsonPromise(a.countryID,d);g?g.then(l.resolve,l.reject):(g=e._loadCustomReportData(d).then(function(){var a=new h;return f(b.provideEditorJson(d,{variableProvider:a}),function(){var b=d.templateJson;d.portalJson=null;d.templateJson=null;return{templateJson:b,templateVariableProvider:a}})}),c?(m.putCachedTemplateJsonPromise(g,a.countryID,d),m.getCachedTemplateJsonPromise(a.countryID,d).then(l.resolve,l.reject)):
g.then(l.resolve,l.reject))}else l.reject("Can't find a report")},l.reject);return l.promise},_loadCustomReportData:function(a){a.portalJson=null;return a.templateData.getFiles().then(function(b){a.portalJson={files:b}})},createTemplateJsonFromVariables:function(b){return a.loadVariables({countryID:b.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(a){var d=new h,e=a.fullNameToVariableCache;a=b.variables.fullNames.map(function(a){var c=l.createFieldNameFromSource(a),
h=b.variables.customDataMapping[a],h=h?h.variable:e[a];a={id:h.id.toLowerCase(),fullName:a,alias:h.description,fieldName:c,precision:h.precision,calculatorName:l.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:l.DATA_COLLECTIONS_CALCULATOR_NAME+"."+c,type:h.type,vintage:h.vintage};d.addVariable(a);return n.getCalculatorOrScriptFieldInfo(a.templateName,{variableProvider:d})});return{templateJson:c.generateTemplatesFromFieldInfos(a,{comparisonLevels:b.comparisonLevels}),templateVariableProvider:d}})}}})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),function(k,g,f,e,d,c){var a={},b={calcNumRowsColumns:function(a){var b;
b=2>=a?1:6>=a?2:12>=a?3:Math.ceil(a/4);var c;c=1===a?1:4>=a?2:9>=a?3:4;return{numRows:b,numColumns:c,numVarsInLastRow:c-(b*c-a),lastRowCellIndexes:null,lastRowCellWidths:null}}},h={mergeLastRow:function(a,b,c){2===b.numColumns?1===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),b.lastRowCellWidths=[2*c]):3===b.numColumns?1===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:3}),b.lastRowCellWidths=[3*c]):2===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-
1,0,{cellStyle:{width:1.5*c}}),f.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*c}}),b.lastRowCellWidths=[1.5*c,1.5*c]):4===b.numColumns&&(1===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:4}),b.lastRowCellWidths=[4*c]):2===b.numVarsInLastRow?(f.modifyTableJson(a,b.numRows-1,0,{columnSpan:2}),f.modifyTableJson(a,b.numRows-1,2,{columnSpan:2}),b.lastRowCellIndexes=[0,2],b.lastRowCellWidths=[2*c,2*c]):3===b.numVarsInLastRow&&(f.modifyTableJson(a,b.numRows-1,0,{cellStyle:{width:4*
c/3}}),f.modifyTableJson(a,b.numRows-1,1,{columnSpan:2,cellStyle:{width:2*c/3}}),f.modifyTableJson(a,b.numRows-1,2,{cellStyle:{width:2*c/3}}),f.modifyTableJson(a,b.numRows-1,3,{cellStyle:{width:4*c/3}}),b.lastRowCellIndexes=[0,1,3],b.lastRowCellWidths=[4*c/3,4*c/3,4*c/3]))}},l={insertNextPanel:function(a,b,c){void 0===b.currentRowIndex&&(b.currentRowIndex=0,b.currentColumnIndex=0);var d=b.currentRowIndex===b.numRows-1;a.data.data[b.currentRowIndex].fieldInfos["field"+(d&&b.lastRowCellIndexes?b.lastRowCellIndexes[b.currentColumnIndex]:
b.currentColumnIndex)]=c(d&&b.lastRowCellWidths&&b.lastRowCellWidths[b.currentColumnIndex]);b.currentColumnIndex++;b.currentColumnIndex>b.numColumns-1&&(b.currentColumnIndex=0,b.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(c){var d=b.calcNumRowsColumns(c.length),n=k.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:d.numRows,numColumns:d.numColumns}}),t=n.sectionsTables[0];h.mergeLastRow(t,d,500);c.forEach(function(b){l.insertNextPanel(t,d,function(c){var d=
a._createInfographicJson(b,c||500,250);c=f.createSingleCellTable({width:c||500,height:250,fieldInfo:g.createFieldInfoFromInfographic(d)});return g.createFieldInfoFromSection(e.wrapInDetailsSectionJson(c))})});return n};a._createInfographicJson=function(a,b,e){return{type:d.ONE_VAR,title:a.alias,style:{width:b,height:e},levels:c.getDefaultLevels(),fieldInfos:[a],calcData:{calculatorName:a.templateName.substr(0,a.templateName.indexOf(".")),variables:[a.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"./TemplateJsonModificationUtil"],function(k,g){return{createBlankTemplate:function(f){var e={},d=f.documentOptions||k.getDefaultDocumentOptionsGraphicReport();d.pagesize=k.combineCustomSizeString(d.left+d.right+f.layout.numColumns*f.elementWidth,d.top+d.bottom+f.layout.numRows*f.elementHeight,"px");e.documentOptions=d;for(var d={style:{width:f.layout.numColumns*f.elementWidth},data:{columns:[],data:[]}},c=0;c<f.layout.numColumns;c++)d.data.columns.push({field:"field"+c,style:{width:f.elementWidth}});
for(c=0;c<f.layout.numRows;c++)d.data.data.push({style:{height:f.elementHeight},fieldInfos:{}});e.sectionsTables=[d];g.adjustDocumentOptions(e);return e}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(k,g){var f={},e={getJsonStat:function(c){var a=0,b=
0,e=[];c.sectionsTables.forEach(function(c){var h=0;c.data.columns.forEach(function(a){h+=d.getFieldWidth(c,c.data.data[0],a)});a=Math.max(a,h);var f=0;c.data.data.forEach(function(a){f+=d.getDataHeight(c,a,c.data.columns[0])});b=Math.max(b,f);e.push({totalW:h,totalH:f})});return{tableInfos:e,totalWMax:a,totalHMax:b}}},d={getFieldWidth:function(c,a,b){return g.getFieldWidth({looseResize:!0},a,b)||b.style.width},getDataHeight:function(c,a,b){return g.getDataHeight({looseResize:!0},a,b.field)},getAverageFieldWidth:function(c,
a){var b=0;c.data.data.forEach(function(e){b+=d.getFieldWidth(c,e,a)});return b/c.data.data.length},getAverageDataHeight:function(c,a){var b=0;c.data.columns.forEach(function(e){b+=d.getDataHeight(c,a,e)});return b/c.data.columns.length}};f.adjustDocumentOptions=function(c){if(c.documentOptions){var a=e.getJsonStat(c);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&!isNaN(a.totalHMax)&&(c=c.documentOptions,c.pagesize=k.combineCustomSizeString(c.left+c.right+a.totalWMax,c.top+c.bottom+a.totalHMax,"px"),
(a=k.getClosestStandrdSizes(c)[0])&&.001>a.score&&a.orientation===c.orientation&&(c.pagesize=a.pagesize))}};f.JsonStatCollector=e;f.DataUtil=d;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(k,g,f,e,d,c,a,b){var h={};f.calculator=h;h.markAsDirty=g.markAsDirty;h.fieldToColumn=g.fieldToColumn;h.dataIdToData=g.dataIdToData;h.getSpannedColumns=g.getSpannedColumns;h.recalcRows=d.recalcRows;h.recalcColumns=c.recalcColumns;h.recalcColumnsTableJson=c.recalcColumnsTableJson;h.recalcRowsToFitHeight=d.recalcRowsToFitHeight;h.adjustColumnWidth=c.adjustColumnWidth;h.getAffectedCellsForColumnAdjust=c.getAffectedCells;h.adjustRowHeight=d.adjustRowHeight;h.getAffectedCellsForRowAdjust=d.getAffectedCells;
h.recalcGridWidth=c.recalcGridWidth;h.calcFieldWidth=c.calcFieldWidth;h.getFieldWidth=c.getFieldWidth;h.setFieldWidth=c.setFieldWidth;h.calcDataHeight=d.calcDataHeight;h.getDataHeight=d.getDataHeight;h.setDataHeight=d.setDataHeight;h.autoSnapLayout=a.autoSnapLayout;h.positionCells=e.positionCells;h.calcFeatureCount=function(a,b,c){return(a-b)/c};h.calcRingIndexForCell=function(a){var b=a.parentGrid;if(!b)return-1;if(b.getNumDynamicRows())return void 0!==a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:
a.gridData.index-b.getNumFixedRows();var c=b.getNumFixedColumns();return a.column.index<c?-1:Math.floor((a.column.index-c)/b.getNumDynamicColumns())};h.trimColumnsForNumberOfFeatures=function(a){for(var b=a.viewModel.dynamicReportInfo.fieldData.areaData.length,c=h.recalcGridWidth(a),d=0,e=0;e<a.getNumFixedColumns();e++)d+=a.columns[e].style.width;c-=d;d=h.calcFeatureCount(a.columns.length,a.getNumFixedColumns(),a.getNumDynamicColumns())-b;if(!(0>d)){for(var f=a.columns.slice(),e=f.length=a.getNumFixedColumns(),
g=[],l=0;a.columns[e];){for(var k=0;k<b;k++){var v=a.columns[e++],l=l+v.style.width;g.push(v)}e+=d}var w=c/l;g.forEach(function(a){a.style.width*=w});a.columns=f.concat(g)}};h.adjustRowsForNumberOfFeatures=function(a){var c=a.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=c)){var d=a.store.data[a.getNumFixedRows()];d.currentFeatureIndex=0;for(var e=1;e<c;e++){var h=k.clone(d);h.currentFeatureIndex=e;a.store.data.push(h)}b.applyDefaultStyling({data:{data:a.store.data,columns:a.columns}})}};
return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var k={markAsDirty:function(g){g._fieldToColumnHash=null;g._dataIdToDataHash=null},_calcGridHashes:function(g){g._fieldToColumnHash={};g.columns.forEach(function(f){g._fieldToColumnHash[f.field]=f});g._dataIdToDataHash={};g.store.data.forEach(function(f){g._dataIdToDataHash[f.id]=f})},fieldToColumn:function(g,f){g._fieldToColumnHash||k._calcGridHashes(g);
return g._fieldToColumnHash&&g._fieldToColumnHash[f]},dataIdToData:function(g,f){g._dataIdToDataHash||k._calcGridHashes(g);return g._dataIdToDataHash&&g._dataIdToDataHash[f]},getSpannedColumns:function(g,f,e){var d=[];if(1>e)return[];var c;g.columns.some(function(a){if(c||a.field===f)d.push(a),c=!0;if(d.length===e)return!0});return d},getColumnSpannedFields:function(g,f,e){var d=null,c=f.fieldToRowSpanSourceDataIndex&&f.fieldToRowSpanSourceDataIndex[e];f=void 0!==c?g.store.data[c]:f;f=f.columnSpans&&
f.columnSpans[e];if(1<f)for(d=[],e=k.fieldToColumn(g,e),c=e=g.columns.indexOf(e);c<e+f;c++)d.push(g.columns[c].field);return d},getRowSpannedData:function(g,f,e){var d=null;e=f.fieldToColumnSpanSourceField&&f.fieldToColumnSpanSourceField[e]||e;e=f.rowSpans&&f.rowSpans[e];if(1<e)for(var d=[],c=f=g.store.data.indexOf(f);c<f+e;c++)d.push(g.store.data[c]);return d},getMovableData:function(g,f,e){return(f=f.movableIndexHashVertical&&f.movableIndexHashVertical[e])&&g.store.data[f]},getMovableColumn:function(g,
f,e){return(f=f.movableFieldsHashHorizontal&&f.movableFieldsHashHorizontal[e])&&k.fieldToColumn(g,f)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function k(f,e,d,c,a){function b(a){return c&&void 0!==c.places?Number(a.toFixed(c.places)):a}if(!e||!d)return null;var h=g.calculator[a?"getFieldWidth":"calcFieldWidth"](f,e,d);a=g.calculator[a?"getDataHeight":"calcDataHeight"](f,e,d);for(var l=0,k=
0,m=g.calculator.fieldToColumn(f,d),p=0;p<m.index;p++)l+=g.calculator.getFieldWidth(f,e,f.columns[p].field);for(p=0;p<e.index;p++)k+=g.calculator.getDataHeight(f,f.store.data[p],d);return{x:b(l),y:b(k),w:b(h),h:b(a)}}var g={calculator:null,calcCellBox:function(f,e){return k(f.parentGrid,f.gridData,f.column.field,e,!1)},calcDataBox:function(f,e,d,c){return k(f,e,d,c,!0)}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator",
"./columns/GridLayoutColumnsCalculator"],function(k,g){return{positionCells:function(f){var e={},d={},c={},a={};if(f.store.data.length){f.store.data.forEach(function(b,h){f.columns.forEach(function(l,n){var m=c[n]||0,p=a[h]||0,t=k.getDataHeight(f,b,l.field);l=g.getFieldWidth(f,b,l.field);m+=t;p+=l;d[n+"_"+h]=m;e[n+"_"+h]=p;c[n]=m;a[h]=p})});f.getFieldCells().forEach(function(a){a.domNode.style.left=(e[a.column.index-1+"_"+a.gridData.index]||0)+"px";a.domNode.style.top=(d[a.column.index+"_"+(a.gridData.index-
1)]||0)+"px"});var b=0,h;for(h in c)b=Math.max(b,c[h]);var l=0;for(h in a)l=Math.max(l,a[h]);f.mainNode.style.width=l+"px";f.mainNode.style.height=b+"px";f.domNode.style.width=l+"px";f.domNode.style.height=b+"px";f._width=l;f._height=b}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(k,g,f,e){var d={};d.recalcRows=k.recalcRows;d.recalcRowsToFitHeight=
g.recalcRowsToFitHeight;d.adjustRowHeight=e.adjustRowHeight;d.getAffectedCells=e.getAffectedCells;d.getDataHeight=f.getDataHeight;d.setDataHeight=f.setDataHeight;d.calcDataHeight=f.calcDataHeight;return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(k,g,f){function e(c,a){var b=[],d,e=0;a&&Object.keys(a).forEach(function(b){f.fieldToColumn(c,
b)?e++:delete a[b]});e&&c.columns.some(function(c){if(d||a[c.field])b.push(c),d=!0;a[c.field]&&e--;if(!e)return!0});return b}function d(c,a){var b=[],d,e=0;a&&Object.keys(a).forEach(function(b){f.dataIdToData(c,b)?e++:delete a[b]});e&&c.store.data.some(function(c){if(d||a[c.id])b.push(c),d=!0;a[c.id]&&e--;if(!e)return!0});return b}return{recalcRows:function(c){var a={};c.columns.forEach(function(b,c){a[b.field]=c});var b;c.store.data.forEach(function(d,h){d.index=h;d.style=d.style||{};d.style.fields=
d.style.fields||{};void 0===d.id&&(d.id=k());void 0===d.style.height&&(d.style.height=c.layoutDefaults.defaultRowHeight);delete d.excludedIndexHorizontal;delete d.movableFieldsHashHorizontal;delete d.fieldToColumnSpanSourceField;if(d.columnSpans){d.excludedIndexHorizontal={};d.movableFieldsHashHorizontal={};d.fieldToColumnSpanSourceField={};d._columnSpans=d._columnSpans||{};for(b in d.columnSpans){h=d._columnSpans[b];var g={};h=h?e(c,h):f.getSpannedColumns(c,b,d.columnSpans[b]);1<h.length&&(h.forEach(function(c){g[c.field]=
!0;c.field!==b&&(d.excludedIndexHorizontal[a[c.field]]=!0,d.fieldToColumnSpanSourceField[c.field]=b)}),d.movableFieldsHashHorizontal[b]=h[h.length-1].field);d.columnSpans[b]=h.length;d._columnSpans[b]=g}var l=0;Object.keys(d.columnSpans).forEach(function(a){2>d.columnSpans[a]?(delete d.columnSpans[a],delete d._columnSpans[a]):l++});l||(delete d.columnSpans,delete d._columnSpans)}delete d.excludedIndexVertical;delete d.movableIndexHashVertical;delete d.fieldToRowSpanSourceDataIndex;d.fieldInfos=d.fieldInfos||
{}});c.store.data.forEach(function(e,h){if(e.rowSpans)for(b in e._rowSpans=e._rowSpans||{},e.rowSpans){var f=e._rowSpans[b],g={};g[e.id]=!0;var l=a[b],k=e.rowSpans[b];if(f)f=d(c,f);else for(var f=[],n=h;n<h+k;n++)f.push(c.store.data[n]);1<f.length&&(f.forEach(function(a){if(a.id!==e.id){a.excludedIndexVertical=a.excludedIndexVertical||{};a.excludedIndexVertical[l]=!0;a.fieldToRowSpanSourceDataIndex=a.fieldToRowSpanSourceDataIndex||{};a.fieldToRowSpanSourceDataIndex[b]=e.index;var d=e.columnSpans&&
e.columnSpans[b];if(d)for(var h=1;h<d;h++)a.excludedIndexVertical[l+h]=!0,a.fieldToRowSpanSourceDataIndex[c.columns[l+h].field]=e.index}g[a.id]=!0}),e.movableIndexHashVertical=e.movableIndexHashVertical||{},e.movableIndexHashVertical[b]=h+f.length-1);e.rowSpans[b]=f.length;e._rowSpans[b]=g}});c.store.data.forEach(function(a,d){if(a.rowSpans){for(b in a.rowSpans)a.rowSpans[b]=Math.min(a.rowSpans[b],c.store.data.length-d);var e=0;Object.keys(a.rowSpans).forEach(function(b){2>a.rowSpans[b]?(delete a.rowSpans[b],
a._rowSpans&&delete a._rowSpans[b]):e++});e||(delete a.rowSpans,delete a._rowSpans)}});c.store.data.forEach(function(b,c){b.fieldInfos&&Object.keys(b.fieldInfos).forEach(function(c){void 0===a[c]&&delete b.fieldInfos[c]});b.style&&b.style.fields&&Object.keys(b.style.fields).forEach(function(c){void 0===a[c]&&delete b.style.fields[c]})});if(c.looseResize){c.store.data.forEach(function(a){c.columns.some(function(b){g.getDataHeightOwn(c,a,b.field)||g.setDataHeight(c,a,b.field,a.style.height)})});var h=
c.store.data[c.store.data.length-1],l=g.recalcGridHeight(c);c.columns.some(function(a){var b=0;c.store.data.forEach(function(d){b+=g.getDataHeightOwn(c,d,a.field)});var d=l-b;0!==d&&g.setDataHeight(c,h,a.field,g.getDataHeightOwn(c,h,a.field)+d)})}g.recalcGridHeight(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(k){var g={getDataHeight:function(f,e,d){return f.looseResize?g.getDataHeightOwn(f,
e,d)||e.style.height||0:e.style.height||0},getDataHeightOwn:function(f,e,d){if(f.looseResize)return e.style.fields=e.style.fields||{},(e.style.fields[d]=e.style.fields[d]||{}).height},setDataHeight:function(f,e,d,c,a){f.looseResize?(a?k.getColumnSpannedFields(f,e,d)||[d]:[d]).forEach(function(a){e.style.fields=e.style.fields||{};(e.style.fields[a]=e.style.fields[a]||{}).height=c}):e.style.height=c},calcDataHeight:function(f,e,d,c){var a=0,b=e.rowSpans&&e.rowSpans[d];if(1<b)for(var h=e.index;h<e.index+
b;h++)h!==c&&(a+=g.getDataHeight(f,f.store.data[h],d));else a=g.getDataHeight(f,e,d);return a},recalcGridHeight:function(f){f._height=0;var e=f.columns[0].field;f.store.data.forEach(function(d){f._height+=g.getDataHeight(f,d,e)});return f._height}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(k){return{recalcRowsToFitHeight:function(g,f){function e(a){a.forEach(function(a){g.columns.some(function(b,
d){if(!g.looseResize&&d)return!0;k.setDataHeight(g,a,b.field,k.getDataHeight(g,a,b.field)*c)})})}var d=k.recalcGridHeight(g),c=f/d;1!==c&&(e(g.store.data),g._getSavedOriginalData()&&e(g._getSavedOriginalData()),k.recalcGridHeight(g))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(k,g,f,e){var d={},c={checkHeightLimit:function(a,
b,c,d){if(a.getMaxHeight()){var e=0;a.store.data.forEach(function(d){d!==b&&(e+=g.getDataHeight(a,d,c))});d=Math.min(a.getMaxHeight()-e,d)}return d}},a={findDataToMove:function(a,b,c,d){var e=k.getMovableData(a,b,c);e&&(a=g.calcDataHeight(a,b,c,e.index),d-=a);return{data:e||b,height:d}}},b={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setHeight(g.calcDataHeight(a,b.gridData,b.column.field))})}};d.adjustRowHeight=function(d,g,k,m){m=c.checkHeightLimit(d,g,k,m);g=a.findDataToMove(d,
g,k,m);(d.looseResize?f:e).adjustRowHeight(d,g.data,k,g.height);b.finalResizeGridCells(d)};d.getAffectedCells=function(b,c,d){return b.looseResize?f.getAffectedCells(b,a.findDataToMove(b,c,d).data,d):null};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(k,
g,f,e,d,c){var a={collectRowBoxes:function(a,b){for(var c=[],d=0;d<a.columns.length;){var e=a.columns[d],h=this._createEmptyBox(),e=f.getColumnSpannedFields(a,b,e.field)||[e.field];h.elements=this._getFieldsElements(a,b,e);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=e.length}return c},_createEmptyBox:function(){return{id:g(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:b,dataIndex:b.index,field:c,box:e.calcDataBox(a,b,c,{places:2})};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.w});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,h:a.elements[0].box.h,w:b}},mergeBoxesForBottomRow:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:null,field:a.field,box:k.clone(a.box)})})});this._measureBox(b);b.box.h=1E6;
return[b]},getBoxAtField:function(a,b){return a.filter(function(a){return a.elements[0].field===b})[0]}},b={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.x+.5>=d.x+d.w||c.x+c.w<=d.x+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtField(b,d);e(d,!0);return d}},h={applyForce:function(a,b,c){function e(b,c){var f=b.elements[0];
f.data&&d.setDataHeight(a,f.data,f.field,d.getDataHeight(a,f.data,f.field)+(c?-1:1)*h,!0);b.overlappingBoxes.forEach(function(a){e(a,!c)})}var h=this._checkDelta(a,b,c);e(b,!1)},_checkDelta:function(a,b,c){function d(a,b){0!==h&&(b?0>h||(h=Math.min(h,a.box.h-e),a.prevSibling&&(h=Math.min(h,a.prevSibling.box.y+a.prevSibling.box.h-e-a.box.y)),a.nextSibling&&(h=Math.min(h,a.nextSibling.box.y+a.nextSibling.box.h-e-a.box.y))):0<h||(h=Math.max(h,-(a.box.h-e)),a.prevSibling&&(h=Math.max(h,-(a.box.y+a.box.h-
(a.prevSibling.box.y+e)))),a.nextSibling&&(h=Math.max(h,-(a.box.y+a.box.h-(a.nextSibling.box.y+e))))),a.overlappingBoxes.forEach(function(a){d(a,!b)}))}var e=a.layoutDefaults.rowMinHeight;c=Math.max(c,e);var h=c-b.box.h;d(b,!1);return h}},l={_getInluencedStartBox:function(c,d,e){var h=c.store.data[d.index+1];d=a.collectRowBoxes(c,d);c=h?a.collectRowBoxes(c,h):a.mergeBoxesForBottomRow(d);return b.buildInfluenceTree(d,c,e)},getAffectedCells:function(a,b,d){function e(b){if(b.elements[0].data){var d=
c.querySingleCell(a,{rowIndex:b.elements[0].data.index,columnField:b.elements[0].field,considerSpans:!0});d&&h.push(d)}b.overlappingBoxes.forEach(e)}var h=[];b=this._getInluencedStartBox(a,b,d);e(b);return h},adjustRowCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};return{adjustRowHeight:function(a,b,c,d){l.adjustRowCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry",
"./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(k,g,f,e,d){var c={querySingleCell:function(a,b){b.fieldCell&&(b={rowId:b.fieldCell.rowId,columnId:b.fieldCell.columnId});var d;a.getFieldCells().some(function(a){if(a.parentGrid&&a.column&&a.gridData&&!(a.columnId!==b.columnId&&a.column.index!==b.columnIndex&&a.column.field!==b.columnField||a.rowId!==b.rowId&&a.gridData.index!==b.rowIndex))return d=
a,!0});if(d)return d;if(b.considerSpans){var e=c.queryColumn(a,b),f=c.queryData(a,b);if(!e||!f)return null;var g=e.index,k=f.index;a.store.data.some(function(b){return a.columns.some(function(e){var h=e.index,f=e.index+(b.columnSpans&&b.columnSpans[e.field]||0),l=b.index;e=b.index+(b.rowSpans&&b.rowSpans[e.field]||0);if(h<=g&&f>=g&&l<=k&&e>=k)return d=c.querySingleCell(a,{columnIndex:h,rowIndex:l}),!0})})}return d},queryColumn:function(a,b){var c;a.columns.some(function(a){if(a.id===b.columnId||a.index===
b.columnIndex||a.field===b.columnField)return c=a,!0});return c},queryData:function(a,b){var c;a.store.data.some(function(a){if(a.id===b.rowId||a.index===b.rowIndex)return c=a,!0});return c},queryCells:function(a,b){if(b.fieldCell){var d=[],e=b.rowSpan||1,f=b.columnSpan||1;if(b=c.querySingleCell(a,b))for(var g=b.gridData.index;g<b.gridData.index+e;g++)for(var k=b.column.index;k<b.column.index+f;k++){var t=c.querySingleCell(a,{rowIndex:g,columnIndex:k});t&&d.push(t)}return d}return this.queryCellsInArray(a.getFieldCells(),
b)},queryCellsInArray:function(a,b){var c=[];if(!Object.keys(b).length)return c;a.forEach(function(a,d){if(void 0===b.cellIndex||d===b.cellIndex)if(void 0===b.cellIndexes||-1!==b.cellIndexes.indexOf(d))if(void 0===b.columnId||a.columnId===b.columnId)if(void 0===b.columnIds||-1!==b.columnIds.indexOf(a.columnId))if(void 0===b.columnIndex||a.column.index===b.columnIndex)if(void 0===b.columnIndexes||-1!==b.columnIndexes.indexOf(a.column.index))if(void 0===b.columnField||a.column.field===b.columnField)if(void 0===
b.columnFields||-1!==b.columnFields.indexOf(a.column.field))if(void 0===b.rowId||a.rowId===b.rowId)if(void 0===b.rowIds||-1!==b.rowIds.indexOf(a.rowId))if(void 0===b.rowIndex||a.gridData.index===b.rowIndex)void 0!==b.rowIndexes&&-1===b.rowIndexes.indexOf(a.gridData.index)||c.push(a)});return c},getTitleCell:function(a){var b=c.querySingleCell(a,{rowIndex:0,columnIndex:0});if(b&&!g.getFieldInfo(b)&&(1===a.columns.length||g.getColumnSpan(b)===a.columns.length))return b},isDynamicFieldCell:function(a,
b){return a._dynamicBindings&&a._dynamicBindings[b.column.field]},getDynamicallyBoundColumns:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.field]},getDynamicallyBoundFieldCells:function(a,b){if(b.column){var d=a._dynamicBindings&&a._dynamicBindings[b.column.field];if(!d)return null;var e=[];d.forEach(function(d){(d=d&&c.querySingleCell(a,{columnId:d.id,rowId:b.rowId}))&&e.push(d)});return e}},getAllBoundCells:function(a,b,d){var e=[],h={};b&&b.forEach(function(b){if((!d||d(b))&&!h[b.uniqueId]){h[b.uniqueId]=
!0;var f=c.getDynamicallyBoundFieldCells(a,b);f?f.forEach(function(a){e.push(a);h[a.uniqueId]=!0}):e.push(b)}});return f.removeDuplicates(e,"uniqueId")},trimDynamicBindings:function(a,b){var d=[],e={};b&&b.forEach(function(b){var h=c.getDynamicallyBoundFieldCells(a,b);h&&h.length?(e[h[0].uniqueId]||d.push(h[0]),h.forEach(function(a){e[a.uniqueId]=!0})):d.push(b)});return d},collectFieldInfos:function(a,b){var d=[];b=b||{};var e=b.fieldCells||a.getFieldCells();b.trimDynamicBinding&&e&&(e=c.trimDynamicBindings(a,
e));e&&e.forEach(function(a){(a=g.getFieldInfo(a))&&d.push(a)});return d},cellHasFloatingTableParent:function(a){function b(a){return a.isSection&&a.isDataDrillingView?!1:a.isFloatingTable?!0:a.parentWidget?b(a.parentWidget):!1}return a&&a.parentGrid?b(a.parentGrid):!1},isMouseOver:function(a){return d.isMouseOverBox(c.getBBox(a))},getOverFieldCell:function(a,b){b=b||{};var c=b.cellFilter||function(){return!0},d;a.getForegroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=
a,!0});d||a.getFieldCells().some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});d||a.getBackgroundFloatingCells({topFirst:!0}).some(function(a){if(c(a)&&a.isMouseOver())return d=a,!0});return d},getBBox:function(a,b){var c=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof c&&0!==c?a.getFirstCell().getBBox(b):b&&b.noTransformation?e.noTransformPosition(a.domNode):k.position(a.domNode)}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],
function(k){return{adjustRowHeight:function(g,f,e,d){var c=g.layoutDefaults.rowMinHeight;d=Math.max(d,c);var a=d-k.getDataHeight(g,f,e);if(g.keepGridHeightWhenResized){var b=g.store.data[f.index+1];b&&(a=k.getDataHeight(g,b,e)-a,a<c&&(d-=c-a,a=c),k.setDataHeight(g,b,e,a,!0))}k.setDataHeight(g,f,e,d,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil","./ColumnModifier","./ColumnsProcessor"],
function(k,g,f){var e={};e.recalcColumns=f.recalcColumns;e.recalcColumnsTableJson=f.recalcColumnsTableJson;e.adjustColumnWidth=g.adjustColumnWidth;e.getAffectedCells=g.getAffectedCells;e.getFieldWidth=k.getFieldWidth;e.setFieldWidth=k.setFieldWidth;e.calcFieldWidth=k.calcFieldWidth;e.recalcGridWidth=k.recalcGridWidth;return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(k){var g=
{getFieldWidth:function(f,e,d){var c="string"===typeof d?k.fieldToColumn(f,d):d;d=c?c.field:"string"===typeof d?d:null;return f.looseResize?g.getFieldWidthOwn(f,e,d)||c&&c.style.width||0:c&&c.style.width||0},getFieldWidthOwn:function(f,e,d){if(f.looseResize)return e.style.fields=e.style.fields||{},(e.style.fields[d]=e.style.fields[d]||{}).width},setFieldWidth:function(f,e,d,c,a){var b="string"===typeof d?k.fieldToColumn(f,d):d,h=b?b.field:"string"===typeof d?d:null;f.looseResize?(a?k.getRowSpannedData(f,
e,h)||[e]:[e]).forEach(function(a){a.style.fields=a.style.fields||{};(a.style.fields[h]=a.style.fields[h]||{}).width=c}):b&&(b.style.width=c)},calcFieldWidth:function(f,e,d,c){var a=0;1<(e.columnSpans&&e.columnSpans[d])?k.getSpannedColumns(f,d,e.columnSpans[d]).forEach(function(b){c!==b.field&&(a+=g.getFieldWidth(f,e,b.field))}):a=g.getFieldWidth(f,e,d);return a},recalcGridWidth:function(f){f._width=0;var e=f.store.data[0];f.columns.forEach(function(d){f._width+=g.getFieldWidth(f,e,d.field)});return f._width},
getAllowedWidth:function(f){return f.fitParentWhenResized?f.getAllowedWidthFromParent():f.getAllowedWidth()}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(k,g,f,e){var d={},c={getColumnToChange:function(a,b,c,d){var e=k.getMovableColumn(a,b,c.field);e&&(a=g.calcFieldWidth(a,b,c.field,e.field),d-=
a);return{column:e||c,width:d}}},a={finalResizeGridCells:function(a){a.getFieldCells().forEach(function(b){b.setWidth(g.calcFieldWidth(a,b.gridData,b.column.field))});g.recalcGridWidth(a)}},b={recalcToStick:function(a){var b=a.columns[a.columns.length-1];a.store.data.some(function(c,d){if(!a.looseResize&&d)return!0;var e=0;a.columns.forEach(function(d){d!==b&&(e+=g.getFieldWidth(a,c,d.field))});g.setFieldWidth(a,c,b.field,g.getAllowedWidth(a)-e)})}};d.adjustColumnWidth=function(d,g,k,m){k=c.getColumnToChange(d,
g,k,m);(d.looseResize?e:f).adjustColumnWidth(d,g,k.column,k.width);d.stickToRight&&b.recalcToStick(d);a.finalResizeGridCells(d)};d.getAffectedCells=function(a,b,d){return a.looseResize?e.getAffectedCells(a,b,c.getColumnToChange(a,b,d).column):null};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(k){var g={},f={adjustColumnWidth:function(e,d,c,a,b){function h(a,b){return k.setFieldWidth(e,
d,a.field,b,!0)}var g=e.layoutDefaults.columnMinWidth,n=function(){if(!c)return null;var h=k.getFieldWidth(e,d,c.field);void 0!==b&&(a=h+b);a=Math.max(g,a);var f,l=0,n=!1;e.columns.forEach(function(a){l+=k.getFieldWidth(e,d,a.field);n&&!f?f=a:a===c&&(n=!0)});var m=k.getAllowedWidth(e)-(l-h);return isNaN(m)?null:{width:a,widthMemo:h,maxAllowedColumnWidth:m,nextColumn:f}}();if(n){a=n.width;var m=n.widthMemo,p=n.maxAllowedColumnWidth,t=(n=n.nextColumn)&&k.getFieldWidth(e,d,n.field),m=a-m,q=0;e.keepGridWidthWhenResized?
(n&&(m=t-m,m<g&&(a-=g-m,m=g),m<t&&(p+=t-m),h(n,m)),h(c,Math.min(p,a))):(n&&p<a&&t>g?(h(c,a),q=p-a):h(c,Math.min(p,a)),0!==q&&f.adjustColumnWidth(e,d,n,null,q))}}};g.adjustColumnWidth=function(e,d,c,a){f.adjustColumnWidth(e,d,c,a)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(k,g,f,e,d,c){var a={collectColumnBoxes:function(a,b){for(var c=[],d=0;d<a.store.data.length;){var e=a.store.data[d],h=this._createEmptyBox(),e=f.getRowSpannedData(a,e,b.field)||[e];h.elements=this._getSpannedDataElements(a,b,e);this._measureBox(h);var g=c[c.length-1];g&&(g.nextSibling=h,h.prevSibling=g);c.push(h);d+=e.length}return c},_createEmptyBox:function(){return{id:g(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(a,
b,c){var d=[];c.forEach(function(c){c={data:c,dataIndex:c.index,field:b.field,box:e.calcDataBox(a,c,b.field)};d.push(c)});return d},_measureBox:function(a){var b=0;a.elements.forEach(function(a){b+=a.box.h});a.box={x:a.elements[0].box.x,y:a.elements[0].box.y,w:a.elements[0].box.w,h:b}},mergeBoxesForRightColumn:function(a){var b=this._createEmptyBox();a.forEach(function(a){a.elements.forEach(function(a){b.elements.push({data:a.data,field:null,box:k.clone(a.box)})})});this._measureBox(b);b.box.w=1E6;
return[b]},getBoxAtDataIndex:function(a,b){return a.filter(function(a){return a.elements[0].dataIndex===b})[0]}},b={buildInfluenceTree:function(b,c,d){function e(a,d){(d?c:b).forEach(function(b){var c;if(c=!b.overlappingBoxesCache[a.id]){c=a.box;var d=b.box;c=!(c.y+.5>=d.y+d.h||c.y+c.h<=d.y+.5)}c&&(a.overlappingBoxes.push(b),a.overlappingBoxesCache[b.id]=!0)});a.overlappingBoxes.forEach(function(a){e(a,!d)})}d=a.getBoxAtDataIndex(b,d.index);e(d,!0);return d}},h={applyForce:function(a,b,c){function e(b,
c){var f=b.elements[0];f.field&&d.setFieldWidth(a,f.data,f.field,d.getFieldWidth(a,f.data,f.field)+(c?-1:1)*h,!0);b.overlappingBoxes.forEach(function(a){e(a,!c)})}var h=this._checkDelta(a,b,c);e(b,!1)},_checkDelta:function(a,b,c){function e(a,b){0!==f&&(b?0>f||(f=Math.min(f,a.box.w-h),a.prevSibling&&(f=Math.min(f,a.prevSibling.box.x+a.prevSibling.box.w-h-a.box.x)),a.nextSibling&&(f=Math.min(f,a.nextSibling.box.x+a.nextSibling.box.w-h-a.box.x))):0<f||(f=Math.max(f,-(a.box.w-h)),a.prevSibling&&(f=Math.max(f,
-(a.box.x+a.box.w-(a.prevSibling.box.x+h)))),a.nextSibling&&(f=Math.max(f,-(a.box.x+a.box.w-(a.nextSibling.box.x+h))))),a.overlappingBoxes.forEach(function(a){e(a,!b)}))}var h=a.layoutDefaults.columnMinWidth;c=Math.max(c,h);var f=c-b.box.w;if(0<f&&b.elements[0].field===a.columns[a.columns.length-1].field){var g=0;a.columns.forEach(function(c){g+=d.getFieldWidth(a,b.elements[0].data,c.field)});f=Math.min(f,d.getAllowedWidth(a)-g)}e(b,!1);return f}},l={_getInluencedStartBox:function(c,d,e){var h=c.columns[e.index+
1];e=a.collectColumnBoxes(c,e);c=h?a.collectColumnBoxes(c,h):a.mergeBoxesForRightColumn(e);return b.buildInfluenceTree(e,c,d)},getAffectedCells:function(a,b,d){function e(b){if(b.elements[0].data){var d=c.querySingleCell(a,{rowIndex:b.elements[0].data.index,columnField:b.elements[0].field,considerSpans:!0});d&&h.push(d)}b.overlappingBoxes.forEach(e)}var h=[];b=this._getInluencedStartBox(a,b,d);e(b);return h},adjustColumnCell:function(a,b,c,d){b=this._getInluencedStartBox(a,b,c);h.applyForce(a,b,d)}};
return{adjustColumnWidth:function(a,b,c,d){l.adjustColumnCell(a,b,c,d)},getAffectedCells:function(a,b,c){return l.getAffectedCells(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(k,g){function f(d){d._dynamicBindings={};if(d.getNumDynamicColumns()){for(var c=d.getNumDynamicColumns(),a=d.getNumFixedColumns(),b=0;b<a;b++)d.columns[b].isFixed=!0;for(var b=
[],e=0;e<c;e++){for(var f=a,g=[];f<d.columns.length;){var k=d.columns[f+e];k.isDynamic=!0;g.push(k);f+=c}b.push(g)}b.forEach(function(a){a.forEach(function(b){d._dynamicBindings[b.field]=a})})}}var e={recalcColumns:function(d,c){var a=c&&c.resetWidth,b=c&&c.columnsToPreserve,e=c&&c.stickToRight,l=c&&c.newWidth,n=c&&c.rightOffsetWeight;c=c&&c._isJson;var m={},p=0;d.columns.every(function(a,b){if(!a.style||!a.style.width||isNaN(a.style.width)||"number"!==typeof a.style.width)return p=0,!1;p+=a.style.width;
m[b]=a.style.width;return!0});var t;t=l?l:e?d.getAllowedWidth():p?Math.min(p,d._width):d._width;t-=0<n?t*n:0;var q=t/d.columns.length,r=t;if(b){var u=b.length*q,y=0;b.forEach(function(a){y+=a.style.width});b.forEach(function(a){a.style.width=u/y*a.style.width/r*100+"%"})}d.columns.forEach(function(b,c,d){b.index=c;b.style=b.style||{};if("number"!==typeof b.style.width||a)if(c===d.length-1)b.style.width=r;else{var e=b.style.width;"string"===typeof e&&-1!==e.indexOf("%")?b.style.width=parseFloat(e.substr(0,
e.length-1))/100*t:b.style.width=q}r-=b.style.width;c===d.length-1&&0>r&&(b.style.width+=r);void 0===b.id&&(b.id=k())});if(d.looseResize){d.columns.some(function(a,b){var c=m[b]?a.style.width/m[b]:void 0;d.store.data.forEach(function(b){var e=g.getFieldWidthOwn(d,b,a.field);e?c&&1!==c&&g.setFieldWidth(d,b,a.field,e*c):g.setFieldWidth(d,b,a.field,a.style.width)})});var v=d.columns[d.columns.length-1].field;d.store.data.forEach(function(a){var b=0;d.columns.some(function(c){b+=g.getFieldWidthOwn(d,
a,c.field)});var c=t-b;0!==c&&g.setFieldWidth(d,a,v,g.getFieldWidthOwn(d,a,v)+c)})}c||(f(d),g.recalcGridWidth(d));return t},recalcColumnsTableJson:function(d){e.recalcColumns(d.data,{resetWidth:!0,newWidth:d.style.width,_isJson:!0})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(k,g,f,e){return{autoSnapLayout:function(d){function c(){var a=
[];d.store.data.forEach(function(b){d.columns.forEach(function(c){a.push(k.mixin({id:b.index+"_"+c.field,data:b,dataIndex:b.index,column:c,field:c.field},e.calcDataBox(d,b,c.field)))})});return a}if(d.looseResize)for(var a=d.store.data.length*d.columns.length,b={},h=0;h<a;h++){var l=c(),n=l[h],m=n.x+n.w,p=n.y+n.h;b[n.id]=!0;l.forEach(function(a){if(!b[a.id]){var c=m-(a.x+a.w);.5>=Math.abs(c)&&f.setFieldWidth(d,a.data,a.field,a.w+c);c=p-(a.y+a.h);.5>=Math.abs(c)&&g.setDataHeight(d,a.data,a.field,a.h+
c)}})}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(k,g,f){var e={wrapInDetailsSectionJson:function(d,c){d=Array.isArray(d)?d:[d];var a=d.some(function(a){return"table"===a.id&&a.attributes&&(0<a.attributes.dynamicColumns||
0<a.attributes.dynamicRows)});return{type:c||(a?g.GROUP:g.DETAILS),stack:d}},createSectionJsonFromInfographicJson:function(d,c,a){d=f.createSingleCellTable({width:c,height:a,fieldInfo:k.createFieldInfoFromInfographic(d)});return e.wrapInDetailsSectionJson(d)},getSectionJsonInfographic:function(d){var c;d.stack&&d.stack.some(function(a){c="table"===a.id&&f.getTableJsonInfographic(a);return!!c});return c},getSectionJsonInfographicTable:function(d){var c;d.stack&&d.stack.some(function(a){if("table"===
a.id&&f.getTableJsonInfographic(a))return c=a,!0});return c},calcSectionJsonBox:function(d){var c,a,b,e;function f(d){c=Math.min(c,d.l);a=Math.min(a,d.t);b=Math.max(b,d.l+d.w);e=Math.max(e,d.t+d.h)}a=c=Infinity;e=b=0;d.stack&&d.stack.forEach(function(a){switch(a.id){case "table":var b=0;a.data.data.forEach(function(a){b+=a.style.height});f({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:b});break;case "img":case "map":f({l:a.style.left||0,t:a.style.top||0,w:a.style.width,h:a.style.height})}});
d=d.style||{};return{x:d.left,y:d.top,w:d.width||c+b,h:d.height||a+e,contentLeft:c,contentTop:a,contentW:b-c,contentH:e-a}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(f,e,d){if(!f)return null;if(e.variableProvider.isPlayerOnly&&
!e.useVariableProviderToCollectOnly){var c=e.variableProvider.toCalculator(f);if(!c)return console.log("Can't create a dummy calculator for \x3d\x3e "+f),null;d=d||{};d.calculatorName=c.variable.calculatorName;f=k.createFieldInfoFromCalculator(c,e.variableProvider,d);f.name=c.variable.fieldName;f.templateName=c.variable.templateName;return f}var c=e.queryMetaDataFunc(f),a=f.substr(0,f.indexOf("."));d=d||{};d.calculatorName=a;if(c)return c.isScript?k.createFieldInfoFromScript(c,d):k.createFieldInfoFromCalculator(c,
e.variableProvider,d);d=k.createFieldInfoFromMissingVariable(f);e.variableProvider.isPlayerOnly&&(c=e.variableProvider.toCalculator(f),d.alias=c&&c.variable.alias);d.alias=d.alias?d.alias+" ("+g.missingVariable+")":g.missingVariable;return d}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(k,g,
f,e){return k(null,{supportsMultipleAreas:!0,_analysisAreas:null,_currentAreaIndex:-1,_webMapStores:null,constructor:function(d){this._analysisAreas=d},initialize:function(){var d=this;this._webMapStores={};return g(this._analysisAreas.map(function(c,a){if(c=c.feature||c.location||c.additionalFeatures&&c.additionalFeatures[0])return(d._webMapStores[a]=new e(c)).initialize()})).then(function(){return d})},_callStoreMethod:function(d){var c=this._webMapStores[this._currentAreaIndex];return c?f(c[d](),
function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(d){this._currentAreaIndex=d}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(k,g,f,e,d,c,a,b){var h={getThumbnail:function(a){var b=c.get("WebMapAttachmentStore");b[a.url]||(b[a.url]=this._getDataURL(a));return b[a.url]},_getDataURL:function(b){return 0===b.url.indexOf("data:")?b.url:d.request(b.url).then(function(c){return c&&c.Attachment&&a.base64DataToDataURL(c.Attachment,b.contentType)}).otherwise(function(){return null})}};return k(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(a,b){this._feature=
a;this._attachmentInfos=b},initialize:function(){this._tryGetFieldInfosAndAttributes();return f(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var a=this._feature.getLayer();this._fieldInfos=(a=this._feature.infoTemplate||a&&a.infoTemplate)&&a.info.fieldInfos||[];this._attributes=g.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return f(b.getFeatureAttachmentInfos(this._feature),
function(a){this._attachmentInfos=a}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(a){return{getThumbnail:function(){return h.getThumbnail(a)},getUrl:function(){return a.url}}}):[]},getAttributes:function(){return e.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(k){var g=k.getLayer();if(g&&g.hasAttachments&&g.queryAttachmentInfos&&g.objectIdField)return g.queryAttachmentInfos(k.attributes[g.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/supportClasses/LayoutXMLBuilder":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes".split(" "),
function(k,g,f,e,d,c){return{buildLayoutXML:function(a){var b=f.buildDocumentTag({addDefaultQuery:!0,report:{templateJson:{documentOptions:k.mixin({},a.documentOptions,{left:0,right:0,top:0,bottom:0})}}}).documentTag,h=d.getPageBox(a.documentOptions),l=e.pxToPt(h.w),n=e.pxToPt(h.h);a.svgStrings.forEach(function(d,e){b.tags.push({name:"section",attributes:{type:c.DETAILS},tags:[{name:"img",attributes:{left:0,top:0,width:l,height:n},tags:[{text:"__svgString__"+e+"__svgString__"}]}]});e<a.svgStrings.length-
1&&b.tags.push({name:"pageBreak"})});var m=g.parseJson(b);a.svgStrings.forEach(function(a,b){m=m.replace("__svgString__"+b+"__svgString__",a)});return m},stitchDocuments:function(a){if(!a||!a.length)return null;var b=a[0],c=b.substr(0,b.indexOf("\x3csection")),d="";a.forEach(function(b,e){d+=b.replace(c,"").replace("\x3c/HTMLextReport\x3e","")+(e<a.length-1?"\x3cpageBreak /\x3e":"")});return c+d+"\x3c/HTMLextReport\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter":function(){define(["../../ConversionUtil",
"../ReportingEnginePageSizeCompatibilityUtil"],function(k,g){var f={buildDocumentTag:function(e){var d=e.report,c=k.pxToPtObj(d.templateJson.documentOptions),a={name:"HTMLextReport",attributes:{version:"10.1",pagesize:g.getReportingEnginePageSize(c.pagesize,c.orientation),orientation:c.orientation,left:c.left,right:c.right,top:c.top,bottom:c.bottom,style:k.composeStyleString(f.buildDocumentStyle(e)),comparisonZoom:d.defaultComparisonZoom||void 0},tags:[]};e.addDefaultQuery&&a.tags.push({name:"queries",
tags:[{name:"query",attributes:{name:"default",table:"headers"}}]});e.report.isGraphicReport||a.tags.push({name:"def",attributes:{align:c.align,lineSpacing:c.lineSpacing}});d.templateJson.tooltipInfo&&(d.templateJson.tooltipInfo.table||d.templateJson.tooltipInfo.chart)&&(e={name:"tooltip",tags:[]},a.tags.push(e),(c=d.templateJson.tooltipInfo.table)&&e.tags.push({name:"table",attributes:{value:c.value||void 0,alias:c.alias||void 0,expression:c.expression||void 0,conditional:c.conditional||void 0}}),
(d=d.templateJson.tooltipInfo.chart)&&e.tags.push({name:"chart",attributes:{title:d.title||void 0,value:d.value||void 0,weight:d.weight||void 0,min:d.min||void 0,max:d.max||void 0,avg:d.avg||void 0,conditional:d.conditional||void 0}}));return{documentTag:a}},buildDocumentStyle:function(e){e=k.pxToPtObj(e.report.templateJson.documentOptions);return{fontSize:e.fontSize,fontFamily:e.fontFamily}}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/ColorUtil"],function(k,g,f){var e={};k.mixin(e,g);var d={"font-size":"fontSize","line-height":"lineHeight","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"},c={},a;for(a in d)c[d[a]]=a;e.splitTrim=function(a,b,c){a=String(a).split(b).map(function(a){return a.trim()});return c?a.filter(function(a){return!!a}):
a};e.parseStyleString=function(a){var b={};e.splitTrim(a||"",";",!0).forEach(function(a){var c=e.splitTrim(a,":");if(a=d[c[0]])c=c[1],"rgba(0, 0, 0, 0)"===c&&(c="transparent"),b[a]=c});return b};e.composeStyleString=function(a,b){b=b&&b.addPx;var d="",e;for(e in a){var h=c[e];if(h){var g=a[e];g&&("backgroundColor"===e&&(g=f.toCSSColor(g)),d+=h+":"+g+(b&&b[h]?"px;":";"))}}return d};e.removeZeroProperties=function(a){Object.keys(a).forEach(function(b){0===Number(a[b])&&delete a[b]});return a};var b=
{valign:{center:"middle"}},h={valign:{middle:"center"}};e.getPropValuePtoE=function(a,c){return b[a]&&b[a][c]||c};e.getPropValueEtoP=function(a,b){return h[a]&&h[a][b]||b};e.KEY_OPERATOR_RE=/^(!=|>=|<=|<|>|=)/;e.ONE_FIELD_KEY_TEST=/^(default|(<|>|<=|>=|!=|=|)(-?\d+\.\d+|-?\d+))$/;e.KEY_INTERVAL_SEPARATOR=";";return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/ReportingEnginePageSizeCompatibilityUtil":function(){define(["../../supportClasses/DocumentOptions"],function(k){var g=
{},f={a4:1,letter:1};g.getReportingEnginePageSize=function(e,d){return f[e]?e:(d=k.SIZE_TYPE_TO_DIM_HASH[e]&&k.SIZE_TYPE_TO_DIM_HASH[e][d])?k.combineCustomSizeString(d.w,d.h,"in"):e};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid":function(){define("dojo/_base/declare dojo/_base/lang dojo/store/Memory esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ./_GridChartViewSupport ./_GridHighlightSupport ./_GridFilterSupport ./_GridSortSupport ./_ResizableColumnsSupport ./_DataDrillingSupport esri/dijit/geoenrichment/ReportPlayer/config ./valueField/ValueField ./valueField/_ResizableField ./coreUtils/GridBackgroundForegroundUtil ./coreUtils/GridFloatingTablesUtil ./coreUtils/GridBorderUtil ./coreUtils/GridDataUtil ./coreUtils/GridQueryUtil ./coreUtils/GridLayoutCalculator ./coreUtils/GridCellRenderer ./coreUtils/GridStyleUtil ./coreUtils/GridLayoutSizer ./coreUtils/_GridDebugUtil ../sections/SectionTypes esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil dojo/text!../templates/AdjustableGrid.html".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z,D,F,B,E,G,H,J,M,I,P,K,N){var Q={defaultRowHeight:15.33,rowMinHeight:3,columnMinWidth:3,defaultChartRowHeight:150},R={rowMinHeight:3,columnMinWidth:3},L=k([u,y]);return k([b,h,l,n,m,p,t,q],{isGrid:!0,templateString:N,viewModel:null,theme:null,columns:null,store:null,backgroundSectionJson:null,foregroundSectionJson:null,enableBackgroundForeground:!1,forceCreateFloatingTables:!1,backgroundFloatingTablesSectionJson:null,foregroundFloatingTablesSectionJson:null,
isFloatingTable:!1,isBackgroundFloatingTable:!1,layoutDefaults:null,stickToRight:!1,looseResize:!1,keepGridWidthWhenResized:!1,keepGridHeightWhenResized:!1,hasResizableColumns:!1,disableResizableColumnsAutoDetection:!1,fitParentWhenResized:!1,parentWidget:null,parentElementInPageInfo:null,viewPortContainer:null,parentGrid:null,reportContainerPageNode:null,isReportContainerPageGrid:!1,getPreviewValueFunction:null,currentFeatureIndex:null,currentFeatureAttributes:null,fixedViewMode:null,fixedSpecificViewMode:null,
enableAsyncRendering:!1,asyncBatchSize:1,enableNumberAnimation:!1,applyThemeStyle:!0,inheritThemeBackground:!0,previewModeBorderLineStyle:null,editModeBorderLineStyle:null,renderBordersFromTheme:!1,noThemeBorderLineStyle:null,hasRealBorders:!1,trimTextIfOverflows:!1,autoDetectUrl:!1,shouldStayWithinParent:!0,infographicBenchmarkController:null,backgroundSection:null,foregroundSection:null,backgroundFloatingTablesSection:null,foregroundFloatingTablesSection:null,_cellRenderer:null,_fieldCells:null,
_dynamicBindings:null,_isBeingResizedFlag:!1,_renderCellsQueue:null,_renderCellsContentQueue:null,postCreate:function(){this.inherited(arguments);this.layoutDefaults=g.mixin({},Q,this.layoutDefaults);r.isPlayerOnServer&&(this.hasResizableColumns=this.enableAsyncRendering=!1,this.disableResizableColumnsAutoDetection=!0)},refresh:function(a){if(this.domNode)return!this.isReportContainerPageGrid&&!this.hasResizableColumns&&this.viewModel.dynamicReportInfo&&1<this.columns.length&&2<this.store.data.length&&
!this.disableResizableColumnsAutoDetection&&(this.fitParentWhenResized=this.hasResizableColumns=this.keepGridWidthWhenResized=!0,this.layoutDefaults.columnMinWidth=30),M.isMobileDevice()&&(this.hasResizableColumns=!1),c[this.hasResizableColumns?"add":"remove"](this.domNode,"hasResizableColumns"),D.markAsDirty(this),this._doRefresh(a),this.getRenderPromise()},_doRefresh:function(b){this.mainNode&&this.store&&(this._destroyTableContent(),this.mainNode.innerHTML="",G.refreshStart(this),this._recoverOriginalData(),
this._applyFilterToStoreData(),this._applySortingToStoreData(),this.isEmptyTable()?!this.viewModel.isGraphicStyle&&a.create("div",{"class":"adjustableGrid_emptyRow"},this.mainNode):(c.remove(this.domNode,"esriGEAdjustableGridSingleCell esriGEAdjustableGridMultiCell"),c.add(this.domNode,this.isSingleCelledTable()?"esriGEAdjustableGridSingleCell "+(K.getTableSubtype(this)||""):"esriGEAdjustableGridMultiCell"),D.recalcRows(this),b=b||{},void 0===b.stickToRight&&(b.stickToRight=this.stickToRight),D.recalcColumns(this,
b),D.autoSnapLayout(this),this._createCellsFromStoreData(),this._renderCells(),D.positionCells(this)),this.refreshBackground(),this._renderBackgroundFloatingTables(),this._renderForegroundFloatingTables(),this.refreshForeground(),this._buildSortControls(),G.refreshEnd(this))},_originalData:null,_getOriginalData:function(){return this._originalData||this.store.data},_getSavedOriginalData:function(){return this._originalData},_saveOriginalData:function(){this._originalData||(this.store.data=g.clone(this.store.data),
this._originalData=g.clone(this.store.data))},_recoverOriginalData:function(){this._originalData&&(this.store.data=g.clone(this._originalData))},_createCellsFromStoreData:function(){var a=this;this.enableAsyncRendering&&(this._renderCellsQueue=new I({onFinished:function(){a.onRendered()}}));this.store.data.forEach(function(b){a.columns.forEach(function(c,d){if(!(b.excludedIndexHorizontal&&b.excludedIndexHorizontal[d]||b.excludedIndexVertical&&b.excludedIndexVertical[d])){d=c.index+(C.getDataColumnSpan(b,
c.field)||1)===a.columns.length;var e=b.index+(C.getDataRowSpan(b,c.field)||1)===a.store.data.length;a._createField(b,c,d,e)}})})},_getFieldClass:function(a){return this.hasResizableColumns&&0===a.gridData.index?L:u},_createField:function(a,b,c,d){var e="adjustableGridField field-"+b.field+(c?" lastInRow":"")+(d?" lastRow":"");c={viewModel:this.viewModel,fieldStyle:B.combineCellStyle(this,a,b),defaultBorderStyle:this._getDefaultBorderStyle(a,b,c,d),"class":e,trimTextIfOverflows:this.trimTextIfOverflows,
autoDetectUrl:this.autoDetectUrl,rowId:a.id,columnId:b.id,parentGrid:this,parentWidget:this,uniqueId:a.id+b.id,gridData:a,column:b,isLastInRow:c,isLastInColumn:d};this.hasResizableColumns&&(c.allowVerticalResizing=!1,c.showColumnRowSizeTooltip=!0);c=this._doCreateFieldFromParams(c,a,b);this.hasResizableColumns&&this._populateFieldForResizableColumns(c,a,b);c.domNode.style.position="absolute";this._fieldCells.push(c);return c},_getDefaultBorderStyle:function(a,b,c,d){return A.getBorderStyle(this,a,
b,c,d)},getRenderPromise:function(){var a=[];a.push(this._renderCellsQueue&&this._renderCellsQueue.getPromise());a.push(this._renderCellsContentQueue&&this._renderCellsContentQueue.getPromise());this.getFieldCells().forEach(function(b){b.content&&b.content.getRenderPromise&&a.push(b.content.getRenderPromise())});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(b){this[b]&&a.push(this[b].getRenderPromise())},this);return e(a)},
isBeingRendered:function(){return this._renderCellsQueue&&!this._renderCellsQueue.isFinished()||this._renderCellsContentQueue&&!this._renderCellsContentQueue.isFinished()},_doCreateFieldFromParams:function(a,b,c){return(new (this._getFieldClass(a))(a)).placeAt(this.mainNode)},_renderCells:function(){function a(a){b._renderFieldContent(a);b._postCreateFieldCell(a);b._updateCellViewMode(a)}var b=this;this._renderCellsQueue?J.splitArrayToBunches(this._fieldCells,this.asyncBatchSize).forEach(function(c){b._renderCellsQueue.add(function(){c.forEach(a)},
{delayAfter:0})}):(this._fieldCells.forEach(a),this.onRendered())},_renderFieldContent:function(a){r.isPlayerOnServer||this._trySetupDataDrilling(a);this._preRenderFieldCell(a);var b=this._getCellRenderer().renderCellContent(a);b&&b.then&&(this._renderCellsContentQueue=this._renderCellsContentQueue||new I({onFinished:function(){}}),this._renderCellsContentQueue.add(b));this._configureRenderedCellContentSpecificStyles(a);this._postRenderFieldCell(a)},_preRenderFieldCell:function(a){},_postRenderFieldCell:function(a){},
_getCellRenderer:function(){this._cellRenderer||(this._cellRenderer=new F);return this._cellRenderer},_configureRenderedCellContentSpecificStyles:function(a){c[C.isNumericVariableFieldCell(a)?"add":"remove"](a.domNode,"hasNumericVariableFieldInfo");c[C.isStringVariableFieldCell(a)?"add":"remove"](a.domNode,"hasStringVariableFieldInfo");c[C.getConditionalFormatting(a)?"add":"remove"](a.domNode,"hasConditionalFormatting")},_postCreateFieldCell:function(a){},refreshBackground:function(){this.enableBackgroundForeground&&
(this.backgroundSection&&this.backgroundSection.destroy(),this.backgroundSection=v.renderBackground(this,this.backgroundSectionJson,this._getBackgroundSectionCreationParams()))},_getBackgroundSectionCreationParams:function(){return null},refreshForeground:function(){this.enableBackgroundForeground&&(this.foregroundSection&&this.foregroundSection.destroy(),this.foregroundSection=v.renderForeground(this,this.foregroundSectionJson,this._getForegroundSectionCreationParams()))},_getForegroundSectionCreationParams:function(){return null},
_renderBackgroundFloatingTables:function(){this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.backgroundFloatingTablesSectionJson=this.backgroundFloatingTablesSectionJson||{type:H.TABLE_BACKGROUND_FLOATING_PANELS,stack:[]});this.backgroundFloatingTablesSection=w.renderFloatingTables(this,this.backgroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!0),!0);this._postProcessFloatingTablesSection(this.backgroundFloatingTablesSection,
!0)},_renderForegroundFloatingTables:function(){this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.forceCreateFloatingTables&&(this.foregroundFloatingTablesSectionJson=this.foregroundFloatingTablesSectionJson||{type:H.TABLE_FOREGROUND_FLOATING_PANELS,stack:[]});this.foregroundFloatingTablesSection=w.renderFloatingTables(this,this.foregroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!1),!1);this._postProcessFloatingTablesSection(this.foregroundFloatingTablesSection,
!1)},_getFloatingTablesSectionParams:function(a){var b=this,c={tableClass:function(a){return(a=K.getTableSubtype(a))?"outerFloatingAdjustableGrid floatingTableSimpleElement "+a:"outerFloatingAdjustableGrid floatingTableComplexElement"},tableParams:{isFloatingTable:!0,isBackgroundFloatingTable:a,parentGrid:this,inheritThemeBackground:this.inheritThemeBackground,applyThemeStyle:this.applyThemeStyle,layoutDefaults:g.mixin({},this.layoutDefaults,R),_preRenderFieldCell:function(a){b._preRenderFieldCell(a)},
_postCreateFieldCell:function(a){b._postCreateFieldCell(a)}}};this._addFloatingTablesSectionCreationParams(c,a);return c},_addFloatingTablesSectionCreationParams:function(a,b){return a},_postProcessFloatingTablesSection:function(a,b){},getVisualState:function(){var a={type:"table",cells:this.getFieldCells().map(function(a){return a.content&&a.content.getVisualState&&a.content.getVisualState()})},b=this.getSorting(this);b&&(a.sorting=b);if(b=this._filterRanges?g.clone(this._filterRanges):null)a.filterRanges=
b;this.presetFilter&&(a.hasPresetFilter=!0);this.backgroundSection&&(a.backgroundSection=this.backgroundSection.getVisualState());this.backgroundFloatingTablesSection&&(a.backgroundFloatingTablesSection=this.backgroundFloatingTablesSection.getVisualState());this.foregroundFloatingTablesSection&&(a.foregroundFloatingTablesSection=this.foregroundFloatingTablesSection.getVisualState());this.foregroundSection&&(a.foregroundSection=this.foregroundSection.getVisualState());this._chartViewInfo&&(a.isChartView=
!0,a.chartViewInfo=g.clone(this._chartViewInfo));return a},setVisualState:function(a){var b=this;if(a)return d(this.getRenderPromise(),function(){var c=[];a.cells&&b.getFieldCells().forEach(function(b,d){b.content&&b.content.setVisualState&&c.push(b.content.setVisualState(a.cells[d]))});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(d){a[d]&&b[d]&&c.push(b[d].setVisualState(a[d]))});return e(c).then(function(){return d(a.filterRanges&&
b.setFilterRanges(a.filterRanges),function(){return d(a.sorting&&b.setSorting(a.sorting),function(){return a.isChartView&&b.tableToChart(a.chartViewInfo)})})})})},_setCellWidth:function(a,b){D.adjustColumnWidth(this,a.gridData,a.column,b);D.positionCells(this)},_setCellHeight:function(a,b){D.adjustRowHeight(this,a.gridData,a.column.field,b);D.positionCells(this)},setCellWidth:function(a,b){this._setCellWidth(a,b)},setCellHeight:function(a,b){this._setCellHeight(a,b)},_maxWidth:500,_width:500,_height:0,
_spaceAfter:0,_maxHeight:0,_left:0,_top:0,_alternatingStyle:null,_opacity:1,_fixedCellsOpacity:1,getMaxHeight:function(a){return this._maxHeight},setMaxHeight:function(a){this._maxHeight=a},getHeight:function(a,b){return this._height+(!1!==b?this._top:0)+(a?this._spaceAfter||0:0)},getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(a,b){var c=0;b&&b.preserveRightOffset&&(D.recalcGridWidth(this),c=this.getAllowedWidth(),c=(c-this._width)/c);this._maxWidth=a;b&&b.resizeToFitAllowedWidth&&
this.resizeToFitAllowedWidth({rightOffsetWeight:b.preserveRightOffset?c:0})},getLeft:function(){return this._left},getTop:function(){return this._top},setSpaceAfter:function(a){this._spaceAfter=a},getAllowedWidth:function(){return this._maxWidth-this._left},getAllowedWidthFromParent:function(){return this.shouldStayWithinParent?this.domNode.parentNode.clientWidth-this._left:1E6},getTableBox:function(){var a=this.getSettings().style;return{l:a.left,t:a.top,w:a.width,h:this.getHeight(!1,!1)}},resizeToFitAllowedWidth:function(a){this.isEmptyTable()||
E.resizeToFitAllowedWidth(this,a)},resizeToFitWidth:function(a){this.isEmptyTable()||E.resizeToFitWidth(this,a)},resizeToFitHeight:function(a,b){this.isEmptyTable()||(!1!==b&&(a-=this._top),E.resizeToFitHeight(this,a))},scaleProportionallyWithinParent:function(a){E.scaleProportionallyWithinParent(this,a)},collapseContent:function(){this.getFieldCells({floatingCells:!0}).forEach(function(a){a.content&&a.content.collapseContent&&a.content.collapseContent()})},hasHiddenContent:function(){return this._checkNeedResizeRowHeightToShowCellsContent(!1)},
resizeRowHeightToShowCellsContent:function(){this._checkNeedResizeRowHeightToShowCellsContent(!0);return this.getRenderPromise()},_checkNeedResizeRowHeightToShowCellsContent:function(a){return!1},_tableAttributes:null,_scaleToFitWidth:void 0,_scaleToFitHeight:void 0,setSettings:function(a){var b,c=this._left,d=this.isMultiFeatureTable();this.columns.forEach(function(a){a.style&&"number"===typeof a.style.width&&(a._wasBeforeRecalc=!0)});if(a.style){void 0!==a.style.left&&this.setPosition(a.style.left);
void 0!==a.style.top&&this.setPosition(void 0,a.style.top);void 0!==a.style.spaceAfter&&(this._spaceAfter=a.style.spaceAfter);a.style.width&&(this._width=a.style.width);a.style.alternatingStyle&&(this._alternatingStyle=a.style.alternatingStyle);this.setOpacity(a.style);var e=this._width;this._width=Math.min(this._width,this.getAllowedWidth());if(this._width!==e||c!==this._left)b=!0}a.attributes&&(this._adjustColumnsForSettings(a)&&(b=!0),this._tableAttributes=a.attributes,this._tableAttributes.rowCount&&
this._tableAttributes.rowCount!==this.store.data.length&&this._adjustRowsForSettings(a),delete this._tableAttributes.rowCount,delete this._tableAttributes.columnCount);void 0!==a.scaleToFitWidth&&(this._scaleToFitWidth=a.scaleToFitWidth);void 0!==a.scaleToFitHeight&&(this._scaleToFitHeight=a.scaleToFitHeight);this._tableAttributes=this._tableAttributes||{};var h=[];this.columns.forEach(function(a){a._wasBeforeRecalc&&h.push(a);delete a._wasBeforeRecalc});if(!d&&this.isMultiFeatureTable())for(c=this.columns.length-
1;c>=this.getNumFixedColumns();c--)d=h.indexOf(this.columns[c]),-1!==d&&h.splice(d,1);(a.viewMode||a.specificViewMode)&&this._tryApplyNewViewMode(a.viewMode,a.specificViewMode);void 0!==a.noChartView&&(this.noChartView=a.noChartView);void 0!==a.maxWidth&&this.setMaxWidth(a.maxWidth);void 0!==a.maxHeight&&this.setMaxHeight(a.maxHeight);this.viewModel.dynamicReportInfo&&this.getNumDynamicColumns()?(D.trimColumnsForNumberOfFeatures(this),this.refresh({resetWidth:!0})):this.viewModel.dynamicReportInfo&&
this.getNumDynamicRows()?(D.adjustRowsForNumberOfFeatures(this),this.refresh()):b?this.refresh({resetWidth:!0,columnsToPreserve:h}):this.refresh()},setPosition:function(a,b){void 0!==a&&(this._left=a||0,this.domNode.style.left=this._left+"px");void 0!==b&&(this._top=b||0,this.domNode.style.top=this._top+"px")},setOpacity:function(a){"number"===typeof a.opacity&&(this._opacity=Math.max(0,Math.min(1,a.opacity)),this.domNode.style.opacity=this._opacity,c[0===this._opacity?"add":"remove"](this.domNode,
"esriGENonInteractable"));"number"===typeof a.fixedCellsOpacity&&(this._fixedCellsOpacity=Math.max(0,Math.min(1,a.fixedCellsOpacity)),this.mainNode.style.opacity=this._fixedCellsOpacity,c[0===this._fixedCellsOpacity?"add":"remove"](this.mainNode,"esriGENonInteractable"))},_adjustColumnsForSettings:function(a){return!1},_adjustRowsForSettings:function(a){},getSettings:function(){D.recalcGridWidth(this);return{style:{width:this._width,left:this._left,top:this._top,spaceAfter:this._spaceAfter,alternatingStyle:this._alternatingStyle,
opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity},attributes:g.mixin(g.clone(this._tableAttributes),{columnCount:this.columns.length,rowCount:this.store.data.length}),presetFilter:this.presetFilter,presetSorting:this.presetSorting,scaleToFitWidth:this._scaleToFitWidth,scaleToFitHeight:this._scaleToFitHeight,noChartView:this.noChartView}},getOpacity:function(){return{opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity}},needScaleToFitWidth:function(){return this._scaleToFitWidth},
needScaleToFitHeight:function(){return this._scaleToFitHeight},isEmptyTable:function(){return K.isEmptyTable(this)},isSingleCelledTable:function(){return K.isSingleCelledTable(this)},isMultiDataTable:function(){return K.isMultiDataTable(this)},isMultiFeatureTable:function(){return!!this.getNumDynamicColumns()||!!this.getNumDynamicRows()},getNumFixedColumns:function(){return this._tableAttributes&&this._tableAttributes.fixedColumns||0},setNumFixedColumns:function(a){this._tableAttributes.fixedColumns=
a},getNumDynamicColumns:function(){return this._tableAttributes&&this._tableAttributes.dynamicColumns||0},setNumDynamicColumns:function(a){this._tableAttributes.dynamicColumns=a},getNumFixedRows:function(){return this._tableAttributes&&this._tableAttributes.fixedRows||0},setNumFixedRows:function(a){this._tableAttributes.fixedRows=a},getNumDynamicRows:function(){return this._tableAttributes&&this._tableAttributes.dynamicRows||0},setNumDynamicRows:function(a){this._tableAttributes.dynamicRows=a},_viewMode:null,
_specificViewMode:null,_viewModeKey:null,getViewMode:function(){return this._viewMode},getSpecificViewMode:function(){return this._specificViewMode},setViewMode:function(a,b,c){!this._tryApplyNewViewMode(a,b)||c&&c.noUpdate||(this._fieldCells&&this._fieldCells.forEach(function(a){this._updateCellViewMode(a)},this),this.backgroundSection&&this.backgroundSection.setViewMode(this._viewMode,this._specificViewMode),this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.setViewMode(this._viewMode,
this._specificViewMode),this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundSection&&this.foregroundSection.setViewMode(this._viewMode,this._specificViewMode))},_tryApplyNewViewMode:function(a,b){var d="function"===typeof this.fixedViewMode?this.fixedViewMode(this):this.fixedViewMode,e="function"===typeof this.fixedSpecificViewMode?this.fixedSpecificViewMode(this):this.fixedSpecificViewMode;a=d||a||this._viewMode;
b=e||b||this._specificViewMode;d=a+(b?JSON.stringify(b):"");if(this._viewModeKey===d)return!1;this._viewModeKey=d;this._viewMode=a;this._specificViewMode=b;c.remove(this.domNode,"adjustableGridPreviewMode adjustableGridEditMode ");c.add(this.domNode,this._viewMode===P.EDIT?"adjustableGridEditMode":"adjustableGridPreviewMode");return!0},_updateCellViewMode:function(a){a.setDefaultBorderStyle(this._getDefaultBorderStyle(a.gridData,a.column,a.isLastInRow,a.isLastInColumn));a.content&&a.content.setViewMode&&
a.content.setViewMode(this._viewMode,this._specificViewMode);this._getCellRenderer().updateViewMode(a)},getFieldCells:function(a){var b=[],b=a&&a.floatingCells?this.getBackgroundFloatingCells().concat(this._fieldCells).concat(this.getForegroundFloatingCells()):this._fieldCells;a&&a.topFirst&&(b=b.slice().reverse());return b},queryCells:function(a){return z.queryCells(this,a)},getFirstCell:function(){return this.getFieldCells()[0]},getCellText:function(a){return C.getFieldCellValue(a)},renderCell:function(a){this._renderFieldContent(a)},
refreshCellStyle:function(a){a.setStyle(B.combineCellStyle(this,a.gridData,a.column))},getInfographicJson:function(){var a=this.getFirstCell();return C.isInfographicCell(a)?C.getFieldInfo(a).infographicJson:null},getFeatureIndexForCell:function(a){return this.isMultiFeatureTable()?D.calcRingIndexForCell(a):"number"===typeof this.currentFeatureIndex?this.currentFeatureIndex:"number"===typeof a.gridData.currentFeatureIndex?a.gridData.currentFeatureIndex:"number"===typeof a.column.currentFeatureIndex?
a.column.currentFeatureIndex:void 0},isMouseOver:function(){return this.domNode&&z.isMouseOver(this)},getOverFieldCell:function(a){return z.getOverFieldCell(this,a)},getBBox:function(a){return z.getBBox(this,a)},getBackgroundFloatingCells:function(a){return this._getFloatingCells(this.backgroundFloatingTablesSection,a)},getForegroundFloatingCells:function(a){return this._getFloatingCells(this.foregroundFloatingTablesSection,a)},_getFloatingCells:function(a,b){var c=[];if(!a)return c;a.getTables().forEach(function(a){c=
c.concat(a.getFieldCells())});b&&b.topFirst&&c.reverse();return c},getChartJson:function(){var a=this.getFirstCell();return C.isChartCell(a)?C.getFieldInfo(a).chartJson:null},toJson:function(){var a=this.getSettings();a.id="table";a.data={data:this._getOriginalData(),columns:this.columns};["backgroundSection","foregroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection"].forEach(function(b){var c=this[b];c&&(c=c.toJson(),c.stack.length&&(a[b+"Json"]=c))},this);return g.clone(a)},
fromJson:function(a){a&&a.data&&(this.columns=a.data.columns||[],this.store=new f({data:a.data.data||[],idProperty:"id"}),this.backgroundSectionJson=a.backgroundSectionJson,this.foregroundSectionJson=a.foregroundSectionJson,this.backgroundFloatingTablesSectionJson=a.backgroundFloatingTablesSectionJson,this.foregroundFloatingTablesSectionJson=a.foregroundFloatingTablesSectionJson,this.setSettings(a))},notifyShown:function(){this.getFieldCells().forEach(function(a){a.notifyShown();a.content&&a.content.notifyShown&&
a.content.notifyShown()});this.backgroundSection&&this.backgroundSection.notifyShown();this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.notifyShown();this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.notifyShown();this.foregroundSection&&this.foregroundSection.notifyShown()},onRendered:function(){},onRequestScaleToFitHeight:function(){},_destroyTableContent:function(){this._renderInfo=null;this._fieldCells=this._fieldCells||[];this._fieldCells.forEach(function(a){a.parentWidget=
null;a.parentGrid=null;a.gridData=null;a.column=null;a.destroy()});this._fieldCells.length=0;this.backgroundSection&&this.backgroundSection.destroy();this.backgroundSection=null;this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.backgroundFloatingTablesSection=null;this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.foregroundFloatingTablesSection=null;this.foregroundSection&&this.foregroundSection.destroy();this.foregroundSection=
null;this._renderCellsQueue&&this._renderCellsQueue.destroy();this._renderCellsQueue=null;this._renderCellsContentQueue&&this._renderCellsContentQueue.destroy();this._renderCellsContentQueue=null},destroy:function(){this._destroyTableContent();this.reportContainerPageNode=this.parentGrid=this.viewPortContainer=this.parentElementInPageInfo=this.parentWidget=this._originalData=this.columns=this.store=this.theme=this.viewModel=null;this._removeChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridChartViewSupport":function(){define(["dojo/_base/declare",
"dojo/dom-construct","./coreUtils/chart/ChartViewBuilder","./coreUtils/chart/GridChartUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f,e,d){return k(null,{noChartView:!1,_chartViewInfo:null,_chartNode:null,_chartViewBuilder:null,getChartViewOptions:function(){var c=e.getSupportedChartTypes(this),a=e.getTableRowsColumnsInfos(this);return c&&c.length&&a&&{chartType:this._chartViewInfo&&this._chartViewInfo.chartType,chartTypes:c,supportsAltOrientation:2<this.columns.length,columnInfos:a.columnInfos,
rowInfos:a.rowInfos,sourceId:this._chartViewInfo&&this._chartViewInfo.sourceId,takeSeriesFromRows:!1}},tableToChart:function(c){this._removeChart();this._chartViewInfo=c;this._chartNode=g.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode);d.hide(this.mainNode);this._chartViewBuilder=new f({viewModel:this.viewModel,theme:this.theme,grid:this,chartNode:this._chartNode,width:this._width,height:this._height});return this._chartViewBuilder.renderChart(c)},chartToTable:function(){this._removeChart()},
_removeChart:function(){this._chartViewInfo&&(this._chartViewInfo=null,this._chartViewBuilder.destroy(),this._chartViewBuilder=null,g.destroy(this._chartNode),this._chartNode=null,d.show(this.mainNode))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/ChartViewBuilder":function(){define("dojo/_base/declare dojo/_base/lang ../../../charts/utils/ChartTypes ../../../charts/utils/ChartDataLabelsTypes ../../../charts/utils/ChartJsonUtil ../../../charts/legends/ChartLegendPlacements ./GridChartUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(k,g,f,e,d,c,a,b){return k(null,{viewModel:null,theme:null,grid:null,chartNode:null,width:null,height:null,_chartContainer:null,_chartType:null,_seriesInRows:null,_sourceId:null,constructor:function(a){g.mixin(this,a)},renderChart:function(a){this._chartType=a.chartType;this._seriesInRows=a.altOrientation;this._sourceId=a.sourceId;a=this.viewModel.layoutBuilder.getClass("chart");return a.isAsync?b.showProgressPromise(this.grid.domNode,a.loadModules()).then(this._doRenderChart.bind(this)):
this._doRenderChart()},_doRenderChart:function(){this._chartContainer=this.viewModel.layoutBuilder.createElement("chart",{node:this.chartNode,json:this._getChartJson(),creationParams:{viewModel:this.viewModel,theme:this.theme,parentWidget:this.grid,enableAxisLabelsAutoTilt:!0}})},_getChartJson:function(){var b=d.getDefaultChartSettings({chartType:this._chartType,width:this.width,height:this.height,seriesItems:a.createChartSeriesItems(this.grid,{chartType:this._chartType,seriesInRows:this._seriesInRows,
sourceId:this._sourceId})});if(1<b.seriesItems.length||f.isSingleSeries(this._chartType))b.visualProperties.legend.series.placement=c.BOTTOM;this._chartType===f.RING&&(b.visualProperties.dataLabels=e.LABEL_VALUE);f.isSingleSeries(this._chartType)?b.visualProperties.title.text=b.seriesItems[0]&&b.seriesItems[0].label||"":b.visualProperties.title.text=a.getChartTitle(this.grid);return b},destroy:function(){this._chartContainer&&this._chartContainer.destroy();this._chartContainer=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes":function(){define([],
function(){var k={COLUMN:"Column",BAR:"Bar",LINE:"Line",VERTICAL_LINE:"VerticalLine",PIE:"Pie",DONUT:"Donut",GAUGE:"Gauge",RING:"Ring",PICTURE_COLUMN:"PictureColumn",PICTURE_BAR:"PictureBar",WAFFLE:"Waffle",COLUMN_LINE:"ColumnLine",BAR_LINE:"BarLine"};k.CLASSIC_CHART_TYPES=[k.COLUMN,k.BAR,k.LINE,k.PIE];k.AVAILABLE_CHART_TYPES=[k.COLUMN,k.BAR,k.LINE,k.VERTICAL_LINE,k.PIE,k.DONUT,k.GAUGE,k.RING,k.PICTURE_COLUMN,k.PICTURE_BAR,k.WAFFLE];k.isSupported=function(g){return-1!==k.AVAILABLE_CHART_TYPES.indexOf(g)};
k.isColumnBarLike=function(g){return g===k.COLUMN||g===k.BAR||g===k.PICTURE_COLUMN||g===k.PICTURE_BAR};k.isColumnBarNoPictureLike=function(g){return g===k.COLUMN||g===k.BAR};k.isColumnLike=function(g){return g===k.COLUMN||g===k.PICTURE_COLUMN};k.isBarLike=function(g){return g===k.BAR||g===k.PICTURE_BAR};k.isPictureLike=function(g){return g===k.PICTURE_COLUMN||g===k.PICTURE_BAR||g===k.WAFFLE};k.isLineLike=function(g){return g===k.LINE||g===k.VERTICAL_LINE};k.isXAxisVertical=function(g){return g===
k.BAR||g===k.PICTURE_BAR||g===k.VERTICAL_LINE};k.hasAxis=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.hasLegend=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.hasBackgroundImage=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.isSingleSeries=function(g){return g===k.PIE||g===k.DONUT||g===k.GAUGE||g===k.RING||g===k.WAFFLE};k.isComparisonSupported=function(g){return g===k.COLUMN||g===k.BAR?2:k.isLineLike(g)?1E6:0};k.isConditionalStylingSupported=
function(g){return k.isColumnBarLike(g)||g===k.RING||g===k.GAUGE||g===k.WAFFLE};k.isLegendSupported=function(g,f,e,d){return k.isSeriesLegendSupported(g,f,e)||k.isMinMaxLegendSupported(g,f)};k.isSeriesLegendSupported=function(g,f,e,d){1===f&&d&&(f=2);return 0===f||1===f&&k.isLineLike(g)&&!e?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.isMinMaxLegendSupported=function(g,f){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.WAFFLE};k.isSortingSupported=
function(g,f,e){return 0===f||1<f||e?!1:k.isColumnBarLike(g)||g===k.PIE||g===k.DONUT||g===k.RING};k.isStackSupported=function(g,f,e){return 0===f||1===f&&!e?!1:g===k.COLUMN||g===k.BAR||g===k.LINE};k.isRenderInOppositeDirectionsSupported=function(g,f,e){return 0===f||1===f||e?!1:k.isColumnBarLike(g)};k.supportsNegativeValues=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)||g===k.RING};k.isShowDataAsWeightSupported=function(g){return k.isColumnBarLike(g)||k.isLineLike(g)};k.canFilterVariables=
function(g,f){return f?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.PIE||g===k.DONUT||g===k.RING};k.isBenchmarkSupported=function(g,f){return f?!1:k.isColumnBarLike(g)||k.isLineLike(g)||g===k.RING};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartDataLabelsTypes":function(){define([],function(){var k={NONE:"None",LABEL:"Label",VALUE:"Value",LABEL_VALUE:"LabelValue",PERCENT:"Percent",LABEL_PERCENT:"LabelPercent",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;
return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE},buildType:function(g){var f="";g.label&&(f="Label");g.value?f+="Value":g.percent&&(f+="Percent");return f||k.NONE},hasLabel:function(g){return g&&-1!==g.indexOf("Label")},hasValue:function(g){return g&&-1!==g.indexOf("Value")},hasPercent:function(g){return g&&-1!==g.indexOf("Percent")},has2Values:function(g){return g===k.LABEL_VALUE||g===k.LABEL_PERCENT}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartJsonUtil":function(){define("dojo/_base/lang ./ThemeCalculator ./cleanUp/_ChartJsonCleaner ./ChartTypes ./ChartDataLabelsTypes ../legends/ChartLegendPlacements ../legends/ChartLegendTypes ./plots/supportClasses/GaugeLabelPlacements ./plots/supportClasses/WaffleLabelPlacements ./plots/supportClasses/WaffleDirections ../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){p=p.geoenrichment.dijit.ReportPlayer.ChartContainer;var t={getDefaultChartSettings:function(f){f=f||{};var m=k.mixin({},f.font),n=k.mixin({},f.font);delete n.fontSize;return{isChart:!0,type:f.chartType||e.COLUMN,isMultiFeatureChart:!!f.isMultiFeatureChart,seriesItems:f.seriesItems||[],visualProperties:{width:f.width||400,height:f.height||300,marginTop:void 0,marginRight:void 0,marginBottom:void 0,marginLeft:void 0,backgroundColor:void 0,backgroundColorOpacity:1,
plotAreaOutlineColor:void 0,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:0,plotAreaOutlineStyle:void 0,backgroundImageData:void 0,panelBackgroundColor:void 0,title:{text:"",align:"center",style:k.mixin({},m),verticalShift:0},xAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:k.mixin({},m),style:k.mixin({},m),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,
gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,placement:void 0},yAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:k.mixin({},m),style:k.mixin({},m),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,hideBaseLine:!1,baseLineColor:void 0,baseLineOpacity:1,baseLineThickness:.5,baseLineStyle:void 0,
baseLineValue:0,showPercentSymbol:!1,showCurrencySymbol:!1,showSymbolForAllLabels:!1,showValuesAsWeightsInSeries:!1,placement:void 0,nonZeroInclusive:!1},legend:{type:a.SERIES,series:{placement:c.NONE,placementOffset:10,hasBorder:!0,labelParts:"Label",style:k.mixin({},m),symbol:void 0,hideOthers:!1,showComparison:!1},minMax:{placement:c.NONE,placementOffset:3,titleStyle:k.mixin({},n),minVariableLabelStyle:k.mixin({},n),maxVariableLabelStyle:k.mixin({},n)}},isStacked:!1,showValuesAsWeightInStack:!1,
columnThickness:g.DEFAULT_COLUMN_THICKNESS,columnBarGap:void 0,columnBarOpacity:1,renderColumnBarsInOppositeDirections:!1,showColumnBarBackground:!1,columnBarBackgroundColor:void 0,columnBarBackgroundOpacity:1,fillOpacity:1,outlineColor:void 0,outlineOpacity:1,outlineThickness:0,outlineStyle:void 0,lineThickness:g.DEFAULT_LINE_THICKNESS,lineOpacity:1,fillLineMarkers:!1,lineMarkersFillOpacity:1,fillLineArea:!1,lineAreaOpacity:1,donutHolePercent:g.DEFAULT_DONUT_HOLE_PERCENT,donutGap:g.DEFAULT_DONUT_GAP,
donutArcPercent:g.DEFAULT_DONUT_ARC_PERCENT,gaugeHolePercent:g.DEFAULT_GAUGE_HOLE_PERCENT,gaugeRangeMin:void 0,gaugeRangeMax:void 0,gaugeGap:g.DEFAULT_GAUGE_GAP,gaugeStartAngle:g.DEFAULT_GAUGE_ANGLE,gaugeArcPercent:g.DEFAULT_GAUGE_ARC_PERCENT,gaugeLabelPlacement:b.INSIDE,gaugeLabelStyle:k.mixin({},n),gaugeShowArrow:!1,gaugeArrowLineColor:void 0,gaugeArrowFillColor:void 0,gaugeConditionalStylingOthers:!1,gaugeConditionalStylingLabel:!1,gaugeShowFromToLabels:!1,gaugeFromLabelStyle:k.mixin({},n),gaugeToLabelStyle:k.mixin({},
n),waffleDirection:l.DOWN_RIGHT,waffleFlowStyle:void 0,waffleShowWholePictures:!1,waffleStretchIconsToFill:!1,waffleRangeMin:void 0,waffleRangeMax:void 0,waffleLabelPlacement:h.BOTTOM,waffleLabelOffset:10,waffleHideValue:!1,waffleHideLabel:!1,waffleShowLabelAbove:!1,waffleValueStyle:k.mixin({},n),waffleLabelStyle:k.mixin({},n),waffleColumnSpace:5,waffleRowSpace:5,waffleConditionalStylingOthers:!1,waffleConditionalStylingValue:!1,waffleConditionalStylingLabel:!1,waffleNumIcons:void 0,waffleNumRows:void 0,
waffleNumColumns:void 0,ringBackgroundColor:void 0,ringBackgroundOpacity:1,columnBarShowWholePictures:!1,dataLabels:d.NONE,dataLabelsShowLabelUnder:!1,dataLabelsDecimals:0,dataLabelsStyle:k.mixin({},m),dataLabelsLabelStyle:null,dataLabelsAltColor:null,dataLabelsEnableAltColor:!1,dataLabelsInside:!1,dataLabelsStackedInColumns:!1,dataLabelsHorizontalAlign:"center",dataLabelsVerticalAlign:"middle",dataLabelsShowValuePercentSymbol:!1,dataLabelsShowValueCurrencySymbol:!1,dataLabelsAngle:0,dataLabelsMaxWidth:void 0,
chartIcons:void 0,floatingIcons:void 0,showAxisIcons:!1,showChartIcons:!1,floatingTexts:void 0,sorting:void 0,filter:void 0,tooltip:t.getChartDefaultTooltip(),conditionalStyling:void 0,noTableView:!1},comparisonInfo:void 0,dataDrillingPanelInfo:void 0}},getChartDefaultTooltip:function(){return{title:!0,value:!0,style:{},linkStyle:{}}},getChartEmptyTooltip:function(){return{style:{},linkStyle:{}}},provideDefaultValueForMissing:function(a,b){b=b||{};b=t.getDefaultChartSettings(b);a.visualProperties.tooltip=
a.visualProperties.tooltip||t.getChartDefaultTooltip();m.populateObject(a,b);return a},cleanUpJson:function(a,b,c){return f.cleanUpJson(a,b,c)},supportsVisualProperty:function(a,b,c){return f.supportsProperty(b,"visualProperties."+a,c)},supportsProperty:function(a,b,c){return f.supportsProperty(b,a,c)},enrichVisualPropertiesWithThemeSettings:function(a,b){a=k.clone(a);a.backgroundColor=a.backgroundColor||b.backgroundColor;a.outlineColor=a.outlineColor||b.outlineColor;a.outlineStyle=a.outlineStyle||
b.outlineStyle;m.populateObject(a.title.style,b.titleStyle);a.xAxis&&(m.populateObject(a.xAxis.style,b.xAxis.axisStyle),m.populateObject(a.xAxis.titleStyle,b.xAxis.titleStyle),a.xAxis.lineColor=a.xAxis.lineColor||b.xAxis.lineColor,a.xAxis.gridLinesColor=a.xAxis.gridLinesColor||b.xAxis.gridLinesColor,a.xAxis.gridLinesStyle=a.xAxis.gridLinesStyle||b.xAxis.gridLinesStyle,a.xAxis.gridStripesColor=a.xAxis.gridStripesColor||b.xAxis.gridStripesColor,a.xAxis.gridStripesColorAlt=a.xAxis.gridStripesColorAlt||
b.xAxis.gridStripesColorAlt,m.populateObject(a.yAxis.style,b.yAxis.axisStyle),m.populateObject(a.yAxis.titleStyle,b.yAxis.titleStyle),a.yAxis.lineColor=a.yAxis.lineColor||b.yAxis.lineColor,a.yAxis.gridLinesColor=a.yAxis.gridLinesColor||b.yAxis.gridLinesColor,a.yAxis.gridLinesStyle=a.yAxis.gridLinesStyle||b.yAxis.gridLinesStyle,a.yAxis.gridStripesColor=a.yAxis.gridStripesColor||b.yAxis.gridStripesColor,a.yAxis.gridStripesColorAlt=a.yAxis.gridStripesColorAlt||b.yAxis.gridStripesColorAlt,a.yAxis.baseLineColor=
a.yAxis.baseLineColor||b.yAxis.baseLineColor,a.yAxis.baseLineStyle=a.yAxis.baseLineStyle||b.yAxis.baseLineStyle);a.legend&&(m.populateObject(a.legend.series.style,b.legendStyle),a.legend.minMax&&(m.populateObject(a.legend.minMax.titleStyle,b.minMaxLegend.titleStyle),m.populateObject(a.legend.minMax.minVariableLabelStyle,b.minMaxLegend.minVariableLabelStyle),m.populateObject(a.legend.minMax.maxVariableLabelStyle,b.minMaxLegend.maxVariableLabelStyle)));m.populateObject(a.dataLabelsStyle,b.dataLabelsStyle);
m.populateObject(a.dataLabelsLabelStyle,a.dataLabelsStyle);a.dataLabelsAltColor=a.dataLabelsAltColor||b.dataLabelsAltColor;m.populateObject(a.gaugeLabelStyle,b.gauge&&b.gauge.dataLabelStyle);a.gaugeArrowLineColor=a.gaugeArrowLineColor||b.gauge&&b.gauge.arrowIndicator.lineColor;a.gaugeArrowFillColor=a.gaugeArrowFillColor||b.gauge&&b.gauge.arrowIndicator.backgroundColor;m.populateObject(a.waffleValueStyle,b.waffle&&b.waffle.dataValueStyle);m.populateObject(a.waffleLabelStyle,b.waffle&&b.waffle.dataLabelStyle);
a.ringBackgroundColor=a.ringBackgroundColor||b.ring&&b.ring.ringBackground&&b.ring.ringBackground.backgroundColor;a.columnBarBackgroundColor=a.columnBarBackgroundColor||b.columnBarBackground&&b.columnBarBackground.backgroundColor;a.tooltip=a.tooltip||t.getChartDefaultTooltip();a.tooltip.style=a.tooltip.style||{};a.tooltip.linkStyle=a.tooltip.linkStyle||{};m.populateObject(a.tooltip.style,b.tooltip&&b.tooltip);m.populateObject(a.tooltip.linkStyle,b.tooltip&&b.tooltipLink);return a},createChartPoint:function(a,
b,c,d,e){a={color:c||"",label:void 0!==b?b||"":a&&a.alias,fieldInfo:a,iconFieldInfo:d,captionFieldInfo:e};c&&g.setPointColor(a,c);return a},getGaugeOthersPoint:function(a){return{label:a&&a.label||p.gaugeOthers,color:a&&a.color}},getWaffleOthersPoint:function(a){return{label:a&&a.label||p.waffleOthers,color:a&&a.color,iconFieldInfo:a&&a.iconFieldInfo}}},q=[{headers:{data:{AREA_DESC:p.oneMile}}},{headers:{data:{AREA_DESC:p.threeMiles}}},{headers:{data:{AREA_DESC:p.fiveMiles}}}];t.getSeriesItemsForMultiFeatureChart=
function(a,b,c){if(!b)return b;c=c||q;var d=b[0];return e.isLineLike(a)?c.map(function(a,b){var c=k.clone(d);c.points.forEach(function(a){delete a.color});if(b=d.multiFeatureLineStyles&&d.multiFeatureLineStyles[b])c.color=b.color,c.lineThickness=b.lineThickness,c.lineStyle=b.lineStyle,c.lineMarker=b.lineMarker,c.lineMarkerColor=b.lineMarkerColor,c.lineMarkerSize=b.lineMarkerSize,c.lineMarkerFillColor=b.lineMarkerFillColor,c.fillColor=b.fillColor;var e=n.getAreaDataValue({areaDataObject:a,fieldName:"headers.AREA_DESC"})||
"";c.points.forEach(function(a){a.areaName=e;a.originalSeriesName=d.label});c.label=e;return c}):d.points.map(function(a){return{label:a.label,points:c.map(function(b){b=n.getAreaDataValue({areaDataObject:b,fieldName:"headers.AREA_DESC"})||"";var c=t.createChartPoint(a.fieldInfo,b,a.color||d.color);c.areaName=b;c.originalSeriesName=d.label;return c})}})};t.getOriginalPointByMultiFeatureIndexes=function(a,b,c){return a[0].points[b]};t.transposeSeriesItems=function(a){return a.length?a[0].points.map(function(b,
c){return{label:b.label,points:a.map(function(a){var b=k.clone(a.points[c]);b.label=a.label;return b})}}):[]};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ThemeCalculator":function(){define("dojo/_base/lang dojox/charting/Theme ../../themes/ThemeLibrary ./ChartTypes ./ChartLineMarkers ./ChartLineStyles esri/dijit/geoenrichment/utils/ColorUtil".split(" "),function(k,g,f,e,d,c,a){function b(a,b,c){var d;switch(a){case e.COLUMN:d=b.column&&b.column.colors;break;case e.BAR:d=b.bar&&
b.bar.colors;break;case e.LINE:d=b.line&&b.line.colors;break;case e.VERTICAL_LINE:d=b.line&&b.line.colors;break;case e.PIE:d=b.pie&&b.pie.colors;break;case e.DONUT:d=b.donut&&b.donut.colors;break;case e.GAUGE:d=b.gauge&&b.gauge.colors;break;case e.WAFFLE:d=b.waffle&&b.waffle.colors;break;case e.RING:d=b.ring&&b.ring.colors;break;case e.PICTURE_COLUMN:d=b.pictureColumn&&b.pictureColumn.colors;break;case e.PICTURE_BAR:d=b.pictureBar&&b.pictureBar.colors}d&&d.length||(d=null);return 3>=c&&b.colors3series&&
b.colors3series.length&&b.colors3series||d||b.colors||l}var h={},l=["#AAAAAA","#888888","#555555","#333333"];h.DEFAULT_LINE_THICKNESS=1;h.DEFAULT_COLUMN_THICKNESS="Medium";h.DEFAULT_DONUT_HOLE_PERCENT=50;h.DEFAULT_DONUT_GAP=3;h.DEFAULT_DONUT_ARC_PERCENT=100;h.DEFAULT_GAUGE_HOLE_PERCENT=80;h.DEFAULT_GAUGE_GAP=2;h.DEFAULT_GAUGE_ANGLE=0;h.DEFAULT_GAUGE_ARC_PERCENT=100;h.getThemeForSettings=function(b,d,f){var n=f.isEditMode;f=f.isBenchmarked;var m=new g({colors:d.colors||l});if(!b)return m;var p=b.visualProperties;
m.plotarea.fill=p.backgroundColor||d.backgroundColor;"number"!==typeof p.backgroundColorOpacity||a.isTransparent(m.plotarea.fill)||(m.plotarea.fill=a.toColor(m.plotarea.fill),m.plotarea.fill.a=p.backgroundColorOpacity);m.plotarea.stroke={width:0};p.plotAreaOutlineColor&&(m.plotarea.stroke.color=p.plotAreaOutlineColor,"number"!==typeof p.plotAreaOutlineOpacity||a.isTransparent(m.plotarea.stroke.color)||(m.plotarea.stroke.color=a.toColor(m.plotarea.stroke.color),m.plotarea.stroke.color.a=p.plotAreaOutlineOpacity),
m.plotarea.stroke.width=p.plotAreaOutlineThickness||0,p.plotAreaOutlineStyle&&(m.plotarea.stroke.style=c.toGFXValue(p.plotAreaOutlineStyle)));m.chart.fill="transparent";m.axis.title.font="normal normal normal 11px Verdana";e.hasBackgroundImage(b.type)&&(m.plotarea.backgroundImageData=p.backgroundImageData);var u=k.mixin({},d.dataLabelsStyle,p.dataLabelsStyle);m.series.dataLabelsColor=u.color;m.series.dataLabelsAltColor=p.dataLabelsEnableAltColor&&(p.dataLabelsAltColor||d.dataLabelsAltColor);m.series.dataLabelsFont=
h.combineFontString(u);m.series.dataLabelsHorizontalAlign=p.dataLabelsHorizontalAlign||"center";m.series.dataLabelsVerticalAlign=p.dataLabelsVerticalAlign||"middle";m.series.dataLabelsAngle=p.dataLabelsAngle;m.series.dataLabelsMaxWidth=p.dataLabelsMaxWidth;var y=k.mixin({},u,p.dataLabelsLabelStyle);m.series.dataLabelsLabelColor=y.color;m.series.dataLabelsLabelFont=h.combineFontString(y);m.series.dataLabelsPercentColor=u.color;m.series.dataLabelsPercentFont=h.combineFontString(u);e.isColumnBarLike(b.type)&&
(m.series.showColumnBarBackground=p.showColumnBarBackground,m.series.columnBarBackgroundColor=p.columnBarBackgroundColor||d.columnBarBackground&&d.columnBarBackground.backgroundColor,m.series.columnBarBackgroundColor&&(m.series.columnBarBackgroundColor=1>p.columnBarBackgroundOpacity?a.getColorWithAlpha(m.series.columnBarBackgroundColor,p.columnBarBackgroundOpacity):m.series.columnBarBackgroundColor),m.series.renderColumnBarsInOppositeDirections=p.renderColumnBarsInOppositeDirections);e.hasAxis(b.type)&&
(m.series.baseLineValue=p.yAxis.baseLineValue);b.type===e.DONUT&&(m.series.donutHolePercent=void 0!==p.donutHolePercent?p.donutHolePercent:h.DEFAULT_DONUT_HOLE_PERCENT,m.series.donutGap=void 0!==p.donutGap?p.donutGap:h.DEFAULT_DONUT_GAP,m.series.donutArcPercent=void 0!==p.donutArcPercent?p.donutArcPercent:h.DEFAULT_DONUT_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)));b.type===e.GAUGE&&(m.series.donutHolePercent=void 0!==p.gaugeHolePercent?p.gaugeHolePercent:
h.DEFAULT_GAUGE_HOLE_PERCENT,m.series.donutGap=void 0!==p.gaugeGap?p.gaugeGap:h.DEFAULT_GAUGE_GAP,m.series.startAngle=void 0!==p.gaugeStartAngle?p.gaugeStartAngle:h.DEFAULT_GAUGE_ANGLE,m.series.donutArcPercent=void 0!==p.gaugeArcPercent?p.gaugeArcPercent:h.DEFAULT_GAUGE_ARC_PERCENT,m.series.donutArcPercent=Math.min(100,Math.max(50,m.series.donutArcPercent)),m.series.donutShowIcons=p.showChartIcons,p.gaugeShowArrow&&(m.series.gaugeShowArrowIndicator=!0,m.series.donutGap=0,100!==m.series.donutArcPercent&&
(m.series.startAngle=0),m.series.gaugeArrowIndicatorLineColor=p.gaugeArrowLineColor||d.gauge&&d.gauge.arrowIndicator.lineColor,m.series.gaugeArrowIndicatorFillColor=p.gaugeArrowFillColor||d.gauge&&d.gauge.arrowIndicator.backgroundColor),u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeLabelStyle),m.series.gaugeMainLabelPosition=p.gaugeLabelPlacement,m.series.gaugeMainLabelFont=h.combineFontString(u),m.series.gaugeMainLabelFontColor=p.gaugeConditionalStylingLabel?null:u.color,m.series.gaugeMainLabelFontColorFromConditionalStyling=
p.gaugeConditionalStylingLabel&&!!p.conditionalStyling,m.series.gaugeMainLabelFontSize=p.gaugeLabelStyle&&p.gaugeLabelStyle.fontSize,m.series.gaugeMainLabelTextDecoration=u.textDecoration,p.gaugeShowFromToLabels&&(m.series.gaugeShowFromToLabels=p.gaugeShowFromToLabels,u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeFromLabelStyle),m.series.gaugeFromLabelValue=p.gaugeRangeMin||0,m.series.gaugeFromLabelFont=h.combineFontString(u),m.series.gaugeFromLabelFontColor=u.color,m.series.gaugeFromLabelFontSize=
u.fontSize,m.series.gaugeFromLabelTextDecoration=u.textDecoration,u=k.mixin({},d.gauge&&d.gauge.dataLabelStyle,p.gaugeToLabelStyle),m.series.gaugeToLabelValue=p.gaugeRangeMax||"",m.series.gaugeToLabelFont=h.combineFontString(u),m.series.gaugeToLabelFontColor=u.color,m.series.gaugeToLabelFontSize=u.fontSize,m.series.gaugeToLabelTextDecoration=u.textDecoration));b.type===e.WAFFLE&&(m.series.waffleDirection=p.waffleDirection,m.series.waffleFlowStyle=p.waffleFlowStyle,m.series.waffleShowWholePictures=
p.waffleShowWholePictures,m.series.waffleStretchIconsToFill=p.waffleStretchIconsToFill,m.series.waffleLabelPlacement=p.waffleLabelPlacement,m.series.waffleLabelOffset=p.waffleLabelOffset,m.series.waffleColumnSpace=p.waffleColumnSpace,m.series.waffleRowSpace=p.waffleRowSpace,m.series.waffleNumIcons=p.waffleNumIcons,m.series.waffleNumRows=p.waffleNumRows,m.series.waffleNumColumns=p.waffleNumColumns,m.series.waffleHideValue=p.waffleHideValue,u=k.mixin({},d.waffle&&d.waffle.dataValueStyle,p.waffleValueStyle),
m.series.waffleValueFont=h.combineFontString(u),m.series.waffleValueFontColor=p.waffleConditionalStylingValue?null:u.color,m.series.waffleValueFontColorFromConditionalStyling=p.waffleConditionalStylingValue&&!!p.conditionalStyling,m.series.waffleValueFontSize=u.fontSize,m.series.waffleValueTextDecoration=u.textDecoration,m.series.waffleHideLabel=p.waffleHideLabel,u=k.mixin({},d.waffle&&d.waffle.dataLabelStyle,p.waffleLabelStyle),m.series.waffleLabelFont=h.combineFontString(u),m.series.waffleLabelFontColor=
p.waffleConditionalStylingLabel?null:u.color,m.series.waffleLabelFontColorFromConditionalStyling=p.waffleConditionalStylingLabel&&!!p.conditionalStyling,m.series.waffleLabelFontSize=u.fontSize,m.series.waffleLabelTextDecoration=u.textDecoration,m.series.waffleShowLabelAbove=p.waffleShowLabelAbove);b.type===e.RING&&(m.series.show100PercentLabel=!f,m.series.ringBackgroundColor=p.ringBackgroundColor||d.ring&&d.ring.ringBackground&&d.ring.ringBackground.backgroundColor,m.series.ringBackgroundColor&&(m.series.ringBackgroundColor=
1>p.ringBackgroundOpacity?a.getColorWithAlpha(m.series.ringBackgroundColor,p.ringBackgroundOpacity):m.series.ringBackgroundColor));e.isPictureLike(b.type)&&(m.series.columnBarShowWholePictures=p.columnBarShowWholePictures);m.marker.fill="#FFFFFF";m.series.outline=null;m.series.isEditMode=n;return m};h.getComparisonSymbol=function(a){return d.getMarkerPath(d.CIRCLE,a)};h.calcColorForPoint=function(a){var c=a.point,d=a.seriesItem,f=a.pointIndex,g=a.isOthersPoint,l=a.seriesIndex,k=a.numSeries,n=a.chartType,
v=a.themeSettings,w=a.isComparisonSeries;a=a.comparisonInfo;var A=d&&d.points.length;n===e.WAFFLE&&A--;var d=d&&d.color,C=e.isSingleSeries(n)||e.isColumnBarLike(n)&&!v.renderSingleDataSeriesWithSameColor&&1===k,k=b(n,v,C?A:k),z;if(e.isLineLike(n))w&&a?f=a.color||v.comparisonInfo.lineColor:(z=k[l%k.length],f=d||z||"#000000");else if(w&&a&&a.color)f=a.color;else{c=e.isPictureLike(n)?c&&h.getPointIconStyle(c).fillColor:c&&c.color;if(n===e.GAUGE&&g&&v.gauge.othersColor)return c||v.gauge.othersColor;if(n===
e.WAFFLE&&g&&v.waffle.othersColor)return c||v.waffle.othersColor;z=z||(C?k[f%k.length]:k[l%k.length]);f=c||!e.isSingleSeries(n)&&d||z||"#000000"}return f};h.pointCanHaveColor=function(a){return e.isPictureLike(a.chartType)?!!(a.point.iconFieldInfo&&a.point.iconFieldInfo.shapeJson&&a.point.iconFieldInfo.shapeJson.g.length):!0};h.setPointColor=function(a,b){delete a.color;a.iconFieldInfo?a.iconFieldInfo.shapeJson&&(delete a.iconFieldInfo.shapeJson.style.fillColor,delete a.iconFieldInfo.shapeJson.style.borderColor,
b&&(a.iconFieldInfo.shapeJson.style.fillColor=b,a.iconFieldInfo.shapeJson.style.borderColor=b)):b&&(a.color=b)};h.calcColorForSeries=function(a){var c=a.seriesItem,d=a.seriesIndex,h=a.numSeries,f=a.chartType,g=a.themeSettings;if(e.isSingleSeries(f))return null;a=e.isColumnBarLike(f)&&!g.renderSingleDataSeriesWithSameColor&&1===h;h=b(f,g,h);d=e.isLineLike(f)?h[d%h.length]:a?null:h[d%h.length];return c&&c.color||d||"#000000"};h.provideMissingIconsForPoints=function(a,b){if(e.isPictureLike(b)){var c,
d=[];a.forEach(function(a){a.iconFieldInfo?(c=a.iconFieldInfo,d.forEach(function(a){a.iconFieldInfo=k.clone(c)}),d.length=0):c?a.iconFieldInfo=k.clone(c):d.push(a)})}};h.setWaffleChartPointIcon=function(a,b,c){var d=a&&a.shapeJson;0===b?c.forEach(function(b,c){if(b.fieldInfo||d){var e=h.getPointIconStyle(b);b.iconFieldInfo=0===c?a:a&&k.clone(a);b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&0!==c&&(b.iconFieldInfo.shapeJson.style.fillColor=e.fillColor,b.iconFieldInfo.shapeJson.style.borderColor=e.borderColor)}}):
c[b].iconFieldInfo=a;b=c[0];c=c[c.length-1];!c.iconFieldInfo&&b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&(c.iconFieldInfo=k.clone(b.iconFieldInfo),delete c.iconFieldInfo.shapeJson.style.fillColor,delete c.iconFieldInfo.shapeJson.style.borderColor)};h.getPointIconStyle=function(a,b){function c(a,b){return"number"===typeof a?a:b}var d=a&&(a.iconFieldInfo||a.icon);if(!d||!d.shapeJson)return{fillColor:null,fillAlpha:null,borderColor:null,borderAlpha:null,borderWidth:null,borderDashArray:null};a=d.shapeJson.style;
b=b&&b.considerTheme&&d.shapeJson.themeStyle;return{fillColor:a&&a.fillColor||b&&b.fillColor,fillAlpha:c(a&&a.fillAlpha,b&&b.fillAlpha),borderColor:a&&a.borderColor||b&&b.borderColor,borderAlpha:c(a&&a.borderAlpha,b&&b.borderAlpha),borderWidth:c(a&&a.borderWidth,b&&b.borderWidth),borderDashArray:a&&a.borderDashArray||b&&b.borderDashArray}};h.calcIconForPoint=function(a,b,c){if(!e.isPictureLike(c))return null;(a=a.iconFieldInfo)&&a.shapeJson&&b&&(a=k.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b});
return a};h.calcBackgroundIconForPoint=function(a,b,c,d){if(!e.isPictureLike(b))return null;b=d.columnBarBackgroundColor||c.columnBarBackground&&c.columnBarBackground.backgroundColor;return(a=a.iconFieldInfo)&&a.shapeJson&&b?(a=k.clone(a),a.shapeJson.themeStyle={fillColor:b,borderColor:b},a):null};h.combineFontString=function(a){a=a||{};return(a.fontStyle||"normal")+" normal "+(a.fontWeight||"normal")+" "+((a.fontSize||f.CHART_DATA_FONT_SIZE)+"px")+" "+(a.fontFamily||f.DEFAULT_FONT_FAMILY_CLASSIC)};
return h})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(k,g,f,e,d,c){var a=g("dojox.charting.Theme",e,{});k.mixin(a,{defineColors:function(a){a=a||{};var b,e=[],f=a.num||5;if(a.colors){b=a.colors.length;for(var g=0;g<f;g++)e.push(a.colors[g%b]);return e}return a.hue?c.generate(d.fromHsv(a.hue,a.saturation||100,((a.high||90)+(a.low||30))/2),"monochromatic").colors:
a.generator?d.Palette.generate(a.base,a.generator).colors:e},generateGradient:function(a,c,d){a=k.delegate(a);a.colors=[{offset:0,color:c},{offset:1,color:d}];return a},generateHslColor:function(a,c){a=new f(a);var b=a.toHsl();c=d.fromHsl(b.h,b.s,c);c.a=a.a;return c},generateHslGradient:function(b,c,e,g){b=new f(b);var h=b.toHsl();e=d.fromHsl(h.h,h.s,e);g=d.fromHsl(h.h,h.s,g);e.a=g.a=b.a;return a.generateGradient(c,e,g)}});a.defaultMarkers=e.defaultMarkers;a.defaultColors=e.defaultColors;a.defaultTheme=
e.defaultTheme;return a})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(k,g,f,e,d,c){var a=f("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var c=a.defaultTheme;g.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){this[a]=k.delegate(c[a],b[a])},this);b.seriesThemes&&b.seriesThemes.length?
(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||a.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?k.clone(b.markers):k.delegate(a.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var a=new this.constructor({chart:this.chart,
plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});g.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this);return a},clear:function(){this._current=0},next:function(a,c,f){var b=
d.merge,h;if(this.colors){h=k.delegate(this.series);var b=k.delegate(this.marker),g=new e(this.colors[this._current%this.colors.length]),l;h.stroke&&h.stroke.color?(h.stroke=k.delegate(h.stroke),l=new e(h.stroke.color),h.stroke.color=new e(g),h.stroke.color.a=l.a):h.stroke={color:g};b.stroke&&b.stroke.color?(b.stroke=k.delegate(b.stroke),l=new e(b.stroke.color),b.stroke.color=new e(g),b.stroke.color.a=l.a):b.stroke={color:g};!h.fill||h.fill.type?h.fill=g:(l=new e(h.fill),h.fill=new e(g),h.fill.a=
l.a);!b.fill||b.fill.type?b.fill=g:(l=new e(b.fill),b.fill=new e(g),b.fill.a=l.a)}else h=this.seriesThemes?b(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,b=this.markerThemes?b(this.marker,this.markerThemes[this._current%this.markerThemes.length]):h;h={series:h,marker:b,symbol:b&&b.symbol||this._markers[this._current%this._markers.length]};++this._current;c&&(h=this.addMixin(h,a,c));f&&(h=this.post(h,a));return h},skip:function(){++this._current},addMixin:function(a,
c,e,f){if(k.isArray(e))g.forEach(e,function(b){a=this.addMixin(a,c,b)},this);else{var b={};"color"in e&&("line"==c||"area"==c?(k.setObject("series.stroke.color",e.color,b),k.setObject("marker.stroke.color",e.color,b)):k.setObject("series.fill",e.color,b));g.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(a){var c="marker"+a.charAt(0).toUpperCase()+a.substr(1),d=c in e;a in e&&(k.setObject("series."+a,e[a],b),d||k.setObject("marker."+a,e[a],b));d&&k.setObject("marker."+
a,e[c],b)});"marker"in e&&(b.symbol=e.marker,b.symbol=e.marker);a=d.merge(a,b)}f&&(a=this.post(a,c));return a},post:function(a,c){var b=a.series.fill,e;return!this.noGradConv&&this.shapeSpaces[b.space]&&"linear"==b.type&&("bar"==c?e={x1:b.y1,y1:b.x1,x2:b.y2,y2:b.x2}:this.noRadialConv||"shape"!=b.space||"slice"!=c&&"circle"!=c||(e={type:"radial",cx:0,cy:0,r:100}),e)?d.merge(a,{series:{fill:e}}):a},getTick:function(a,c){var b=this.axis.tick;a+="Tick";var e=d.merge;b?this.axis[a]&&(b=e(b,this.axis[a])):
b=this.axis[a];c&&(b?c[a]&&(b=e(b,c[a])):b=c[a]);return b},inspectObjects:function(a){g.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){a(this[b])},this);this.seriesThemes&&g.forEach(this.seriesThemes,a);this.markerThemes&&g.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=c.reverse(a.fill))})},addMarker:function(a,c){this.markers[a]=c;this._buildMarkerArray()},setMarkers:function(a){this.markers=a;this._buildMarkerArray()},
_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});k.mixin(a,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,
titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},
outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",
radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return a})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(k,g){var f=g.getObject("lang.utils",!0,k),e={},d=Object.prototype.toString,c=function(a){if(a)switch(d.call(a)){case "[object Array]":return a.slice(0);case "[object Object]":return g.delegate(a)}return a};
g.mixin(f,{coerceType:function(a,b){switch(typeof a){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return!!eval("("+b+")")}return eval("("+b+")")},updateWithObject:function(a,b,d){if(!b)return a;for(var h in a)if(h in b&&!(h in e)){var g=a[h];g&&"object"==typeof g?f.updateWithObject(g,b[h],d):a[h]=d?f.coerceType(g,b[h]):c(b[h])}return a},updateWithPattern:function(a,b,d,g){if(!b||!d)return a;for(var h in d)h in b&&!(h in e)&&(a[h]=g?f.coerceType(d[h],b[h]):
c(b[h]));return a},merge:function(a,b){if(b){var c=d.call(a),e=d.call(b),k,m;switch(e){case "[object Array]":if(e==c){c=Array(Math.max(a.length,b.length));k=0;for(e=c.length;k<e;++k)c[k]=f.merge(a[k],b[k]);return c}return b.slice(0);case "[object Object]":if(e==c&&a){c=g.delegate(a);for(k in b)k in a?(e=a[k],m=b[k],m!==e&&(c[k]=f.merge(e,m))):c[k]=g.clone(b[k]);return c}return g.clone(b)}}return b}});return f})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],
function(k,g,f,e){function d(c,a){if(0>=c)return a[0].color;var b=a.length;if(1<=c)return a[b-1].color;for(var d=0;d<b;++d){var f=a[d];if(f.offset>=c)return d?(a=a[d-1],e.blendColors(new e(a.color),new e(f.color),(c-a.offset)/(f.offset-a.offset))):f.color}return a[b-1].color}k=k.gradutils={};k.getColor=function(c,a){var b;if(c){switch(c.type){case "linear":b=f.rotate(-Math.atan2(c.y2-c.y1,c.x2-c.x1));var h=f.project(c.x2-c.x1,c.y2-c.y1);a=f.multiplyPoint(h,a);var g=f.multiplyPoint(h,c.x1,c.y1),h=
f.multiplyPoint(h,c.x2,c.y2),h=f.multiplyPoint(b,h.x-g.x,h.y-g.y).x;b=f.multiplyPoint(b,a.x-g.x,a.y-g.y).x/h;break;case "radial":b=a.x-c.cx,a=a.y-c.cy,b=Math.sqrt(b*b+a*a)/c.r}return d(b,c.colors)}return new e(c||[0,0,0,0])};k.reverse=function(c){if(c)switch(c.type){case "linear":case "radial":if(c=g.delegate(c),c.colors){for(var a=c.colors,b=a.length,d=0,e,f=c.colors=Array(a.length);d<b;++d)e=a[d],f[d]={offset:1-e.offset,color:e.color};f.sort(function(a,b){return a.offset-b.offset})}}return c};return k})},
"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineMarkers":function(){define(["dojox/charting/SimpleTheme"],function(k){var g={NONE:"None",CIRCLE:"Circle",SQUARE:"Square",DIAMOND:"Diamond",CROSS:"Cross",X:"X",TRIANGLE:"Triangle",TRIANGLE_INVERTED:"TriangleInverted"},f=[g.CIRCLE,g.SQUARE,g.DIAMOND,g.CROSS,g.X,g.TRIANGLE,g.TRIANGLE_INVERTED],e={},d;for(d in g)e[g[d]]=d;g.DEFAULT_SIZE=3;g.isSupported=function(c){return-1!==f.indexOf(c)};g.getMarkerAt=function(c){return f[c%f.length]};
g.getMarkerPath=function(c,a){a=(0<=a?a:g.DEFAULT_SIZE)/g.DEFAULT_SIZE;switch(c){case g.CIRCLE:return"m"+-3*a+",0 c0,"+-4*a+" "+6*a+","+-4*a+" "+6*a+",0 m"+-6*a+",0 c0,"+4*a+" "+6*a+","+4*a+" "+6*a+",0";case g.SQUARE:return"m"+-3*a+","+-3*a+" l0,"+6*a+" "+6*a+",0 0,"+-6*a+" z";case g.DIAMOND:return"m0,"+-3*a+" l"+3*a+","+3*a+" "+-3*a+","+3*a+" "+-3*a+","+-3*a+" z";case g.CROSS:return"m0,"+-3*a+" l0,"+6*a+" m"+-3*a+","+-3*a+" l"+6*a+",0";case g.X:return"m"+-3*a+","+-3*a+" l"+6*a+","+6*a+" m0,"+-6*
a+" l"+-6*a+","+6*a+"";case g.TRIANGLE:return"m"+-3*a+","+3*a+" l"+3*a+","+-6*a+" "+3*a+","+6*a+" z";case g.TRIANGLE_INVERTED:return"m"+-3*a+","+-3*a+" l"+3*a+","+6*a+" "+3*a+","+-6*a+" z"}return k.defaultMarkers[e[c]]||""};g.getMarkerPathAt=function(c,a){return g.getMarkerPath(g.getMarkerAt(c),a)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartJsonCleaner":function(){define("../ChartTypes ../ChartDataLabelsTypes ../../legends/ChartLegendTypes ../../legends/ChartLegendPlacements ./_ChartTypeSupports ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder".split(" "),
function(k,g,f,e,d,c){return{cleanUpJson:function(a,b,h){var l=a.type,n=a.isMultiFeatureChart,m=a.seriesItems.length,p=a.visualProperties;h=h&&h.isBenchmarked;k.isSingleSeries(l)&&1<m&&(m=a.seriesItems.length=1);k.hasBackgroundImage(l)||delete p.backgroundImageData;k.isConditionalStylingSupported(l)||delete p.conditionalStyling;k.isSortingSupported(l,m,n)||delete p.sorting;k.canFilterVariables(l,n)||delete p.filter;k.isComparisonSupported(l,n)<m&&delete a.comparisonInfo;2===m&&a.comparisonInfo&&(p.showColumnBarBackground=
!1,p.isStacked=!1,p.showValuesAsWeightInStack=!1);n&&a.comparisonInfo&&(a.comparisonInfo.chartType=l);p.legend&&p.legend.series&&p.legend.type===f.SERIES&&!k.isSeriesLegendSupported(l,m,n,!!a.comparisonInfo&&p.legend.series.showComparison)&&(p.legend.series.placement=e.NONE);k.isRenderInOppositeDirectionsSupported(l,m,n)||delete p.renderColumnBarsInOppositeDirections;k.isStackSupported(l,m,n)||(p.isStacked=!1,p.showValuesAsWeightInStack=!1);p.renderColumnBarsInOppositeDirections&&p.isStacked&&(p.renderColumnBarsInOppositeDirections=
!0,p.isStacked=!1,p.showValuesAsWeightInStack=!1);p.isStacked||(p.showValuesAsWeightInStack=!1);if(p.yAxis){if(p.isStacked||p.renderColumnBarsInOppositeDirections)p.yAxis.baseLineValue=0;k.isShowDataAsWeightSupported(l)&&!p.showValuesAsWeightInStack||delete p.yAxis.showValuesAsWeightsInSeries}k.isPictureLike(l)?a.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.color})}):a.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.iconFieldInfo})});
k.isSingleSeries(l)&&a.seriesItems.forEach(function(a){delete a.color});k.isLineLike(l)&&a.seriesItems.forEach(function(a){n?(delete a.color,delete a.lineThickness,delete a.lineStyle,delete a.lineMarker,delete a.lineMarkerColor,delete a.lineMarkerFillColor,delete a.lineMarkerSize):delete a.multiFeatureLineStyles});if(l===k.GAUGE){if((m=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&m.length){m.length=Math.min(2,m.length);m[1]&&delete m[1].fieldInfo;var t=m[0].fieldInfo;t&&c.isFieldInfoInPercentState(t)&&
(delete p.gaugeRangeMin,delete p.gaugeRangeMax)}90<p.gaugeArcPercent&&(p.gaugeShowFromToLabels=!1)}l===k.WAFFLE&&(m=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&m.length&&(1<m.length&&delete m[m.length-1].fieldInfo,(t=m[0].fieldInfo)&&c.isFieldInfoInPercentState(t)&&(delete p.waffleRangeMin,delete p.waffleRangeMax),1<m.length&&delete m[m.length-1].fieldInfo,2<m.length?delete p.waffleRangeMin:delete p.legend);a=d.cleanUpJsonForChartType(a,b);h&&(p=a.visualProperties,p.renderColumnBarsInOppositeDirections=
!1,p.isStacked=!1,p.showValuesAsWeightInStack=!1,p.yAxis&&p.yAxis.showValuesAsWeightsInSeries&&(delete p.yAxis.showValuesAsWeightsInSeries,delete p.yAxis.showPercentSymbol),g.hasPercent(p.dataLabels)&&(p.dataLabels=g.buildType({label:g.hasLabel(p.dataLabels),value:!0})),delete a.comparisonInfo);return a},supportsProperty:function(a,b,c){return d.supportsProperty(a,b,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendTypes":function(){define([],function(){var k={SERIES:"Series",
MIN_MAX:"MinMax",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.SERIES}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendPlacements":function(){define([],function(){var k={NONE:"None",LEFT:"Left",RIGHT:"Right",TOP:"Top",BOTTOM:"Bottom",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE},isOnSide:function(g){return g===
k.LEFT||g===k.RIGHT}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartTypeSupports":function(){define("esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes ./chartTypes/classic/_ColumnBarLike ./chartTypes/classic/_LineLike ./chartTypes/classic/_Pie ./chartTypes/graphic/_ColumnBarLike ./chartTypes/graphic/_ColumnBarPictureLike ./chartTypes/graphic/_LineLike ./chartTypes/graphic/_Pie ./chartTypes/graphic/_Donut ./chartTypes/graphic/_Ring ./chartTypes/graphic/_Gauge ./chartTypes/graphic/_Waffle".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){var t={},q={};q[g.COLUMN]=q[g.BAR]=f;q[g.LINE]=e;q[g.PIE]=d;var r={};r[g.COLUMN]=r[g.BAR]=c;r[g.PICTURE_COLUMN]=r[g.PICTURE_BAR]=a;r[g.LINE]=r[g.VERTICAL_LINE]=b;r[g.PIE]=h;r[g.DONUT]=l;r[g.RING]=n;r[g.GAUGE]=m;r[g.WAFFLE]=p;t.cleanUpJsonForChartType=function(a,b){return k.filterByPattern(a,(b?r:q)[a.type])};t.supportsProperty=function(a,b,c){b=b.split(".");var d=(c?r:q)[a];b.forEach(function(a){d=d&&d[a]});return!!d};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_ColumnBarLike":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},
columnThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_LineLike":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},
yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},lineThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,
title:{text:1,align:1,style:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,
plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,
showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,
hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,columnThickness:1,columnBarGap:1,columnBarOpacity:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,columnBarBackgroundColor:1,columnBarBackgroundOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,
dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1,noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarPictureLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,
style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,
baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},columnThickness:1,columnBarGap:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,
columnBarBackgroundColor:1,columnBarShowWholePictures:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,floatingIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1,noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},
"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_LineLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1,multiFeatureLineStyles:[{color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1}],points:1}],visualProperties:{width:1,height:1,
marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,
gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,
showValuesAsWeightsInSeries:1,placement:1,nonZeroInclusive:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,lineThickness:1,lineOpacity:1,fillLineMarkers:1,lineMarkersFillOpacity:1,fillLineArea:1,lineAreaOpacity:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,filter:1,tooltip:1,
noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,
align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,
dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,noTableView:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Donut":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,
plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,donutHolePercent:1,donutGap:1,donutArcPercent:1,dataLabels:1,
dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,noTableView:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Ring":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,ringBackgroundColor:1,ringBackgroundOpacity:1,
dataLabels:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,filter:1,tooltip:1,conditionalStyling:1,noTableView:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Gauge":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,
points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,gaugeHolePercent:1,gaugeRangeMin:1,gaugeRangeMax:1,gaugeGap:1,gaugeStartAngle:1,gaugeArcPercent:1,gaugeLabelPlacement:1,
gaugeLabelStyle:1,gaugeShowArrow:1,gaugeArrowLineColor:1,gaugeArrowFillColor:1,gaugeConditionalStylingOthers:1,gaugeConditionalStylingLabel:1,gaugeShowFromToLabels:1,gaugeFromLabelStyle:1,gaugeToLabelStyle:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Waffle":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,hideOthers:1},minMax:{placement:1,
placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},waffleDirection:1,waffleFlowStyle:1,waffleShowWholePictures:1,waffleStretchIconsToFill:1,waffleRangeMin:1,waffleRangeMax:1,waffleLabelPlacement:1,waffleLabelOffset:1,waffleHideValue:1,waffleHideLabel:1,waffleShowLabelAbove:1,waffleValueStyle:1,waffleLabelStyle:1,waffleColumnSpace:1,waffleRowSpace:1,waffleConditionalStylingOthers:1,waffleConditionalStylingValue:1,waffleConditionalStylingLabel:1,waffleNumIcons:1,waffleNumRows:1,
waffleNumColumns:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsHorizontalAlign:1,dataLabelsVerticalAlign:1,floatingIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/GaugeLabelPlacements":function(){define([],function(){var k={NONE:"None",INSIDE:"Inside",OUTSIDE:"Outside",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;
return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleLabelPlacements":function(){define([],function(){var k={NONE:"None",TOP:"Top",RIGHT:"Right",BOTTOM:"Bottom",LEFT:"Left",INSIDE:"Inside",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleDirections":function(){define([],
function(){var k={UP_RIGHT:"Up",DOWN_RIGHT:"Down",RIGHT_UP:"Right",LEFT_UP:"Left",UP_LEFT:"UpLeft",DOWN_LEFT:"DownLeft",RIGHT_DOWN:"RightDown",LEFT_DOWN:"LeftDown",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.DOWN_RIGHT},isLeftRightStartPosition:function(g){return g===k.RIGHT_UP||g===k.LEFT_UP||g===k.RIGHT_DOWN||g===k.LEFT_DOWN},isLeftGrowth:function(g){return g===k.UP_LEFT||g===k.DOWN_LEFT},isDownGrowth:function(g){return g===
k.RIGHT_DOWN||g===k.LEFT_DOWN},toFlowDirectionPosition:function(g){switch(g){case k.UP_RIGHT:return["Right","Down"];case k.DOWN_RIGHT:return["Right","Up"];case k.RIGHT_UP:return["Up","Left"];case k.LEFT_UP:return["Up","Right"];case k.UP_LEFT:return["Left","Down"];case k.DOWN_LEFT:return["Left","Up"];case k.RIGHT_DOWN:return["Down","Left"];case k.LEFT_DOWN:return["Down","Right"]}},fromFlowDirectionPosition:function(g,f){if("Right"===g)return"Down"===f?k.UP_RIGHT:k.DOWN_RIGHT;if("Up"===g)return"Left"===
f?k.RIGHT_UP:k.LEFT_UP;if("Left"===g)return"Down"===f?k.UP_LEFT:k.DOWN_LEFT;if("Down"===g)return"Left"===f?k.RIGHT_DOWN:k.LEFT_DOWN}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/GridChartUtil":function(){define(["dojo/string","../../../charts/utils/ChartTypes","../GridDataUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.Grid;var d={getSupportedChartTypes:function(c){return d._canViewTableAsChart(c)&&[g.COLUMN,g.BAR,g.LINE,g.VERTICAL_LINE,
g.PIE,g.DONUT,g.RING]},getTableRowsColumnsInfos:function(c){var a=c.columns[0].field,b=d._hasBigTitleCell(c)?1:0,f=c.store.data[b];if(!f)return null;var g=[],n=[];c.columns.forEach(function(a,b){0!==b&&n.push({label:f[a.field]||k.substitute(e.columnN,[b+1]),id:b+""})});c.store.data.forEach(function(c,d){d>b&&g.push({label:c[a]||d+1+"",id:d+""})});return{rowInfos:g,columnInfos:n}},_canViewTableAsChart:function(c){return c.noChartView||2>c.columns.length||2>c.store.data.length?!1:c.getFieldCells().length===
c.store.data.length*c.columns.length||d._hasBigTitleCell(c)&&c.getFieldCells().length-1===(c.store.data.length-1)*c.columns.length?!0:!1},getChartTitle:function(c){return c.getFieldCells()[0].get("value")},_hasBigTitleCell:function(c){var a=c.getFieldCells()[0];return f.getColumnSpan(a)===c.columns.length&&!f.getRowSpan(a)},createChartSeriesItems:function(c,a){return a.seriesInRows?d._buildSeriesInRows(c,a):d._buildSeriesInColumns(c,a)},_buildSeriesInColumns:function(c,a){var b=[],h=c.columns[0].field,
l=d._hasBigTitleCell(c)?1:0;c.columns.forEach(function(a,d){if(0!==d){var g={label:"",points:[]};b.push(g);c.store.data.forEach(function(b,m){if(!(m<l))if(m===l)g.label=b[a.field]||k.substitute(e.columnN,[d+1]),g._cIndex=d;else{var p=f.getRenderedValue(c,b,a),n=b.fieldInfos[a.field];g.points.push({label:b[h]||k.substitute(e.rowN,[m+1]),value:{value:p.numericValue||0,formattedValue:p.formattedValue,decimals:n&&n.decimals},_rIndex:m})}})}});g.isSingleSeries(a.chartType)&&0<=a.sourceId&&(b=(a=b[a.sourceId])?
[a]:[]);d._resolveSeriesNames(b,!1);return b},_buildSeriesInRows:function(c,a){var b=[],h=d._hasBigTitleCell(c)?1:0,l=c.store.data[h];c.store.data.forEach(function(a,d){if(!(d<h)&&d!==h){var g={label:"",points:[]};b.push(g);c.columns.forEach(function(b,h){if(0===h)g.label=a[b.field]||k.substitute(e.rowN,[d+1]),g._rIndex=d;else{var m=f.getRenderedValue(c,a,b),p=a.fieldInfos[b.field];g.points.push({label:l[b.field]||h+1+"",value:{value:m.numericValue||0,formattedValue:m.formattedValue,decimals:p&&p.decimals},
_cIndex:h})}})}});g.isSingleSeries(a.chartType)&&0<=a.sourceId&&(b=(a=b[a.sourceId])?[a]:[]);d._resolveSeriesNames(b,!0);return b},_resolveSeriesNames:function(c,a){d._resolveItems(c,a);c.forEach(function(b){d._resolveItems(b.points,!a)})},_resolveItems:function(c,a){var b={};c.forEach(function(a){(b[a.label]=b[a.label]||[]).push(a)});for(var d in b)1<b[d].length&&b[d].forEach(function(b){b.label+=" ("+k.substitute(e[a?"rowN":"columnN"],[b[a?"_rIndex":"_cIndex"]+1])+")"});c.forEach(function(b){delete b[a?
"_rIndex":"_cIndex"]})}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridHighlightSupport":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-construct","esri/dijit/geoenrichment/utils/MouseUtil"],function(k,g,f,e){return k(null,{canHighlightHeader:!1,canHighlightFirstColumn:!0,_highlightOnHoverHandles:null,_setHighlightRowsOnHoverAttr:function(d){this._setHighlightOnHover(d,!1)},setCellRowHighlighted:function(d,c){(d=d&&d.domNode&&this.queryCells({rowIndex:d.gridData.index}))&&
d.forEach(function(a){this.setCellHighlighted(a,c)},this)},_setHighlightColumnsOnHoverAttr:function(d){this._setHighlightOnHover(d,!0)},setCellColumnHighlighted:function(d,c){(d=d&&d.domNode&&this.queryCells({columnIndex:d.column.index}))&&d.forEach(function(a){this.setCellHighlighted(a,c)},this)},setCellHighlighted:function(d,c){if(d&&d.domNode)if(!c)d.__highlightScreen&&(d.__highlightScreen.style.display="none");else if(this.canHighlightHeader||0!==d.gridData.index)if(this.canHighlightFirstColumn||
0!==d.column.index)d.__highlightScreen=d.__highlightScreen||f.create("div",{"class":"fieldCellHighlightScreen esriGEAbsoluteStretched"},d.domNode,"first"),d.__highlightScreen.style.display=""},_setHighlightOnHover:function(d,c){function a(){var a;b.getFieldCells().forEach(function(c){b.setCellHighlighted(c,!1);e.isMouseOver(c&&c.domNode)&&(a=c)});return a}if(this.domNode){var b=this;this._highlightOnHoverHandles&&this._highlightOnHoverHandles.forEach(function(a){a.remove()});if(d){this._highlightOnHoverHandles=
[];var f;this._highlightOnHoverHandles.push(g(b.domNode,"mouseover",function(){f&&f.remove();f=g(document.body,"mousemove",function(){e.isMouseOver(b.domNode)||(a(),f.remove())})}));this._highlightOnHoverHandles.push(g(b.domNode,"mousemove",function(){var d=a();d&&b[c?"setCellColumnHighlighted":"setCellRowHighlighted"](d,!0)}));this._highlightOnHoverHandles.push(g(b.domNode,"mouseout",function(){a()}));this._highlightOnHoverHandles.forEach(function(a){b.own(a)})}}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridFilterSupport":function(){define("esri/dijit/geoenrichment/when dojo/_base/declare dojo/dom-construct ./coreUtils/GridFilterUtil ../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c){c=c.geoenrichment.dijit.ReportPlayer.Grid;return g(null,{presetFilter:null,ignorePresetFilter:!1,_filterStats:null,_filterRanges:null,_numShownElements:null,_emptyDiv:null,_applyFilterToStoreData:function(){if(!this.ignorePresetFilter){var a=this._getSetRanges();this._emptyDiv&&f.destroy(this._emptyDiv);this._emptyDiv=null;this.mainNode.style.display="";a&&a.length&&(this._numShownElements=e.filterGridData(this,a).numRowsShown,this._numShownElements||(this._emptyDiv=f.create("div",
{"class":"esriGEAbsoluteStretched esriGENoDataPlaceHolder"},this.domNode),f.create("div",{"class":"esriGENoDataPlaceHolderLabel",innerHTML:c.noTableData},this._emptyDiv),this.mainNode.style.display="none",this._emptyDiv.style.paddingTop=(this.getHeight(!1,!1)-20)/2+"px"))}},_getSetRanges:function(){if(!this.presetFilter||this.presetFilter.ranges&&!this.viewModel.dynamicReportInfo)return this._filterRanges;var a=this.getFilterRanges();return this._filterRanges=a&&a.map(function(b){var c=d.filterData(b.dataArray,
1===a.length||this.presetFilter.columnIndex===b.columnIndex?this.presetFilter:{method:d.NONE});return{fieldName:b.fieldName,min:c[0],max:c[c.length-1]}},this)},getFilterRanges:function(){return(this._filterStats=e.collectStatsForVariables(this))&&this._filterStats.filterRanges.length?this._filterStats.filterRanges:null},setFilterRanges:function(a){var b=this;this.presetFilter=null;this._filterRanges=a;return k(this.refresh(),function(){return b._chartViewInfo&&b.tableToChart(b._chartViewInfo)})},
getNumElementsTotal:function(){return this._filterStats&&this._filterStats.numRowsTotal||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil":function(){define("dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/JsonXmlConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var l={collectStatsForVariables:function(d){var e=0,f=[],g={};if(2>d.columns.length||3>d.store.data.length)return null;var n=l.getFirstFilterableRowIndex(d)-1;d.columns.forEach(function(l,m){var p,q={alias:null,fieldName:l.field,columnIndex:m,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};d._getOriginalData().forEach(function(f,h){f=c.getRenderedValue(d,f,l);h<=n?q.alias=q.alias||h===n&&b.unrichHTML(f.formattedValue):"number"===
typeof f.numericValue&&(f=f.numericValue,q.min=Math.min(q.min,f),q.max=Math.max(q.max,f),q.decimals=Math.max(q.decimals,a.getPlaces(f)),q.dataArray.push(f),e++,p=!0,g[h]=!0)});p&&(q.alias=q.alias||k.substitute(h.columnN,[m+1]),f.push(q),q._cIndex=m)});var r={};f.forEach(function(a){(r[a.alias]=r[a.alias]||[]).push(a)});for(var u in r)1<r[u].length&&r[u].forEach(function(a){a.alias+=" ("+k.substitute(h.columnN,[a._cIndex+1])+")"});f.forEach(function(a){delete a._cIndex});return 1<e&&{filterRanges:f,
numVariablesTotal:e,numRowsTotal:Object.keys(g).length}},getFirstFilterableRowIndex:function(a){var b=a._getOriginalData(),d=a.columns[0].field,e=(d=c.getDataColumnSpan(b[0],d)===a.columns.length&&!c.getDataRowSpan(b[0],d))?1:0;a=a.columns.some(function(a){return c.isVariableLikeFieldCell(c.getFieldInfo({gridData:b[e],column:a}))});return d?a?1:2:a?0:1},filterGridData:function(a,b){var h=[],k=0,m=0,n={};b.forEach(function(a){n[a.fieldName]=a});a._saveOriginalData();var u=l.getFirstFilterableRowIndex(a)-
1;b=e.getSortableDataInfo(a);a.store.data.forEach(function(b,d){var e=!0,f;d>u&&a.columns.forEach(function(d){var h=n[d.field];if(h){var g=c.getRenderedValue(a,b,d);"number"===typeof g.numericValue&&(f=!0,g.numericValue<h.min||g.numericValue>h.max?(delete b.fieldInfos[d.field],delete b[d.field],e=!1):k++)}});e&&(h.push(b),f&&m++)});g.resizeTableJsonToFitHeight({data:{data:h,columns:a.columns}},f.getTableHeight({data:{data:a.store.data}}));if(b&&b.styleInfo){var y=h.slice(b.topData.length);d.setAlternatingColors(y,
a.columns,b.styleInfo)}a.store.data=h;return{numValuesShown:k,numRowsShown:m}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonResizeUtil":function(){define([],function(){var k={resizeTableJsonToFitWidth:function(g,f,e){e=e&&e.columnWidths;var d=0;g.data.columns.forEach(function(a){var b=a.style.width;"string"===typeof b&&-1!==b.indexOf("%")&&(b=Number(b.replace("%",""))/100*f,a.style.width=b);d+=b});g.style.width=f;var c=f/d;g.data.columns.forEach(function(a){a.style.width*=
c});e&&e.length&&(e.forEach(function(a,b){if(b=g.data.columns[b])b.style.width=a}),k.resizeTableJsonToFitWidth(g,f))},resizeTableJsonToFitHeight:function(g,f){var e=0;g.data.data.forEach(function(c){e+=c.style.height});var d=f/e;g.data.data.forEach(function(c){c.style.height*=d})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridSortUtil":function(){define("dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/config ./GridRowStyler ../GridDataUtil ../GridQueryUtil ../gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){n=n.geoenrichment.dijit.ReportPlayer.Grid;var m={ORDER_ASC:"asc",ORDER_DES:"desc",isGridSortable:function(a){return!(!a.allowSorting||!(a.viewModel.dynamicReportInfo||a.presetSorting&&!a.ignorePresetSorting)||!m.isGridSortableInStructure(a))},isGridSortableInStructure:function(a){return!(a.isEmptyTable()||3>a.store.data.length||!m.collectHeaderRowInfoFromData(a))},getSorting:function(a){return(a=a._sortInfo||a.presetSorting)&&{field:a.field,order:a.order}},applySortingToStoreData:function(a){m.isGridSortable(a)&&
m._applySortingToStoreData(a)},setSorting:function(a,b,c){if(m.isGridSortable(a)&&b)if(a.presetSorting=null,a._sortInfo={field:b.field,order:b.order},c&&c.doNotRefresh)m._makeSortable(a);else return a.refresh()},buildSortControls:function(a){m.isGridSortable(a)&&m._makeSortable(a)},getSortRowIndexMapping:function(a){var b=m.getSorting(a);if(!b||!b.order)return null;var c={},d={};a._getOriginalData().forEach(function(a,b){d[a.id]=b});a.store.data.forEach(function(a,b){c[b]=d[a.id]});return c},getSortableDataInfo:function(a){function b(b){var c=
[],d=m.collectHeaderRowInfoFromData(a,b);if(!d)return null;b=b?a._getOriginalData().slice():k.clone(a.store.data);for(var e=0;e<d.headerRowIndex+1;e++)c.push(b.shift());return{topData:c,sortableData:b}}var c=b();c&&(c.styleInfo=d.getStyleInfo(b(!0).sortableData,a.columns));return c},_applySortingToStoreData:function(a){var b=m.getSorting(a);if(b&&b.order){a._saveOriginalData();var e=m.getSortableDataInfo(a),f=b.field,h=a.columns.filter(function(a){return a.field===f})[0];h&&e.sortableData.sort(function(d,
e){function f(b){b=c.getRenderedValue(a,b,h);return"number"===typeof b.numericValue?b.numericValue:b.formattedValue}d=f(d);var g=f(e);e=b.order===m.ORDER_DES;"number"===typeof d||"number"===typeof g?(d=Number(d),g=Number(g),d=d>g?1:d<g?-1:0):(d=String(d),g=String(g),d=d.localeCompare(g));return e?-d:d});e.styleInfo&&d.setAlternatingColors(e.sortableData,a.columns,e.styleInfo);a.store.data=e.topData.concat(e.sortableData)}},collectHeaderRowInfoFromData:function(a,c){function d(c){c=e[c];for(var d=
0,f=0;f<a.columns.length;f++){var h=b.getColumnSpannedFields(a,c,a.columns[f].field),f=f+(h&&h.length?h.length-1:0);d++}return d}var e=c?a._getOriginalData():a.store.data;c=e.length-2;for(var f,h=0;h<c;h++)if(d(h)===a.columns.length){f=h;break}if(0<=f)for(h=f+1;h<e.length;h++){if(d(h)!==a.columns.length)return null}else return null;return{headerRowIndex:f}},_makeSortable:function(a){if(!e.isPlayerOnServer){var b=m._collectHeaderRowInfoWithCells(a);b&&(b.cells.forEach(function(b){if(!b._sortArrow){var c=
f.create("div",{"class":"sortArrow sortArrowHoverIndicator"},b.domNode),d=b.getFullStyle();c.style[d&&"left"===d.horizontalAlign?"right":"left"]="5px";b._sortArrow=c;a.viewModel.dynamicReportInfo&&(g.add(b.domNode,"esriGEClickable"),h.addNoDragClickHandler(b.contentBlock,function(c){a&&a.canSortCellFunc&&!a.canSortCellFunc(b)||m._checkCanSortOnHeaderClick(c)&&m._toggleSortForCell(b)}),h.addNoDragClickHandler(c,function(a){m._toggleSortForCell(b)}))}}),m._updateArrows(a,b))}},_collectHeaderRowInfoWithCells:function(b){for(var c=
b.store.data.length-2,d,e,f=0;f<c;f++){var h=a.queryCells(b,{rowIndex:f});if(h&&h.length===b.columns.length){d=h;e=f;break}}if(d)for(f=e+1;f<b.store.data.length;f++){if(h=a.queryCells(b,{rowIndex:f}),!h||h.length!==b.columns.length)return null}else return null;return{cells:d,headerRowIndex:e}},_toggleSortForCell:function(a){var b=a.parentGrid,c=m.getSorting(b),c=c&&c.field===a.column.field?c.order:null;b.presetSorting=null;b._sortInfo={field:a.column.field,order:null};c?c===m.ORDER_DES?b._sortInfo.order=
m.ORDER_ASC:c===m.ORDER_ASC&&(b._sortInfo.order=null):b._sortInfo.order=m.ORDER_DES;b.refresh();b.onSortingChanged(m.getSorting(b))},_checkCanSortOnHeaderClick:function(a){if(a&&a.path){if(a.path.some(function(a){return"A"===a.nodeName}))return!1}else if(a&&a.srcElement&&a.srcElement.parentNode&&"A"===a.srcElement.parentNode.nodeName)return!1;return!0},_updateArrows:function(a,b){b.cells.forEach(function(b){var c=b._sortArrow;if(c){g.remove(c,"sortArrowHoverIndicator sortArrowUp sortArrowDown");l.setTooltipToNode(c,
null);var d=m.getSorting(a);d&&d.field===b.column.field?d.order===m.ORDER_ASC?g.add(c,"sortArrowUp"):d.order===m.ORDER_DES?g.add(c,"sortArrowDown"):(l.setTooltipToNode(c,n.sortTable),g.add(c,"sortArrowHoverIndicator")):(l.setTooltipToNode(c,n.sortTable),g.add(c,"sortArrowHoverIndicator"));setTimeout(function(){c.style.top=(b.getHeight()-c.clientHeight)/2+"px"},100)}})}};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridRowStyler":function(){define([],function(){var k=
{_getCellStyle:function(g,f){g.style=g.style||{};g=g.style.fields=g.style.fields||{};return g[f.field]=g[f.field]||{}},_getCellStyleState:function(g){return{backgroundColor:g.backgroundColor,overrideStyle:g.overrideStyle,key:g.backgroundColor+"."+g.overrideStyle}},getStyleInfo:function(g,f){function e(c){var a;return f.some(function(b){b=k._getCellStyle(c,b);b=k._getCellStyleState(b);if(a&&a.key!==b.key)return!0;a=b})?!1:a}k.resetStyling(g,f);var d=[];return g.some(function(c){var a=e(c);if(!a)return!0;
if(d.length)if(1===d.length){if(d[0].key===a.key)return!0;d.push(a)}else{if((a.backgroundColor||a.overrideStyle)&&!d.some(function(b){return b.key===a.key}))return!0}else d.push(a)})?null:{states:d}},setAlternatingColors:function(g,f,e,d){k.resetStyling(g,f);e&&e.states.length&&(1===e.states.length&&"Default"===e.states[0].overrideStyle&&e.states.push({overrideStyle:"AlternatingRow"}),1===e.states.length&&"AlternatingRow"===e.states[0].overrideStyle&&e.states.unshift({overrideStyle:"Default"}),g.forEach(function(c,
a){var b=a%2?e.states[1]:e.states[0];f.forEach(function(a){a=k._getCellStyle(c,a);d&&d.forceOverrideOriginal?a.backgroundColor=b.backgroundColor:(a.__isStyled=!0,a.__originalBackgroundColor=a.backgroundColor,a.backgroundColor=b.backgroundColor,a.__originalOverrideStyle=a.overrideStyle);a.overrideStyle=b.overrideStyle})}))},resetStyling:function(g,f){g.forEach(function(e){f.forEach(function(d){d=k._getCellStyle(e,d);d.__isStyled&&(delete d.__isStyled,d.backgroundColor=d.__originalBackgroundColor,delete d.__originalBackgroundColor,
d.overrideStyle=d.__originalOverrideStyle,delete d.__originalOverrideStyle)})})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/supportClasses/FilterUtil":function(){define(["esri/dijit/geoenrichment/utils/SortUtil"],function(k){var g={ABOVE_AVERAGE:"aboveAverage",BELOW_AVERAGE:"belowAverage",TOP_N:"topN",BOTTOM_N:"bottomN",RANGE:"range",NONE:"none",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},isNumElementsType:function(f){return f===g.TOP_N||
f===g.BOTTOM_N},isRangeType:function(f){return f===g.RANGE},filterData:function(f,e){function d(){var a=0;f.forEach(function(b){a+=b});return a/f.length}if(!f.length)return[];f=f.slice().sort(k.compareNumeric);switch(e.method){case g.ABOVE_AVERAGE:var c=d();return f.filter(function(a){return a>c});case g.BELOW_AVERAGE:return c=d(),f.filter(function(a){return a<c});case g.TOP_N:var a=e.numElements;if(a>=f.length)return f;var b=f.slice().reverse()[a-1];return f.filter(function(a){return a>=b});case g.BOTTOM_N:a=
e.numElements;if(a>=f.length)return f;var h=f[a-1];return f.filter(function(a){return a<=h});case g.RANGE:return f.filter(function(a){return e.ranges.some(function(b){return g._checkValueMatchesRange(a,b)})});case g.NONE:return f;default:throw Error("Method is not supported!");}},_checkValueMatchesRange:function(f,e){function d(c,a,b){switch(a){case "\x3d":return c===b;case "\x3c":return c<b;case "\x3e":return c>b;case "\x3c\x3d":return c<=b;case "\x3e\x3d":return c>=b}return!1}return e.conditions.length&&
e.conditions.every(function(c){return d(f,c.operator,Number(c.value))})},getRangeStatistics:function(f){var e=-Infinity,d=Infinity;f&&f.forEach(function(c){c.conditions.forEach(function(a){"\x3e"===a.operator||"\x3e\x3d"===a.operator?e=Math.max(e,a.value):d=Math.min(d,a.value)})});return{min:e,max:d}}};return g})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function k(d,c,a,b){d=void 0===d||null===d;return d!=(void 0===c||null===c)?(c=d?-1:1,(void 0===b?a:b)?-c:c):d?
0:null}function g(d){var c=/^(.+)\s([1-9]\d*)$/.exec(d);return c?{base:c[1],number:c[2]}:/^[1-9]\d*$/.test(d)?{base:"",number:+d}:{base:d,number:0}}var f={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(d,c,a,b){b=k(d,c,a,b);if(null!==b)return b;d=Number(d);c=Number(c);b=d>c?1:d<c?-1:0;return a?-b:b},compareString:function(d,c,a,b){b=k(d,c,a,b);if(null!==b)return b;d=String(d);c=String(c);b=d.localeCompare(c);return a?-b:b}},e=/^(.+)\s([1-9]\d*)(\D*)$/;
f.compareNames=function(d,c,a,b){var h=g("string"===typeof d?d.toLowerCase():d),k=g("string"===typeof c?c.toLowerCase():c),n=null;if(h.base===k.base)n=f.compareNumeric(h.number,k.number,a,b);else{var m=e.exec(h.base);if(m){var p=e.exec(k.base);p&&m[1]===p[1]&&m[3]===p[3]&&(n=f.compareNumeric(m[2],p[2],a,b))}null===n&&(n=f.compareString(h.base,k.base,a,b))}return n||f.compareString(d,c,a,b)};f.compare=function(d,c,a,b){var e=k(d,c,a,b);if(null!==e)return e;e=typeof d;typeof c!=e&&(e="");switch(e){case "number":case "boolean":break;
case "object":d=d.valueOf();c=c.valueOf();break;default:return f.compareString(d,c,a,b)}e=d>c?1:d<c?-1:0;return a?-e:e};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridSortSupport":function(){define(["dojo/_base/declare","./coreUtils/sorting/GridSortUtil"],function(k,g){return k(null,{presetSorting:null,ignorePresetSorting:!1,allowSorting:!1,canSortCellFunc:null,_applySortingToStoreData:function(){!this.ignorePresetSorting&&g.applySortingToStoreData(this)},_buildSortControls:function(){g.buildSortControls(this)},
getSorting:function(){return g.getSorting(this)},setSorting:function(f,e){return g.setSorting(this,f,e)},getSortRowIndexMapping:function(){return g.getSortRowIndexMapping(this)},onSortingChanged:function(f){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_ResizableColumnsSupport":function(){define(["dojo/_base/declare"],function(k){return k(null,{_populateFieldForResizableColumns:function(g,f,e){var d=this;0===f.index&&(g.onManualWidthChange=function(){d._setCellWidth(g,g.getWidth());d.onColumnWidthChanged()})},
onColumnWidthChanged:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_DataDrillingSupport":function(){define(["dojo/_base/declare","../dataDrilling/DataDrillingVisualizer","../dataDrilling/DataDrillingButtonsBuilder","./coreUtils/GridDataUtil","../supportClasses/WidgetQueryUtil"],function(k,g,f,e,d){return k(null,{_ddButtonsBuilder:null,_trySetupDataDrilling:function(c){var a=this;this.viewModel.dynamicReportInfo&&this.viewModel.enableDataDrilling&&!d.isDataDrillingView(this)&&
e.getDataDrilling(c)&&(this._ddButtonsBuilder=this._ddButtonsBuilder||new f({parentWidget:this}),this._ddButtonsBuilder.setDataDrillingButtonForTableCell(c,function(){a._showDataDrilling(c)}))},_showDataDrilling:function(c){var a=new g({viewModel:this.viewModel,theme:this.theme,parentWidget:this,domNode:this.domNode,currentFeatureIndex:this.currentFeatureIndex,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){a.play(!1,!0)}});a.play(!0,!0,null,e.getDataDrilling(c).sectionJson)}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingVisualizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/Destroyable esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/animation/AnimationUtil esri/dijit/geoenrichment/utils/mobile/GesturesUtil ../sections/sectionUtils/SectionJsonUtil ../supportClasses/ViewModes ./DataDrillingBackgroundUtil ./DataDrillingExportUtil ../../ReportPlayerState dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z,D,F,B){B=B.geoenrichment.dijit.ReportPlayer.Infographics;var E={w:700,h:600,minW:400,minH:500};k=k(m,{viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,currentFeatureAttributes:null,getPreviewValueFunction:null,ddZoomScreenClass:null,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,zIndex:null,domNode:null,ddZoomScreen:null,dataDrillingViewDiv:null,_drillingSections:null,_currentTriggerButtonBox:null,_toDataDrillingScale:1,
constructor:function(a){g.mixin(this,a);this._buildLayout();t.isMobileDevice()&&w.preventDefaultOverflow(this.dataDrillingViewDiv)},_buildLayout:function(){function a(a,b){return h.create("div",{"class":a},b)}var b=this;this.dataDrillingViewDiv=a("dataDrilling_dataDrillingViewDiv esriGEReportPlayer esriGENonSelectable");this.drilledDataViewDiv=a("dataDrilling_drilledDataViewDiv esriGEAbsoluteStretched",this.dataDrillingViewDiv);this.drilledDataViewDivScaler=a("",this.drilledDataViewDiv);this.topToolbar=
a("dataDrilling_topToolbar",this.dataDrillingViewDiv);this.dynamicSettingsToolbarRoot=a("dijitInline dataDrilling_dynamicSettingsToolbarRoot",this.topToolbar);this.exportButton=a("dijitInline dataDrilling_exportButton",this.topToolbar);this.printButton=a("dijitInline dataDrilling_printButton",this.topToolbar);this.backToMainViewButton=a("dijitInline dataDrilling_backToMainViewButton",this.topToolbar);d(this.backToMainViewButton,"click",function(){b.onClose()});var c=this.exportButton,e=this.printButton;
q.hide([c,e]);this.viewModel.dynamicReportInfo&&(D.canExportDataDrilling(this.parentWidget)&&(u.setTooltipToNode(c,B.exportInfographic),q.show(c),d(c,"click",function(){D.exportDataDrilling(b)})),D.canPrintDataDrilling(this.parentWidget)&&(u.setTooltipToNode(e,B.printInfographic),q.show(e),d(e,"click",function(){D.printDataDrilling(b)})))},play:function(a,c,d,e,f){function h(a){a?(q.show(k.dataDrillingViewDiv),k.dataDrillingViewDiv.parentNode!==document.body&&document.body.appendChild(k.dataDrillingViewDiv),
k.zIndex&&n.set(k.dataDrillingViewDiv,"zIndex",k.zIndex)):(k.dataDrillingViewDiv.parentNode===document.body&&document.body.removeChild(k.dataDrillingViewDiv),q.hide(k.dataDrillingViewDiv))}function g(){h(a);k._setZoomScreen(a,!1);k._setCloseHandlers(a);F.isViewingDataDrillingZoom=a;b[a?"add":"remove"](k.domNode,"isDrillingData");b.remove(k.domNode,"isShowingAnimation")}var k=this;this.viewModel.setBenchmarkDisabled&&this.viewModel.setBenchmarkDisabled(a);this._currentTriggerButtonBox=d?l.position(d):
this._currentTriggerButtonBox;b.add(this.domNode,"isShowingAnimation");if(c)return h(!0),a?(c=this.getDataDrillingPanelDimensions(e),n.set(this.dataDrillingViewDiv,{width:c.w+"px",height:c.h+"px"})):c={w:this.dataDrillingViewDiv.clientWidth,h:this.dataDrillingViewDiv.clientHeight,scale:this._toDataDrillingScale},this._setZoomScreen(a,!0),a?(d=this._toDataDrillingScale=c.scale||1,c=v.animateResize({duration:200,domNode:this.dataDrillingViewDiv,fromBox:c.animateFromCenter||!this._currentTriggerButtonBox?
{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}:this._currentTriggerButtonBox,startScaleX:.7*d,startScaleY:.7*d,fromOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-c.w*d)/2,y:(document.body.clientHeight-c.h*d)/2+(c.yOffset||0),w:c.w,h:c.h},endScaleX:c.scale,endScaleY:c.scale,onEnd:g}),v.animateFadeIn({domNode:k.dataDrillingViewDiv,duration:100})):(c=v.animateResize({duration:200,domNode:this.dataDrillingViewDiv,toBox:this._currentTriggerButtonBox,startScaleX:c.scale,startScaleY:c.scale,
endScaleX:.7*(c.scale||1),endScaleY:.7*(c.scale||1),toOffset:{x:"c",y:"c"},onEnd:g}),v.animateFadeOut({domNode:this.dataDrillingViewDiv,duration:100})),c=c&&c.then(function(){return p.delay(100)}),a&&e&&k.renderCustomSectionJson({sectionJson:e,fieldInfo:f,promise:c}),c;g()},_setZoomScreen:function(a,c){var d=this;a!==!!this.ddZoomScreen&&(a?(this.ddZoomScreen=h.create("div",{"class":"esriGEAbsoluteStretched dataDrilling_dataDrillingViewDivScreen"+(t.isMobileDevice()?" mobile":"")},this.dataDrillingViewDiv,
"before"),t.isMobileDevice()&&w.preventDefaultOverflow(this.ddZoomScreen),this.zIndex&&n.set(this.ddZoomScreen,"zIndex",this.zIndex),this.ddZoomScreenClass&&b.add(this.ddZoomScreen,this.ddZoomScreenClass),c&&v.animateFadeIn({domNode:this.ddZoomScreen,duration:100})):(a=function(){d.ddZoomScreen&&h.destroy(d.ddZoomScreen);d.ddZoomScreen=null},c?v.animateFadeOut({domNode:this.ddZoomScreen,duration:100,onEnd:a}):a()))},_clickOutsideHandler:null,_keyboardHandler:null,_setCloseHandlers:function(a){var b=
this;this._clickOutsideHandler&&this._clickOutsideHandler.remove();this._clickOutsideHandler=null;this._keyboardHandler&&this._keyboardHandler.remove();this._keyboardHandler=null;a&&(this.closeZoomedDDWhenClickedOutside&&(this._clickOutsideHandler=d(document.body,t.press,function(){if(!F.isViewingDynamicSettings&&!r.isMouseOver(b.dataDrillingViewDiv,{checkAllChildren:!0})&&!b._drillingSections[0].isMouseOver())b.onClose()})),this.closeZoomedDDOnEsc&&(this._keyboardHandler=d(document.body,"keyup",
function(a){if(a.keyCode===c.ESCAPE)b.onClose()})))},updateView:function(){var a=this.getSection();if(a){var b=this.dataDrillingViewDiv,c=a.getWidth(),a=a.getHeight(),d=b.clientWidth,e=b.clientHeight,f=n.get(b,"left"),h=n.get(b,"top");b.style.width=c+"px";b.style.height=a+"px";b.style.left=f+-(c-d)/2+"px";b.style.top=h+-(a-e)/2+"px"}},getDataDrillingPanelDimensions:function(a){var b=document.body.clientWidth-(t.isLandscape()?80:40),c=document.body.clientHeight-80;if(a){var d=A.calcSectionJsonBox(a),
e=a.style&&a.style.width||d.w||E.w;a=a.style&&a.style.height||d.h||E.h;d=Math.min(1,b/e,c/a);return t.isMobileDevice()?{w:e,h:a,scale:d,yOffset:10,animateFromCenter:!0}:{w:e,h:a,scale:d,yOffset:c-30>a?0:15}}d=Math.max(.7,Math.min(1,b/E.minW,c/E.minH));return t.isMobileDevice()?{w:b/d,h:c/d,scale:d,yOffset:10,animateFromCenter:!0}:{w:Math.min(b/d,E.w),h:Math.min(c/d,E.h),scale:d,yOffset:c-30>E.h?0:15}},renderCustomSectionJson:function(a){var b=this;this.destroyContent();var c,d=this.getDataDrillingPanelSectionParams(a.sectionJson);
this._showDDProgress(!0);return e(a.promise).then(function(){return p.delay(function(){c=b._createDataDrillingSection(d);c.fitContentNicely();c.domNode.style.opacity="0.01";return e(c.getRenderPromise(),function(){return p.delay(function(){c.domNode.style.opacity="";c.notifyShown();b._showDDProgress(!1);b.onCustomSectionRendered(a)})})})})},getDataDrillingPanelSectionParams:function(a){var b={"class":"infographicContainer_dataDrillingSection"},c=this.getDataDrillingPanelDimensions(a);b.json=a;b.initialWidth=
c.w;b.initialHeight=c.h;b.viewModel=this.viewModel;b.theme=this.theme;b.parentWidget=this;b.isDataDrillingView=!0;b.currentFeatureIndex=this.currentFeatureIndex||0;b.currentFeatureAttributes=this.currentFeatureAttributes;b.getPreviewValueFunction=this.getPreviewValueFunction;b.initialViewMode=C.PREVIEW_VALUES;this.dynamicSettingsToolbarRoot.innerHTML="";b.dynamicSettingsToolbarRoot=this.dynamicSettingsToolbarRoot;return b},_createDataDrillingSection:function(c){var d=this.getDataDrillingPanelDimensions(c.json);
c=this.viewModel.layoutBuilder.createElement("section",c,this.drilledDataViewDivScaler);this._drillingSections.push(c);b[a(".sectionDynamicSettings_settingsButton",this.dataDrillingViewDiv)[0]?"add":"remove"](this.dataDrillingViewDiv,"hasChartSettingsButton");this.setUpDDPanelBackgroundColor();d.scale&&(c.notifyPanelScaleChanged(d.scale),this._applyScaleToDataDrillingToolbarButtons(d.buttonScale||d.scale),f.after(c,"onDynamicSettingsButtonsCreated",function(){this._applyScaleToDataDrillingToolbarButtons(d.buttonScale||
d.scale)}.bind(this)));return c},getSection:function(){return this._drillingSections[0]},_applyScaleToDataDrillingToolbarButtons:function(b){var c=1/b;b=[];var d=a(".sectionDynamicSettings_buttonBar",this.dynamicSettingsToolbarRoot)[0];if(d)for(var e=0;e<d.children.length;e++)b.push(d.children[e]);b.push(this.exportButton);b.push(this.printButton);b.push(this.backToMainViewButton);b.forEach(function(a,b){a.style.transformOrigin="100% 100%";a.style.transform="scale("+c+")";a.style["webkit-transform"]=
"scale("+c+")";0<b&&(b=26*c,b+=32*(c-1),a.style.marginLeft=b+"px")})},setUpDDPanelBackgroundColor:function(){z.setUpDDPanelBackgroundColor({viewModel:this.viewModel,theme:this.theme,infographicJson:this.getInfographicJson(),node:this.dataDrillingViewDiv})},getInfographicJson:function(){return null},_showDDProgress:function(a){y[a?"showProgress":"removeProgress"](this.dataDrillingViewDiv);this.topToolbar&&(this.topToolbar.style.opacity=a?"0.001":"")},destroyContent:function(){this._drillingSections=
this._drillingSections||[];this._drillingSections.forEach(function(a){a.destroy()});this._drillingSections.length=0;this.drilledDataViewDivScaler.innerHTML=""},onClose:function(){},onCustomSectionRendered:function(a){},destroy:function(){this.destroyContent();this._setCloseHandlers(!1)}});k.DATA_DRILLING_BOX_ZOOM=E;return k})},"esri/dijit/geoenrichment/utils/mobile/GesturesUtil":function(){define(["dojo/on","../DnDUtil","../animation/Animator","dojo/domReady!"],function(k,g,f){var e={},d=window._dev_emulateMultiTouch,
c=window._dev_logTouch,a={_animation:null,_measures:null,start:function(){this._animation&&this._animation.stop();this._animation=null;this._measures=[];this._addMeasurePoint(0,0)},_addMeasurePoint:function(a,c){for(;9<this._measures.length;)this._measures.shift();var b={time:(new Date).getTime(),dx:a,dy:c},d=this._measures[this._measures.length-1];this._measures.push(b);d&&(b.vx=a/(b.time-d.time),b.vy=c/(b.time-d.time))},notifyScrolled:function(a,c){this._addMeasurePoint(a,c)},flyScroll:function(a){if(!(2>
this._measures.length)){var b=(new Date).getTime(),c=0,d=0,e=0;this._measures.forEach(function(a,f){"number"!==typeof a.vx||100<b-a.time||(c+=a.vx,d+=a.vy,e++)});if(e){var c=c/e,d=d/e,g=c,k=d;this._animation=f.animateProperty({duration:750,properties:{p:{start:0,end:1,easing:"sineOut"}},progressFunction:function(e,f,h){e=(new Date).getTime();f=e-b;b=e;a(g*f,k*f);g=c*(1-h);k=d*(1-h)}})}}}};e.preventDefaultSiteBehavior=function(){document.body.style.touchAction="none"};e.preventDefaultOverflow=function(a){return a&&
k(a,"touchmove",function(a){a.preventDefault()})};e.preventDoubleTapZoom=function(a){var b,c=(new Date).getTime();b=k(a,"touchstart",function(a){var b=(new Date).getTime();300>b-c&&a.preventDefault();c=b});return{remove:function(){b.remove()}}};e.enableGesturesOnNode=function(b,f){function h(a,b){if(f.logDiv){if(1E3<f.logDiv.innerHTML.length||b)f.logDiv.innerHTML="";f.logDiv.innerHTML+=a+"\x3cbr/\x3e"}}function g(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function m(b){f.enableFlyingScroll&&
a.start();for(var c=0;c<b.changedTouches.length;c++){var d=b.changedTouches[c];q[d.identifier]={x:d.clientX,y:d.clientY}}h("Num touches "+b.touches.length);2===b.touches.length&&(f.canZoom&&!f.canZoom(b)?h("Can't zoom"):(c=q[b.touches[0].identifier],b=q[b.touches[1].identifier],c&&b?(r=g(c,b),h("Start distance: "+Math.round(r))):q={}))}function p(b){if(2===b.touches.length){b.preventDefault();var c=b.touches[0];b=b.touches[1];var d=q[c.identifier],e=q[b.identifier];if(d&&e&&r){if(d.x=c.clientX,d.y=
c.clientY,e.x=b.clientX,e.y=b.clientY,c=g(d,e),d=Math.abs(r-c),h("Diff: "+Math.round(d),!0),d>u){h("Zoom");if(r<c)f.onZoomIn();else f.onZoomOut();r=c}}else q={}}else if(1===b.touches.length)if(f.canScroll&&!f.canScroll(b)||b.preventDefault(),c=b.touches[0],d=q[c.identifier]){var e=d.x-c.clientX,k=d.y-c.clientY;d.x=c.clientX;d.y=c.clientY;if(!f.canScroll||f.canScroll(b))f.onScrollChanged(e,k),f.enableFlyingScroll&&a.notifyScrolled(e,k)}else q={}}function t(b){for(var c=0;c<b.changedTouches.length;c++)delete q[b.changedTouches[c].identifier];
r=0;h("Num touches "+b.touches.length,!b.touches.length);f.enableFlyingScroll&&a.flyScroll(f.onScrollChanged)}if(b){e.preventDefaultSiteBehavior();var q={},r=0,u=f.zoomTolerance||50;if(d)e.dev_addMultiTouchEmulation(b,m,p,t);else var y=k(b,"touchstart",m),v=k(b,"touchmove",p),w=k(b,"touchend",t);c&&(f.logDiv=e.dev_createLogLabel());return{remove:function(){q=null;y.remove();v.remove();w.remove()}}}};e.dev_addMultiTouchEmulation=function(a,c,d,e){function b(a,b,g){b={type:a,clientX:g&&g.clientX,clientY:g&&
g.clientY,changedTouches:[b.getTouch()],touches:[],preventDefault:function(){g&&g.preventDefault()}};f.isOn&&b.touches.push(f.getTouch());h.isOn&&b.touches.push(h.getTouch());switch(a){case "touchstart":c(b);break;case "touchmove":d(b);break;case "touchend":e(b)}}a=function(a,c,d){var e=this;e.x=c;e.y=d;e.isOn=!1;e.node=document.createElement("div");e.node.style.width="50px";e.node.style.height="50px";e.node.style.borderRadius="50%";e.node.style.cursor="pointer";e.node.style.position="absolute";e.node.style.zIndex=
"10000";document.body.appendChild(e.node);g.addNoDragClickHandler(e.node,function(){e.isOn=!e.isOn;e._updateStateColor();b(e.isOn?"touchstart":"touchend",e,null)},{tolerance:5});var f,h;k(e.node,"touchstart",function(a){f=a.clientX;h=a.clientY;k.once(document.body,"touchend",function(){f=void 0})});k(e.node,"touchmove",function(a){if(void 0!==f){a.preventDefault();var c=a.clientX-f,d=a.clientY-h;f=a.clientX;h=a.clientY;e.x+=c;e.y+=d;e._updateNodePosition();e.isOn&&b("touchmove",e,a)}});e._updateStateColor=
function(){e.node.style.backgroundColor=e.isOn?"#00FF00":"#CCCCCC"};e._updateNodePosition=function(){e.node.style.left=e.x-e.node.clientWidth/2+"px";e.node.style.top=e.y-e.node.clientHeight/2+"px"};e._updateStateColor();e._updateNodePosition();e.getTouch=function(){return{identifier:a,clientX:e.x,clientY:e.y}}};var f=new a("touch_0",100,100),h=new a("touch_1",200,200)};e.dev_createLogLabel=function(){var a=document.createElement("div");document.body.appendChild(a);var c=a.style;c.position="absolute";
c.zIndex="10000";c.right="0px";c.bottom="0px";c.width="150px";c.height="100px";c.backgroundColor="gray";c.color="white";c.overflow="auto";c.padding="3px";return a};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes":function(){define([],function(){return{EDIT:"edit",PREVIEW:"preview",PREVIEW_VALUES:"previewValues"}})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingBackgroundUtil":function(){define(["dojo/dom-class","esri/dijit/geoenrichment/utils/ColorUtil",
"../themes/BackgroundThemeUtil"],function(k,g,f){return{setUpDDPanelBackgroundColor:function(e){var d=e.viewModel.getStaticInfographicDefaultStyles(e.theme),c=e.viewModel.getDocumentDefaultStyles(e.theme);[e.infographicJson&&e.infographicJson.style.backgroundColor,d&&d.backgroundColor,c.backgroundColor].some(function(a){if(a&&!g.isTransparent(a))return e.node.style.backgroundColor=a,k.remove(e.node,"playerThemeDark playerThemeLight"),k.add(e.node,g.isLightColor(a)?"playerThemeLight":"playerThemeDark"),
!0})||f.renderThemeBackgroundImage(e.node,c.backgroundImage)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/BackgroundThemeUtil":function(){define(["dojo/dom-class","dojo/dom-construct","dojo/dom-style","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions"],function(k,g,f,e){var d={hasBackgroundImage:function(c){return c&&!!c.__themeBgImage},getBackgroundImage:function(c){return c&&c.__themeBgImage},removeBackgroundImage:function(c){c&&(c.__themeBgImage&&g.destroy(c.__themeBgImage),
delete c.__themeBgImage)},renderThemeBackgroundImage:function(c,a,b,e){d.removeBackgroundImage(c);if(!c||!a||!a.data)return!1;e=g.create("div",{"class":"esriGEAbsoluteStretched "+(e&&e.nodeClass||""),style:"overflow: hidden"},c,"first");c.__themeBgImage=e;var f=g.create("div",{style:"background-repeat: no-repeat; background-size: cover;"},e);f.style.backgroundImage="url("+a.data+")";0<a.opacity&&1>a.opacity&&(f.style.opacity=a.opacity);f.style.backgroundPosition=a.position||"center";f.style.backgroundRepeat=
a.repeat?"repeat":"no-repeat";f.style.backgroundSize=a.scale?a.repeat?"contain":"cover":a.size||"auto";d.updateThemeBackgroundImage(c,b);return e},updateThemeBackgroundImage:function(c,a){if(d.hasBackgroundImage(c)&&(c=c.__themeBgImage.children[0]))if(a&&a.documentOptions&&a.pos){var b=e.getPageBox(a.documentOptions),h=a.zoom||1;f.set(c,{position:"absolute",width:b.w+"px",height:b.h+"px",left:-a.pos.x/h+"px",top:-a.pos.y/h+"px"});k.remove(c,"esriGEAbsoluteStretched")}else k.add(c,"esriGEAbsoluteStretched")}};
return d})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingExportUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/ReportPlayer esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes esri/dijit/geoenrichment/ReportPlayer/PlayerThemes esri/dijit/geoenrichment/ReportPlayer/DataProviderGE esri/dijit/geoenrichment/ReportPlayer/PlayerCommands ../reportContainerGrid/utils/PageQueryUtil ../supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){var t={reportPlayerClass:e,dataProviderClass:a,initPlayer:function(){var a=f.create("div",{"class":"esriGEAbsoluteStretched esriGEOffscreen"},document.body),e=new t.dataProviderClass;e.registerCommand(b.PRINT);e.registerCommand(b.IMAGE);e=(new t.reportPlayerClass({theme:c.DARK,dataProvider:e,resizeMode:d.FIT_WINDOW,isDataDrillingPlayer:!0})).placeAt(a);e.__playerDiv=a;return e},destroyPlayer:function(a){a.destroy();f.destroy(a.__playerDiv)}},q={},r=!1;q.setReportPlayerClass=
function(a){t.reportPlayerClass=a};q.setDataProviderClass=function(a){t.dataProviderClass=a};q.canPrintDataDrilling=function(a){return m.isMobileDevice()?!1:!!h.getParentReportPlayer(a).dataProvider.getCommandById(b.PRINT)};q.canExportDataDrilling=function(a){return m.isMobileDevice()?!1:(a=h.getParentReportPlayer(a).dataProvider.getCommandById(b.IMAGE))&&a.isBrowserSupported()};q.printDataDrilling=function(a){q._createTemporaryPlayerAndExport(a,!0)};q.exportDataDrilling=function(a){q._createTemporaryPlayerAndExport(a,
!1)};q._createTemporaryPlayerAndExport=function(a,b){if(!r){r=!0;var c,d=h.getParentReportPlayer(a.parentWidget),e=d.getReportData(),d=d.dataProvider.reportDataToSingleAreaReportData(e,{currentFeatureIndex:a.currentFeatureIndex||0,reportTitle:d.getReportTitle(),templateJson:function(){var b=a.getSection().toJson(),d=a.getDataDrillingPanelDimensions(b),d=l.createBlankTemplate({elementWidth:d.w,elementHeight:d.h,layout:{numRows:1,numColumns:1}});d.theme=k.clone(a.theme);delete d.theme.document.backgroundImage;
c=a.getSection().getVisualState();var b=n.createFieldInfoFromSection(b),e=d.sectionsTables[0].data;e.data[0].fieldInfos[e.columns[0].field]=b;return d}()}),f=t.initPlayer();f.onWaitingShown=function(b){p.showProgressPromise(a.dataDrillingViewDiv,b)};f.onCommandSettingsShown=function(a){q.unitTesting_onCommandSettingsShown()};g(f.setReportData(d,{waitUntilAllContentIsReady:!0,disableAnimation:!0}),function(){var d={pages:[{cells:[c]}]},e=f.getCurrentReportContainer().getLayoutCells()[0].content;e.getPreviewValueFunction=
a.getPreviewValueFunction;return g(e.refresh()).then(function(){return g(f.onWaitingShown(f.getCurrentReportContainer().setVisualState(d)),function(){return g(f[b?"executePrint":"executeExport"](),function(a){t.destroyPlayer(f);q.unitTesting_onExportCommandFinished(a)})})})})["finally"](function(){r=!1})}};q.unitTesting_onCommandSettingsShown=function(){};q.unitTesting_onExportCommandFinished=function(a){};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/utils/PageQueryUtil":function(){define(["dojo/dom-geometry",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(k,g,f){var e={getElementPageInfo:function(d){function c(a,b){a=k.position(a.domNode);b=k.position(b.domNode);l.x+=a.x-b.x;l.y+=a.y-b.y}function a(a){q||(a=a.getFullStyle().backgroundColor)&&!g.isTransparent(a)&&(q=a)}function b(h){if(h)if(h.parentGridCell&&a(h.parentGridCell),h.parentElementInPageInfo)h=h.parentElementInPageInfo,f=h.reportContainer,q=q||h.panelBackgroundColor,l.x+=h.pos.x,l.y+=h.pos.y,n=
h.pageGrid,m=h.gridContainer,p=h.pageIndex,t=h.layoutCell,r=h.isBackgroundFloatingPanel,u=h.isForegroundFloatingPanel,y=h.panelIndex;else{var g=h.parentWidget;g&&g.isReportContainerGrid?(f=g,h=e.getNodePositionOnPage(f,h.domNode),g=e.getNodePositionOnPage(f,d.domNode),h&&g&&(l.x+=h.x,l.y+=h.y,n=h.pageGrid,m=h.gridContainer,p=h.pageIndex,t=g.layoutCell,r=g.isBackgroundFloatingPanel,u=g.isForegroundFloatingPanel,y=g.panelIndex)):g&&(c(h,g),b(g))}}if(d&&d.parentWidget&&(!d.viewModel||d.viewModel.isGraphicStyle)){var f,
l={x:0,y:0},n,m,p,t,q,r,u,y;d.isValueField&&d.parentGrid&&d.rowId&&d.columnId?(a(d),c(d,d.parentGrid),b(d.parentGrid)):b(d);return f&&t?{reportContainer:f,documentOptions:f.documentOptions,pos:l,zoom:f.getZoomInfo().scale,pageGrid:n,gridContainer:m,pageIndex:p,layoutCell:t,panelBackgroundColor:q,isFloatingPanel:r||u,isBackgroundFloatingPanel:r,isForegroundFloatingPanel:u,panelIndex:y}:null}},getReportContainerPageNode:function(d){for(;d;){if(d.reportContainerPageNode)return d.reportContainerPageNode;
d=d.parentWidget||d.parentGrid}return null},getParentReportContainerGrid:function(d){if(d&&d.isReportContainerGrid)return d;for(;d;){if(d.parentWidget&&d.parentWidget.isReportContainerGrid)return d.parentWidget;if(d.parentElementInPageInfo)return d.parentElementInPageInfo.reportContainer;d=d.parentWidget||d.parentGrid}return null},getParentReportPlayer:function(d){if(d&&d.isPlayer)return d;for(;d;){if(d.parentWidget&&d.parentWidget.isPlayer)return d.parentWidget;d=d.parentWidget||d.parentGrid}return null},
getNodePositionOnPage:function(d,c){if(!c)return null;var a,b=-1,e,g,n,m;d.getGrids().some(function(d,h){if(d.domNode===c||f.isChildOf(c,d.domNode))return a=d,e=h,d.getFieldCells().some(function(a,d){if(a.domNode===c||f.isChildOf(c,a.domNode))return b=d,m=a,!0}),-1===b&&d.getBackgroundFloatingCells().some(function(a,d){if(a.domNode===c||f.isChildOf(c,a.domNode))return b=d,g=!0,m=a,!0}),-1===b&&d.getForegroundFloatingCells().some(function(a,d){if(a.domNode===c||f.isChildOf(c,a.domNode))return b=d,
n=!0,m=a,!0}),!0});if(!a)return null;d=d.getGridContainer(a);var p=k.position(d),t=k.position(c);return{x:t.x-p.x,y:t.y-p.y,pageGrid:a,gridContainer:d,pageIndex:e,layoutCell:m,isFloatingPanel:g||n,isBackgroundFloatingPanel:g,isForegroundFloatingPanel:n,panelIndex:b}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingButtonsBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l){l=l.geoenrichment.dijit.ReportPlayer.Infographics;return k(null,{parentWidget:null,_ddButtons:null,_shownButtons:null,constructor:function(a){g.mixin(this,a)},setDataDrillingButtonForSection:function(a,c){this._setDataDrillingButton({widget:a,getBox:function(){var c=[];a.getTables().forEach(function(a){c.push(a.domNode)});return b.uniteNodeBoxes(c,a.domNode)},onClick:c})},setDataDrillingButtonForTableCell:function(a,b){this._setDataDrillingButton({widget:a,getBox:function(){return{x:0,
y:0,w:a.domNode.clientWidth,h:a.domNode.clientHeight}},onClick:b})},_setDataDrillingButton:function(b){function g(){var a=e.create("div",{"class":"dataDrilling_drillDataButton"},k.domNode);e.create("div",{"class":"dijitInline dataDrilling_drillDataButtonIcon esriGESpaceAfterBig"},a);var c=e.create("div",{"class":"dijitInline dataDrilling_drillDataButtonLabel",innerHTML:l.drillForMoreData},a),f=b.getBox();d.set(a,{left:f.x+"px",top:f.y+"px",width:f.w+"px",height:f.h+"px",lineHeight:f.h+"px"});var h=
a.clientWidth;h>f.w&&d.set(a,"left",f.x-(h-f.w)/2+"px");c.style.maxWidth=h-50+"px";c.style.whiteSpace="normal";q._ddButtons.push({destroy:function(){e.destroy(a)}});return a}var k=b.widget,n=b.onClick,q=this;this._ddButtons=this._ddButtons||[];var r;if(c.isMobileDevice()){var u=function(a){r.style.opacity=a?1:0;q._shownButtons.splice(q._shownButtons.indexOf(r),1);a&&q._shownButtons.push(r);y&&y.remove();a&&q._syncButtonWithScale(r)},y;this._shownButtons=this._shownButtons||[];a.addNoDragClickHandler(this.parentWidget.domNode,
function(){setTimeout(function(){!q._shownButtons.length&&h.isMouseOver(k.domNode,{checkAllChildren:!0})&&(r=r||g(),u(!0),setTimeout(function(){y=a.addNoDragClickHandler(r,function(){u(!1);n(r)});f.once(document.body,"touchend",function(){u(!1)})}))})},{detectLongPress:!0,longPressTimeout:750,ignoreReleaseIfLongPressHappened:!0,longPressCallback:function(){h.isMouseOver(k.domNode,{checkAllChildren:!0})&&(r=r||g(),u(!0),n(r),setTimeout(function(){u(!1)}))}})}else k.own(f.once(this.parentWidget.domNode,
"mouseover",function(){r=r||g();q._syncButtonWithScale(r);f(r,"click",function(){n(r)})}))},_panelScale:null,notifyPanelScaleChanged:function(a){this._panelScale=a;this._ddButtons&&this._ddButtons.forEach(this._syncButtonWithScale.bind(this))},_syncButtonWithScale:function(a){a&&a.style&&(a.style.fontSize=13/(this._panelScale||1)+"px")},destroyButtons:function(){this._ddButtons=this._ddButtons||[];this._ddButtons.forEach(function(a){a.destroy()});this._ddButtons.length=0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/WidgetQueryUtil":function(){define([],
function(){var k={checkParentWidgets:function(g,f,e){for(var d=!1;g;){d=f(g)||d;if(e&&d)break;g=g.parentWidget}return d},isDataDrillingView:function(g){return k.checkParentWidgets(g,function(f){return f.isDataDrillingView},!0)},getReportContainerGrid:function(g){return k.findParentWidget(g,function(f){return f.isReportContainerGrid&&!f.isTempAddContainer})},findParentWidget:function(g,f){var e;k.checkParentWidgets(g,function(d){if(f(d))return e=d,!0},!0);return e}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/ValueField":function(){define("dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/on dojo/sniff dojo/dom-construct dojo/dom-class dojo/dom-geometry dijit/Destroyable ./supportClasses/TextRenderer ./supportClasses/NumberAnimator esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q){function r(a){a.domNode=c.toDom("\x3cdiv class\x3d'esriGEAdjustableGridValueField'\x3e\x3cdiv class\x3d'valueField_contentBlock'\x3e\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");a.contentBlock=a.domNode.children[0];a.valueContainer=a.contentBlock.children[0];a.valueLabel=a.valueContainer.children[0]}var u=g(h,{_buildLayoutFunc:null,_parentNode:null,constructor:function(a,
b){f.mixin(this,a);this._parentNode=b;this.postCreate()},postCreate:function(){this._buildLayoutFunc(this);this["class"]&&a.add(this.domNode,this["class"]);this._parentNode&&this.placeAt(this._parentNode);this.value&&this.set("value",this.value)},get:function(a){return"value"===a?this._getValueAttr?this._getValueAttr():this.value:this[a]},set:function(a,b){"value"===a?this._setValueAttr?this._setValueAttr(b):this.value=b:this[a]=b},placeAt:function(a){c.place(this.domNode,a);return this},on:function(a,
b){this.own(e(this.domNode,a,b))},isLeftToRight:function(){return b.isBodyLtr(document)},destroy:function(){c.destroy(this.domNode);this._buildLayoutFunc=this.domNode=this._parentNode=null}});h={width:1,height:1,angle:1,opacity:1};var y={color:1,fontSize:1,lineHeight:1,fontFamily:1,fontWeight:1,fontStyle:1,textDecoration:1,backgroundColor:1,verticalAlign:1,horizontalAlign:1,horizontalPadding:1,verticalPadding:1,overrideStyle:1},v={borderTopColor:1,borderTopWidth:1,borderTopOpacity:1,borderTopStyle:1,
borderRightColor:1,borderRightWidth:1,borderRightOpacity:1,borderRightStyle:1,borderBottomColor:1,borderBottomWidth:1,borderBottomOpacity:1,borderBottomStyle:1,borderLeftColor:1,borderLeftWidth:1,borderLeftOpacity:1,borderLeftStyle:1},w=f.mixin({},h,y,v),A={verticalAlign:"top",horizontalAlign:"left",horizontalPadding:0,verticalPadding:0,angle:0,opacity:1};g=g(u,{isValueField:!0,DEFAULT_STYLES:A,viewModel:null,trimTextIfOverflows:!1,autoDetectUrl:!1,valueLabel:null,fieldStyle:null,defaultBorderStyle:null,
_borderStyle:null,content:null,postCreate:function(){this._buildLayoutFunc=this._buildLayoutFunc||r;this.inherited(arguments);this.setStyle(this.fieldStyle);this.setContent(this.content)},_destroyExistingContent:function(){this.content&&(this.content.destroy&&this.content.destroy(),this.contentContainer&&(this.contentContainer.innerHTML=""),this.content=null)},getContentContainerNode:function(a){a||this._destroyExistingContent();this.contentContainer||(this.contentContainer=c.create("div",{"class":"valueField_valueBlock"},
this.contentBlock,"first"));m.show(this.contentContainer);return this.contentContainer},setContent:function(a){this._destroyExistingContent();if(this.content=a)this.getContentContainerNode(!0),(a=this.content.domNode||this.content)&&a.parentNode!==this.contentContainer&&c.place(a,this.contentContainer);this.content?(c.destroy(this.valueContainer),this.valueContainer=null):(c.destroy(this.contentContainer),this.contentContainer=null,this._restoreValueContainer()?(a=this._value,this._value=null,this.set("value",
a)):this.set("value",this._value))},_restoreValueContainer:function(){if(this.valueContainer)return!1;this.valueContainer=c.toDom("\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e");this.contentBlock.appendChild(this.valueContainer);this.valueLabel=this.valueContainer.children[0];this.setStyle(this.fieldStyle);return!0},_value:null,_getValueAttr:function(){return this._value},_setValueAttr:function(a){this._value!==a&&(this._setValueLabelText(a),
this._value=a)},_setValueLabelText:function(a){this.valueLabel&&l.renderText(this,a,this._benchmarkInfo);return a},hasOverflowText:function(){return!this.content&&l.hasOverflowText(this)},_benchmarkInfo:null,setBenchmarkInfo:function(a){this._benchmarkInfo=a},currentNumberValue:null,numberFormatFunction:null,_canAnimate:!1,setNumberValue:function(a,b,c){this.currentNumberValue=a;this.numberFormatFunction=b;this._canAnimate=c&&this.viewModel.isAnimationAllowed();this.currentNumberValue&&this.numberFormatFunction&&
this._canAnimate&&this._animateNumber()},notifyShown:function(){this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},_animateNumber:function(){n.animateNumber(this,this.currentNumberValue,this.numberFormatFunction)},getFullStyle:function(){return f.mixin({},A,this.fieldStyle)},setStyle:function(a){a=a||{};this.fieldStyle=f.mixin(this.fieldStyle||{},a);"number"===typeof this.fieldStyle.opacity&&(this.fieldStyle.opacity=Math.max(0,Math.min(1,this.fieldStyle.opacity)));
a=void 0!==a.width||void 0!==a.height;this._applyAlignAndPaddingStyles();this._applyTransformStyles();this._applyTextStyleToDom(this.domNode);(a=this._setBorderStyle()||a)&&this._refreshLayout()},_applyAlignAndPaddingStyles:function(){this.domNode.style.textAlign=this.fieldStyle.horizontalAlign||A.horizontalAlign;var a=this.fieldStyle.verticalAlign||A.verticalAlign;this.valueLabel&&(this.valueLabel.style.paddingLeft="",this.valueLabel.style.paddingRight="",this.valueLabel.style.paddingTop="","number"===
typeof this.fieldStyle.horizontalPadding&&(this.valueLabel.style.paddingLeft=this.fieldStyle.horizontalPadding+"px",this._allowRightPadding()&&(this.valueLabel.style.paddingRight=this.fieldStyle.horizontalPadding+"px")),"number"===typeof this.fieldStyle.verticalPadding&&"top"===a&&(this.valueLabel.style.paddingTop=this.fieldStyle.verticalPadding+"px"));this.valueContainer&&(this.valueContainer.style.verticalAlign=a);this.contentContainer&&(this.contentContainer.style.verticalAlign=a);this.domNode.style.opacity=
"number"===typeof this.fieldStyle.opacity?this.fieldStyle.opacity:""},_allowRightPadding:function(){return this.viewModel&&this.viewModel.isGraphicStyle},_applyTransformStyles:function(){if(this.valueContainer){var a=d("webkit")?"webkitTransform":"transform";this.valueContainer.style[a]=0!==(Number(this.fieldStyle.angle)||0)?"rotate("+this.fieldStyle.angle+"deg)":""}},_supportedTextStyles:"color fontSize lineHeight fontFamily fontWeight fontStyle textDecoration backgroundColor".split(" "),_applyTextStyleToDom:function(a){var b=
this;this._supportedTextStyles.forEach(function(c){if(b.fieldStyle[c]){var d=b.fieldStyle[c]+("fontSize"===c||"lineHeight"===c?"px":"");"backgroundColor"===c?b._setNodeBackgroundColor(a,d):a.style[c]=d}else a.style[c]=""})},_setNodeBackgroundColor:function(a,b){var c=a===this.domNode&&this.fieldStyle.angle?this.valueContainer:a;c&&(c.style.backgroundColor=b);a===this.domNode&&this.fieldStyle.angle&&(this.domNode.style.backgroundColor="transparent")},clearTextStyle:function(){for(var a in y)delete this.fieldStyle[a];
this.setStyle()},clearLineHeight:function(){delete this.fieldStyle.lineHeight;this.setStyle()},_currentBorderKey:null,_SIDES:["Top","Right","Bottom","Left"],setDefaultBorderStyle:function(a){this.defaultBorderStyle=a;this._setBorderStyle()&&this._refreshLayout()},clearBorder:function(){for(var a in v)delete this.fieldStyle[a];this.setStyle()},_setBorderStyle:function(){var a=f.mixin({},this.defaultBorderStyle,this.fieldStyle);this._borderStyle=a;var b=this._getBorderKey(a);if(this._currentBorderKey===
b)return!1;this._currentBorderKey=b;this.domNode.style.border="";this._SIDES.forEach(function(b){var c="none",d=a["border"+b+"Color"],e=a["border"+b+"Width"],f=a["border"+b+"Style"]||"solid",h=a["border"+b+"Opacity"];d&&0<e&&0!==h&&"none"!==f&&(1>h&&(d=new k(d),d.a=h,d=d.toCss(!0)),c=e+"px "+f+" "+d);this.domNode.style["border"+b]=c},this);return!0},_getBorderKey:function(a){var b="",c;for(c in v)b+=a[c]+"_";return b},_getLeftBorder:function(){return this._borderStyle?this._borderStyle.borderLeftWidth||
0:0},_getLeftPadding:function(){return this.fieldStyle.horizontalPadding||0},_getRightBorder:function(){return this._borderStyle?this._borderStyle.borderRightWidth||0:0},_getRightPadding:function(){return this._allowRightPadding()?this.fieldStyle.horizontalPadding||0:0},_getTopBorder:function(){return this._borderStyle?this._borderStyle.borderTopWidth||0:0},_getTopPadding:function(){return this.fieldStyle.verticalPadding||0},_getBottomBorder:function(){return this._borderStyle?this._borderStyle.borderBottomWidth||
0:0},_getBottomPadding:function(){return this.fieldStyle.verticalPadding||0},getWidth:function(){return this.fieldStyle.width||0},getContentWidth:function(){return this.getWidth()-this._getLeftBorder()-this._getRightBorder()-this._getLeftPadding()-this._getRightPadding()},setWidth:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,a),this.fieldStyle.width=a,this.domNode.style.width=a+"px",a=this.getWidth()-this._getLeftBorder()-this._getRightBorder(),this.contentBlock.style.width=a+"px",this.valueContainer&&
(this.valueContainer.style.width=a+"px"),this.valueLabel&&(this.valueLabel.style.width=a-this._getLeftPadding()-this._getRightPadding()+"px"),this.contentContainer&&(this.contentContainer.style.width=a+"px"),l.renderText(this),this.onWidthChanged(),this.onSizeChanged())},getHeight:function(){return this.fieldStyle.height||0},getContentHeight:function(){return this.getHeight()-this._getTopBorder()-this._getBottomBorder()-this._getTopPadding()-this._getBottomPadding()},setHeight:function(a){this.contentBlock&&
this.domNode&&(a=Math.max(0,a),void 0!==this._minHeight&&(a=Math.max(a,this._minHeight)),this.fieldStyle.height=a,this.domNode.style.height=a+"px",a=this.getHeight()-this._getTopBorder()-this._getBottomBorder(),this.contentBlock.style.height=a+"px",this.valueContainer&&(this.valueContainer.style.height=a+"px"),this.contentContainer&&(this.contentContainer.style.height=a+"px"),l.renderText(this),this.onHeightChanged(),this.onSizeChanged())},getMinHeight:function(){return this._minHeight||0},_minHeight:void 0,
setMinHeight:function(a){this._minHeight=a;this.domNode.style.minHeight=a+"px";a=a-this._getTopPadding()-this._getBottomPadding();this.contentBlock.style.minHeight=a+"px";this.valueContainer&&(this.valueContainer.style.minHeight=a+"px");this.contentContainer&&(this.contentContainer.style.minHeight=a+"px");l.renderText(this)},_refreshLayout:function(){this.setWidth(this.getWidth());this.setHeight(this.getHeight());void 0!==this._minHeight&&this.setMinHeight(this.getMinHeight())},getAngle:function(){return this.content&&
this.content.getAngle?this.content.getAngle()||0:this.fieldStyle.angle||0},setAngle:function(a){this.content&&this.content.setAngle?this.content.setAngle(a):this.setStyle({angle:a||0})},isMouseOver:function(a){return this.domNode&&t.isMouseOverBox(this.getBBox())},getBBox:function(a){a=a&&a.noTransformation?m.noTransformPosition(this.domNode):b.position(this.domNode);return 0===this.getAngle()?a:p.getRotatedRectBox(a,this.getAngle())},_urlClickHandle:null,setUrl:function(b){this._urlClickHandle&&
this._urlClickHandle.remove();this.valueLabel&&(a[b?"add":"remove"](this.valueLabel,"esriGEAdjustableGridValueFieldHyperLink"),b&&(this._urlClickHandle=e(this.valueLabel,"click",function(){q.openUrl(q.toHttpUrl(b))})))},onWidthChanged:function(){},onHeightChanged:function(){},onSizeChanged:function(){},destroy:function(){this.viewModel=null;this._destroyExistingContent();this.inherited(arguments)}});g.SUPPORTED_LAYOUT_STYLES=h;g.SUPPORTED_TEXT_STYLES=y;g.SUPPORTED_BORDER_STYLES=v;g.SUPPORTED_STYLES=
w;return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/TextRenderer":function(){define("dojo/_base/lang dojo/when dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil ../../coreUtils/GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleUtil ./BenchmarkUtil".split(" "),function(k,g,f,e,d,c,a,b,h,l,n){return{renderText:function(b,
c,d){b.valueLabel&&void 0!==c&&this._applyNewText(b,c,d);b.valueLabel&&(b.valueLabel.__hasTrimmedText=!1);d&&(b.trimTextIfOverflows=!1);if(b.trimTextIfOverflows&&b.valueLabel&&this._getLabelInnerHTML(b)&&!a.isRichText(this._getLabelInnerHTML(b))&&(c=this.getFullText(b),c!==this._getLabelInnerHTML(b)&&this._setLabelInnerHTML(b,c),b.valueLabel.__untrimmedText=c,b.domNode.clientWidth)){c=c.trim();d=this._measureValueField(b,c);var e=d.parentH;if(!(b.valueLabel.clientHeight<=e)){var f=Math.floor(d.parentW/
d.charWidth),h=c.length;c=c.substr(0,Math.max(1,Math.floor(e/d.lineHeight))*f);h>c.length&&(c=c.substr(0,c.length-3),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0);if(b.valueLabel.clientHeight>e)for(;!(!c||b.valueLabel.clientHeight<=e||this._getLabelInnerHTML(b).length<=f);)c=c.substr(0,c.length-1),this._setLabelInnerHTML(b,c+"..."),b.valueLabel.__hasTrimmedText=!0}}},_measureValueField:function(a,b){var c=d.getNodeFontSize(a.domNode),c=d.getTextBox(b,{style:"font-family:"+e.get(a.valueLabel,
"fontFamily")+";font-size:"+c+"px;"});return{parentW:a.domNode.clientWidth-e.get(a.valueLabel,"paddingLeft")-e.get(a.valueLabel,"paddingRight"),parentH:a.domNode.clientHeight-e.get(a.valueLabel,"paddingTop")-e.get(a.valueLabel,"paddingBottom"),lineHeight:c.h,charWidth:c.w/b.length,textBox:c}},getFullText:function(a){return a.valueLabel&&(a.valueLabel.__untrimmedText||this._getLabelInnerHTML(a))},hasOverflowText:function(a){return a.valueLabel&&a.valueLabel.__hasTrimmedText||a.valueLabel.clientHeight>
a.domNode.clientHeight},_applyNewText:function(a,b,c){delete a.valueLabel.__untrimmedText;c?this._applyTextForBenchmark(a,b,c):this._getLabelInnerHTML(a)!==b&&this._setLabelInnerHTML(a,b)},_applyTextForBenchmark:function(a,b,e){function m(c){var d=h.getFieldInfo(a);d&&d.triggerJson&&(d=l.getConditionalStyle(e.ownValue,d.triggerJson))&&d.color&&(c=c||{},c.color=c.color||d.color);return n.createBenchmarkedValue(k.mixin({text:b,fontSize:y,isGreater:e.isGreater,formattedValue:e.formattedValue,color:a.fieldStyle.color,
nowrap:!0,noTextLimit:e.noTextLimit},c))}var p=this,t=a.parentGrid,y=d.getNodeFontSize(a.domNode);a.__benchmarkLabel&&f.destroy(a.__benchmarkLabel);delete a.__benchmarkLabel;if(t.infographicBenchmarkController)if(t.infographicBenchmarkController.isVariableInShape){var v=t.infographicBenchmarkController.getIconTable();g(v.getRenderPromise(),function(){function e(a){return d.getNodesBox(a.getBoundingClientRect?[a]:a)}p._setLabelInnerHTML(a,m());var h=p._getInnerHTMLNode(a),g=e(h.children[0]),k=v.getFirstCell().content;
if((k=e(k.getSvgNode?k.getSvgNode().children:k.content))&&!c.isRectInRect(g,k)){p._setLabelInnerHTML(a,b);g=e(h);h=f.create("div",null,a.domNode);h.style.position="absolute";h.style.fontSize="0px";h.innerHTML=m({text:"",color:t.infographicBenchmarkController.getOutsideShapeTextColor()});a.__benchmarkLabel=h;var l=e(h),n=e(a.domNode),q=n.w/d.noTransformPosition(a.domNode).w;h.style.left=(k.x+k.w-n.x)/q+5+"px";h.style.top=(g.y+(g.h-l.h)/2-n.y)/q+"px"}})}else if(this._setLabelInnerHTML(a,m()),"center"===
a.fieldStyle.horizontalAlign){var w=p._getInnerHTMLNode(a);a.domNode.style.marginLeft=Math.min(0,(a.getWidth()-w.children[0].clientWidth)/2)+"px"}else"right"===a.fieldStyle.horizontalAlign&&(w=p._getInnerHTMLNode(a),a.domNode.style.marginLeft=Math.min(0,a.getWidth()-w.children[0].clientWidth)+"px");else this._setLabelInnerHTML(a,m())},_getLabelInnerHTML:function(a){return this._getInnerHTMLNode(a).innerHTML},_setLabelInnerHTML:function(c,d){d=String(d);var e=c.valueLabel;if(c.autoDetectUrl){var f=
this.getFullText(c)||d;a.isUrl(f)?(c=this._getInnerHTMLNode(c),"A"===c.nodeName?(c.innerHTML=d,c.hasAttribute("href")&&c.removeAttribute("href"),c.setAttribute("href",f)):e.innerHTML="\x3ca href\x3d'"+b.toHttpsUrl(f)+"' target\x3d'_blank'\x3e"+d+"\x3c/a\x3e"):e.innerHTML=d}else e.innerHTML=d},_getInnerHTMLNode:function(a){var b=a.valueLabel;return a.autoDetectUrl&&b.childNodes&&1===b.childNodes.length&&b.childNodes[0]&&"A"===b.childNodes[0].nodeName?b.childNodes[0]:b}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/BenchmarkUtil":function(){define(["dojo/string",
"dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt"],function(k,g,f){return{createBenchmarkedValue:function(e){var d="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:0px;"+(e.nowrap?"white-space:nowrap;":"")+"'\x3e";e.text&&(d+="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:"+e.fontSize+"px;'\x3e"+e.text+"\x3c/div\x3e");var c=Math.min(e.noTextLimit?100:
15,e.fontSize,Math.max(e.noTextLimit?6:10,Math.round(.6*e.fontSize))),d=d+("\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:"+(e.text?2:0)+"px;font-size:0px;'\x3e"+k.substitute(e.isGreater?g:f,{fillColor:e.color||"",size:Math.min(e.noTextLimit?100:16,e.fontSize,Math.max(e.noTextLimit?6:10,Math.round(.7*e.fontSize)))})+"\x3c/div\x3e");return d+="\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:2px;font-size:"+c+"px;color:"+e.color+"'\x3e"+e.formattedValue+"\x3c/div\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/NumberAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/Animator",
"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState"],function(k,g){return{animateNumber:function(f,e,d){g.isAnimationSuspended||(f.set("value","0"),f.__numberAnimation&&f.__numberAnimation.stop(),f.__numberAnimation=k.animateProperty({duration:375,properties:{p:{start:0,end:e,easing:"quadOut"}},progressFunction:function(c,a,b){f.domNode&&f.set("value",d(e*b))},endFunction:function(){delete f.__numberAnimation}}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/_ResizableField":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ./supportClasses/ResizeColumnRowTooltipVisualizer ./supportClasses/ResizeEngine esri/dijit/geoenrichment/utils/PageUnitsConverter esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t){t=t.geoenrichment.dijit.ReportPlayer.ValueField;return k(null,{resizable:!0,hasAllSidesSizers:!1,showSizeLabel:!1,showSizeLabelsInAllRelatedCells:!1,showColumnRowSizeTooltip:!1,showSizersOnFocus:!1,createSizersOnDemand:!0,resizeSnapNode:null,resizeRestrictNode:null,allowHorizontalResizing:!0,allowVerticalResizing:!0,sizeLabel:null,_tooltipHandles:null,postCreate:function(){this._tooltipHandles=[];this.inherited(arguments);this.resizable&&this._addCreateSizersTrigger()},
_isBeingResized:!1,_isBeingResizedDelayed:!1,_sizers:null,isBeingResized:function(){return this.resizable&&this._sizers?this._isBeingResized||this._sizers.some(function(a){return m.isMouseOver(a)})||!this.hasAllSidesSizers&&this._sizers.some(function(b){return 0<a.get(b,"opacity")}):!1},wasResizedRecently:function(){return this.isBeingResized()||this._isBeingResizedDelayed},_addCreateSizersTrigger:function(){var a=this;this.createSizersOnDemand||this._updateSizers();f(this.domNode,"mouseover",function(){a._updateSizers()})},
_createSizers:function(){var a=this;this.resizable&&!this._sizers&&(this._sizers=(this.hasAllSidesSizers?h.ALL_DIRECTIONS:[this.allowHorizontalResizing?"e":null,this.allowVerticalResizing?"s":null].filter(function(a){return!!a})).map(function(b){var e=c.create("div",null,a.domNode);a.hasAllSidesSizers?d.add(e,(a.showSizersOnFocus?"valueField_allSidesSizer_showOnFocus":"valueField_allSidesSizer")+" "+b+"_fieldSizer"):"e"===b?(d.add(e,"valueField_widthSizer"),a._tooltipHandles.push(p.setTooltipToNode(e,
t.dragToChangeWidth))):(d.add(e,"valueField_heightSizer"),a._tooltipHandles.push(p.setTooltipToNode(e,t.dragToChangeHeight)));e._dir=b;return e}),this._addResizeHandlers())},unitTesting_getSizerByDirection:function(a){this._updateSizers();return this._sizers.filter(function(b){return b._dir===a})[0]},_addResizeHandlers:function(){var a=this;this._sizers.forEach(function(b){f(b,"mousedown",function(c){c.preventDefault();c.stopPropagation();a._setIsBeingResized(!0);a.stopEdit&&a.stopEdit();h.trackSizer({dir:b._dir,
w:a.getWidth(),h:a.getHeight(),angle:a.getAngle(),supportsCtrlShift:a.hasAllSidesSizers,getThisBox:function(){return n.noTransformPosition(a.domNode)},getThisFullBox:function(){return a.getBBox({noTransformation:!0})},getSnapNodeBoxes:function(){if(!a.hasAllSidesSizers)return null;var b=a._getResizeSnapElements()||[],b=b.map(function(a){return{box:a.getBBox({noTransformation:!0}),tolerance:3}});a.resizeSnapNode&&b.push({box:n.noTransformPosition(a.resizeSnapNode),tolerance:7});return b.length?b:null},
getRestrictNodeBox:function(){return a.hasAllSidesSizers?a.resizeRestrictNode&&n.noTransformPosition(a.resizeRestrictNode):null},onPreChange:function(){a._onManualSizePreChange()},onSizeChanged:function(){a._onManualSizeChange(b._dir);a.onManualSizeChange();a._updateSizers()},onWidthChanged:function(b){a.onManualWidthChange(b)},onHeightChanged:function(b){a.onManualHeightChange(b)},setWidth:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.columnMinWidth&&(b=Math.max(b,a.parentGrid.layoutDefaults.columnMinWidth));
a.setWidth(b)},setHeight:function(b){a.parentGrid&&a.parentGrid.layoutDefaults.rowMinHeight&&(b=Math.max(b,a.parentGrid.layoutDefaults.rowMinHeight));a.setHeight(b)},applyShift:function(b,c){a.onNeedShiftPositionFromResizing(b,c)},onEnd:function(){a._setIsBeingResized(!1)},onSnapped:function(b){a.onResizeSnapped(b)}})})});this.hasAllSidesSizers&&this.own(g.after(this,"onSizeChanged",function(){(n.isNodeInLayout(a._sizers[0])||n.isNodeInLayout(a._sizers[1]))&&a._updateSizers()}))},_getResizeSnapElements:function(){},
_setIsBeingResized:function(a){a?(this._isBeingResizedDelayed=this._isBeingResized=!0,d.add(this.domNode,"isBeingResized"),this.parentGrid&&d.add(this.parentGrid.domNode,"isBeingResized")):(this._isBeingResized&&this._onManualSizeChangeEnd(),this._isBeingResized=!1,d.remove(this.domNode,"isBeingResized"),this.parentGrid&&d.remove(this.parentGrid.domNode,"isBeingResized"),n.stealFocus(),setTimeout(function(){this._isBeingResizedDelayed=!1}.bind(this),100));this._tooltipHandles.forEach(function(b){a?
b.suspend():b.resume()})},updateSizers:function(){this._updateSizers()},_updateSizers:function(){function a(){var a=b.getAngle();b._sizers.forEach(function(c){h.positionSizer({sizer:c,dir:c._dir,w:b.getWidth(),h:b.getHeight(),angle:a})})}this._createSizers();if(this._sizers&&this.hasAllSidesSizers){var b=this;5<this.domNode.clientHeight?a():setTimeout(a,100)}},_onManualSizePreChange:function(){this.onManualSizePreChange()},_onManualSizeChange:function(a){this.inherited(arguments);this.showSizeLabel&&
this._showAndUpdateSizeLabel();this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&("e"===a?b.showColumnTooltip(this):"s"===a&&b.showRowTooltip(this))},_onManualSizeChangeEnd:function(){n.hide(this.sizeLabel);this.showSizeLabelsInAllRelatedCells&&this._hideRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&b.removeTooltip();this.onManualSizeChangeEnd()},tryUpdateSizeLabel:function(){n.isNodeInLayout(this.sizeLabel)&&(this.showSizeLabel&&
this._showAndUpdateSizeLabel(),this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels())},_showAndUpdateSizeLabel:function(){if(this.domNode){this.sizeLabel=this.sizeLabel||c.create("div",{"class":"elementSizeLabel"},this.domNode);n.show(this.sizeLabel);var a=this.domNode.clientWidth,b=this.domNode.clientHeight,d=l.convert(a,"px",this.viewModel.getUnits()),f=l.convert(b,"px",this.viewModel.getUnits());this.sizeLabel.innerHTML=e.substitute(this.viewModel.provideUnits(t.elementSizeFormat),
{width:this.viewModel.roundForUnits(d),height:this.viewModel.roundForUnits(f)});d=this.sizeLabel.clientHeight;this.sizeLabel.style.left=Math.round((a-this.sizeLabel.clientWidth)/2)+"px";this.sizeLabel.style.top=Math.round(20<b?(b-d)/2:-d-5)+"px"}},_showAndUpdateRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){a._showAndUpdateSizeLabel()})},_hideRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(a){n.hide(a.sizeLabel)})},_getRelatedCells:function(){return this.parentGrid?
this.parentGrid.getFieldCells().filter(function(a){return a!==this},this):[]},onManualSizePreChange:function(){},onManualSizeChangeEnd:function(){},onManualSizeChange:function(){},onManualWidthChange:function(a){},onManualHeightChange:function(a){},onNeedShiftPositionFromResizing:function(a,b){},onResizeSnapped:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeColumnRowTooltipVisualizer":function(){define("dojo/_base/declare dojo/string dojo/dom-construct dojo/dom-geometry esri/dijit/geoenrichment/utils/PageUnitsConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c){c=c.geoenrichment.dijit.ReportPlayer.ValueField;var a={},b=k(null,{_cell:null,_isColumn:null,_tooltip:null,constructor:function(a,b){this._cell=a;this._isColumn=b},show:function(){this.destroy();this._tooltip=f.create("div",{"class":"esriGEAdjustableGrid_resizableColumnTooltip"},document.body);this.update()},update:function(){setTimeout(this._doUpdate.bind(this))},_doUpdate:function(){if(this._tooltip&&this._cell.domNode){var a=e.position(this._cell.domNode),b=e.position(this._cell.parentGrid.domNode),
f=this._cell.viewModel;this._isColumn?(this._tooltip.innerHTML=g.substitute(f.provideUnits(c.columnWidth),{width:f.roundForUnits(d.convert(this._cell.domNode.clientWidth,"px",f.getUnits()))}),this._tooltip.style.left=a.x+(a.w-this._tooltip.clientWidth)/2+"px",this._tooltip.style.top=b.y-this._tooltip.clientHeight-10+"px"):(this._tooltip.innerHTML=g.substitute(f.provideUnits(c.rowHeight),{height:f.roundForUnits(d.convert(this._cell.domNode.clientHeight,"px",f.getUnits()))}),this._tooltip.style.left=
b.x-this._tooltip.clientWidth-10+"px",this._tooltip.style.top=a.y+(a.h-this._tooltip.clientHeight)/2+"px")}},destroy:function(){this._tooltip&&f.destroy(this._tooltip);this._tooltip=null}}),h,l;a.showColumnTooltip=function(b){a._showTooltip(b,!0)};a.showRowTooltip=function(b){a._showTooltip(b,!1)};a._showTooltip=function(c,d){l!==c&&a.removeTooltip();l=c;h?h.update():(h=new b(c,d),h.show())};a.removeTooltip=function(){h&&h.destroy();l=h=null};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeEngine":function(){define("dojo/on dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil".split(" "),
function(k,g,f,e,d,c){var a={ALL_DIRECTIONS:"e se s sw w nw n ne".split(" "),trackSizer:function(b){var f=a._getSizerInfo(b),g,n=c.getCursorPosition().clientX,m=c.getCursorPosition().clientY,p=b.w,t=b.h,q=0,r=0,u=k(document.body,"mousemove",function(h){h.preventDefault();h.stopPropagation();b.applyShift(-q,-r);r=q=0;var k=c.getCursorPosition().clientX,l=c.getCursorPosition().clientY,u=[0,0,k-n,l-m],l=k=0,v;v=b.supportsCtrlShift&&h.shiftKey;var y=b.supportsCtrlShift&&e.isCtrl(h);f.changeWVector&&f.changeHVector&&
v&&(v=d.normalizeVector(f.vector),u=d.calcDotProduct(u,v),u=[0,0,v[2]*u,v[3]*u]);b.onSnapped(null);f.changeWVector&&(k=d.calcAngleBetweenVectors(f.changeWVector,u),k=d.calcVectorLength(u)*Math.cos(k)||0);f.changeHVector&&(l=d.calcAngleBetweenVectors(f.changeHVector,u),l=d.calcVectorLength(u)*Math.cos(l)||0);k=k&&a._restricVectorDelta(k,f.changeWVector,b);l=l&&a._restricVectorDelta(l,f.changeHVector,b);u=k&&a._snapVectorDelta(k,f.calcBoundaryWVectors(p,t,l),b);v=l&&a._snapVectorDelta(l,f.calcBoundaryHVectors(p,
t,k),b);u&&u.canSnap&&v&&v.canSnap&&(u.canSnap=Math.abs(u.minDelta)<=Math.abs(v.minDelta),v.canSnap=Math.abs(v.minDelta)<Math.abs(u.minDelta));u&&u.canSnap&&(b.onSnapped(u.snapInfo),k=u.snappedDelta);v&&v.canSnap&&(b.onSnapped(v.snapInfo),l=v.snappedDelta);y&&(k*=2,l*=2);g||!k&&!l||(b.onPreChange(),g=!0);u=k||l;v=p+k;var F=t+l;u&&(y?(q=p/2-v/2,r=t/2-F/2):(y=f.calcOppositePoint(v,F),q=f.oppositePoint[0]-y[0],r=f.oppositePoint[1]-y[1]),b.applyShift(q,r),b.setWidth(v),b.setHeight(F));u&&b.onSizeChanged(h);
k&&b.onWidthChanged(h);l&&b.onHeightChanged(h)}),y=k.once(document.body,"mouseup, click",function(a){a.preventDefault();a.stopPropagation();y.remove();u.remove();b.onEnd()})},_getSizerInfo:function(a){function b(a,b){var f,h,g,k,l,m;switch(c){case "e":f=[a,b/2];h=g=[0,b/2];l=[[0,0,a,0],[0,b,a,b]];break;case "se":f=[a,b];h=[0,0];g=[0,b];k=[a,0];l=[[0,b,a,b],[0,0,a,0]];m=[[a,0,a,b],[0,0,0,b]];break;case "s":f=[a/2,b];h=k=[a/2,0];m=[[0,0,0,b],[a,0,a,b]];break;case "sw":f=[0,b];h=[a,0];g=[a,b];k=[0,0];
l=[[a,b,0,b],[a,0,0,0]];m=[[0,0,0,b],[a,0,a,b]];break;case "w":f=[0,b/2];h=g=[a,b/2];l=[[a,0,0,0],[a,b,0,b]];break;case "nw":f=[0,0];h=[a,b];g=[a,0];k=[0,b];l=[[a,0,0,0],[a,b,0,b]];m=[[0,b,0,0],[a,b,a,0]];break;case "n":f=[a/2,0];h=k=[a/2,b];m=[[0,b,0,0],[a,b,a,0]];break;case "ne":f=[a,0],h=[0,b],g=[0,0],k=[a,b],l=[[0,0,a,0],[0,b,a,b]],m=[[a,b,a,0],[0,b,0,0]]}var n=[a/2,b/2];f=d.rotatePointAroundPoint(n,f,e);h=d.rotatePointAroundPoint(n,h,e);g=g&&d.rotatePointAroundPoint(n,g,e);k=k&&d.rotatePointAroundPoint(n,
k,e);a=[h[0],h[1],f[0],f[1]];g=g&&[g[0],g[1],f[0],f[1]];k=k&&[k[0],k[1],f[0],f[1]];l=l&&l.map(function(a){return d.rotateVectorAroundPoint(a,n,e)});m=m&&m.map(function(a){return d.rotateVectorAroundPoint(a,n,e)});return{sizerPoint:f,oppositePoint:h,vector:a,changeWVector:g,changeHVector:k,boundaryWVectors:l,boundaryHVectors:m}}var c=a.dir,e=a.angle,f=b(a.w,a.h);return{oppositePoint:f.oppositePoint,vector:f.vector,changeWVector:f.changeWVector,changeHVector:f.changeHVector,calcOppositePoint:function(a,
c){return b(a,c).oppositePoint},calcBoundaryWVectors:function(a,c,e){a=b(a,c).boundaryWVectors;e&&(e=d.addLengthToVector(d.normalizeVector(f.changeHVector),e),a[0]=d.addPointToVector(a[0],[e[2],e[3]]));return a},calcBoundaryHVectors:function(a,c,e){a=b(a,c).boundaryHVectors;e&&(e=d.addLengthToVector(d.normalizeVector(f.changeWVector),e),a[0]=d.addPointToVector(a[0],[e[2],e[3]]));return a}}},_restricVectorDelta:function(a,c,e){var b=e.getRestrictNodeBox();if(!b||0>=a||!a)return a;e=e.getThisBox();
var f=d.calcVectorLength(c);c=d.addLengthToVector(c,a);c=d.addPointToVector(c,[e.x,e.y]);var h=[b.x+b.w,b.y,b.x+b.w,b.y+b.h],g=[b.x,b.y,b.x+b.w,b.y];a=[b.x,b.y+b.h,b.x+b.w,b.y+b.h];b=d.intersect2Lines(c,[b.x,b.y,b.x,b.y+b.h]);h=d.intersect2Lines(c,h);g=d.intersect2Lines(c,g);a=d.intersect2Lines(c,a);var k=d.calcVectorLength(c),l=c;[b,h,g,a].forEach(function(a){if(a&&(a=[c[0],c[1],a[0],a[1]],0<d.calcDotProduct(c,a))){var b=d.calcVectorLength(a);b<k&&(k=b,l=a)}});l=d.subtractPointFromVector(l,[e.x,
e.y]);return d.calcVectorLength(l)-f},_snapVectorDelta:function(a,c,e){var b=e.getSnapNodeBoxes()||[];if(!b.length||!a)return a;var f=e.getThisBox(),h,g,k,l=Infinity;c.forEach(function(c){c=d.addLengthToVector(c,a);c=d.addPointToVector(c,[f.x,f.y]);var e=d.calcVectorLength(c);b.forEach(function(a){var b=a.box,f=a.tolerance;[[b.x,b.y,b.x,b.y+b.h],[b.x+b.w,b.y,b.x+b.w,b.y+b.h],[b.x+b.w/2,b.y,b.x+b.w/2,b.y+b.h],[b.x,b.y,b.x+b.w,b.y],[b.x,b.y+b.h,b.x+b.w,b.y+b.h],[b.x,b.y+b.h/2,b.x+b.w,b.y+b.h/2]].forEach(function(a,
m){var n=d.intersect2Lines(c,a);n&&(n=[c[0],c[1],n[0],n[1]],0<d.calcDotProduct(c,n)&&(n=d.calcVectorLength(n)-e,Math.abs(n)<=Math.abs(l)&&Math.abs(n)<=f&&(l=n,h=a,k=b,g=2<m)))})})});return{canSnap:!!h,snapInfo:h&&{elementBox:e.getThisFullBox(),snapBox:k,to:g?h[1]:h[0],isHorizontal:g},minDelta:h?l:NaN,snappedDelta:h?a+l:NaN}},positionSizer:function(b){var c,e,k=b.sizer;k.style.display="block";var m=b.dir,p=b.w,t=b.h;b=b.angle;var q=k.offsetWidth||12,r=k.offsetHeight||12;switch(m){case "e":c=p;e=t/
2;break;case "se":c=p;e=t;break;case "s":c=p/2;e=t;break;case "sw":c=0;e=t;break;case "w":c=0;e=t/2;break;case "nw":e=c=0;break;case "n":c=p/2;e=0;break;case "ne":c=p,e=0}b&&(e=d.rotatePointAroundPoint({x:p/2,y:t/2},{x:c,y:e},b),c=e.x,e=e.y);g.set(k,{left:c-q/2+"px",top:e-r/2+"px",cursor:a._getCursorDirection(m,b)+"-resize"});if("w"===m||"e"===m)f[30>t?"hide":"show"](k);if("s"===m||"n"===m)f[30>p?"hide":"show"](k);k.style.display=""},_getCursorDirection:function(b,c){if(!c)return b;c=d.angleTo0_360Range(c);
c=Math.round(c/45);b=a.ALL_DIRECTIONS.indexOf(b)+c;return a.ALL_DIRECTIONS[b%a.ALL_DIRECTIONS.length]}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBackgroundForegroundUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(k,g){var f={renderBackground:function(e,d,c){return f._renderSection(e,d,c,!0)},renderForeground:function(e,d,c){return f._renderSection(e,d,c,!1)},_renderSection:function(e,d,c,a){var b=a?e.backgroundNode:e.foregroundNode;b&&(b.innerHTML=
"");if(!d)return null;b={};b["class"]="esriGEAbsoluteStretched "+(a?"adjustableGrid_backgroundSection":"adjustableGrid_foregroundSection");b.initialWidth=e.getAllowedWidth();b.initialHeight=e.getHeight();b.json=d;b.viewModel=e.viewModel;b.theme=e.theme;b.parentWidget=e;b.currentFeatureIndex=e.currentFeatureIndex;b.initialViewMode=e.getViewMode();b.initialSpecificViewMode=e.getSpecificViewMode();k.mixin(b,c);return e.viewModel.layoutBuilder.createElement("section",b,f._provideNode(e,a))},_provideNode:function(e,
d){return d?e.backgroundNode=e.backgroundNode||g.create("div",{"class":"adjustableGridBackgroundNode"},e.domNode,"first"):e.foregroundNode=e.foregroundNode||g.create("div",{"class":"adjustableGridForegroundNode"},e.domNode)}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFloatingTablesUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(k,g){var f={renderFloatingTables:function(e,d,c,a){var b=a?e.backgroundFloatingTablesNode:e.foregroundFloatingTablesNode;
b&&(b.innerHTML="");if(!d)return null;b={"class":"esriGEAbsoluteStretched adjustableGrid_floatingTablesSection"};b.initialWidth=e.getAllowedWidth();b.initialHeight=e.getHeight();b.json=d;b.viewModel=e.viewModel;b.theme=e.theme;b.parentWidget=e;b.currentFeatureIndex=e.currentFeatureIndex;b.initialViewMode=e.getViewMode();b.initialSpecificViewMode=e.getSpecificViewMode();k.mixin(b,c);return e.viewModel.layoutBuilder.createElement("section",b,f._provideNode(e,a))},_provideNode:function(e,d){return d?
e.backgroundFloatingTablesNode=e.backgroundFloatingTablesNode||g.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"before"):e.foregroundFloatingTablesNode=e.foregroundFloatingTablesNode||g.create("div",{"class":"adjustableGridFloatingTablesNode"},e.mainNode,"after")}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBorderUtil":function(){define(["../../themes/PageBorderStyles","../../themes/ThemeLibrary","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes"],
function(k,g,f){var e={getBorderStyle:function(d,c,a,b,h){d=d.renderBordersFromTheme?e._getThemeBorderStyle(d,c,a,b,h):d.getViewMode()===f.EDIT?d.editModeBorderLineStyle&&e._getAllBorderStyle(b,h,d.editModeBorderLineStyle.width,d.editModeBorderLineStyle.color):d.previewModeBorderLineStyle&&e._getAllBorderStyle(b,h,d.previewModeBorderLineStyle.width,d.previewModeBorderLineStyle.color);return e._toBorderStyleFormat(d)},_getAllBorderStyle:function(d,c,a,b,e){return{l:a,r:d?a:0,t:a,b:c?a:0,color:b,style:e}},
_getThemeBorderStyle:function(d,c,a,b,f){var h=d.viewModel.getDocumentDefaultStyles(d.theme).border||g.getDefaultBorderSettings();if(h){var n=h.thickness,m=h.lineStyle,p=h.color;switch(h.style){case k.ALL:return e._getAllBorderStyle(b,f,n,p,m);case k.OUTER_ONLY:return{l:0===a.index?n:0,r:b?n:0,t:0===c.index?n:0,b:f?n:0,color:p,style:m};case k.INNER_ONLY:return{l:0<a.index?n:0,t:0<c.index?n:0,color:p,style:m};case k.HORIZONTAL_INNER_ONLY:return{t:0<c.index?n:0,color:p,style:m};case k.VERTICAL_INNER_ONLY:return{l:0<
a.index?n:0,color:p,style:m};default:return d.noThemeBorderLineStyle&&e._getAllBorderStyle(b,f,d.noThemeBorderLineStyle.width,d.noThemeBorderLineStyle.color)}}},_toBorderStyleFormat:function(d){return d&&{borderTopColor:d.color,borderTopWidth:d.t,borderTopOpacity:1,borderTopStyle:d.style,borderRightColor:d.color,borderRightWidth:d.r,borderRightOpacity:1,borderRightStyle:d.style,borderBottomColor:d.color,borderBottomWidth:d.b,borderBottomOpacity:1,borderBottomStyle:d.style,borderLeftColor:d.color,
borderLeftWidth:d.l,borderLeftOpacity:1,borderLeftStyle:d.style}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/WaitingUtil ./GridDataUtil ./GridStyleUtil ./GridCellContentScaler ./GridCellContentSynchronizer ../../supportClasses/conditionalStyling/ConditionalStyleUtil ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes ./GridQueryUtil ./tooltip/GridCellTooltipBuilder ../../../_devConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v){function w(a){var b=a.parentGrid;return a[b.hasRealBorders||b.isMultiDataTable()?"getContentWidth":"getWidth"]()}function A(a){var b=a.parentGrid;return a[b.hasRealBorders||b.isMultiDataTable()?"getContentHeight":"getHeight"]()}var C={color:"#FF0000"},z={color:"#AAAAAA",fontStyle:"italic",fontSize:13,horizontalAlign:"center",verticalAlign:"middle"},D=k(null,{_parentState:null,constructor:function(a,b,c){var d=this;h.fitContentInsideCell(a);this._setParentState(a);
c.forEach(function(c){var e=c[1];b.own(f.after(a,c[0],function(){d._checkParentChanged(e,a)&&(h.fitContentInsideCell(a),l.syncParentFieldInfoWithElementState(a,b))}))})},_setParentState:function(a){var b=a.getFullStyle();this._parentState={width:w(a),height:A(a),horizontalAlign:b.horizontalAlign,verticalAlign:b.verticalAlign}},_checkParentChanged:function(a,b){var c;switch(a){case "width":a=w(b);this._parentState.width!==a&&(this._parentState.width=a,c=!0);break;case "height":a=A(b);this._parentState.height!==
a&&(this._parentState.height=a,c=!0);break;case "horizontalAlign":case "verticalAlign":if(a=b.getFullStyle(),this._parentState.horizontalAlign!==a.horizontalAlign||this._parentState.verticalAlign!==a.verticalAlign)this._parentState.horizontalAlign=a.horizontalAlign,this._parentState.verticalAlign=a.verticalAlign,c=!0}return c}});return k(null,{renderCellContent:function(b){var c=b.parentGrid,d=a.getFieldInfo(b);if(v.emulateErrors.reportContainerRenderError)throw Error("Error test: something crashed when building the UI layout!");
try{if(d){if(d.isReportSection)return this._placeReportSectionInCell(c,b);if(d.isInfographic)return this._placeInfographicInCell(c,b);if(d.isChart)return this._placeChartInCell(c,b);if(d.isMap)return this._placeMapInCell(c,b);if(d.isImage)return this._renderCellTooltip(b),this._placeImageInCell(c,b);if(d.isShape)return this._placeShapeInCell(c,b);d.isMissing&&b.setStyle(C);d.isUnsupportedContent&&b.setStyle(z)}this._applyRenderedContent(b,this._getRenderedContent(b));b.setContent(null);this._renderCellTooltip(b)}catch(G){if(console.log(G),
!e.tables.leaveEmptyCellsUponError)throw G;}},_renderCellTooltip:function(a){a.viewModel.dynamicReportInfo&&!e.isPlayerOnServer&&y.setDynamicTooltipToCell(a,a.viewModel.dynamicReportInfo.templateVariableProvider)},updateViewMode:function(b){var c=a.getFieldInfo(b);c&&(c.hasVariable||c.script||c.alias||c.isRichText)&&this._applyRenderedContent(b,this._getRenderedContent(b))},getRenderedContent:function(a){return this._getRenderedContent(a)},_getRenderedContent:function(b,c){var d=a.getFieldInfo(b);
if(d)return b=this._prepareRenderContextForFieldCell(b),g.mixin(b,c),d.isImage&&d.triggerJson&&d.triggerJson.fieldInfo&&(d=d.triggerJson.fieldInfo),m.renderFieldInfoInTableCell(d,b);c=b.gridData[b.column.field];return{formattedValue:null===c||void 0===c||"number"===typeof c&&isNaN(c)?"":c,value:c,formatFunction:null,isUnavailableData:!1,conditionalStyle:null}},_prepareRenderContextForFieldCell:function(a){var b=a.parentGrid,c=b.getViewMode()===q.EDIT,d=this._getCellBenchmarkInfoBuilder(a);return{previewValues:this._isPreviewValues(a),
previewConditionalStyle:!c,getPreviewValueFunction:b.getPreviewValueFunction,fieldData:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:b.getFeatureIndexForCell(a),currentFeatureAttributes:b.currentFeatureAttributes,rowIndex:a.gridData&&a.gridData.index,columnIndex:a.column&&a.column.index,columnField:a.column&&a.column.field,numRows:b.store.data.length,isGraphicReport:b.viewModel.isGraphicStyle,isMultiFeature:b.viewModel.dynamicReportInfo&&b.viewModel.dynamicReportInfo.isMultiFeature,
presetFilter:!c&&b.presetFilter,presetSorting:!c&&b.presetSorting,isBenchmarked:!!d,getBenchmarkInfo:d&&d.getBenchmarkInfo}},_isPreviewValues:function(b){var c=b.parentGrid;b=a.getFieldInfo(b);var d=c.getSpecificViewMode(),c=c.getViewMode()===q.PREVIEW_VALUES;b&&b.name&&0===b.name.indexOf("SiteNote")&&(c=!0);d&&b&&(d[r.RICH_TEXT]===q.PREVIEW_VALUES&&b.isRichText?c=!0:d[r.VARIABLE]===q.PREVIEW_VALUES&&a.isVariableLikeFieldCell(b)?c=!0:d[r.SPECIAL]===q.PREVIEW_VALUES&&a.isSpecialFieldCell(b)?c=!0:d[r.INFOGRAPHIC]===
q.PREVIEW_VALUES&&b.isInfographic&&(c=!0));return c},_applyRenderedContent:function(c,d){d&&(this._setCellFormattedValue(c,d),d.isUnavailableData||("number"!==typeof d.value||isNaN(d.value)||(a.setNumericCellValue(c,d.value),c.setNumberValue(d.value,d.formatFunction,c.parentGrid.enableNumberAnimation)),d.conditionalStyle?(c.setStyle(d.conditionalStyle.style),"string"===typeof d.conditionalStyle.formattedValue&&this._setCellFormattedValue(c,d.conditionalStyle),c.__hasConditionalStyle=!0):!1===d.conditionalStyle||
c.__hasConditionalStyle?(delete c.__hasConditionalStyle,c.setStyle(b.combineCellStyle(c.parentGrid,c.gridData,c.column))):d.modifiedValue&&"string"===typeof d.modifiedValue.formattedValue&&this._setCellFormattedValue(c,d.modifiedValue)),c.parentGrid&&c.parentGrid.viewModel.dynamicReportInfo&&c.setUrl(a.getFieldCellUrl(c)))},_setCellFormattedValue:function(b,c){if("number"===typeof c.value&&!isNaN(c.value)){var d=this._getCellBenchmarkInfoBuilder(b);d&&b.setBenchmarkInfo(d.getBenchmarkInfo(c.value))}a.setFieldCellContent(b,
c.formattedValue)},_getCellBenchmarkInfoBuilder:function(a){var b=this,c=a.parentGrid;return c.viewModel.isBenchmarkedArea&&c.viewModel.isBenchmarkedArea(c.getFeatureIndexForCell(a))&&{isBenchmarked:!0,getBenchmarkInfo:function(e,f){var h=a;f&&(h={gridData:{fieldInfos:{}},column:a.column,parentGrid:c},h.gridData.fieldInfos[h.column.field]=f);f=b._getRenderedContent(h,{currentFeatureIndex:c.viewModel.getBenchmarkController().getAreaIndex()});h=e-f.value;return{ownValue:e,isGreater:0<=h,value:Math.abs(h),
formattedValue:f.formatFunction?f.formatFunction(Math.abs(h)):d.formatNumber(Math.abs(h)),noTextLimit:c.viewModel.getBenchmarkController().hasNoTextLimit()}}}},_placeReportSectionInCell:function(b,d){function e(){if(d.domNode)return f._createReportSectionFromParams(b,d,h)}var f=this,h={"class":"adjustableGrid_inCellSection"};h.json=a.getFieldInfo(d).sectionJson;h.viewModel=b.viewModel;h.theme=b.theme;h.viewPortContainer=b.viewPortContainer;h.parentWidget=d;h.currentFeatureIndex=b.getFeatureIndexForCell(d);
h.currentFeatureAttributes=b.currentFeatureAttributes;h.initialWidth=w(d);h.initialHeight=A(d);h.noContentOffset=u.cellHasFloatingTableParent(d);h.initialViewMode=b.getViewMode();h.parentGridCell=d;h.elementUsageType=(b.isReportContainerPageGrid||b.parentGrid&&b.parentGrid.isReportContainerPageGrid)&&t.PAGE_PANEL_SECTION;var g=b.viewModel.layoutBuilder.getClass("section");return g.isAsync?c.showProgressPromise(d.domNode,g.loadModules()).then(e):e()},_createReportSectionFromParams:function(a,b,c){a=
c.json&&c.json.stack&&c.json.type!==p.EMPTY?a.viewModel.layoutBuilder.createElement("section",c,b.getContentContainerNode()):a.viewModel.layoutBuilder.createElement("emptySection",c,b.getContentContainerNode());b.setContent(a);new D(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeInfographicInCell:function(b,d){function e(){if(d.domNode)return f._createInfographicFromParams(b,d,h,g)}var f=this,h=a.getFieldInfo(d).infographicJson,g={viewModel:b.viewModel,theme:b.theme,
parentWidget:d,currentFeatureIndex:b.getFeatureIndexForCell(d),currentFeatureAttributes:b.currentFeatureAttributes,getPreviewValueFunction:b.getPreviewValueFunction,width:w(d),height:A(d),adjustElementsWhenResized:u.cellHasFloatingTableParent(d)},k=b.viewModel.layoutBuilder.getClass("infographic");return k.isAsync?c.showProgressPromise(d.domNode,k.loadModules()).then(e):e()},_createInfographicFromParams:function(a,b,c,d){c=a.viewModel.layoutBuilder.createElement("infographic",{node:b.getContentContainerNode(),
placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});c.setViewMode&&c.setViewMode(a.getViewMode());new D(b,c,[["onWidthChanged","width"],["onHeightChanged","height"]]);return c},_placeChartInCell:function(b,d){function e(){if(d.domNode)return f._createChartPageFromParams(b,d,g,h)}var f=this,h={viewModel:b.viewModel,theme:b.theme,currentFeatureIndex:b.getFeatureIndexForCell(d),currentFeatureAttributes:b.currentFeatureAttributes,parentWidget:d},g=a.getFieldInfo(d).chartJson;g.visualProperties.width=
d.getWidth();g.visualProperties.height=d.getHeight();var k=b.viewModel.layoutBuilder.getClass("chart");return k.isAsync?c.showProgressPromise(d.domNode,k.loadModules()).then(e):e()},_createChartPageFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("chart",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new D(b,a,[["onWidthChanged","width"],["onHeightChanged","height"]]);return a},_placeMapInCell:function(b,d){function e(){if(d.domNode)return g=
f._createMapFromParams(b,d,h,k)}var f=this,h=a.getFieldInfo(d).mapJson,g,k={viewModel:b.viewModel,theme:b.theme,parentWidget:d,currentFeatureIndex:b.getFeatureIndexForCell(d),currentFeatureAttributes:b.currentFeatureAttributes},l=b.viewModel.layoutBuilder.getClass("map");return l.isAsync?c.showProgressPromise(d.domNode,l.loadModules()).then(e):e()},_createMapFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("map",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},
json:c,creationParams:d});new D(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a},_placeImageInCell:function(b,c){function d(){if(c.domNode)return p=e._createImageFromParams(b,c,h,q)}var e=this,f=a.getFieldInfo(c),h=f.imageJson,g=w(c),k=A(c);if(f.triggerJson)if(b.viewModel.dynamicReportInfo){var l=m.getValueFromFieldData(f.triggerJson.fieldInfo,{fieldData:b.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes});
n.processImageJsonForTrigger(h,l.value,f.triggerJson);l.isUnavailableData||"number"!==typeof l.value||isNaN(l.value)||(a.setNumericCellValue(c,l.value),c.setNumberValue(l.value,l.formatFunction,!1))}else(l=m.getConditionalStylePreview(f,c.gridData.index))&&"number"===typeof l.value&&!isNaN(l.value)&&(n.processImageJsonForTrigger(h,l.value,f.triggerJson),a.setNumericCellValue(c,l.value));h.style.width&&h.style.height&&!1!==h.ownSizeInsideParent&&Math.round(h.style.width)!==Math.round(g)&&Math.round(h.style.height)!==
Math.round(k)?h.ownSizeInsideParent=!0:(h.ownSizeInsideParent=!1,h.style.width=g,h.style.height=k);var p,q={viewModel:b.viewModel,theme:b.theme,parentWidget:c,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes,alignParams:c.getFullStyle(),imageTriggerJson:f.triggerJson,onInitialized:function(){if(c.domNode){var a=w(c),b=A(c);p&&p.resize({w:a,h:b},c.getFullStyle())}}},f=b.viewModel.layoutBuilder.getClass("image");return f.isAsync?f.loadModules().then(d):
d()},_createImageFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("image",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},json:c,creationParams:d});new D(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a},_placeShapeInCell:function(b,c){function d(){if(c.domNode)return k=e._createShapeFromParams(b,c,f,l)}var e=this,f=a.getFieldInfo(c).shapeJson,h=w(c),g=A(c);f.style.width=h;f.style.height=g;var k,l=
{viewModel:b.viewModel,theme:b.theme,parentWidget:c,currentFeatureIndex:b.getFeatureIndexForCell(c),currentFeatureAttributes:b.currentFeatureAttributes,alignParams:c.getFullStyle(),getPreviewValueFunction:b.getPreviewValueFunction,applyThemeStyle:b.applyThemeStyle},h=b.viewModel.layoutBuilder.getClass("shape");return h.isAsync?h.loadModules().then(d):d()},_createShapeFromParams:function(a,b,c,d){a=a.viewModel.layoutBuilder.createElement("shape",{node:b.getContentContainerNode(),placeFunc:function(a){b.setContent(a)},
json:c,creationParams:d});new D(b,a,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return a}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridStyleUtil":function(){define(["./GridLayoutCalculator","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil","../valueField/ValueField"],function(k,g,f,e){var d={filterCellStyles:function(c){return d._filterCellStyles(c,e.SUPPORTED_STYLES)},filterCellTextStyles:function(c){return d._filterCellStyles(c,
e.SUPPORTED_TEXT_STYLES)},_filterCellStyles:function(c,a){var b={},d;for(d in c)void 0!==c[d]&&a[d]&&(b[d]=c[d]);return b},combineCellStyle:function(c,a,b,e){var h={};if(d._isContainerCell(c,a,b))e=e||a.style.fields&&a.style.fields[b.field],f.copyOwnJsonProperties(e,h),delete h.backgroundColor;else{var n=c.viewModel.getDocumentDefaultStyles&&c.viewModel.getDocumentDefaultStyles(c.theme);f.copyOwnJsonProperties(n,h);delete h.backgroundColor;d._canApplyDefaultTableStyle(c)&&c.viewModel.getTableDefaultStyles&&
f.copyOwnJsonProperties(c.viewModel.getTableDefaultStyles(c.theme,"Default"),h);f.copyOwnJsonProperties(a.style,h);c.applyThemeStyle&&f.copyOwnJsonProperties(a.themeStyle&&a.themeStyle.fields&&a.themeStyle.fields[b.field],h);c.inheritThemeBackground||g.isTransparent(h.backgroundColor)||delete h.backgroundColor;e=e||a.style.fields&&a.style.fields[b.field];f.copyOwnJsonProperties(e,h);if(h.overrideStyle&&c.viewModel.getTableDefaultStyles&&(e=c.viewModel.getTableDefaultStyles(c.theme,h.overrideStyle)))for(var m in e)if("backgroundColor"!==
m||c.inheritThemeBackground||g.isTransparent(e[m]))h[m]=e[m]}h.width=k.calcFieldWidth(c,a,b.field);h.height=k.calcDataHeight(c,a,b.field);return d.filterCellStyles(h)},_isContainerCell:function(c,a,b){return c.viewModel.isGraphicStyle?c.isReportContainerPageGrid?!0:(a=a.fieldInfos&&a.fieldInfos[b.field])?a.isReportSection?!0:c.isSingleCelledTable()&&(a.isImage||a.isShape||a.isInfographic||a.isChart||a.isMap):!1:!1},_canApplyDefaultTableStyle:function(c){return c.viewModel.isGraphicStyle?c.isMultiDataTable():
!0}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentScaler":function(){define(["./GridDataUtil"],function(k){return{fitContentInsideCell:function(g){var f=k.getFieldInfo(g);if(f&&g.content){var e=g.content,d=g.parentGrid,c=g[d.hasRealBorders||d.isMultiDataTable()?"getContentWidth":"getWidth"](),d=g[d.hasRealBorders||d.isMultiDataTable()?"getContentHeight":"getHeight"]();f.isReportSection?(e.setHeight(d,{resizeContentProportionally:!0}),e.setWidth(c,{resizeContentProportionally:!0})):
f.isChart?e.resize(c,d):f.isInfographic?e.resize(c,d):f.isMap?e.resize({w:c,h:d}):(f.isImage||f.isShape)&&e.resize({w:c,h:d},g.getFullStyle())}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentSynchronizer":function(){define(["./GridDataUtil","../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(k,g){return{syncParentFieldInfoWithElementState:function(f,e){if(f&&e){var d=k.getFieldInfo(f);d&&(d.isChart?(d.chartJson.visualProperties.width=f.getWidth(),
d.chartJson.visualProperties.height=f.getHeight()):d.isMap?k.setFieldInfo(f,g.createFieldInfoFromMap(e.toJson())):d.isImage?k.setFieldInfo(f,g.createFieldInfoFromImage(e.toJson(),e.imageTriggerJson)):d.isShape?k.setFieldInfo(f,g.createFieldInfoFromShape(e.toJson())):d.isReportSection?k.setFieldInfo(f,g.createFieldInfoFromSection(e.toJson())):d.isInfographic&&k.setFieldInfo(f,g.createFieldInfoFromInfographic(e.toJson())))}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer":function(){define(["../../../grid/coreUtils/GridDataUtil",
"./utils","./_FieldInfoPreviewRenderer","./_FieldInfoDataRenderer","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e,d){function c(a,b){b=b||15;return!a||a.length<=b?a:a.substr(0,b-3)+"..."}var a=d.geoenrichment.dijit.ReportPlayer.ReportPlayer.missingVariable,b=d.geoenrichment.dijit.ReportPlayer.ReportPlayer.unsupportedContent;d=d.geoenrichment.dijit.ReportPlayer.VariableStates;var h={},l={renderPreview:function(a,b){return b.fieldData?e.getValueFromFieldData(a,b):f.getValuePreview(a,b)},tryProvideConditionalStylePreview:function(a,
b,c){a.isUnavailableData||a.conditionalStyle||c.fieldData||!(b=f.getConditionalStylePreview(b,c))||(a.conditionalStyle=c.previewConditionalStyle?b:!1)},tryProvideRangeFilterPreview:function(a,b){a.isUnavailableData||a.modifiedValue||b.fieldData||!b.presetFilter||(a.modifiedValue=f.getRangeFilterPreview(b))},tryProvideSortingPreview:function(a,b){a.isUnavailableData||b.fieldData||!b.presetSorting||(a.modifiedValue=f.getSortingPreview(b))}},n={buildVariableLabel:function(a){var b;if(a.isWebMap)b=c(a.webMapFieldName)+
"(WebMap)";else if(a.isSiteAttribute)b=c(a.alias)+"(SiteAttribute)";else if(a.isDataLayerAttribute)b=c(a.alias)+"(NearbyLocations)";else if(a.isCustomDataCollection)b=c(a.alias)+"(CustomData)";else a:{b=a.variableID;switch(a.statefulName&&a.statefulName.charAt(0).toLowerCase()){case "p":a=d.statePercent_short;break;case "a":a=d.stateAverage_short;break;case "i":a=d.stateIndex_short;break;case "r":a=d.stateReliability_short;break;default:break a}b=b+" ("+a+")"}return"["+b+"]"},_SCRIPT_ALIAS_RE:/\s/g,
buildScriptLabel:function(a){a=a.alias?a.alias.replace(n._SCRIPT_ALIAS_RE,""):g.name.renderScriptName(a.name);return"["+c(a,40)+"]"}},m={renderRichTextFieldInfoInTableCell:function(a,b){return g.richText.createRichTextFromFieldInfo(a,function(a){var c=h.renderFieldInfoInTableCell(a,b),d=c.formattedValue;b&&b.isBenchmarked&&(a=b.getBenchmarkInfo(c.value,a))&&a.formattedValue&&(d+=" ("+(a.isGreater?"+":"-")+a.formattedValue+")");return d})}};h.renderFieldInfoInTableCell=function(c,d){d=d||{};var e=
{formattedValue:null,value:null,formatFunction:null,isUnavailableData:!1,conditionalStyle:null,modifiedValue:null};if(c.isRichText)return e.formattedValue=m.renderRichTextFieldInfoInTableCell(c,d),e;if(c.isMissing)return e.formattedValue=a,e.isUnavailableData=!0,e;if(c.isUnsupportedContent)return e.formattedValue=b,e.isUnavailableData=!0,e;if(d.previewValues){if(e=l.renderPreview(c,d),e.isUnavailableData)return e}else e.formattedValue=c.hasVariable?n.buildVariableLabel(c):c.script?n.buildScriptLabel(c.script):
"["+c.alias+"]";if(k.isVariableLikeFieldCell(c)&&(l.tryProvideConditionalStylePreview(e,c,d),l.tryProvideRangeFilterPreview(e,d),l.tryProvideSortingPreview(e,d),e.formattedValue=g.format.providePercentCurrencySymbols(e.formattedValue,c,{placePercentCurrencyInFront:!d.previewValues}),e.formatFunction)){var f=e.formatFunction;e.formatFunction=function(a){return g.format.providePercentCurrencySymbols(f(a),c,{placePercentCurrencyInFront:!d.previewValues})};e.conditionalStyle&&void 0===e.conditionalStyle.formattedValue&&
(e.conditionalStyle.formattedValue=e.formatFunction(e.conditionalStyle.value));e.modifiedValue&&void 0===e.modifiedValue.formattedValue&&(e.modifiedValue.formattedValue=e.formatFunction(e.modifiedValue.value))}return e};h.getConditionalStylePreview=function(a,b){var c={};l.tryProvideConditionalStylePreview(c,a,{rowIndex:b,previewConditionalStyle:!0});return c.conditionalStyle};h.renderRichTextFieldInfoInTableCell=m.renderRichTextFieldInfoInTableCell;h.getValueFromFieldData=e.getValueFromFieldData;
h.getFieldDataValue=e.getFieldDataValue;return h})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer":function(){define("dojo/string ./utils ./FieldInfoPreviewSampleUtil ./FieldInfoPreviewAttributeUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/DateUtil ../../../grid/coreUtils/sorting/GridSortUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig ../../../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){m=m.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var t={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSep:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},q=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,r={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40,X9074_A:326},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,
TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,POPGRWCYCY:1.05,POPGRWCYFY:1.12,ECYPTAPOP:20456,ECYHNIMED:55650},numberSep:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,
X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},
u={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG","Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD","Tickets to Movies/Museums/Parks: Average":"X9074_A"},y={};return{getValuePreview:function(a,b){return h.isVariableLikeFieldCell(a)?this._getVariableOrScriptPreview(a,b):this._getNonVariablePreview(a,b)},_getVariableOrScriptPreview:function(b,d){function h(a){return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}}function g(a,
d){function e(a){a=0<b.decimals?a+.5432123456789:Math.round(a);return c.formatNumber(a,{places:b.decimals||0,noSeparator:!b.useThousandsSeparator,preserveTrailingZeroes:!0})}d=a;d=0<b.decimals?Number((d+.5432123456789).toFixed(b.decimals)):Math.round(d);return{formattedValue:e(a),value:d,formatFunction:function(a){return e(a)},isUnavailableData:!1}}var k=this._getSampleCacheType(b);if(p.preview.bigValues&&("number"===k||"numberSep"===k))return g(1E12,k);if(d=this._getValueFromPreviewFunction(b,d))return g(d.value,
d.propName);d=f.findNonEmptySample(b);if("string"===typeof d)return h(d);if("number"===typeof d)return g(d,k);var l=b.type||b.isSiteAttribute&&b.attribute.type;d=b.isSiteAttribute&&e.getAttributePreviewValue(b.attribute);if("esriFieldTypeDate"===l)return k=new Date,d&&k.setTime(d),h(a.formatDateShort(k));if("esriFieldTypeString"===l)return h(r.string[b.isDataLayerAttribute?b.attribute.name:b.variableID]||d||m.sampleTextValue);if("number"===typeof d)return g(d,k);d=y[k]=y[k]||{};var l=b.name+";"+b.decimals,
n=d[l];if(!n){var n=r[k],q;q=b.variableID?b.variableID:b.script&&u[b.script.alias];n=n[q];n||(n=t[k],n=n[Math.round((n.length-1)*Math.random())]);n=d[l]=n}return g(n,k)},_getSampleCacheType:function(a){var b=a.statefulName?"p"===a.statefulName.charAt(0):a.showPercent,c=a.statefulName&&"i"===a.statefulName.charAt(0),d=a.hasVariable&&q.test(a.variableID);return b?d?"percentSmall":"percent":c?"index":d?"numberSmall":a.useThousandsSeparator?"numberSep":"number"},_getValueFromPreviewFunction:function(a,
b){if(b=b.getPreviewValueFunction&&b.getPreviewValueFunction({fieldInfo:a})){var c=this._getSampleCacheType(a),c=0===c.indexOf("percent")?"percent":"number";b=b.fields&&b.fields[a.name]||b;return{value:b[c]||b.value,propName:c}}return null},_getNonVariablePreview:function(a,b){var c=void 0;if(b.getPreviewValueFunction){var d=b.getPreviewValueFunction({fieldInfo:a});d&&(d=d.fields&&d.fields[a.name]||d,c=d.formattedValue||d.value)}void 0===c&&("headers.AREA_DESC"===a.name&&-1<b.currentFeatureIndex?
(a=1+2*b.currentFeatureIndex,c=1===a?l.getSingleUnits()?"1 "+l.getSingleUnits():k.substitute(m.fieldPreviewAreaDescWithRadiusSingular,{radius:a}):l.getPluralUnits()?a+" "+l.getPluralUnits():k.substitute(m.fieldPreviewAreaDescWithRadiusPlural,{radius:a})):c=g.fields.getPreview(a.name,b.isGraphicReport,b.isMultiFeature)||a.alias);return{formattedValue:c,value:c,formatFunction:null,isUnavailableData:!1}},getConditionalStylePreview:function(a,b){if(a.triggerJson&&void 0!==b.rowIndex){var c=this._getValueFromPreviewFunction(a,
b);if(c)return{style:d.getConditionalStyle(c.value,a.triggerJson),value:c.value};if(b=a.triggerJson.cases[b.rowIndex%a.triggerJson.cases.length]){a=d.styleFromSetters(b.setters);var e;1===b.compareInfos.length?(e=Number(b.compareInfos[0].value),b=b.compareInfos[0].operator,"\x3e"===b?e++:"\x3c"===b&&e--):2===b.compareInfos.length&&(e=(Number(b.compareInfos[1].value)+Number(b.compareInfos[0].value))/2);return{style:a,value:e}}}return null},getRangeFilterPreview:function(a){if(a.presetFilter&&n.isRangeType(a.presetFilter.method)){if(a.presetFilter.columnIndex!==
a.columnIndex)return null;var b=n.getRangeStatistics(a.presetFilter.ranges),c=b.min,b=b.max;isFinite(c)||isFinite(b)?isFinite(b)?isFinite(c)||(c=0===b?0:0<b?b/2:2*b):b=0!==c?Math.abs(2*c):100:(c=0,b=100);var d=(b-c)/a.numRows;return{value:c+d*a.rowIndex,_min:c,_max:b,_step:d}}},getSortingPreview:function(a){var c=a.presetFilter&&this.getRangeFilterPreview(a);if(!a.presetSorting.order||a.presetSorting.field!==a.columnField)return c;var d=100,e=0,f=e+a.numRows*d;c&&(e=c._min,f=c._max,d=c._step);return{value:a.presetSorting.order===
b.ORDER_ASC?e+a.rowIndex*d:f-a.rowIndex*d}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewSampleUtil":function(){define(["dojo/_base/lang"],function(k){var g={findNonEmptySample:function(f){if(!f)return null;var e;return f.isSiteAttribute?(f.attribute.domain&&f.attribute.domain.codedValues&&f.attribute.domain.codedValues.some(function(d){if(g._isNonEmptySample(d.name))return e=d.name,!0}),e):f.isDataLayerAttribute&&f.attribute.samples&&
f.attribute.samples.length?(f.attribute.samples.some(function(d){if(g._isNonEmptySample(d))return e=d,!0}),e):null},getNonEmptySamples:function(f){if(!f)return null;if(f.isSiteAttribute){if(f.attribute.domain&&f.attribute.domain.codedValues)return f.attribute.domain.codedValues.map(function(e){return e.name}).filter(g._isNonEmptySample)}else if(f.isDataLayerAttribute&&f.attribute.samples&&f.attribute.samples.length)return f.attribute.samples.filter(g._isNonEmptySample);return null},_isNonEmptySample:function(f){return"string"===
typeof f?!!f.trim():!!f},provideSamplesFromLocatorSettings:function(f,e){f&&f.isDataLayerAttribute&&e&&e.searchText&&(f.attribute=k.clone(f.attribute),f.attribute.samples=g.getSamplesFromSearchText(e,20)||f.attribute.samples)},getSamplesFromSearchText:function(f,e){if(!f||!f.searchText)return null;var d=[];f=f.searchText.charAt(0).toUpperCase()+f.searchText.substr(1);for(var c=0;c<e;c++)d.push(f+" "+(c+1));return d}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewAttributeUtil":function(){define(["esri/dijit/geoenrichment/utils/FieldUtil",
"dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var f={},e={BUILDING_AREA:5E3,SITE_AREA:1E4,FRONTAGE:800,PARKING:300};f.getAttributePreviewValue=function(d){if(!d)return"";if(d.domain&&"codedValue"===d.domain.type)return d.domain.codedValues[0].name;if("esriFieldTypeString"===d.type)return g.sampleTextValue;if("esriFieldTypeDate"===d.type){var c=new Date;d.domain&&"range"===d.domain.type&&c.setTime(d.domain.range[0]);return c.getTime()}c=d.domain&&"range"===
d.domain.type?d.domain.range[0]:e[d.name]||Number((100*Math.random()+50).toFixed(1));return"i"===k.isNumericField(d)?Math.round(c):c};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoDataRenderer":function(){define("esri/dijit/geoenrichment/ReportPlayer/config ../../conditionalStyling/ConditionalStyleUtil ../../../../dataProvider/supportClasses/data/AreaDataUtil ../../../../dataProvider/supportClasses/attachments/AttributesUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a){function b(a,b){return void 0===a||null===a||"number"===typeof a&&isNaN(a)||"NaN"===a||"N/A"===a||"undefined"===a||"null"===a||b&&"number"!==typeof a}a=a.geoenrichment.dijit.ReportPlayer.ReportPlayer;var h={getValueFromFieldData:function(c,f){function l(){b(n,v)?t=void 0:v?(t=h._formatValue(n,c),q=function(a){return h._formatValue(a,c)}):t=String(n)}f=f||{};var n=void 0,t=void 0,q,r=!1,u,y=!1,v=d.isNumericVariableFieldCell(c);if(f.getPreviewValueFunction){var w=f.getPreviewValueFunction({fieldInfo:c,
currentFeatureIndex:f.currentFeatureIndex,currentFeatureAttributes:f.currentFeatureAttributes});w&&(y=!0,w=w.fields&&w.fields[c.name]||w,n=w.value,"string"===typeof w.formattedValue?t=w.formattedValue:l())}y||((n=n=h._getFieldDataValue(c,{fieldData:f.fieldData,featureIndex:f.currentFeatureIndex,featureAttributes:f.currentFeatureAttributes,isMultiFeature:f.isMultiFeature}))&&"object"===typeof n?(f=n,n=f.value,t=e.formatAttributeValue(f,{skipFormattedValue:!0,unavailableDataValue:void 0,format:c})):
l());b(n,v)&&(n=void 0);b(t,!1)&&(t=void 0);void 0===n&&void 0===t&&(console.log("Error: can't calculate value for \x3d\x3e "+c.name),n=NaN,t=k.tables.showUnavailableData?a.unavailableDataShort:"",r=!0);c.triggerJson&&(u={style:g.getConditionalStyle(n,c.triggerJson),value:n,formattedValue:t});return{value:n,formattedValue:t,formatFunction:q,isUnavailableData:r,conditionalStyle:u}},_formatValue:function(a,b){return c.formatNumber(a,{places:b.decimals||0,noSeparator:!b.useThousandsSeparator,preserveTrailingZeroes:!0})},
getFieldDataValue:function(a,b){return(a=h._getFieldDataValue(a,b))&&"object"===typeof a?a.value:a},_getFieldDataValue:function(a,b){return a&&f.getAreaDataValue({fieldName:a.templateName||a.name,fieldData:b.fieldData,featureIndex:b.featureIndex,featureAttributes:b.featureAttributes,isMultiFeature:b.isMultiFeature})}};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes":function(){define([],function(){var k={PAGE_PANEL_SECTION:"pagePanelSection",INFOGRAPHIC_HEADER_SECTION:"infographicHeaderSection",
INFOGRAPHIC_SECTION:"infographicSection",INFOGRAPHIC_ICON_TABLE:"infographicIconTable",INFOGRAPHIC_VARIABLE_TABLE:"infographicVariableTable",INFOGRAPHIC_DESC_TABLE:"infographicDescTable",isInfographicLike:function(g){return g===k.INFOGRAPHIC_HEADER_SECTION||g===k.INFOGRAPHIC_SECTION}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes":function(){define([],function(){return{RICH_TEXT:"richText",VARIABLE:"variable",SPECIAL:"special",INFOGRAPHIC:"infographic"}})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/GridCellTooltipBuilder":function(){define("dojo/_base/declare ../GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../supportClasses/WidgetQueryUtil ../../valueField/supportClasses/TextRenderer ./_ScriptExpressionBuilder esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){m=m.geoenrichment.dijit.ReportPlayer.Grid;var p=k(null,{_cell:null,_content:"",constructor:function(a){this._cell=a},getContent:function(){return this._content?"\x3cdiv class\x3d'esriGEAdjustableGridValueField_cellTooltipContent'\x3e"+this._content+"\x3c/div\x3e":null},addValue:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e"},addImageValue:function(a){var b=g.getNumericCellValue(a);
isNaN(b)||"number"!==typeof b||(a=a.numberFormatFunction?a.numberFormatFunction(b):h.formatNumber(b),this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+a+"\x3c/div\x3e")},addAlias:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e\x3cb\x3e"+m.variable+"\x3c/b\x3e "+a+"\x3c/div\x3e"},buildRichText:function(a){var b=this._cell.parentGrid.viewModel.dynamicReportInfo;a=d.renderFieldInfoInTableCell(a,{previewValues:!0,fieldData:b&&
b.fieldData,isGraphicReport:!0,currentFeatureIndex:this._cell.parentGrid.currentFeatureIndex});this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a.formattedValue+"\x3c/div\x3e"},addExpression:function(a,c){if(a=b.buildTooltipExpression(a,c))this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+m.variableIsBasedOnExpression+"\x3c/div\x3e",this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a+"\x3c/div\x3e"},addConditionalStyleLegend:function(a){var b=g.getNumericCellValue(a),c=g.getConditionalFormatting(a);
a=g.getFieldInfo(a).isImage;this._content+=f.createLegendNode(c,a?"image":"text",b).outerHTML},addTextBlock:function(a){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+a+"\x3c/div\x3e"},addSeparator:function(){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentSeparator'\x3e\x3c/div\x3e"}}),t=/<\w/,q={value:!1,alias:!0,expression:!1,conditional:!1},r={setDynamicTooltipToCell:function(a,b,c){if((a.hasOverflowText()||g.isVariableLikeFieldCell(a)||
g.isImageTriggerCell(a))&&r.isTooltipVisible(a)){var d=r.getTooltipInfo(a),e=r.getSourceFieldInfo(a),e=e&&!(!e.script&&!e.expressionText)&&d.expression,d=!!d.fieldInfo,d=e||d;a.own(l.setTooltipToNode(a.domNode,function(){return r.renderCellTooltip(a,b,c)},{notRestricted:e,stayOnHover:d,classes:"esriGEAdjustableGridValueField_cellTooltip"+(d?"":" esriGENonInteractable"),style:r.getTooltipStyleFunc(a)}))}},getTooltipInfo:function(a){var b=r.getSourceFieldInfo(a);return b&&b.tooltipInfo?b.tooltipInfo:
(a=c.getReportContainerGrid(a))&&a.tooltipInfo&&a.tooltipInfo.table||q},isTooltipVisible:function(a){var b=r.getSourceFieldInfo(a);if(b&&b.dataDrillingPanelInfo)return!1;a=r.getTooltipInfo(a);return a.value||a.alias||a.expression||a.conditional||a.fieldInfo},getSourceFieldInfo:function(a){var b=g.getFieldInfo(a);a=g.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},getTooltipStyleFunc:function(a){return function(){return r.getTooltipStyle(a)}},getTooltipStyle:function(a){if(!a.parentGrid)return null;
var b={},c=a.parentGrid.viewModel.getCurrentTheme(a.parentGrid.theme).table.tooltip;h.copyOwnJsonProperties(c,b);h.copyOwnJsonProperties(r.getTooltipInfo(a).style,b);return b},renderCellTooltip:function(b,c,d){d=d||{};var f=d.getExpression||function(a){return n.modules.complexCellTooltips&&a.expressionText},h=a.getFullText(b),k=g.getFieldInfo(b),l=k&&k.isImage,m=g.isVariableLikeFieldCell(k),q=g.getConditionalFormatting(b),u=r.getSourceFieldInfo(b),v=k&&k.isRichText||h&&t.test(h),y=new p(b),H=r.getTooltipInfo(b);
m?(H.value&&h&&y.addValue(h),H.alias&&y.addAlias(e.getFieldInfoAlias(k))):l?(H.value&&y.addImageValue(b),H.alias&&y.addAlias(e.getFieldInfoAlias(u))):h&&!v&&H.value&&h&&y.addValue(h);H.fieldInfo&&y.buildRichText(H.fieldInfo);if(H.expression){var J=f(u);J&&y.addExpression(J,c)}H.conditional&&q&&n.modules.complexCellTooltips&&(J&&y.addSeparator(),d.conditionalLegendDesc&&y.addTextBlock(d.conditionalLegendDesc),y.addConditionalStyleLegend(b));return y.getContent()}};return r})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleLegendBuilder":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../images/ImageDataHolder ./ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b){b=b.geoenrichment.dijit.ReportPlayer.ConditionalLegend;var h={},l={"\x3d":"equals","\x3c":"less","\x3e":"greater","\x3c\x3d":"lessOrEquals","\x3e\x3d":"greaterOrEquals"};h.createLegendNode=function(h,m,p){function n(c){function d(b){var c=a.parseNumber(b);return isNaN(c)?b:a.formatNumber(c)}if(!c.compareInfos||!c.compareInfos.length)return!1;if("image"===m&&"default"===c.compareInfos[0].value)return b.conditionalLegend_default;c=c.compareInfos.map(function(a){return k.substitute(b["conditionalLegend_operator_"+
l[a.operator]],{value:d(a.value)})});return 1===c.length?c[0]:k.substitute(b.conditionalLegend_interval,{from:c[0],to:c[1]})}if(!m)return null;var q=f.create("div",{"class":"esriGEConditionalStylingLegend esriGEConditionalStylingLegend_"+m});f.create("div",{"class":"esriGEConditionalStylingLegend_row",innerHTML:b.conditionalLegend_title},q);var r=c.getMatchedCase(p,h);h.cases.some(function(a){var h=n(a),k=c.styleFromSetters(a.setters);if(h&&k){var l=f.create("div",{"class":"esriGEConditionalStylingLegend_row"},
q),p=f.create("div",{"class":"dijitInline"},l);"image"===m?f.create("div",{"class":"esriGEConditionalStylingLegend_symbolImage dijitInline"},p).style.backgroundImage="url("+(d.getImageData(a.setters[0].value)||"")+")":("chart"===m?g.add(p,"esriGEConditionalStylingLegend_symbolChart"):(g.add(p,"esriGEConditionalStylingLegend_text"),p.innerHTML=b.conditionalLegend_preview),p.style.backgroundImage="none",e.set(p,k));f.create("div",{"class":"dijitInline esriGESpaceBeforeBig",innerHTML:h},l);r===a&&g.add(l,
"esriGEConditionalStylingLegend_currentValue")}});return q};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/_ScriptExpressionBuilder":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil"],function(k){var g=/\s*/g,f=/(!.*?!|\+|\-|\*|\/|\(|\)|\^|\d+\.\d+|\d+)/g,e=/___.*?___/g,d=/___(.*?)___/g,c=/!/g,a=/\d+/;return{buildTooltipExpression:function(a,c){a=Array.isArray(a)?this._validateExpression(a,c):this._maskAndValidateExpressionText(a,c);if(!a||!a.length)return null;
c="";for(var b=0,d=a.length;b<d;b++){var e=a[b],f=a[b+1];"*"!==e.operator&&"/"!==e.operator||!f||"1"!==f.number?e.variableAlias?c+="\x3cdiv class\x3d'dijitInline'\x3e\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expressionVariable'\x3e"+e.variableAlias+"\x3c/div\x3e\x3c/div\x3e":e.operator?c+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionOperator'\x3e"+e.operator+"\x3c/div\x3e":void 0!==e.number&&(c+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionNumber'\x3e"+
e.number+"\x3c/div\x3e"):b++}return"\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expression'\x3e"+c+"\x3c/div\x3e"},_maskAndValidateExpressionText:function(b,h){b=b.replace(g,"");b=b.replace(f,"___$1___");return b.replace(e,"").length?null:b.match(e).map(function(b){b=b.replace(d,"$1");return 0===b.indexOf("!")?(b=h.get(b.replace(c,"")),{variableAlias:b&&b.alias||"N/A"}):b.match(a)?{number:k.formatNumber(Number(b))}:{operator:b}})},_validateExpression:function(b,c){return b.map(function(b){return b.variable?
(b=c.get(b.variable.fullName),{variableAlias:b&&b.alias||"N/A"}):"number"===typeof b.name||"string"===typeof b.name&&b.name.match(a)?{number:k.formatNumber(Number(b.name))}:{operator:b.name}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutSizer":function(){define(["./GridLayoutCalculator"],function(k){var g={resizeToFitAllowedWidth:function(f,e){g._resizeWidthForParams(f,{resetWidth:!0,columnsToPreserve:f.columns,stickToRight:!0,rightOffsetWeight:e&&e.rightOffsetWeight})},
resizeToFitWidth:function(f,e){e&&!isNaN(e)&&g._resizeWidthForParams(f,{resetWidth:!0,columnsToPreserve:f.columns,newWidth:e})},_resizeWidthForParams:function(f,e){k.recalcColumns(f,e);f.getFieldCells().forEach(function(d){d.setWidth(k.calcFieldWidth(f,d.gridData,d.column.field))});g._makeFinalAdjustments(f)},_makeFinalAdjustments:function(f){k.positionCells(f);f.getFieldCells().forEach(function(e){e.updateSizers&&e.updateSizers()});f.getFieldCells().forEach(function(e){e.updateRotationControls&&
e.updateRotationControls()})},resizeToFitHeight:function(f,e){k.recalcRowsToFitHeight(f,e);f.getFieldCells().forEach(function(d){d.setHeight(k.calcDataHeight(f,d.gridData,d.column.field))});g._makeFinalAdjustments(f)},scaleProportionallyWithinParent:function(f,e){var d=f.getTableBox();f.setPosition(d.l*e.xScale,d.t*e.yScale);1!==e.xScale&&g.resizeToFitWidth(f,d.w*e.xScale);1!==e.yScale&&g.resizeToFitHeight(f,d.h*e.yScale)},scaleProportionallyPreservingCenter:function(f,e){var d=f.getTableBox(),c=
d.w*e.xScale,a=d.h*e.yScale;f.setPosition(d.l+(d.w-c)/2,d.t+(d.h-a)/2);1!==e.xScale&&g.resizeToFitWidth(f,c);1!==e.yScale&&g.resizeToFitHeight(f,a)}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/_GridDebugUtil":function(){define(["esri/dijit/geoenrichment/when","../../../_devConfig"],function(k,g){var f={},e=0;f.refreshStart=function(d){g.table.printGridRefresh&&(d=f._getGridInfo(d,!0),console.log("AdjustableGrid.js "+d.key+" \x3d\x3e refresh \x3d\x3e start"))};f.refreshEnd=
function(d){g.table.printGridRefresh&&k(d.getRenderPromise(),function(){var c=f._getGridInfo(d,!1);console.log("AdjustableGrid.js "+c.key+" \x3d\x3e refresh \x3d\x3e end ("+c.refreshTime+" ms)")})};f._getGridInfo=function(d,c){var a;if(d.isReportContainerPageGrid)a="Page grid";else{var b=[];for(a=d.parentWidget;a;){b.push(a);if(a.isReportContainerPageGrid)break;a=a.parentWidget}a=b[b.length-1].getFieldCells().indexOf(b[b.length-2]);for(var b=b.length,f="",g=0;g<b;g++)f+="\x3e";void 0===d._debugId&&
(d._debugId=e++);a="panel "+a+" "+f+"("+d._debugId+")"}var k;c?d._degubStartTime=(new Date).getTime():k=(new Date).getTime()-d._degubStartTime;return{key:a,refreshTime:k}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartContainer":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/when dijit/_WidgetBase dijit/_TemplatedMixin ./_ChartLegendSupport ./_ChartEventSupport ./_ChartComparisonSupport esri/dijit/geoenrichment/ReportPlayer/config ./utils/ChartTypes ./utils/ChartSorting ./utils/ChartJsonUtil ./utils/builder/ChartPlots ./utils/ChartFilterUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/WaitingUtil ../sections/dynamicSettings/supportClasses/FilterUtil ../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil dojo/text!../templates/ChartContainer.html dojo/i18n!esri/nls/jsapi ../../_devConfig".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z,D,F,B,E,G){function H(){if(a)return a.promise;var a=new e;k("dojox/charting/Chart dojox/charting/action2d/Magnify ./utils/action2d/Highlight ./utils/builder/ChartBuilder ./utils/ChartCalculator ./utils/ChartStyleUtil ./tooltips/ChartTooltip ./iconRendering/IconRenderer ./textRendering/TextRenderer ./tableViewRendering/TableViewRenderer".split(" "),function(b,c,d,e,f,h,k,l,m,n){M=b;I=c;P=d;K=e;N=f;Q=h;R=k;L=l;O=m;S=n;J=g(M,{_renderPlotBackground:function(a,
b,c,d){this.theme.plotarea.backgroundImageData?this.surface.createImage({src:this.theme.plotarea.backgroundImageData,x:b.l-1,y:b.t-1,width:c+2,height:d+2}):this.inherited(arguments)}});a.resolve()});return a.promise}E=E.geoenrichment.dijit.ReportPlayer.ChartContainer;var J,M,I,P,K,N,Q,R,L,O,S;return g([h,l,n,m,p],{templateString:B,nls:E,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,immediateRender:!1,chartTheme:null,enableAxisLabelsAutoTilt:!1,isEditMode:!1,chart:null,_currentSeries:null,
_iconRenderer:null,_textRenderer:null,_tableViewRenderer:null,_tableViewInfo:null,_renderChartPendingFlag:!1,postCreate:function(){this.inherited(arguments);this._showError(!1);w.hide(this.missingVariablesDiv);this.viewModel.isGraphicStyle&&d.add(this.domNode,"graphicReportChart");d.add(this.domNode,this.viewModel.isLightDocumentTheme(this.theme)?"light":"dark");this._showEmptyView(!1)},_currentSeriesItems:null,_currentSeriesItemsUnfiltered:null,_originalSeriesItems:null,_currentVisualProperties:null,
_currentChartType:null,_currentComparisonInfo:null,_currentDataDrillingPanelInfo:null,_isMultiFeatureChart:null,_initPromise:null,_firstRenderPromise:null,_hasPresetFilter:null,updateChart:function(c){var d=this;this._destroyChart();if(c)return this._checkForMissingVariables(c),this._currentChartType=c.type,this._currentSeriesItems=(this._isMultiFeatureChart=c.isMultiFeatureChart)?u.getSeriesItemsForMultiFeatureChart(c.type,c.seriesItems,this.viewModel.dynamicReportInfo&&this.viewModel.dynamicReportInfo.fieldData.areaData):
c.seriesItems,this._originalSeriesItems=c.seriesItems&&c.seriesItems.slice(),this._currentVisualProperties=c.visualProperties,this._currentComparisonInfo=c.comparisonInfo,this._currentDataDrillingPanelInfo=c.dataDrillingPanelInfo,a.set(this.domNode,{width:this._currentVisualProperties.width+"px",height:this._currentVisualProperties.height+"px"}),this.domNode.style.backgroundColor=this._currentVisualProperties.panelBackgroundColor||"",w.hide(this.chartLabel),this._initPromise=H().then(function(){d.domNode&&
(d._initChartComparisonSelect(),d._updateLabels(),d._createChart(),!t.isPlayerOnServer&&d._addPlotEventListeners(),d._createLegend())}),this._firstRenderPromise=b(this._initPromise,function(){var a=d._currentVisualProperties.filter;d._hasPresetFilter=!!a;return!a||a.ranges&&!d.viewModel.dynamicReportInfo?d._updateSeries():b(d.getFilterRanges(),function(b){b=b.map(function(b){var c=D.filterData(b.dataArray,a);return{fieldName:b.fieldName,min:c[0],max:c[c.length-1]}});return d._setFilterRanges(b)})}),
z.showProgressPromise(this.domNode,this._initPromise)},getRenderPromise:function(){return this._firstRenderPromise},_checkForMissingVariables:function(a){var b,c,d;F.processChartFieldInfos(a,function(a,e){if(a.isMissing)switch(e){case "series":b=!0;break;case "tooltip":c=!0;break;case "dataDrilling":d=!0}});var e=b||c||d;w[e?"show":"hide"](this.missingVariablesDiv);e&&(this.missingVariablesDiv.innerHTML=b?E.containsMissingVariablesInData:c?E.containsMissingVariablesInTooltip:E.containsMissingVariablesInInteractivePanel,
this.missingVariablesDiv.style.top=(a.visualProperties.height-this.missingVariablesDiv.clientHeight)/2+"px")},isMultiFeatureChart:function(){return this._isMultiFeatureChart},getLegendNode:function(){return this.legendContainerDiv},getChartSeries:function(){return this._currentSeries},_updateLabels:function(){this.chartLabel.innerHTML=this._currentVisualProperties.title.text;w[this.chartLabel.innerHTML?"show":"hide"](this.chartLabel);this.chartLabel.style.textAlign=this._currentVisualProperties.title.align;
this.chartLabel.style.marginTop=(this._currentVisualProperties.title.verticalShift||0)+"px";var b=f.mixin({},this.viewModel.getChartDefaultStyles(this.theme).titleStyle,this._currentVisualProperties.title.style);delete b.backgroundColor;a.set(this.chartLabel,Q.getStyleObjWithUnits(b))},_createChart:function(){var a=c.create("div",{"class":"chartContainerDiv_innerChartNode"},this.chartContainerDiv),b=new J(a,{margins:this._getChartMargins()});this.chart=b;b.setTheme(this.chartTheme);K.getChartBuilder(this._currentChartType).configureChart({chart:b,
seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartType:this._currentChartType,comparisonInfo:this._currentComparisonInfo,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),viewModel:this.viewModel,currentFeatureIndex:this.currentFeatureIndex});if(!t.isPlayerOnServer){if(this.viewModel.dynamicReportInfo||G.charts.enableEffects)this._currentChartType===q.PIE&&new I(b,y.PRIMARY,{scale:1.03}),y.getWorkingPlots(b).forEach(function(a,c){new P(b,a)},this);
this._setChartTooltip()}},_getChartMargins:function(){function a(a){return"number"===typeof b._currentVisualProperties[a]?b._currentVisualProperties[a]:10}var b=this;return{t:a("marginTop"),r:a("marginRight"),b:a("marginBottom"),l:a("marginLeft")}},_setChartTooltip:function(){y.getWorkingPlots(this.chart).forEach(function(a,b){b=0===b?this._currentChartType:this._getComparisonChartType();(new R(this.chart,a,{duration:50})).setChartType(b)},this)},_destroyChart:function(){this._levelLineBuilder&&this._levelLineBuilder.hideLevelLine();
this.chartContainerDiv&&(this.chartContainerDiv.innerHTML="");this.chart&&this.chart.destroy();this.chart=null;this._destroyLegend()},_updateSeries:function(){var a=this;this._removeSeries();if(this.chart){if(!this._currentSeriesItems)return this.resize();this._seriesTotalStats={};this._currentSeries=K.getChartBuilder(this._currentChartType).calcSeries({chartContainer:this,chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,
themeSettings:this.viewModel.getChartDefaultStyles(this.theme),seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,currentFeatureIndex:this.currentFeatureIndex,plotStats:this._seriesTotalStats,excludedSeriesHash:this._excludedSeriesHash,sorting:this._sorting||this._currentVisualProperties.sorting,comparisonInfo:this._currentComparisonInfo,comparisonFeatureAttributes:this._getComparisonFeatureAttributes(),dataDrillingPanelInfo:this._currentDataDrillingPanelInfo});var c=
K.checkSeriesAreValid(this._currentSeries);this._showError(!c);var d;c&&(this._currentSeries.forEach(function(b){a._excludedSeriesHash[b.name]||a.chart.addSeries(b.name,b.data,b.params)}),d=this.resize());return b(d,function(){a.onContentUpdated()})}},_removeSeries:function(){var a=this;this._currentSeries=this._currentSeries||[];this._currentSeries.forEach(function(b){a.chart.removeSeries(b.name)});this._currentSeries.length=0},_chartWidth:0,_chartHeight:0,_resizedFlag:!1,_resizeDfd:null,_pendingResizeObj:!1,
resize:function(c,d,f){if(this._currentVisualProperties)return void 0!==c&&a.set(this.domNode,{width:c+"px",height:d+"px"}),b(this._initPromise,function(){if(w.isNodeInLayout(this.domNode))return void 0!==c&&N.resizeVisualProperties(this._currentVisualProperties,c,d),this._resizedFlag||(this.domNode.style.opacity="0"),this._resizeDfd=this._resizeDfd||new e,f||this.immediateRender?this._doResizeChart():A.invoke(this,"_doResizeChart",50);this._pendingResizeObj={width:c,height:d,immediate:f}}.bind(this))},
_doResizeChart:function(){if(this.chart){this._resizedFlag||(this.domNode.style.opacity="1");this._resizedFlag=!0;this._updateLegend();var a=N.calcChartDimentions(this,{visualProps:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chartType:this._currentChartType,maxIconSize:L.AXIS_ICON_MAX_SIZE,numPoints:this._currentSeries[0]?this._currentSeries[0].data.length:0}),b=a.w,a=a.h;if(this.enableAxisLabelsAutoTilt&&this.viewModel.isGraphicStyle&&q.hasAxis(this._currentChartType)&&
!q.isXAxisVertical(this._currentChartType)){var c=N.calcAxisLabelsAutoTilt(b,this._currentSeries,this._currentVisualProperties,this.viewModel.getChartDefaultStyles(this.theme));this.chart.getAxis("x").opt.rotation=c?-c:-this._currentVisualProperties.xAxis.labelsAngle}this._chartWidth=b;this._chartHeight=a;this._adjustErrorMessage();if(this._tableViewInfo)this._refreshTableView(),this._renderChartPendingFlag=!0;else{try{this.chart&&(this.chart.isPreRenderMode=q.isColumnBarLike(this._currentChartType),
this.chart.resize(this._chartWidth,this._chartHeight),this.chart.dirty&&this.chart.render(),q.isColumnBarLike(this._currentChartType)&&(K.getChartBuilder(this._currentChartType).updateBarSize({chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,currentFeatureIndex:this.currentFeatureIndex,viewModel:this.viewModel,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartSize:this.chart.plotArea[q.isColumnLike(this._currentChartType)?
"width":"height"],excludedSeriesHash:this._excludedSeriesHash,comparisonInfo:this._currentComparisonInfo,numComparisonFeatures:this._getNumComparisonFeatures()}),K.getChartBuilder(this._currentChartType).prettifyColumnBarYAxis({totalStat:this._seriesTotalStats,chart:this.chart,chartType:this._currentChartType,chartSeries:this._currentSeries,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),visualProperties:this._currentVisualProperties,chartSize:this.chart.plotArea[q.isColumnLike(this._currentChartType)?
"height":"width"],viewModel:this.viewModel})),this.chart.isPreRenderMode=!1,this.chart.dirty&&this.chart.render())}catch(T){console.log(T)}this._updateLegend();this._updateIcons();this._updateTexts();this._resizeDfd&&this._resizeDfd.resolve();this._resizeDfd=null;this.onRendered()}}},notifyShown:function(){var a=this;return b(this._initPromise,function(){w.isNodeInLayout(a.domNode)&&b(a._pendingResizeObj&&a.resize(a._pendingResizeObj.width,a._pendingResizeObj.height,a._pendingResizeObj.immediate),
function(){a._pendingResizeObj=null;a.viewModel.isAnimationAllowed()&&y.getWorkingPlots(a.chart).forEach(function(b,c){a.chart.getPlot(b).renderAnimation&&a.chart.getPlot(b).renderAnimation()})})})},onRendered:function(){},_getIconRendererClass:function(){return L},_updateIcons:function(){this._iconRenderer||(this._iconRenderer=(new this._getIconRendererClass)(),this.own(this._iconRenderer),this._iconRenderer.setViewMode(this._viewMode));this._iconRenderer.renderIcons({viewModel:this.viewModel,theme:this.theme,
parentWidget:this,chartType:this._currentChartType,iconNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chart:this.chart})},_getTextRendererClass:function(){return O},_updateTexts:function(){this._textRenderer||(this._textRenderer=(new this._getTextRendererClass)(),this._textRenderer.currentFeatureIndex=this.currentFeatureIndex,this.own(this._textRenderer),this._textRenderer.setViewMode(this._viewMode));
this._textRenderer.renderTexts({viewModel:this.viewModel,theme:this.theme,parentWidget:this,textNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,chart:this.chart})},_viewMode:null,setViewMode:function(a){if(this._viewMode!==a)return this._viewMode=a,b(this._initPromise,function(){this._iconRenderer&&this._iconRenderer.setViewMode(a);this._textRenderer&&this._textRenderer.setViewMode(a);this._tableViewRenderer&&this._tableViewRenderer.setViewMode(a)}.bind(this))},
_showError:function(a){G.emulateErrors.contentErrors&&(a=!0);w[a?"show":"hide"](this.errorDiv);w[a?"hide":"show"](this.chartNormalViewDiv)},_adjustErrorMessage:function(){this.errorDiv.style.paddingTop=a.get(this.domNode,"height")/2-20+"px"},_sorting:null,getSorting:function(){return this._sorting},sortChart:function(a){this._sorting=a&&a!==r.NONE?a:null;return b(this._initPromise,function(){this._updateSeries()}.bind(this))},_filterStats:null,_numShownElements:null,_filterRanges:null,canFilterAreas:function(){return this._isMultiFeatureChart&&
!!this._getGeoenrichment()},canFilterVariables:function(){return q.canFilterVariables(this._currentChartType,this._isMultiFeatureChart)},getFilterRanges:function(){return this.canFilterAreas()||this.canFilterVariables()?b(this._initPromise,function(){this.canFilterAreas()?this._filterStats=this._getGeoenrichment().collectFilterRangesStats():this._filterStats=v.collectStatsForVariables(this._currentChartType,this._currentSeriesItemsUnfiltered||this._currentSeriesItems,this._currentVisualProperties,
this.viewModel,this.currentFeatureIndex);return this._filterStats.filterRanges}.bind(this)):this._filterStats=null},setFilterRanges:function(a){this._hasPresetFilter=!1;return this._setFilterRanges(a)},_setFilterRanges:function(a){this._filterRanges=a;return b(this._initPromise,function(){this._currentSeriesItemsUnfiltered&&(this._currentSeriesItems=this._currentSeriesItemsUnfiltered,this._currentSeriesItemsUnfiltered=null);this._currentSeriesItemsUnfiltered=this._currentSeriesItems;var b=v.filterSeriesItems(this._currentChartType,
this._currentSeriesItems,this._currentVisualProperties,a,this.viewModel,this.currentFeatureIndex,this.canFilterAreas());this._currentSeriesItems=b.seriesItems;this._numShownElements=b.numShownElements;var c;this.canFilterAreas()&&this._setFilterRangesForComparison(a)?this._numShownElements+=this._getGeoenrichment().getAllGeographyAttributes().length:c=this._updateSeries();this._showEmptyView(!this._numShownElements);return c}.bind(this))},getNumElementsTotal:function(){return this._filterStats&&(this.canFilterAreas()?
this._filterStats.numAreasTotal:this._filterStats.numVariablesTotal)||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()},_showEmptyView:function(a){w[a?"hide":"show"](this.chartNormalViewDiv);w[a?"show":"hide"](this.noDataPlaceHolder);a&&this._syncEmptyViewPlaceholder()},_syncEmptyViewPlaceholder:function(){this.noDataPlaceHolder&&a.set(this.noDataPlaceHolder,"paddingTop",(a.get(this.domNode,"height")-a.get(this.noDataPlaceHolder,
"height"))/2+"px")},chartToTable:function(a){return b(this._initPromise,function(){this._removeTable();this._setIsTableView(a);w.hide([this.chartContainerDiv,this.legendContainerDiv]);for(var b=0;b<this.chartContainerWithAxis.children.length;b++){var c=this.chartContainerWithAxis.children[b];c!==this.tableContainerDiv&&w.hide(c)}this._tableViewRenderer||(this._tableViewRenderer=new S,this.own(this._tableViewRenderer),this._tableViewRenderer.setViewMode(this._viewMode));return this._refreshTableView(!0)}.bind(this))},
_refreshTableView:function(b){return this._tableViewRenderer.renderTableForChart({chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,parentWidget:this,tableNode:this.tableContainerDiv,width:a.get(this.domNode,"width"),height:this._chartHeight,chartSeries:this._currentSeries,visualProperties:this._currentVisualProperties,hasComparison:!!this._currentComparisonInfo,chart:this.chart,showAnimation:b,tableViewInfo:this._tableViewInfo})},
tableToChart:function(){if(this._tableViewInfo)return b(this._initPromise,function(){this._removeTable();if(this._renderChartPendingFlag)return this._renderChartPendingFlag=!1,b(this.resize(),this.notifyShown.bind(this));this.notifyShown()}.bind(this))},_removeTable:function(){this._setIsTableView(null);w.show([this.chartContainerDiv,this.legendContainerDiv]);for(var a=0;a<this.chartContainerWithAxis.children.length;a++)w.show(this.chartContainerWithAxis.children[a]);this._tableViewRenderer&&this._tableViewRenderer.destroyTable()},
_setIsTableView:function(a){this._tableViewInfo=a;d[this._tableViewInfo?"add":"remove"](this.domNode,"isChartDataInTableView");this._updateComparisonLabel()},getVisualState:function(){return{type:"chart",sorting:this.getSorting(),hasPresetFilter:this._hasPresetFilter,filterRanges:this._filterRanges&&f.clone(this._filterRanges),comparisonAttributes:this._comparisonAttributes,additionalAttributes:this._additionalAttributes&&this._additionalAttributes.slice(),tableViewInfo:this._tableViewInfo&&f.clone(this._tableViewInfo),
tableViewRenderer:this._tableViewRenderer&&this._tableViewRenderer.getVisualState(),excludedSeriesHash:this._excludedSeriesHash&&f.clone(this._excludedSeriesHash)}},setVisualState:function(a){if(a){this._excludedSeriesHash=a.excludedSeriesHash;var c=this;return b(this._initPromise,function(){return b(c._resizeDfd&&c._resizeDfd.promise,function(){return b(a.sorting&&c.sortChart(a.sorting),function(){return b(a.filterRanges&&c.setFilterRanges(a.filterRanges),function(){a.additionalAttributes&&(c._additionalAttributes=
a.additionalAttributes);return b(a.comparisonAttributes&&c._setComparisonAttributes(a.comparisonAttributes),function(){return b(a.tableViewInfo&&c.chartToTable(a.tableViewInfo),function(){return c._tableViewRenderer&&c._tableViewRenderer.setVisualState(a.tableViewRenderer)})})})})})})}},isMouseOver:function(a){return C.isMouseOver(this.domNode,{event:a})||this.comparisonSelect&&this.comparisonSelect.isMouseOver(a)},getWidth:function(){return this._currentVisualProperties.width},getHeight:function(){return this._currentVisualProperties.height},
onContentUpdated:function(){},onShowDataDrillingPreview:function(a){},onTooltipInfoCreated:function(a){},destroy:function(){this._destroyChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartLegendSupport":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style ./utils/ChartTypes ./utils/ChartStyleUtil ./utils/ChartCalculator ./legends/ChartLegendTypes ./legends/ChartLegendPlacements ./legends/MinMaxLegend ./legends/SelectableLegend ./legends/ChartLegendSymbols".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m){return k(null,{legend:null,_placements:[h.LEFT,h.RIGHT,h.TOP,h.BOTTOM],_excludedSeriesHash:null,_createLegend:function(){this._excludedSeriesHash={};this._placements.forEach(function(a){f.remove(this.domNode,"legendPlacement"+a)},this);this._currentVisualProperties.legend&&(this._currentVisualProperties.legend.type===b.MIN_MAX?this._createMinMaxLegend():this._createSeriesLegend())},_createSeriesLegend:function(){var a=this._currentVisualProperties.legend.series.placement;
a!==h.NONE&&(this.legend=(new n(g.mixin({chart:this.chart,chartType:this._currentChartType,allowSelect:!!this.viewModel.dynamicReportInfo&&(d.isColumnBarLike(this._currentChartType)||d.isLineLike(this._currentChartType)),isStacked:h.isOnSide(a),isRtlPlacement:a===h.LEFT&&!this.viewModel.isGraphicStyle,keepItemsTheSameWidth:!0,customLegendSymbol:this._currentVisualProperties.legend.series.symbol,defaultLegendSymbol:m.getDefaultSymbol(this._currentChartType,this.viewModel.isGraphicStyle),showValues:this._currentChartType===
d.WAFFLE,hideLastPoint:this._currentVisualProperties.legend.series.hideOthers,onSeriesExclusionChanged:g.hitch(this,this._onSeriesExclusionChanged)},this._getAdditionalLegendParams()))).placeAt(this.getLegendNode()),this._applyStyleToSeriesLegend(),f.add(this.domNode,"legendPlacement"+a))},_applyStyleToSeriesLegend:function(){var a=this.viewModel.getChartDefaultStyles(this.theme),a=g.mixin({},a.legendStyle,this._currentVisualProperties.legend.series.style);this.viewModel.isGraphicStyle||delete a.backgroundColor;
e.set(this.legend.domNode,c.getStyleObjWithUnits(a));this._currentVisualProperties.legend.series.hasBorder||e.set(this.legend.domNode,"border","none")},_createMinMaxLegend:function(){this._currentVisualProperties.legend.minMax&&this._currentVisualProperties.legend.minMax.placement!==h.NONE&&(this.legend=(new l({viewModel:this.viewModel,theme:this.theme,chartType:this._currentChartType})).placeAt(this.getLegendNode()),f.add(this.domNode,"hasMinMaxLegend"),f.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.minMax.placement))},
_getAdditionalLegendParams:function(){return null},_onSeriesExclusionChanged:function(a){this._excludedSeriesHash=a;this._updateSeries()},_updateLegend:function(){this.legend&&(this._currentVisualProperties.legend.type===b.MIN_MAX?this._updateMinMaxLegend():this._updateSeriesLegend())},_updateSeriesLegend:function(){this.legend.chartWidth=this.domNode.clientWidth-2*a.PRETTY_PADDING;var b=(!this._isMultiFeatureChart||d.isLineLike(this._currentChartType))&&this._currentComparisonInfo&&this._currentVisualProperties.legend.series.showComparison,
c=this._currentSeries.filter(function(a){return!a.isComparisonSeries||b});this.legend.series=c;this.legend.showSeriesData=1===c.length&&!d.isLineLike(this._currentChartType);c=!!this.viewModel.dynamicReportInfo&&1<c.length;c!==this.legend.allowSelect&&(this.legend.allowSelect=c);this.legend.refresh()},_updateMinMaxLegend:function(){var a=this._currentSeries.filter(function(a){return!a.isComparisonSeries});this.legend.refresh(a,this._currentVisualProperties)},_destroyLegend:function(){this.legend&&
this.legend.destroy();this.legend=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartStyleUtil":function(){define(["dojo/_base/lang"],function(k){var g={},f={left:1,right:1,top:1,bottom:1,width:1,height:1,fontSize:1};g.getStyleObjWithUnits=function(e,d){d=d||"px";e=k.mixin({},e);for(var c in e)if(f[c]){var a=e[c];!a||"string"===typeof a&&-1!==a.indexOf(d)||(e[c]=a+d)}return e};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator":function(){define("dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(k,g,f,e,d,c,a){return{PRETTY_PADDING:10,calcChartDimentions:function(b,c){var h=c.visualProps,n=c.comparisonInfo,m=c.chartType,p=c.maxIconSize,t=c.numPoints;c=h.width;var q=h.height,r=0,u=0,y=0,v,w,A,C,z=!a.isHidden(b.chartLabel),D=0;f.isColumnLike(m)&&!h.xAxis.show&&h.showAxisIcons&&(q+=30);z&&(D=g.get(b.chartLabel,"height")+(h.title.verticalShift||0),q-=D);h.showAxisIcons&&(f.isColumnLike(m)?q-=Math.min(p,(c-100)/t*.8)+10:f.isBarLike(m)&&(p=Math.min(p,(q-50)/t*.8)+10,r+=p,c-=p));var h=
h.legend||{},t=h[h.type===e.MIN_MAX?"minMax":"series"]||{},p=t.placement||d.NONE,t=(t.placementOffset||0)/100,F=p===d.LEFT||p===d.RIGHT,B=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetWidth+20,E=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetHeight+20;!n||!f.isComparisonSupported(m)||h.type===e.MIN_MAX&&F||(q-=E);F||g.set(b.getLegendNode(),{width:c-20+"px"});m=b.legend&&a.noTransformPosition(b.legend.domNode);m=k.mixin({w:0,h:0},m);F||g.set(b.getLegendNode(),{width:""});var G=F?q-
48:0;m.h=G?Math.min(m.h,G):m.h;m.h+=20;h.type===e.MIN_MAX&&F&&(m.w=Math.max(m.w,B));switch(p){case d.LEFT:v=10;w=D+q*t;r+=2*v+m.w;c-=r;break;case d.RIGHT:A=10;w=D+q*t;u+=2*A+m.w;c-=u;break;case d.TOP:q-=m.h;w=z?D+10:10;A=v=10;y+=m.h;break;case d.BOTTOM:q-=m.h,C=A=v=10,n&&(C+=E-10)}g.set(b.chartLabel,{marginLeft:"10px",marginRight:"10px"});g.set(b.chartContainerWithAxis,{marginTop:y+"px",marginLeft:r+"px",marginRight:u+"px"});b.legend&&g.set(b.legend.domNode,{maxHeight:G?G+"px":""});g.set(b.getLegendNode(),
{left:void 0!==v?v+"px":"",right:void 0!==A?A+"px":"",top:void 0!==w?w+"px":"",bottom:void 0!==C?C+"px":""});return{w:c,h:q}},calcAxisLabelsAutoTilt:function(b,d,e,f){if(!d||!d.length||0!==e.xAxis.labelsAngle)return!1;var h=!1,g=(b-50)/d[0].data.length-20;b=k.mixin({},f.xAxis.axisStyle,f.xAxis.style,e.xAxis.style);var l=a.getMeasureContext({style:"font-size:"+(b.fontSize||c.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(b.fontFamily||c.DEFAULT_FONT_FAMILY_GRAPHIC)});d[0].data.some(function(a){return l.measureText(a.name).w>
g})&&(h=20);l.destroy();return h},resizeVisualProperties:function(a,c,d){var b=a.width,e=a.height;a.width=c;a.height=d;a.floatingTexts&&a.floatingTexts.forEach(function(a){a.style.left*=c/b;a.style.top*=d/e});a.floatingIcons&&a.floatingIcons.forEach(function(a){a.style.left*=c/b;a.style.top*=d/e})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/MinMaxLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/ChartStyleUtil ../utils/ChartTypes dojo/text!../../templates/MinMaxLegend.html dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h){h=h.geoenrichment.dijit.ReportPlayer.MinMaxLegend;return k([e,d],{templateString:b,nls:h,viewModel:null,theme:null,chartType:null,refresh:function(b,d){function e(a){var b=a.fieldInfo;return b&&(b.script?b.script.alias:b.alias)||a.label}var h,k,l=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,u,y;b.forEach(function(a){a.data.forEach(function(b){var c=b.originalValue;c<l&&(l=c,h=b,u=a);c>n&&(n=c,k=b,y=a)})});if(k&&h){var v=this.viewModel.getChartDefaultStyles(this.theme);
b=g.mixin({},v.minMaxLegend.titleStyle,d.legend.minMax.titleStyle);var w=g.mixin({},v.minMaxLegend.minVariableLabelStyle,d.legend.minMax.minVariableLabelStyle);d=g.mixin({},v.minMaxLegend.maxVariableLabelStyle,d.legend.minMax.maxVariableLabelStyle);f.set(this.largestGroupTitleDiv,c.getStyleObjWithUnits(b));f.set(this.smallestGroupTitleDiv,c.getStyleObjWithUnits(b));this.largestGroupDiv.innerHTML=e(k.point);this.smallestGroupDiv.innerHTML=e(h.point);f.set(this.largestGroupDiv,c.getStyleObjWithUnits(d));
f.set(this.smallestGroupDiv,c.getStyleObjWithUnits(w));d.color||(this.largestGroupDiv.style.color=a.isLineLike(this.chartType)?y.params.stroke.color:k.fill);w.color||(this.smallestGroupDiv.style.color=a.isLineLike(this.chartType)?u.params.stroke.color:h.fill)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/SelectableLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/lists/FlowList ../utils/ThemeCalculator ./LegendSymbolRenderer".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p){var t=k(null,{createPresentation:function(b,h,g,k,m){var n=this,q=e.create("div",{"class":"selectableLegendRoot "+(this.isStacked()?"":"dijitInline")},g);q.style.paddingLeft=(this.isStacked()?3:10)+"px";q.style.paddingRight=(this.isStacked()?3:10)+"px";m=this.canSelect()&&new l(q,{"class":"dijitInline selectableLegendRootCheckbox"});k=p.renderSymbol({defaultSymbol:this.getDefaultLegendSymbol(),customSymbol:this.getCusomLegendSymbol(),marker:b.marker,stroke:b.stroke,
fill:b.fill,width:8,height:15});h=e.create("div",{innerHTML:b.label,"class":"dijitInline selectableLegendRootLabel TrimWithEllipses"});if(g=b.valueText&&e.create("div",{innerHTML:this.isStacked()?b.valueText:"("+b.valueText+")","class":"dijitInline selectableLegendRootValue TrimWithEllipses"}))g.style.marginLeft="10px";this.isRtlPlacement()?(e.place(h,q),g&&e.place(g,q),e.place(k,q)):(e.place(k,q),e.place(h,q),g&&e.place(g,q));m&&(m.set("checked",!b.unchecked),f[b.unchecked?"add":"remove"](q,"selectableLegendRoot_unselected"),
m.onClick=function(a){f[a.checked?"remove":"add"](q,"selectableLegendRoot_unselected");n.onSelectionChanged(b.label,a.checked)});(m=this.getItemMaxWidth())&&this.needFormatAsTable()&&(g&&(k=m-d.getMarginBox(k).w-d.getMarginBox(h).w-g.clientWidth,g.style.marginLeft=k+"px"),q.style.width=m+"px");this.setItemWidth(c.get(q,"width"),q.clientWidth);this.canEditLabel(b)&&(f.add(h,"isEditable"),a(h,"click",function(a){a.stopPropagation();n.onLabelClicked(b,q)}));return q},isRtlPlacement:function(){},isStacked:function(){},
needFormatAsTable:function(){},canSelect:function(){},onSelectionChanged:function(a,b){},getDefaultLegendSymbol:function(){},getCusomLegendSymbol:function(){},canEditLabel:function(a){},onLabelClicked:function(a,b){},getItemMaxWidth:function(){},setItemWidth:function(a,b){}});return k([b,h],{templateString:"\x3cdiv class\x3d'esriGESelectableLegend'\x3e\x3cdiv data-dojo-attach-point\x3d'listDiv'\x3e\x3c/div\x3e\x3c/div\x3e",series:null,allowSelect:!0,allowEditLabels:!1,showSeriesData:!1,isRtlPlacement:!1,
keepItemsTheSameWidth:!1,customLegendSymbol:null,defaultLegendSymbol:null,showValues:!1,isStacked:!1,hideLastPoint:!1,chartWidth:0,chartType:null,list:null,_isCollectingWidthsFlag:!1,_uncheckedSeriesHash:null,_itemMaxWidth:0,_itemFullWidths:null,_isFlowStacked:!1,postCreate:function(){var a=this;this._uncheckedSeriesHash={};var b=g.mixin(new t,{onSelectionChanged:function(b,c){c?delete a._uncheckedSeriesHash[b]:a._uncheckedSeriesHash[b]=!0;a.onSeriesExclusionChanged(a._uncheckedSeriesHash)},onLabelClicked:function(b,
c){if(a.showSeriesData)a.onPointLabelClickedAt(void 0!==b.unsortedIndex?b.unsortedIndex:a.list.items.indexOf(b),c);else a.onSeriesLabelClickedAt(a.list.items.indexOf(b),c)},isStacked:function(){return a.isStacked},needFormatAsTable:function(){return a.isStacked||a._isFlowStacked},canSelect:function(){return a.allowSelect},getDefaultLegendSymbol:function(){return a.defaultLegendSymbol},getCusomLegendSymbol:function(){return a.customLegendSymbol},canEditLabel:function(b){return!b.isComparisonSeries&&
a.allowEditLabels},isRtlPlacement:function(){return a.isRtlPlacement},getItemMaxWidth:function(){return a._isCollectingWidthsFlag?0:a._itemMaxWidth},setItemWidth:function(b,c){a._isCollectingWidthsFlag&&(a._itemFullWidths.push(c),a._itemMaxWidth=Math.max(a._itemMaxWidth,b))}});this.list=new n({"class":"selectableLegendFlowList",itemRenderer:b},this.listDiv);this.own(this.list);this.isRtlPlacement&&(this.domNode.style.textAlign="right")},refresh:function(){var a=this._getItems();this.list.domNode.style.width=
"";this._itemMaxWidth=0;this._itemFullWidths=[];this._isCollectingWidthsFlag=!0;this._isFlowStacked=!1;this.list.setItems(a);this._isCollectingWidthsFlag=!1;var b=0;this._itemFullWidths.forEach(function(a){b+=a});this._isFlowStacked=!this.isStacked&&this.chartWidth&&b>this.chartWidth;this.keepItemsTheSameWidth&&this.list.refresh();!this.isStacked&&this.chartWidth&&(this._isFlowStacked?(a=this.list.domNode.children[0].clientWidth,a=Math.max(1,Math.floor(this.chartWidth/a))*a+2):a=b+2,this.list.domNode.style.width=
a+"px")},_getItems:function(){var a=this,b=[];this.showSeriesData?(this.series&&this.series[0]&&this.series[0].data.forEach(function(c){var d={label:c.name||"",valueText:a.showValues?c.tooltip.valueLabel:null,unsortedIndex:c.unsortedIndex};c=a._getDataFillAndStrokeColors(null,c);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)}),this.hideLastPoint&&b.pop()):this.series&&this.series.forEach(function(c){var d={label:c.name,unchecked:!0===a._uncheckedSeriesHash[c.name],isComparisonSeries:c.isComparisonSeries};
c=a._getDataFillAndStrokeColors(c.params,c.data[0]);d.fill=c.fill;d.stroke=c.stroke;d.marker=c.marker;b.push(d)});return b},_getDataFillAndStrokeColors:function(a,b){a=a||{};var c=m.getPointIconStyle(b),d=a.markerFill||a.fill;d||(d=b.point&&b.point.hidden&&b.unhiddenFillColor||b.fill);d||(d=c.fillColor);var e=a.markerStroke&&a.markerStroke.color;e||(e=a.stroke&&a.stroke.color&&0<a.stroke.width?a.stroke.color:b.stroke&&b.stroke.color&&0<b.stroke.width?b.point&&b.point.hidden&&b.unhiddenLineColor||
b.stroke.color:c.borderColor);return{fill:d,stroke:e,marker:a.unscaledMarker||a.marker||b.marker}},resetExclusion:function(){this._uncheckedSeriesHash={}},onSeriesLabelClickedAt:function(a,b){},onPointLabelClickedAt:function(a,b){},onSeriesExclusionChanged:function(a){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/LegendSymbolRenderer":function(){define(["dojo/dom-class","dojo/dom-construct","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ShapeUtil","./ChartLegendSymbols"],
function(k,g,f,e,d){return{renderSymbol:function(c){var a=g.create("div",{"class":"dijitInline esriGEReportPlayerChartLegendSymbol"}),b=c.stroke&&f.toCSSColor(c.stroke),h=c.fill&&f.toCSSColor(c.fill);if(c.marker&&!c.customSymbol){k.add(a,"isSVGSymbol");var l=e.createSVGNode({xmin:0,ymin:0,width:6,height:6},{width:(c.width||8)+"px",height:(c.height||8)+"px",overflow:"visible"});l.appendChild(e.createPathNode(c.marker,{borderColor:b||"transparent",borderWidth:1,fillColor:h||"transparent"}));g.place(l,
a)}else k.add(a,(c.customSymbol||c.defaultSymbol||d.SQUARE).toLowerCase()),h&&(a.style.backgroundColor=h),b&&(a.style.border="1px solid "+b);return a}}})},"esri/dijit/geoenrichment/utils/ShapeUtil":function(){define("dojo/dom-style dojo/_base/lang dojo/dom-geometry esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ColorUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(k,g,f,e,d,c){var a={fillColor:"#FFFFFF",fillAlpha:1,borderAlpha:0,borderWidth:1},b={createSVGNode:function(a,
b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg");b&&k.set(c,b);a=[a.xmin||0,a.ymin||0,a.width,a.height].join(" ");c.setAttribute("viewBox",a);c.setAttribute("xmlns","http://www.w3.org/2000/svg");return c},createPathNode:function(a,c){var d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",a);b._setSettingsToNode(d,c);return d},createEllipseNode:function(a,c,d,e,f){var h=document.createElementNS("http://www.w3.org/2000/svg","ellipse");h.setAttribute("cx",
a||0);h.setAttribute("cy",c||0);h.setAttribute("rx",d);h.setAttribute("ry",e);b._setSettingsToNode(h,f);return h},createCircleNode:function(a,c,d,e){var f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.setAttribute("cx",a||0);f.setAttribute("cy",c||0);f.setAttribute("r",d);b._setSettingsToNode(f,e);return f},createRectNode:function(a,c,d,e,f){var h=document.createElementNS("http://www.w3.org/2000/svg","rect");h.setAttribute("x",a||0);h.setAttribute("y",c||0);h.setAttribute("width",
d);h.setAttribute("height",e);b._setSettingsToNode(h,f);return h},createLineNode:function(a,c,d,e,f){var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("x1",a||0);h.setAttribute("y1",c||0);h.setAttribute("x2",d||0);h.setAttribute("y2",e||0);b._setSettingsToNode(h,f);return h},createPolygonNode:function(a,c){var d=document.createElementNS("http://www.w3.org/2000/svg","polygon");d.setAttribute("points",a);b._setSettingsToNode(d,c);return d},createNodeByAttributes:function(a,
c,d){var e=null;switch(a.name){case "path":e=b.createPathNode(a.d,c);break;case "ellipse":e=b.createEllipseNode(a.cx,a.cy,a.rx,a.ry,c);break;case "circle":e=b.createCircleNode(a.cx,a.cy,a.r,c);break;case "rect":e=b.createRectNode(a.x,a.y,a.width,a.height,c);break;case "line":e=b.createLineNode(a.x1,a.y1,a.x2,a.y2,c);break;case "polygon":e=b.createPolygonNode(a.points,c)}e&&(a=a["fill-opacity"],void 0===a||d&&d.overrideFillOpacity||(e.hasAttribute("fill-opacity")&&(a*=e.getAttribute("fill-opacity")),
e.setAttribute("fill-opacity",a)));return e},_setSettingsToNode:function(a,c){if(c.borderWidth){var e=b.toColor(c,"border","#000000");a.setAttribute("stroke",d.toCSSColor(e,!0));a.setAttribute("stroke-width",c.borderWidth);a.setAttribute("stroke-opacity",e.a);c.borderDashArray&&a.setAttribute("stroke-dasharray",Array.isArray(c.borderDashArray)?c.borderDashArray.join(","):c.borderDashArray);c.strokeMiterLimit&&a.setAttribute("stroke-miterlimit",c.strokeMiterLimit);c.borderScale||a.setAttribute("vector-effect",
"non-scaling-stroke")}c.fillColor&&(e=b.toColor(c,"fill","#FFFFFF"),a.setAttribute("fill",d.toCSSColor(e,!0)),a.setAttribute("fill-opacity",e.a))},toColor:function(a,b,c,e){c=d.toColor(a[b+"Color"],c);1===c.a&&(a=a[b+"Alpha"],isNaN(a)&&(a=e),isNaN(a)||(c.a=a));return c},createSVGFromJson:function(c,d,e,f,k){k=k||{};f=g.mixin({},!k.noDefaults&&a,f);void 0===f.borderColor&&(f.borderColor=f.fillColor);var h=b.createSVGNode(c.viewBox,{width:d+"px",height:e+"px",overflow:"visible"});k.preserveAspectRatio&&
h.setAttribute("preserveAspectRatio",k.preserveAspectRatio);f.borderScale=k.borderScale;c.g.forEach(function(a){(a=b.createNodeByAttributes(a,f,{overrideFillOpacity:k.overrideFillOpacity}))&&h.appendChild(a)});return h},_iBoxCache:{},calcContentBox:function(a,d,k,m,p){var h=e.get("ShapeUtil"),l=JSON.stringify(a.viewBox)+";"+JSON.stringify(a.g)+";"+d+";"+k+";"+JSON.stringify(p||{});if(h[l])return g.mixin({},h[l]);a=b.createSVGFromJson(a,d,k,m,p);a.style.position="absolute";a.style.left="0";a.style.top=
"0";document.body.appendChild(a);m=c.getNodesBox(a.children);p=f.position(a);document.body.removeChild(a);m.x-=p.x;m.y-=p.y;m.r=d-(m.x+m.w);m.b=k-(m.y+m.h);h[l]=g.mixin({},m);return m}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendSymbols":function(){define(["../utils/ChartTypes"],function(k){var g={SQUARE:"Square",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE:"Line",isSupported:function(f){for(var e in g)if(g[e]===f)return!0;return!1},getDefaultSymbol:function(f,
e){return e&&f!==k.WAFFLE?g.CIRCLE:g.SQUARE}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartEventSupport":function(){define("dojo/_base/declare ./utils/builder/ChartPlots ./utils/ChartTypes ./level/LevelLineBuilder ./tooltips/ChartTooltip esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(k,g,f,e,d,c){return k(null,{showLevelLine:!0,_levelLineBuilder:null,_addPlotEventListeners:function(){var a=this;this.chart&&f.hasAxis(this._currentChartType)&&(this._levelLineBuilder=
this._levelLineBuilder||this.showLevelLine&&new e({lineContainerNode:this.domNode}),g.getWorkingPlots(this.chart).forEach(function(b,e){this.chart.connectToPlot(b,function(b){if(b.shape&&b.shape.shape&&b.shape.rawNode){var h=b.type,g=b.shape.rawNode,k=0===e?a._currentChartType:a._getComparisonChartType(),l=!1,q=!f.isXAxisVertical(a._currentChartType);a._currentVisualProperties.renderColumnBarsInOppositeDirections?(l=a.chart.series.filter(function(a){return b.run.plot===a.plot}),l=l.indexOf(b.run)>=
l.length/2):l=b.y<a._currentVisualProperties.yAxis.baseLineValue;a._levelLineBuilder&&a._levelLineBuilder.supportsLevelLine(k)&&("onmouseout"===h?a._levelLineBuilder.hideLevelLine():"onmouseover"===h&&a._levelLineBuilder.showLevelLine(a.chart,g,k,q,l));"onmouseover"===h&&a._currentDataDrillingPanelInfo&&a._currentDataDrillingPanelInfo.showOnClick&&(g.style.cursor="pointer");"onclick"===h&&!c.isMobileDevice()&&a.viewModel.dynamicReportInfo&&d.tryShowDataDrillingForShownTooltip()}})},this))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/ChartPlots":function(){define([],
function(){var k={GRID:"grid",PRIMARY:"default",SECONDARY:"secondary",getWorkingPlots:function(g){var f=[];g.getPlot(k.PRIMARY)&&f.push(k.PRIMARY);g.getPlot(k.SECONDARY)&&f.push(k.SECONDARY);return f}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/level/LevelLineBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style ../utils/ChartTypes esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(k,g,f,e,d,c,a){var b={updateLine:function(b,
c){f.remove(b,"esriGEReportPlayer_chartContainerLevelLineH esriGEReportPlayer_chartContainerLevelLineV");c?f.add(b,"esriGEReportPlayer_chartContainerLevelLineH"):f.add(b,"esriGEReportPlayer_chartContainerLevelLineV");a.show(b);d.set(b,{pointerEvents:"none",left:"",top:"",width:"",height:""})}};return k(null,{lineContainerNode:null,_levelLineDiv:null,_secondaryLineDiv:null,constructor:function(a){g.mixin(this,a)},supportsLevelLine:function(a){return a===c.COLUMN||a===c.BAR||c.isLineLike(a)},showLevelLine:function(a,
b,d,f,g){this._levelLineDiv=this._levelLineDiv||e.create("div",null,this.lineContainerNode);this._drawLine(this._levelLineDiv,a,b,d,f,g);c.isLineLike(d)&&(this._secondaryLineDiv=this._secondaryLineDiv||e.create("div",null,this.lineContainerNode),this._drawLine(this._secondaryLineDiv,a,b,d,!f,g))},_drawLine:function(e,f,g,k,p,t){f=f.calculateGeometry();g=a.noTransformPosition(g);var h=a.noTransformPosition(f.node),l=d.get(f.node,"width"),m=d.get(f.node,"height"),n=a.noTransformPosition(this.lineContainerNode);
b.updateLine(e,p);switch(k){case c.COLUMN:p&&d.set(e,{top:(t?g.y+g.h-n.y:g.y-n.y-1)+"px",left:h.x-n.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"});break;case c.BAR:p||d.set(e,{left:(t?g.x-n.x:g.x+g.w-n.x)+"px",top:h.y-n.y+f.offsets.t+"px",height:m-f.offsets.t-f.offsets.b+"px"});break;case c.LINE:case c.VERTICAL_LINE:p?d.set(e,{top:g.y+g.h/2-n.y-1+"px",left:h.x-n.x+f.offsets.l+"px",width:l-f.offsets.l-f.offsets.r+"px"}):d.set(e,{left:g.x+.5*g.w-n.x+"px",top:h.y-n.y+f.offsets.t+"px",height:m-
f.offsets.t-f.offsets.b+"px"})}},hideLevelLine:function(){a.hide([this._levelLineDiv,this._secondaryLineDiv])}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ChartTooltip":function(){define("dojo/_base/declare dojo/_base/lang dojo/string dojo/dom-construct ./ZoomSupportTooltip ./_BuilderUtil ./_ColumnBarChartTooltipBuilder ./_GaugeChartTooltipBuilder ./_WaffleChartTooltipBuilder ./_LineChartTooltipBuilder ./_PieDonutRingChartTooltipBuilder ../utils/ChartTypes ../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../dataDrilling/DataDrillingVisualizer ../../supportClasses/WidgetQueryUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n,m,p,t,q,r){function u(a,b,d){a._hide();var e=new t({viewModel:b.viewModel,theme:b.theme,parentWidget:b.chartContainer,getPreviewValueFunction:c.buldPreviewValueFunction(b,{type:"dataDrilling"}),domNode:d,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){e.play(!1,!0)}});e.play(!0,!0,null,b.dataDrillingPanelInfo.sectionJson)}r=r.geoenrichment.dijit.ReportPlayer.ChartTooltip;var y={lastShownInfo:null,setInfo:function(a){(y.lastShownInfo=a)&&setTimeout(function(){y.lastShownInfo===
a&&(y.lastShownInfo=null)},6E4)}};k=k(d,{tooltipClass:"esriGEChartContainer_chartTooltip_masterTooltip",_chartType:null,constructor:function(){var a=this,b=this.text;this.text=function(c,d){var e;e=c.run&&c.run.data&&c.run.data[c.index];e=e.tooltip&&"object"===typeof e.tooltip?a._renderTooltip(e.tooltip):void 0;return e||b(c,d)}},_needSetRectFromShape:function(){return m.isPictureLike(this._chartType)},setChartType:function(a){this._chartType=a},_renderTooltip:function(a){a=g.mixin({},a,a.getContext());
var b=!a.viewModel.dynamicReportInfo,c=b&&!a.viewModel.isGraphicStyle,d=!q.isDataDrillingView(a.chartContainer);(a.viewModel.enableDataDrilling||b)&&d||delete a.dataDrillingPanelInfo;var f=e.create("div",{"class":"esriGEChartContainer_chartTooltip"},document.body);if(c)this._buildVariableNamePreview(a,f);else if(a.richTextFieldInfo||a.showTitle||a.showValue||a.showMin||a.showMax||a.showAvg||a.showWeight||a.showConditional||a.dataDrillingPanelInfo)this._buildTooltip(a,f,b,d);else if(b)e.create("div",
{"class":"chartTooltip_row esriGERowHigh",innerHTML:r.noTooltipAvailable},f);else return{node:null};y.setInfo(a.dataDrillingPanelInfo&&a.dataDrillingPanelInfo.showOnClick&&!b?{tooltip:this,info:a,root:f}:null);document.body.removeChild(f);return{node:f,style:a.tooltipStyle}},_buildTooltip:function(c,d,g,k){var q=this;this._chartType===m.PIE||this._chartType===m.DONUT||this._chartType===m.RING?n.buildPieDonutRingChartTooltip(c,d):this._chartType===m.GAUGE?b.buildGaugeChartTooltip(c,d):this._chartType===
m.WAFFLE?h.buildWaffleChartTooltip(c,d):m.isColumnBarLike(this._chartType)?a.buildColumnChartTooltip(c,d):m.isLineLike(this._chartType)&&l.buildLineChartTooltip(c,d);c.conditionalStyling&&c.showConditional&&e.place(p.createLegendNode(c.conditionalStyling,"chart",c.isBenchmarked?c.unbenchmarkedValue:c.value),d);if(c.dataDrillingPanelInfo||g&&k){var t=e.create("div",{"class":"chartTooltip_row esriGERowHigh esriGECenter",style:"margin-top:20px;"},d);(k=g&&!c.dataDrillingPanelInfo)||e.create("div",{"class":"dijitInline esriGESpaceAfterMedium",
innerHTML:f.substitute('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\x3cpath fill\x3d"${fill}" d\x3d"M30 28v1H3V4h1v24h2v-9h6v9h2V6h6v22h2V13h6v15h2z"/\x3e\x3c/svg\x3e',{fill:c.tooltipLinkStyle.color})},t);t=e.create("div",{"class":"dijitInline esriGELink",innerHTML:g?c.dataDrillingPanelInfo?r.drillForMoreDataEdit:r.addDataDrilling:r.drillForMoreData},t);k||(t.style.color=c.tooltipLinkStyle.color);t.addEventListener("click",function(){g?(q._hide(),
c.chartContainer.onShowDataDrillingPreview(c)):u(q,c,d)})}},_buildVariableNamePreview:function(a,b){b=e.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);c.addValue((a.fieldInfo.script?a.fieldInfo.script.alias:a.fieldInfo.alias)||"",b)}});k.tryShowDataDrillingForShownTooltip=function(){var a=y.lastShownInfo;a&&u(a.tooltip,a.info,a.root)};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ZoomSupportTooltip":function(){define("dojo/_base/declare dojox/charting/action2d/Tooltip dojox/lang/functional dojox/gfx/matrix esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(k,g,f,e,d,c){var a=Math.PI/4,b=Math.PI/2,h={_tooltips:[],show:function(a,b,d,e){this.hide();if(a){a="string"===typeof a?{node:a}:a;var f=a.node,h=f?f.outerHTML||f.innerHTML||f:null;h&&"string"===typeof h&&((h=-1!==h.indexOf("href")||-1!==h.indexOf("esriGELink"))||(e=(e||"")+" esriGENonInteractable"),this._tooltips.push(c.showTooltipForNode(d,f,{position:b,notRestricted:!0,stayOnHover:h,classes:e&&[e],style:a.style})))}},hide:function(){this._tooltips.forEach(function(a){a&&a.destroy()});
this._tooltips.length=0}};return k(g,{tooltipClass:null,process:function(c){if("onplotreset"===c.type||"onmouseout"===c.type)"onplotreset"===c.type&&delete this.angles;else if(c.shape&&"onmouseover"===c.type){var g=["after-centered","before-centered"];if(!this._needSetRectFromShape())switch(c.element){case "marker":case "circle":case "spider_circle":case "spider_plot":case "candlestick":break;case "column":g=["above-centered","below-centered","after-centered","before-centered"];case "bar":break;default:if(!this.angles){var k=
"number"===typeof c.run.data[0]?f.map(c.run.data,"x ? Math.max(x, 0) : 0"):f.map(c.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=f.map(f.scanl(k,"+",0),"* 2 * Math.PI / this",f.foldl(k,"+",0))}var k=e._degToRad(c.plot.opt.startAngle),l=(this.angles[c.index]+this.angles[c.index+1])/2+k;k&&(0>l||l>2*Math.PI)&&(l=Math.abs(2*Math.PI-Math.abs(l)));l<a||(l<b+a?g=["below-centered","above-centered"]:l<Math.PI+a?g=["before-centered","after-centered"]:l<2*Math.PI-a&&(g=["above-centered","below-centered"]))}d.isMobileDevice()&&
(g=["above-centered","below-centered"]);(k=this.text(c,this.plot))&&h.show("string"===typeof k?this._format(k):k,g,c.shape.rawNode,this.tooltipClass)}},_needSetRectFromShape:function(){return!1},_hide:function(){h.hide()}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){var m=function(a,b){var c=a.run&&a.run.data&&a.run.data[a.index];return c&&"number"!=typeof c&&(c.tooltip||c.text)?c.tooltip||c.text:b.tooltipFunc?b.tooltipFunc(a):a.y},p=Math.PI/4,t=Math.PI/2;c=f(h("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",a,{defaultParams:{text:m,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(a,b,c){this.text=c&&c.text?c.text:m;this.mouseOver=
c&&void 0!=c.mouseOver?c.mouseOver:!0;this.defaultPosition=c&&void 0!=c.defaultPosition?c.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(a){if("onplotreset"===a.type||"onmouseout"===a.type)k.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===a.type&&delete this.angles;else if(!(!a.shape||this.mouseOver&&"onmouseover"!==a.type||!this.mouseOver&&"onclick"!==a.type)){var c={type:"rect"},f=this.defaultPosition;switch(a.element){case "marker":c.x=a.cx;c.y=
a.cy;c.w=c.h=1;break;case "circle":c.x=a.cx-a.cr;c.y=a.cy-a.cr;c.w=c.h=2*a.cr;break;case "spider_circle":c.x=a.cx;c.y=a.cy;c.w=c.h=1;break;case "spider_plot":return;case "column":f=["above-centered","below-centered"];case "bar":c=g.clone(a.shape.getShape());c.w=c.width;c.h=c.height;break;case "candlestick":c.x=a.x;c.y=a.y;c.w=a.width;c.h=a.height;break;default:if(!this.angles){var l="number"==typeof a.run.data[0]?n.map(a.run.data,"x ? Math.max(x, 0) : 0"):n.map(a.run.data,"x ? Math.max(x.y, 0) : 0");
this.angles=n.map(n.scanl(l,"+",0),"* 2 * Math.PI / this",n.foldl(l,"+",0))}var l=b._degToRad(a.plot.opt.startAngle),m=(this.angles[a.index]+this.angles[a.index+1])/2+l;c.x=a.cx+a.cr*Math.cos(m);c.y=a.cy+a.cr*Math.sin(m);c.w=c.h=1;l&&(0>m||m>2*Math.PI)&&(m=Math.abs(2*Math.PI-Math.abs(m)));m<p||(m<t+p?f=["below-centered","above-centered"]:m<Math.PI+p?f=["before-centered","after-centered"]:m<2*Math.PI-p&&(f=["above-centered","below-centered"]))}h("dojo-bidi")&&this._recheckPosition(a,c,f);l=this.chart.getCoords();
c.x+=l.x;c.y+=l.y;c.x=Math.round(c.x);c.y=Math.round(c.y);c.w=Math.ceil(c.w);c.h=Math.ceil(c.h);this.aroundRect=c;(a=this.text(a,this.plot))&&k.show(this._format(a),this.aroundRect,f);this.mouseOver||(this._handle=d.connect(e.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(a,b,c){},_format:function(a){return a}});return h("dojo-bidi")?f("dojox.charting.action2d.Tooltip",[c,l]):c})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(k,g,f,e,d){var c=e.backOut;return g("dojox.charting.action2d.PlotAction",f,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(a,b,d){this.anim={};d||(d={});this.duration=d.duration?d.duration:400;this.easing=d.easing?d.easing:c},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(k.disconnect(this.handle),this.handle=null)},reset:function(){},
destroy:function(){this.inherited(arguments);d.forIn(this.anim,function(a){d.forIn(a,function(a){a.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(k,g,f){return g("dojox.charting.action2d.Base",f,{constructor:function(e,d){this.chart=e;this.plot=d?k.isString(d)?this.chart.getPlot(d):d:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},
"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(k){return k})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(k,g,f){var e=g.getObject("lang.functional",!0,k),d={},c=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},a=function(a){var b=[],d=c.call(a,/\s*->\s*/m);if(1<d.length)for(;d.length;)a=
d.pop(),b=d.pop().split(/\s*,\s*|\s+/m),d.length&&d.push("(function("+b.join(", ")+"){ return ("+a+"); })");else if(a.match(/\b_\b/))b=["_"];else{var d=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),e=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(d||e)d&&(b.push("$1"),a="$1"+a),e&&(b.push("$2"),a+="$2");else{var d=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[],g={};f.forEach(d,function(a){g.hasOwnProperty(a)||(b.push(a),g[a]=1)})}}return{args:b,body:a}},b=function(a){return a.length?function(){var b=a.length-1,c=e.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=e.lambda(a[b]).call(this,c);return c}:function(a){return a}};g.mixin(e,{rawLambda:function(b){return a(b)},buildLambda:function(b){b=a(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(c){if("function"==typeof c)return c;
if(c instanceof Array)return b(c);if(d.hasOwnProperty(c))return d[c];var e=a(c);return d[c]=new Function(e.args,"return ("+e.body+");")},clearLambdaCache:function(){d={}}});return e})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(k,g,f,e){var d={};g.mixin(e,{filter:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||k.global;a=e.lambda(a);var f=[],l,n,m;if(g.isArray(c))for(n=0,m=c.length;n<m;++n)l=c[n],a.call(b,
l,n,c)&&f.push(l);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(n=0;c.hasNext();)l=c.next(),a.call(b,l,n++,c)&&f.push(l);else for(n in c)n in d||(l=c[n],a.call(b,l,n,c)&&f.push(l));return f},forEach:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||k.global;a=e.lambda(a);var f,l;if(g.isArray(c))for(f=0,l=c.length;f<l;a.call(b,c[f],f,c),++f);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(f=0;c.hasNext();a.call(b,c.next(),f++,c));else for(f in c)f in
d||a.call(b,c[f],f,c);return b},map:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||k.global;a=e.lambda(a);var f,l,n;if(g.isArray(c))for(f=Array(l=c.length),n=0;n<l;f[n]=a.call(b,c[n],n,c),++n);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(f=[],n=0;c.hasNext();f.push(a.call(b,c.next(),n++,c)));else for(n in f=[],c)n in d||f.push(a.call(b,c[n],n,c));return f},every:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||k.global;a=e.lambda(a);var f,l;if(g.isArray(c))for(f=
0,l=c.length;f<l;++f){if(!a.call(b,c[f],f,c))return!1}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(f=0;c.hasNext();){if(!a.call(b,c.next(),f++,c))return!1}else for(f in c)if(!(f in d||a.call(b,c[f],f,c)))return!1;return!0},some:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||k.global;a=e.lambda(a);var f,l;if(g.isArray(c))for(f=0,l=c.length;f<l;++f){if(a.call(b,c[f],f,c))return!0}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(f=0;c.hasNext();){if(a.call(b,
c.next(),f++,c))return!0}else for(f in c)if(!(f in d)&&a.call(b,c[f],f,c))return!0;return!1}});return e})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(k,g,f){var e={};g.mixin(f,{keys:function(d){var c=[],a;for(a in d)a in e||c.push(a);return c},values:function(d){var c=[],a;for(a in d)a in e||c.push(d[a]);return c},filterIn:function(d,c,a){a=a||k.global;c=f.lambda(c);var b={},g,l;for(l in d)l in e||(g=d[l],c.call(a,g,l,d)&&(b[l]=g));
return b},forIn:function(d,c,a){a=a||k.global;c=f.lambda(c);for(var b in d)b in e||c.call(a,d[b],b,d);return a},mapIn:function(d,c,a){a=a||k.global;c=f.lambda(c);var b={},g;for(g in d)g in e||(b[g]=c.call(a,d[g],g,d));return b}});return f})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(k,g,f){var e={};g.mixin(f,{scanl:function(d,c,a,b){"string"==typeof d&&(d=d.split(""));b=b||k.global;c=f.lambda(c);var h,l,n;if(g.isArray(d))for(h=Array((l=
d.length)+1),h[0]=a,n=0;n<l;a=c.call(b,a,d[n],n,d),h[++n]=a);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(h=[a],n=0;d.hasNext();h.push(a=c.call(b,a,d.next(),n++,d)));else for(n in h=[a],d)n in e||h.push(a=c.call(b,a,d[n],n,d));return h},scanl1:function(d,c,a){"string"==typeof d&&(d=d.split(""));a=a||k.global;c=f.lambda(c);var b,h,l;h=!0;if(g.isArray(d)){b=Array(h=d.length);b[0]=l=d[0];for(var n=1;n<h;b[n]=l=c.call(a,l,d[n],n,d),++n);}else if("function"==typeof d.hasNext&&"function"==
typeof d.next){if(d.hasNext())for(b=[l=d.next()],n=1;d.hasNext();b.push(l=c.call(a,l,d.next(),n++,d)));}else for(n in d)n in e||(h?(b=[l=d[n]],h=!1):b.push(l=c.call(a,l,d[n],n,d)));return b},scanr:function(d,c,a,b){"string"==typeof d&&(d=d.split(""));b=b||k.global;c=f.lambda(c);var e=d.length,g=Array(e+1),n=e;for(g[e]=a;0<n;--n,a=c.call(b,a,d[n],n,d),g[n]=a);return g},scanr1:function(d,c,a){"string"==typeof d&&(d=d.split(""));a=a||k.global;c=f.lambda(c);var b=d.length,e=Array(b),g=d[b-1],b=b-1;for(e[b]=
g;0<b;--b,g=c.call(a,g,d[b],b,d),e[b]=g);return e}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(k,g,f,e){var d={};k.mixin(e,{foldl:function(c,a,b,g){"string"==typeof c&&(c=c.split(""));g=g||f.global;a=e.lambda(a);var h,n;if(k.isArray(c))for(h=0,n=c.length;h<n;b=a.call(g,b,c[h],h,c),++h);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(h=0;c.hasNext();b=a.call(g,b,c.next(),h++,c));else for(h in c)h in
d||(b=a.call(g,b,c[h],h,c));return b},foldl1:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;a=e.lambda(a);var g,l,n;if(k.isArray(c))for(g=c[0],l=1,n=c.length;l<n;g=a.call(b,g,c[l],l,c),++l);else if("function"==typeof c.hasNext&&"function"==typeof c.next){if(c.hasNext())for(g=c.next(),l=1;c.hasNext();g=a.call(b,g,c.next(),l++,c));}else for(l in n=!0,c)l in d||(n?(g=c[l],n=!1):g=a.call(b,g,c[l],l,c));return g},foldr:function(c,a,b,d){"string"==typeof c&&(c=c.split(""));d=d||f.global;
a=e.lambda(a);for(var g=c.length;0<g;--g,b=a.call(d,b,c[g],g,c));return b},foldr1:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;a=e.lambda(a);for(var d=c.length,g=c[d-1],d=d-1;0<d;--d,g=a.call(b,g,c[d],d,c));return g},reduce:function(c,a,b){return 3>arguments.length?e.foldl1(c,a):e.foldl(c,a,b)},reduceRight:function(c,a,b){return 3>arguments.length?e.foldr1(c,a):e.foldr(c,a,b)},unfold:function(c,a,b,d,g){g=g||f.global;a=e.lambda(a);b=e.lambda(b);c=e.lambda(c);for(var h=[];!c.call(g,
d);h.push(a.call(g,d)),d=b.call(g,d));return h}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_BuilderUtil":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../legends/ChartLegendSymbols ../legends/LegendSymbolRenderer ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../dataProvider/supportClasses/data/AreaDataUtil dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,d,c,a,b,h){var l=h.geoenrichment.dijit.ReportPlayer.ChartContainer;
h=h.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{addTitle:function(a,b,c){a=f.create("div",{"class":"chartTooltip_title esriGERowHigh"},a);c&&this.addColor(c,a);this.addLabel(b,a)},addColor:function(a,b){a=a||{};a=c.renderSymbol({defaultSymbol:d.CIRCLE,fill:a.fill,stroke:a.stroke,marker:a.marker,width:8,height:10});g.add(a,"esriGESpaceAfterBig");f.place(a,b)},addRowOffset:function(a){this.addColor(null,a)},addLabel:function(a,b){return f.create("div",{"class":"chartTooltip_label dijitInline esriGESpaceAfterBig",
innerHTML:a},b)},addValue:function(a,b){return f.create("div",{"class":"chartTooltip_value dijitInline esriGESpaceAfterBig",innerHTML:a},b)},buildStatLabels:function(a,b,c,d,e,g,h){function k(c,d){if(a[c]&&d){var e=f.create("div",{"class":"chartTooltip_row esriGERowHigh"},b);l.addColor(null,e);m.push(l.addLabel(d,e));l.addValue(a[c],e)}}var l=this,m=[];a.showWeight&&k("weightValueLabel",c);a.showMin&&k("minValueLabel",d);a.showMax&&k("maxValueLabel",e);a.showAvg&&k("avgValueLabel",g);a.showWeight&&
k("weightInStackLabel",h);return m},formatTable:function(a){var b=0;a.forEach(function(a){b=Math.max(b,e.get(a,"width"))});a.forEach(function(a){e.set(a,"width",b+"px")})},buildSeriesLabel:function(a){return!0===a.isThisAreaSpecific?a.seriesLabel&&!a.isThisAreaSingleSeries?k.substitute(h.thisAreaSeries,{seriesName:a.seriesLabel}):l.thisArea:a.seriesLabel},addBenchmarkValue:function(a,b){return this.addValue(a.unbenchmarkedValueLabel+" ("+(0<a.value?"+":"")+a.valueLabel+")",b)},buildRichText:function(b,
c){b=a.renderFieldInfoInTableCell(b.richTextFieldInfo,{previewValues:!0,fieldData:b.fieldData,isGraphicReport:!0,getPreviewValueFunction:this.buldPreviewValueFunction(b,{type:"tooltip"})});f.create("div",{"class":"chartTooltip_row esriGERow20",innerHTML:b.formattedValue},c)},buldPreviewValueFunction:function(a,c){return function(d){if(!d||!d.fieldInfo)return null;switch(d.fieldInfo.name){case "headers.CHART_POINT_VALUE":return{value:a.isBenchmarked?a.unbenchmarkedValue:a.value};case "headers.CHART_POINT_NAME":return{formattedValue:a.pointName};
case "headers.CHART_SERIES_NAME":return{formattedValue:a.seriesName};case "headers.CHART_AREA_NAME":return{formattedValue:a.areaName||l.thisArea}}if(!a.fieldData)return null;d=d.fieldInfo;if(d.expressionText&&-1!==d.expressionText.indexOf("!headers.CHART_POINT_VALUE!")){var e;switch(c.type){case "tooltip":e=a.tooltipTemplateValues;break;case "dataDrilling":e=a.dataDrillingPanelInfo.templateValues}(e=e&&e[d.templateName]&&e[d.templateName][a.fieldInfo&&a.fieldInfo.templateName])&&(d=e)}d=b.getAreaDataValue({featureAttributes:a.isComparisonPoint?
a.comparisonFeatureAttribute:null,fieldData:a.fieldData,featureIndex:a.featureIndex,fieldName:d.templateName||d.name});return"number"===typeof d?{value:d||0}:{formattedValue:d}}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_ColumnBarChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f){f=f.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildColumnChartTooltip:function(e,d){var c=e.getGroup&&e.getGroup();
e.isMultiFeature||c&&1!==c.length?this._buildMultiSeriesTooltip(e,d):this._buildSingleSeriesTooltip(e,d)},_buildSingleSeriesTooltip:function(e,d){var c=[];e.richTextFieldInfo&&g.buildRichText(e,d);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},d);g.addColor(e,a);c.push(g.addLabel(e.label,a));e.isUnavailableData?g.addValue(f.unavailableData,a):e.isBenchmarked?g.addBenchmarkValue(e,a):(g.addValue(e.valueLabel,a),c=c.concat(g.buildStatLabels(e,d,f.weight,f.minValue,f.maxValue,f.avgValue)));
a.style.display=e.showValue?"":"none";g.formatTable(c)},_buildMultiSeriesTooltip:function(e,d){var c=[];e.showTitle&&g.addTitle(d,e.isMultiFeature?g.buildSeriesLabel(e):e.label);e.richTextFieldInfo&&g.buildRichText(e,d);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},d);g.addColor(e,a);c.push(g.addLabel(e.isMultiFeature?e.label:g.buildSeriesLabel(e),a));if(e.isUnavailableData)g.addValue(f.unavailableData,a);else if(e.isBenchmarked)g.addBenchmarkValue(e,a);else{g.addValue(e.valueLabel,
a);var b;b=e.isMultiFeature?g.buildStatLabels(e,d,f.weightInAreas,f.minValueInAreas,f.maxValueInAreas,f.avgValueInAreas,f.weightInStack):e.isSinglePointInSeries?g.buildStatLabels(e,d,null,null,null,null,f.weightInStack):g.buildStatLabels(e,d,f.weightInSeries,f.minValueInSeries,f.maxValueInSeries,f.avgValueInSeries,f.weightInStack);c=c.concat(b)}a.style.display=e.showValue?"":"none";e.showValue&&e.getGroup().forEach(function(a){if(e.id!==a.id){var b=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},
d);g.addColor(a,b);c.push(g.addLabel(a.isMultiFeature?a.label:g.buildSeriesLabel(a),b));a.isUnavailableData?g.addValue(f.unavailableData,b):e.isBenchmarked?g.addBenchmarkValue(a,b):g.addValue(a.valueLabel,b)}});g.formatTable(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_GaugeChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildGaugeChartTooltip:function(d,
c){d.showTitle&&f.addTitle(c,d.label,d);d.richTextFieldInfo&&f.buildRichText(d,c);c=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);f.addRowOffset(c);d.isUnavailableData?f.addLabel(e.unavailableData,c):d.hasNegativeValues?f.addLabel(d.valueLabel,c):f.addLabel(g.substitute(e.gaugeChartTooltip_label,{value:d.valueLabel,total:d.sumValueLabel}),c);c.style.display=d.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_WaffleChartTooltipBuilder":function(){define(["dojo/dom-construct",
"dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildWaffleChartTooltip:function(d,c){d.showTitle&&f.addTitle(c,d.label,d);d.richTextFieldInfo&&f.buildRichText(d,c);c=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);f.addRowOffset(c);d.isUnavailableData?f.addLabel(e.unavailableData,c):d.hasNegativeValues?f.addLabel(d.valueLabel,c):f.addLabel(g.substitute(e.waffleChartTooltip_label,{value:d.valueLabel,
total:d.sumValueLabel}),c);c.style.display=d.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_LineChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f){f=f.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildLineChartTooltip:function(e,d){var c=[];e.showTitle&&g.addTitle(d,e.label);e.richTextFieldInfo&&g.buildRichText(e,d);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},d);
g.addColor(e,a);c.push(g.addLabel(g.buildSeriesLabel(e),a));e.isBenchmarked?g.addBenchmarkValue(e,a):g.addValue(e.valueLabel,a);a.style.display=e.showValue?"":"none";var b;e.isMultiFeature?b=g.buildStatLabels(e,d,f.weightInAreas,f.minValueInAreas,f.maxValueInAreas,f.avgValueInAreas):e.isBenchmarked||(b=g.buildStatLabels(e,d,f.weightInSeries,f.minValueInSeries,f.maxValueInSeries,f.avgValueInSeries,f.weightInStack));b&&(c=c.concat(b));e.showValue&&e.getGroup().forEach(function(a){if(e.id!==a.id){var b=
k.create("div",{"class":"chartTooltip_row esriGERowHigh"},d);g.addColor(a,b);c.push(g.addLabel(g.buildSeriesLabel(a),b));a.isUnavailableData?g.addValue(f.unavailableData,b):a.isBenchmarked?g.addBenchmarkValue(a,b):g.addValue(a.valueLabel,b)}});g.formatTable(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_PieDonutRingChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(k,g,f,e){e=e.geoenrichment.dijit.ReportPlayer.ChartTooltip;
return{buildPieDonutRingChartTooltip:function(d,c){d.showTitle&&f.addTitle(c,d.label,d);d.richTextFieldInfo&&f.buildRichText(d,c);var a=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);f.addRowOffset(a);d.isUnavailableData?f.addLabel(e.unavailableData,a):d.isBenchmarked?f.addBenchmarkValue(d,a):(f.addLabel(g.substitute(e.pieChartTooltip_label,{value:d.valueLabel,total:d.sumValueLabel}),a),c=f.buildStatLabels(d,c,e.weight,e.minValue,e.maxValue,e.avgValue),f.formatTable(c));a.style.display=
d.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartComparisonSupport":function(){define("dojo/_base/declare ../comparison/ComparisonSelect ./utils/ChartTypes ../../dataProvider/supportClasses/ge/LocalGEChart ./dummyData/DummyGE esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),function(k,g,f,e,d,c,a){function b(a,b){return a&&b&&a.StdGeographyLevel===b.StdGeographyLevel&&a.StdGeographyID===b.StdGeographyID}a=a.geoenrichment.dijit.ReportPlayer.ChartContainer;
return k(null,{comparisonSelect:null,_comparisonAttributes:null,_additionalAttributes:null,_ge:null,_stdPolygonsController:null,_initChartComparisonSelect:function(){var d=this;this._additionalAttributes=[];c.hide(this.comparisonSelectBlock);if(this._currentComparisonInfo){this._updateComparisonLabel();var e=this._getGeoenrichment().getData().features;this.comparisonSelect=(new g({defaultLevelId:this._currentComparisonInfo.defaultLevel,fields:this._getGeoenrichment().getAttributeFields(),canAddFeatures:this._canAddRemoveFeatures(),
addFeatureMessage:a.addToChart,featureIsAlreadyAddedMessage:a.alreadyAdded,canRemoveFeatures:this._canAddRemoveFeatures(),removeFeatureMessage:a.removeFromChart,onFeatureSelected:function(a,b,c){d._setComparisonAttributes(c)},isFeatureAdded:function(a,c,e){return b(d._comparisonAttributes,e)||d._additionalAttributes.some(function(a){return b(a,e)})},canRemoveFeature:function(a,c,e){return!b(d._comparisonAttributes,e)},onAddFeature:function(a,b,c){d._additionalAttributes.push(c);d._updateSeries();
d._syncWithShownFeatures()},onRemoveFeature:function(a,c,e){d._additionalAttributes=d._additionalAttributes.filter(function(a){return!b(a,e)});d._updateSeries();d._syncWithShownFeatures()}})).placeAt(this.comparisonSelectDiv);this.own(this.comparisonSelect);this.comparisonSelect.setFeatures(e);this.comparisonSelect.setDefaultValue();this._comparisonAttributes=this.comparisonSelect.getSelectedAttributes();this.comparisonSelect.get("options").length?(c.show(this.comparisonSelectBlock),c.enableContent(this.comparisonSelectBlock,
!!this.viewModel.dynamicReportInfo),this.viewModel.dynamicReportInfo&&(this._stdPolygonsController=this.viewModel.getStdPolygonsController(this._currentComparisonInfo.calculatorName,this.currentFeatureIndex),this.own(this._stdPolygonsController),this._syncWithShownFeatures())):(this.comparisonSelect.destroy(),this._currentComparisonInfo=null)}},_canAddRemoveFeatures:function(){return this._isMultiFeatureChart&&!f.isLineLike(this._currentChartType)},_updateComparisonLabel:function(){if(this._currentComparisonInfo){var b;
b=this._canAddRemoveFeatures()?a.selectOrAddGeographyToCompare:this._tableViewInfo?a.compareWith:f.isColumnBarLike(this._getComparisonChartType())?a.comparisonLabelBars:a.comparisonLabelDots;this.comparisonLabel.innerHTML=b;this.comparisonLabel.style.color=this.viewModel.getDocumentDefaultStyles(this.theme).color}},_syncWithShownFeatures:function(){if(this._stdPolygonsController){this._stdPolygonsController.setAttributeFields(this._getGeoenrichment().getAttributeFields());var a=this._getGeoenrichment().getAllGeographyAttributes({ignoreFilters:!0});
this._stdPolygonsController.setShownFeatureAttributes(this._getComparisonFeatureAttributes());this._stdPolygonsController.setAllFeatureAttributes(a)}},_getComparisonChartType:function(){return this._currentComparisonInfo&&this._currentComparisonInfo.chartType||this._currentChartType},_getGeoenrichment:function(){return this._currentComparisonInfo?this._ge?this._ge:this._ge=this.viewModel.dynamicReportInfo?new e(this._originalSeriesItems,this._currentComparisonInfo.calculatorName,this.viewModel.dynamicReportInfo.fieldData.areaData,
this._isMultiFeatureChart,this.viewModel.dynamicReportInfo.analysisAreas.map(function(a){return a.shortName||a.name}),this.currentFeatureIndex):this._createDummyGE():null},_createDummyGE:function(){return d.getInstance()},_setFilterRangesForComparison:function(a){if(!this._currentComparisonInfo)return!1;this._getGeoenrichment().setFilterRanges(a);a=this._getGeoenrichment().getData().features;this.comparisonSelect.setFeatures(a);this.comparisonSelect.setDefaultValue();this._setComparisonAttributes(this.comparisonSelect.getSelectedAttributes());
c[this.comparisonSelect.get("options").length?"show":"hide"](this.comparisonSelectBlock);return!0},_setComparisonAttributes:function(a){this._comparisonAttributes=a;this.comparisonSelect.get("options").length?b(this.comparisonSelect.getSelectedAttributes(),this._comparisonAttributes)||this.comparisonSelect.setSelectedAttributes(this._comparisonAttributes):this._comparisonAttributes=null;a=this._updateSeries();this._syncWithShownFeatures();return a},_getComparisonFeatureAttributes:function(){if(!this._currentComparisonInfo)return null;
var a=this._additionalAttributes.filter(function(a){return 0<=this.comparisonSelect.getFeatureIndexById(a.StdGeographyLevel,a.StdGeographyID)},this),c=this._comparisonAttributes&&a.some(function(a){return b(a,this._comparisonAttributes)},this),a=a.slice();!c&&this._comparisonAttributes&&a.push(this._comparisonAttributes);return a},_getNumComparisonFeatures:function(){var a=this._getComparisonFeatureAttributes();return a&&a.length||0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonSelect":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/OnDemandSelect esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../../dataProvider/supportClasses/areas/AreasInfoTemplateBuilder ./ComparisonListUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(k,g,f,e,d,c,a,b,h,l){var n=k(c,{createLabelNode:!0,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,_createImageNode:function(a,b){var c=this;if(a.isArea){if(this.fields&&!h.isMobileDevice()){var d=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEInfoIcon esriGEComparisonSelect_infoIcon"},b);l.setTooltipToNode(d,function(){return c._buildGeographyTooltip(a)},{notRestricted:!0})}this.canRemoveFeatures&&
(d=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_removeButton"},b),this.isAdded(a)&&this.canRemoveFeature(a)?(g(d,"click",function(b){b.stopPropagation();c.onRemoveFeature(a)}),l.setTooltipToNode(d,this.removeFeatureMessage)):f.add(d,"disabled"));this.canAddFeatures&&(b=e.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_addButton"},b),this.isAdded(a)?(f.add(b,"disabled"),l.setTooltipToNode(b,this.featureIsAlreadyAddedMessage)):(g(b,
"click",function(b){b.stopPropagation();c.onAddFeature(a)}),l.setTooltipToNode(b,this.addFeatureMessage)))}},_buildGeographyTooltip:function(b){var c=this.fields.map(function(a){return{label:a.label,value:a.formatFunction(b.attributes[a.name])}});return a.buildAttributesTable(null,c,{padding:10,maxHeight:document.body.clientHeight-40})},isAdded:function(a){},onAddFeature:function(a){},canRemoveFeature:function(a){},onRemoveFeature:function(a){}});return k(d,{listClass:"esriGEOnDemandSelectSpacedOut esriGEOnDemandSelectVeryTallList600",
defaultLevelId:null,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,showTitleForSingleGroup:!1,buildRendering:function(){var a=this;h.isMobileDevice()&&(this.listClass+=" esriGEComparisonSelectListMobile");var b=new n;b.fields=this.fields;b.addFeatureMessage=this.addFeatureMessage;b.featureIsAlreadyAddedMessage=this.featureIsAlreadyAddedMessage;b.canAddFeatures=this.canAddFeatures;b.isAdded=function(b){return a.isFeatureAdded(b.levelId,
b.featureId,b.attributes)};b.onAddFeature=function(b){a.closePopup();a.onAddFeature(b.levelId,b.featureId,b.attributes)};b.canRemoveFeatures=this.canRemoveFeatures;b.removeFeatureMessage=this.removeFeatureMessage;b.canRemoveFeature=function(b){return a.canRemoveFeature(b.levelId,b.featureId,b.attributes)};b.onRemoveFeature=function(b){a.closePopup();a.onRemoveFeature(b.levelId,b.featureId,b.attributes)};this.itemRenderer=b;this.inherited(arguments)},setGroups:function(a){this.set("options",b.getOptionsFromGroups(a,
{hideTitleForSingleGroup:!this.showTitleForSingleGroup}))},setFeatures:function(a){this.set("options",b.getListOptionsFromFeatures(a))},setDefaultValue:function(a){var c=b.getDefaultOptionValue(this.options,this.defaultLevelId);this.set("value",c);if(a&&a.emitEvent)this.onChange();return c},isFeatureAdded:function(a,b,c){return!1},canRemoveFeature:function(a,b,c){return!0},onChange:function(){var a=this.getSelectedItem();a&&this.onFeatureSelected(a.levelId,a.featureId,a.attributes)},getFeatureIndexById:function(a,
c){return b.getFeatureIndexInOptionsById(this.options,a,c)},selectFeatureByIndex:function(a){a=b.getOptionValueByFeatureIndex(this.options,a||0);this.set("value",a);return a},getNumFeatures:function(){return b.getNumFeaturesFromOptions(this.options)},getValue:function(){var a=this.getSelectedItem();return a&&{value:a.value,featureId:a.featureId,levelId:a.levelId,attributes:a.attributes}},setValue:function(a,b){this.set("value",a+"."+b)},getSelectedAttributes:function(){var a=this.getSelectedItem();
return a&&a.attributes},setSelectedAttributes:function(a){a&&this.setValue(a.StdGeographyLevel,a.StdGeographyID)},onFeatureSelected:function(a,b,c){},onAddFeature:function(a,b,c){},onRemoveFeature:function(a,b,c){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasInfoTemplateBuilder":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/PopupTemplate ../attachments/AttributesUtil esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c){c=c.geoenrichment.dijit.ReportPlayer.AreasInfoTemplateBuilder;var a={buildInfoTemplates:function(a,c,d){var b=this,e={};c=c.map(function(c,d){return k(b._getAttributesAndNotesForAreaAt(a,d),function(a){e[d]=a;b._buildAreaInfoTemplate(c,a.attributesText,a.notesText)})});return g(c).then(function(){d.groups&&d.groups.forEach(function(a){var c=e[a.indexes[0]];b._buildGroupInfoTemplate(a,c.attributesText,c.notesText)})})},buildInfoTemplateForFeature:function(a,c,d,e){var b=this;
return k(this._getAttributesAndNotesForAreaAt(a,d),function(a){b._buildFeatureInfosInfoTemplate([{feature:c,title:e}],a.attributesText,a.notesText)})},_getAttributesAndNotesForAreaAt:function(b,d){b.supportsMultipleAreas&&b.setCurrentAnalysisAreaIndex(d);return g([function(){return k(b.getAttributes(),function(b){return b&&b.length?a.buildAttributesTable(c.attributes,b.map(function(a){return{label:a.alias,value:e.formatAttributeValue(a,{unavailableDataValue:c.unavailableData})}})):null})}(),function(){return k(b.getNotes(),
function(b){return b&&b.length?a.formatArrayOfTexts(c.notes,b.map(function(a){return a.text})):null})}()]).then(function(a){return{attributesText:a[0]||"",notesText:a[1]||""}})},_buildAreaInfoTemplate:function(a,c,d){var b=[{feature:a.feature,title:a.name}];a.location&&b.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(b,c,d)},_buildGroupInfoTemplate:function(a,c,d){var b=[];a.location&&b.push({feature:a.location,title:a.locationName||a.name});this._buildFeatureInfosInfoTemplate(b,
c,d)},_buildFeatureInfosInfoTemplate:function(a,c,d){a.forEach(function(a){c||d?a.feature.setInfoTemplate(new f({title:a.title,fieldInfos:[],description:c+d})):a.feature.setInfoTemplate(null)})},formatArrayOfTexts:function(a,c){return"\x3cp\x3e"+a+"\x3c/p\x3e"+("\x3cp style\x3d'padding-left:10px'\x3e"+c.join("\x3cbr/\x3e\x3cbr/\x3e")+"\x3c/p\x3e")},buildAttributesTable:function(a,e,f){f=f||{};var b=f.padding?f.padding+"px":"0px 5px",g=null;if(f.maxHeight){var h=f.padding||0,k=d.getTextBox("Text").h,
h=(2*h+k)*(e.length+(a?1:0));f.maxHeight<h&&(h=f.maxHeight/h,g=Math.floor(k*h)+"px",f.padding&&(b=Math.floor(f.padding*h*.5)+"px "+f.padding+"px"))}var l="";a&&(l+="\x3cp\x3e"+a+"\x3c/p\x3e");var r="padding:"+b+";"+(g?"font-size:"+g+";":""),l=l+"\x3ctable\x3e";e.forEach(function(a){l+="\x3ctr style\x3d'text-align:left;'\x3e";var b=l+="\x3ctd style\x3d'"+r+"'\x3e"+a.label+"\x3c/td\x3e";a=a.value;a=null===a||void 0===a||"number"===typeof a&&isNaN(a)?c.unavailableData:a;l=b+("\x3ctd style\x3d'"+r+"'\x3e"+
a+"\x3c/td\x3e");l+="\x3c/tr\x3e"});return l+="\x3c/table\x3e"}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonListUtil":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e){var d={getListOptionsFromFeatures:function(c,a){c=d.getFeatureGroups(c,a);return d.getOptionsFromGroups(c,a)},getFeatureGroups:function(c,a){var b={},d=[];c.forEach(function(a){if(!a.attributes.isThisArea){var c=
a.attributes.StdGeographyLevel||"",f=b[c];f||(f=(f=e.getGeographiesModel())?f.getLevelPluralName(c):c,f={levelId:c,label:f,features:[]},b[c]=f,d.push(f));f.features.push(a)}});d.forEach(function(a){a.features.sort(function(a,b){return(a.attributes.StdGeographyName||"").localeCompare(b.attributes.StdGeographyName||"")})});return d},getOptionsFromGroups:function(c,a){function b(a){a.features.forEach(function(b){f.push({isArea:!0,value:d||!b.attributes.StdGeographyID?String(g++):b.attributes.StdGeographyLevel+
"."+b.attributes.StdGeographyID,label:b.attributes.StdGeographyName||"",attributes:b.attributes,featureId:b.attributes.StdGeographyID,levelId:a.levelId})})}var d=a&&a.isIndexBased,e=a&&a.hideTitleForSingleGroup,f=[],g=0;1!==c.length||c[0].levelId?c.forEach(function(a,d){0<d&&f.push({isSeparator:!0});(1<c.length||!e)&&f.push({isTitle:!0,enabled:!1,value:a.levelId,label:a.label+":"});b(a)}):b(c[0]);return f},getDefaultOptionValue:function(c,a){function b(a){var b;c.some(function(c){if(c.isArea&&(!a||
!d||c.levelId===d.id))return b=c,!0});return b}var d;a&&(d=e.getGeographiesModel().getLevel(a));return(a=b(!0)||b(!1))&&a.value},getFeatureIndexInOptionsById:function(c,a,b){var d=a+"."+b,e=-1,f=0;c.some(function(a){if(a.isArea){if(a.value===d)return e=f,!0;f++}});return e},getOptionValueByFeatureIndex:function(c,a){var b,d=0;c.some(function(c){if(c.isArea){if(d===a)return b=c,!0;d++}});return b&&b.value},getNumFeaturesFromOptions:function(c){var a=0;c.forEach(function(b){b.isArea&&a++});return a}};
k=k(f,{createPresentation:function(c,a,b,d,e){var f=this.inherited(arguments);c.isArea&&g.add(f,"esriGEComparisonList_areaItemRoot");return f}});d.ComparisonListItemRenderer=k;return d})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(k,g,f,e){return k(f,{_fieldNameToPointCache:null,constructor:function(d,c,a,b,f,k){this._fieldNameToPointCache={};d[0]&&d[0].points.forEach(function(a){a.fieldInfo&&
(this._fieldNameToPointCache[a.fieldInfo.name]=a)},this);(this._skipThisArea=b)?(a=e.combineAreaDataObjectCalculators(a,c,{removeDuplicates:!0}),b=a.thisAreas.map(function(a,b){a=g.mixin({},a);a.StdGeographyName=f[b];a.isThisArea=!0;return a}),d={},d[c]={data:b.shift(),comparisonLevels:b.concat(a.comparisonLevels)}):d=a[k||0];this._initGE(null,d,c)},_createField:function(d,c){var a=this.inherited(arguments),b=this._fieldNameToPointCache[d];if(b&&b.fieldInfo){var e=b.fieldInfo;a.alias=b.label||e.alias;
a.decimals="number"===typeof e.decimals?e.decimals:-1;a.units=e.showPercent?"pct":e.showCurrency?"currency":a.units;a.type=e.type||a.type}else a.noVariableField=!0;return a},_filterAttributeField:function(d){return!d.noVariableField}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on esri/graphic esri/tasks/FeatureSet ./_GEFilterSupport ../data/AreaDataUtil ../stdGeographies/StdGeographiesUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig dojo/i18n!esri/nls/jsapi".split(" "),
function(k,g,f,e,d,c,a,b,h,l,n){n=n.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k([f,a],{metadata:{name:"StdGeographyName",address:"address"},variables:null,data:null,_variableShortToFullNameCache:null,_areaData:null,_skipThisArea:!1,_initGE:function(a,c,d){this.variables=a||[];this._variableShortToFullNameCache={};this.variables.forEach(function(a){this._variableShortToFullNameCache[-1===a.indexOf(".")?a:a.substr(a.indexOf(".")+1)]=a},this);(a=c&&b.getAreaDataObjectCalculator(c,d))?this._areaData=
[a.data].concat(a.comparisonLevels||[]):this._handleError(Error("Can't get calculator"))},setVariables:function(a){this.variables=a},_createFeatureSet:function(){var a=new c,b=this._prepareFeatures();a.features=b;a.fields=this._prepareFields(b);this._prepareFieldAliases(a);return a},_prepareFeatures:function(){var a=[];if(!this._areaData)return a;for(var b=0;b<this._areaData.length;b++){var c={};this._propulateAttributesFromAreaData(c,this._areaData[b]);c.StdGeographyName=String(c.StdGeographyName||
"");c.StdGeographyID=String(c.StdGeographyID||"");c.StdGeographyLevel=String(c.StdGeographyLevel||"");if(0!==b||this._skipThisArea){if(!c.StdGeographyName&&!c.StdGeographyID&&!c.StdGeographyLevel){console.log("LocalGEBase.js can't add an unidentifiable geography.");continue}c.StdGeographyName=h.getAreaName(c)}else c.StdGeographyName=n.thisArea,c.isThisArea=!0;a.push(new d(null,null,c))}return a},_propulateAttributesFromAreaData:function(a,b){g.mixin(a,b)},_prepareFields:function(a){var b=[];if(!a.length)return b;
a=a[0].attributes;for(var c in a)b.push(this._createField(c,a));return b},_stringAttrs:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1},_createField:function(a,b){b=this._stringAttrs[a]||"string"===typeof b[a];return{name:a,alias:a,type:b?"esriFieldTypeString":"esriFieldTypeDouble",length:b?256:void 0,fullName:this._variableShortToFullNameCache[a],decimals:b?void 0:0,units:b?"other":"double",symbol:l.getCurrencySymbol()}},_prepareFieldAliases:function(a){a.fieldAliases={};a.fields.forEach(function(b){a.fieldAliases[b.name]=
b.alias})},_handleError:function(a){setTimeout(function(){a&&e.emit(this,"error",a)}.bind(this))},isBusy:function(){return!1},setOutSR:function(){},setGeoLevels:function(){},setStudyArea:function(){},stop:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/_GEFilterSupport":function(){define(["dojo/_base/declare","esri/tasks/FeatureSet","esri/dijit/geoenrichment/infographicUtils/formatVariable","esri/dijit/geoenrichment/utils/ObjectUtil"],function(k,g,f,e){return k(null,
{_filterRanges:null,_alwaysAllowThisAreasWhenFiltering:!1,getData:function(d){this.data||(this.data=this._createFeatureSet());return d&&d.ignoreFilters?this.data:this._filterRanges&&this._filterRanges.length&&this.data?this._filterData(this.data):this.data},_createFeatureSet:function(){},_filterData:function(d){var c=new g;c.fields=d.fields;c.fieldAliases=d.fieldAliases;c.features=d.features.filter(function(a){return this._alwaysAllowThisAreasWhenFiltering&&a.attributes.isThisArea?!0:!this._filterRanges.some(function(b){var c=
a.attributes[b.fieldName];return c<b.min||c>b.max})},this);return c},_excludeMap:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1,isThisArea:1},getAttributeFields:function(){var d=this.getData({ignoreFilters:!0});if(!d)return[];for(var d=d.fields,c=[],a=0;a<d.length;a++){var b=d[a];!this._excludeMap[b.name]&&this._filterAttributeField(b)&&c.push({name:b.name,label:b.alias,decimals:0<=b.decimals?b.decimals:void 0,type:b.type,formatFunction:function(a){return function(b){return-1===a.decimals?
e.formatNumber(b):f(a,b)}}(b)})}return c},_filterAttributeField:function(d){return this.variables&&this.variables.length?"HouseholdsByIncome.*"===this.variables[0]?0===d.name.indexOf("HIN"):"HouseholdIncomeCurrentYear.*"===this.variables[0]?0===d.name.indexOf("EHYHNI"):"Age.*"===this.variables[0]?0===d.name.indexOf("FEM")||0===d.name.indexOf("MAL")||0===d.name.indexOf("ECYP"):-1!==this.variables[0].indexOf("AVGHHSZ")?-1!==d.name.indexOf("AVGHHSZ"):"RaceAndEthnicity.*"===this.variables[0]?-1!==d.name.indexOf("_CY_"):
!0:!0},getAllGeographyAttributes:function(d){d=this.getData(d);if(!d)return[];d=d.features;for(var c=[],a=0;a<d.length;a++){var b=d[a].attributes;b.isThisArea||c.push(b)}return c},setFilterRanges:function(d,c){this._filterRanges=d;this._alwaysAllowThisAreasWhenFiltering=c&&c.ignoreThisAreas},collectFilterRangesStats:function(d){if(!this.getData())return null;d=d||{};var c=d.additionalAttributes||[],c=c.concat(d.excludeThisAreas?this.getAllGeographyAttributes({ignoreFilters:!0}):this.getData({ignoreFilters:!0}).features.map(function(a){return a.attributes})),
a=[];this.getAttributeFields().forEach(function(b){if("esriFieldTypeString"!==b.type){var d={fieldName:b.name,alias:b.label,min:Infinity,max:-Infinity,decimals:b.decimals,dataArray:[]};a.push(d);c.forEach(function(a){a=a[b.name];d.min=Math.min(d.min,a);d.max=Math.max(d.max,a);d.dataArray.push(a)})}});return{filterRanges:a,numAreasTotal:c.length}}})})},"esri/dijit/geoenrichment/infographicUtils/formatVariable":function(){define(["dojo/number"],function(k){return function(g,f){var e=g.decimals||0;switch(g.units){case "pct":return k.format(f/
100,{places:e,type:"percent"});case "currency":return k.format(f,{places:e,type:"currency",symbol:g.symbol||"$"});default:return"esriFieldTypeDouble"==g.type?k.format(f,{places:e}):f}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k){var g={US_STATES_IDS:{"01":"AL","02":"AK","03":"AS","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",
13:"GA",14:"GU",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",43:"PR",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"},CA_PROVINCE_IDS:{10:"NL",59:"BC",60:"YT",61:"NT",62:"NU",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB"},BUILDER_DATA:{US_census:{"US.CD":"%name%, %state%",
"US.CSD":"%name%, %state%","US.Counties":"%name%, %state%","US.Places":"%city%, %state%","US.ZIP5":"%id% (%name%)"},CA_census:{"CAN.FSA":"%id% (%name%)","CAN.CD":"%name%, %province%"}},getAreaName:function(f){var e=k.getCountryID(),d=k.getHierarchyID();if(!e||!d)return f.StdGeographyName;var e=e+"_"+d,c=g.BUILDER_DATA[e];c||(d=k.getGeographiesModel(),c=g.BUILDER_DATA[e]={},d.getLevels(!0).forEach(function(a){c[a.id.toUpperCase()]="%id% (%name%)"}));return g.buildDescription(f.StdGeographyID,f.StdGeographyName,
f.StdGeographyLevel,c)},buildDescription:function(f,e,d,c){c=c&&c[d.toUpperCase()];e=e||f;return"%id% (%name%)"===c&&0<=e.indexOf(f)?e:c?c.replace(/%(\w+)%/g,function(a,b){return g._buildDescriptionPart(a,b,f,e,d)}):e},_buildDescriptionPart:function(f,e,d,c,a){try{a.substr(0,a.indexOf(".")).toLowerCase();var b=g["_build_"+e];return b&&b(d,c)}catch(h){}return f},_build_id:function(f,e){return f},_build_name:function(f,e){return e},_build_city:function(f,e){return e.replace(/(\s|^)(\w)/g,function(d,
c,a){return c+a.toUpperCase()})},_build_state:function(f,e){return(f=f&&2<=f.length?g.US_STATES_IDS[f.substr(0,2)]:null)?f:"??"},_build_province:function(f,e){return(f=f&&2<=f.length?g.CA_PROVINCE_IDS[f.substr(0,2)]:null)?f:"??"}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/dummyData/DummyGE":function(){define(["esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart","dojo/i18n!esri/nls/jsapi"],function(k,g){g=g.geoenrichment.dijit.ReportPlayer.DummyGE;
return{_ge:null,getInstance:function(){this._ge||(this._ge=this._createGE());return this._ge},_createGE:function(){return new k([],"dummyCalc",[{dummyCalc:{data:{StdGeographyName:null,StdGeographyID:null},comparisonLevels:[{StdGeographyName:g.sampleData,StdGeographyID:"sampleData"}]}}])}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting":function(){define([],function(){var k={NONE:"None",ASC:"Ascending",DESC:"Descending",isSupported:function(g){for(var f in k)if(k[f]===g)return!0;
return!1},toSupportedValue:function(g){return k.isSupported(g)?g:k.NONE}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartFilterUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ChartTypes","./builder/utils/ChartDataUtil"],function(k,g,f,e){var d={collectStatsForVariables:function(c,a,b,d,f){var h=0,k={min:Infinity,max:-Infinity,decimals:0,dataArray:[]};a.forEach(function(a,l){a.points.forEach(function(m,n){m=e.getPointValue({point:m,
viewModel:d,currentFeatureIndex:f,index:n,seriesIndex:l,chartType:c,visualProperties:b,numPoints:a.points.length});k.min=Math.min(k.min,m);k.max=Math.max(k.max,m);k.decimals=Math.max(k.decimals,g.getPlaces(m));k.dataArray.push(m);h++})});return{filterRanges:[k],numVariablesTotal:h}},filterSeriesItems:function(c,a,b,e,f,g,k){return k?d._filterAreas(c,a,e,f):d._filterVariables(c,a,b,e,f,g)},_filterAreas:function(c,a,b,d){var g=0,h={};b.forEach(function(a){h[a.fieldName]=a});if(f.isLineLike(c))c=a.filter(function(a,
b){return!a.points.some(function(a){var c=e.getPointValue({point:a,viewModel:d,currentFeatureIndex:b});a=h[a.fieldInfo.name];return c<a.min||c>a.max})}),g=c.length,c.length||(c.__firstSeriesItem=a[0]);else{var m={};a.forEach(function(a){a.points.forEach(function(a,b){if(!m[b]){var c=e.getPointValue({point:a,viewModel:d,currentFeatureIndex:b});a=h[a.fieldInfo.name];if(c<a.min||c>a.max)m[b]=!0}})});c=a.map(function(a){a=k.mixin({},a);a.__firstPoint=a.points[0];a.points=a.points.filter(function(a,b){return!m[b]});
g=a.points.length;return a})}return{seriesItems:c,numShownElements:g}},_filterVariables:function(c,a,b,d,f,g){var h,l=0,n=d[0];h=[];var q=1<a.length;a.forEach(function(a,d){var l=k.mixin({},a);l.points=[];a.points.forEach(function(h,m){h.originalIndex=m;m=e.getPointValue({point:h,viewModel:f,currentFeatureIndex:g,index:m,seriesIndex:d,chartType:c,visualProperties:b,numPoints:a.points.length});m<n.min||m>n.max?q&&(h=k.mixin({},h),h.hidden=!0,l.points.push(h)):l.points.push(h)});q?h.push(l):l.points.length&&
h.push(l)});if(q){var r=0;h.forEach(function(a){r=Math.max(r,a.points.length)});for(var u=0;u<r;u++)h.every(function(a){a=a.points[u];return!a||a.hidden})&&h.forEach(function(a){if(a=a.points[u])a._toRemove=!0});h=h.filter(function(a){a.points=a.points.filter(function(a){return!a._toRemove});return a.points.length})}h.forEach(function(a){a.points.forEach(function(a){a.hidden||l++})});return{seriesItems:h,numShownElements:l}},getFirstSeriesPoint:function(c){return c.__firstPoint},getFirstSeriesItem:function(c){return c.__firstSeriesItem}};
return d})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil":function(){define(["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(k,g,f,e){function d(c){return a||(c&&c.yAxis&&c.yAxis.nonZeroInclusive?h:b)}var c={formatNumber:function(a,b,c,d){a=a||0;b={places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0};
if(d)return g.formatNumberAsCurrency(a,e.getCurrencyFormat(),b);a=g.formatNumber(a,b);c&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},a,b=[1E3,1100,1200,150,70,900,110,300,80,200,1700],h=[1E3,1100,1250,1200,1050,990],l=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],n=[.91,.92,.9,1.2,1.2,1.3];c.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];c.getPointValue=function(a){var b=a.point,c=a.index,e=a.seriesIndex,h=a.chartType,m=a.visualProperties,
y=a.viewModel,v=a.currentFeatureIndex,w=a.chartData,A=a.isComparisonSeries,C=a.comparisonFeatureAttribute;a=a.numPoints;if(b.value&&(b.value.value||y.dynamicReportInfo))return b.value.value;if(y.dynamicReportInfo)w=A?C&&C[b.fieldInfo.name]||0:k.getFieldDataValue(b.fieldInfo,{fieldData:y.dynamicReportInfo.fieldData,featureIndex:v}),w=g.parseNumber(w),isNaN(w)&&console.log("Can't render chart value for field \x3d\x3e "+(b.fieldInfo?b.fieldInfo.name:"missing field"));else if(b=b.fieldInfo&&b.fieldInfo.statefulName&&
b.fieldInfo.statefulName.charAt(0),w=w||d(m),w=w[c%w.length],h===f.GAUGE&&"p"!==b&&m.gaugeRangeMax)a=m.gaugeRangeMin||0,w=.425123*(m.gaugeRangeMax-a)+a;else if(h===f.WAFFLE)"p"===b||"number"!==typeof m.waffleRangeMin&&"number"!==typeof m.waffleRangeMax?a&&(w="p"===b?90.85/a:w/a):(c=m.waffleRangeMin,m=m.waffleRangeMax,"number"===typeof c&&"number"!==typeof m?m=0===c?1E3:c*((1<a?a:2)+1):"number"!==typeof c&&"number"===typeof m&&(c=0),w=.9085*(m-c)/(a||1)+c);else if(w*=l[e%l.length]*(0===e?1:n[c%n.length]),
!m.conditionalStyling){a=w;if("p"===b||m.dataLabelsShowValuePercentSymbol||m.yAxis&&m.yAxis.showPercentSymbol||m.yAxis&&m.yAxis.showValuesAsWeightsInSeries)a=Number((a/24.5123).toFixed(m.dataLabelsDecimals||1));"i"===b&&(a=Number((a/7).toFixed(m.dataLabelsDecimals||1)));w=a}return w};c.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?k.getFieldDataValue(a.captionFieldInfo,{fieldData:b.dynamicReportInfo.fieldData}):k.renderFieldInfoInTableCell(a.captionFieldInfo).formattedValue:
""};c.allowNegativeValuesInPreview=function(a,b){return f.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};c.getChartData=function(a){function b(){f=Infinity;g=-Infinity;e.forEach(function(a){f=Math.min(f,a);g=Math.max(g,a)})}function c(a,b,c){var d=g-f,h=f;f=isFinite(a)?a:Math.min(0,f);g=isFinite(b)?b:g>=f?g:2*f;c&&(a=.1*(g-f),f+=a,g-=a);var k=(g-f)/d;e=e.map(function(a){return(a-h)*k+f})}var e=a.chartData,e=(e||d(a.visualProperties)).slice();e.length=Math.min(e.length,
a.numPoints);var f,g;if(a.filterRangesStats)return b(),c(a.filterRangesStats.min,a.filterRangesStats.max,!0),e;if(a.conditionalStats){b();var h=a.conditionalStats.min;a=a.conditionalStats.max;c(0===h?-10:0>h?1.2*h:.8*h,0===a?10:0>a?.8*a:1.2*a,!1)}return e};c.setPreviewChartData_dev=function(b){a=b};return c})},"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.79 4.71L8 0.5L12.21 4.71L10.8 4.71L8.5 2.42L8.5 15.5L7.51 15.5L7.51 2.4L5.2 4.71L3.79 4.71Z"/\x3e\r\n\x3c/svg\x3e\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.9 11.45L8.12 15.67L12.33 11.45L10.91 11.45L8.62 13.74L8.62 0.56L7.63 0.56L7.63 13.76L5.32 11.45L3.9 11.45Z"/\x3e\r\n\x3c/svg\x3e\r\n',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/AdjustableGrid.html":'\x3cdiv class\x3d"esriGEAdjustableGrid"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"mainNode" class\x3d"adjustableGridMainNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/MinMaxLegend.html":'\x3cdiv class\x3d"esriGEMinMaxLegend"\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"largestGroupTitleDiv"\x3e${nls.largestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"largestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"smallestGroupTitleDiv"\x3e${nls.smallestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"smallestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/ChartContainer.html":'\x3cdiv class\x3d"esriGEReportPlayer_chartContainer esriGENonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartLabel" class\x3d"chartContainer_chartLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"noDataPlaceHolder" class\x3d"esriGENoDataPlaceHolder"\x3e\r\n        \x3cdiv class\x3d"esriGENoDataPlaceHolderLabel"\x3e${nls.noChartData}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartNormalViewDiv"\x3e\r\n        \x3cdiv class\x3d"chartContainer_chartContainerWithAxis" data-dojo-attach-point\x3d"chartContainerWithAxis"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chartContainerDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tableContainerDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"legendContainerDiv" class\x3d"chartContainer_legendContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"comparisonSelectBlock" class\x3d"chartContainer_comparisonSelectBlock"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonLabel" class\x3d"chartContainer_comparisonLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonSelectDiv" class\x3d"chartContainer_comparisonSelectDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorDiv" class\x3d"esriGEReportPlayerPanelErrorMessage"\x3e${nls.chartLoadError}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"missingVariablesDiv" class\x3d"chartContainer_missingVariablesMessage"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"*noref":1}});
define("esri/dijit/geoenrichment/ReportPlayer/ReportPlayer","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./PlayerZoomBehaviors ./DataProviderGE ./dataProvider/commands/supportClasses/LayoutXMLBuilder esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),function(k,
g,f,e,d,c,a,b,h,l,n,m,p,t,q,r,u,y,v,w,A,C,z,D,F,B,E,G,H,J,M,I,P,K,N,Q,R,L,O){L=L.geoenrichment.dijit.ReportPlayer.ReportPlayer;return k([h,l,m,p,t,r,u,y,v,q,w],{templateString:R,nls:L,isPlayer:!0,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:!0,showToolbarInPopup:!1,showAreaTitle:void 0,showReportTitle:!1,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,canAddMoreAreas:!1,areasSelectButtons:null,resizeMode:void 0,printConfig:{subtitle:L.preparedByEsri,
printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=g.mixin(n,this.config);if(n.isPlayerOnServer=this.isPlayerOnServer)n.maps.maxNumberOfMapsShownAtTheSameTime=1E6,this.defaultZoomBehavior=
H.RESET;this._viewModel=new (this._getViewModelClass());this._setUpDataProvider();A.configurePlayer(this);!this.isPlayerOnServer&&this._initToolbar();this._initContainerSwither();!this.isPlayerOnServer&&this._initSmartLayout();!this.isPlayerOnServer&&this._initCommands();!this.isPlayerOnServer&&this._initPageNavigationControls();!this.isPlayerOnServer&&this._initZoomControls();!this.isPlayerOnServer&&this._applyTheme();!this.isPlayerOnServer&&this._showError(!1);!this.isPlayerOnServer&&this._initProgressController();
P.isMobileDevice()&&(b.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling());this._updateElementsVisibility()},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new J;this.exportCommands&&this.exportCommands.forEach(function(a){this.dataProvider.registerCommand(a)},this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var a=this;this.own(c(window,"orientationchange",function(){a._orientationDfd&&a._orientationDfd.resolve("cancel");var b=
a._orientationDfd=new e;a._showWaiting(b.promise,"orientationchange");b.promise.then(function(b){"cancel"!==b&&(a._setViewMode(null),a.refresh())});d(a.getRenderPromise(),function(){I.delay(500).then(b.resolve,b.resolve)})}))},_getViewModelClass:function(){return D},_setViewMode:function(a){A.configurePlayer(this,a);this._refreshZoomControls()},_initToolbar:function(){var b=this;this.playerToolbar=(new z({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,
showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===F.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(a){b.showAnalysisAreaAt(a)},onCompareAreasSideBySide:function(){b.showAllAnalysisAreasSideBySide()},onShowPageAt:function(a){b.showPageAt(a)},isScrollShown:function(){var a=b.getCurrentReportContainer();return a&&a.isScrollShown&&
a.isScrollShown()},onClose:function(){b._onClose()},onAddMoreAreas:function(){b.onAddMoreAreas()},onRemoveAreas:function(a){b.onAreasPreRemoved(a);a.forEach(function(a){a.hidden=!0});if(b.viewMode===E.PANELS_IN_STACK_ALL)if(2>b.getAnalysisAreas().filter(function(a){return!a.hidden}).length)b._setAllAreasVisible(!1);else{var c={};a.forEach(function(a){c[a.index]=!1});b.getCurrentReportContainer().setAreasVisibilityState(c,{append:!0});b._updateAreaSelect()}else if(b.getCurrentAnalysisArea().hidden){var d=
b.getAnalysisAreas().filter(function(a){return!a.hidden})[0];d?b.showAnalysisAreaAt(d.index):b.refresh()}else b._updateAreaSelect();b.onAreasRemoved(a)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(c(window,"keyup",function(c){b.getWaitingPromise()||G.isViewingDataDrillingZoom||G.isImageViewerShown||c.keyCode===a.ESCAPE&&b._onClose()}))},_applyTheme:function(){b.remove(this.domNode,"playerThemeDark playerThemeLight");b.add(this.domNode,this.theme===
B.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(a,b){return this._showWaiting(this._callAfterRendering("_doPlayReport",[a,b]),"playReport")},_doPlayReport:function(a,b){this.playerToolbar&&this.playerToolbar.closePopup();var c=this;this._showError(!1);this._progressController&&this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===F.FIT_WINDOW&&C.animateTo(this);this.dataProvider._onCreateReportStarted=function(){c._viewModel.preInitialize()};
this._viewModel.reset();return d(this.dataProvider.getReportData(a,{progressCallback:function(a){c._progressController&&c._progressController.setLoadDataProgress(a)}}),function(a){if(c.viewMode===E.PANELS_IN_STACK_ALL){var d=c.viewMode;1<a.analysisAreas.length&&!a.isMultiFeature?c._originalAreaViewMode||(c._showAllAreasSideBySide=!0,c._originalAreaViewMode=A.getDefaultViewMode(c)):(c._showAllAreasSideBySide=!1,d=c._originalAreaViewMode||A.getDefaultViewMode(c));c._setViewMode(d)}return c.setReportData(a,
b)},function(a){c._showError(a)})},refresh:function(a){return this._reportData&&d(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!a||!a.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,setReportData:function(a,b){return this._showWaiting(this._callAfterRendering("_doSetReportData",[a,b]),"setReportData")},setReportDataAndExport:function(a,b){var c=this;if(a.reportObject.isMultiFeature)return this.setReportData(a,
{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){return c.executeCommand(b.commandId,b.commandParams)});var f=function(){var e=c.dataProvider.reportDataToSingleAreaReportData(a,{currentFeatureIndex:k,reportTitle:a.reportTitle,templateJson:a.templateJson});c.setReportData(e,{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){var e=g.mixin({},b.commandParams);e.pageNumerationInfo={startAreaIndex:k,numAreas:a.analysisAreas.length};return d(c.executeCommand(b.commandId,
e)).then(function(b){l.push(b);++k===a.analysisAreas.length?h.resolve(M.stitchDocuments(l)):setTimeout(f)})})},h=new e,k=0,l=[];f();return h.promise},_doSetReportData:function(a,b){var c=this;b=b||{};this._reportData=a;O.emulateErrors.playerError&&(a=null);if(!a||O.emulateErrors.emptyDataProviderResponse)this._showError(!0);else{this._isDataBeingSetFlag=!0;G.isAnimationSuspended=!0;this.onSetReportDataStart();var f=new e;this._viewModel.setAnimationAllowed(!b.disableAnimation);this._configureViewModel(a);
(c.isPlayerOnServer?d():I.delay(0)).then(function(){if(1===a.analysisAreas.length||a.isMultiFeature)c._destroyAllContainers(),c._resetMapBuilder(),c._applyReportData({analysisAreaIndex:0,rerenderContent:!0}).then(f.resolve,f.reject);else{var e=function(){for(;0<=g&&a.analysisAreas[g].hidden;)g--;0>g?f.resolve():c._applyReportData({analysisAreaIndex:g--,rerenderContent:!1,isFinalArea:0>g}).then(function(){(c.isPlayerOnServer?d():I.delay(0)).then(e)},f.reject)};!1!==b._resetLoadedContents&&(c._destroyAllContainers(),
c._resetMapBuilder());var g=a.analysisAreas.length-1;e()}});this._progressController&&this._progressController.setNumAreas(a.analysisAreas.length);this._progressController&&this._progressController.setLoadDataProgress(1);return f.promise.then(function(){return c._progressController&&c._progressController.finalize()}).otherwise(function(a){c._showError(a)}).always(function(){var a=c.getCurrentReportContainer();if(a&&a.domNode)return(c.isPlayerOnServer?d():I.delay(300)).then(function(){c._isDataBeingSetFlag=
!1;c._notifyShownPendingFlag=!K.isNodeInLayout(c.domNode);G.isAnimationSuspended=c.isPlayerOnServer;c.onSetReportDataEnd();c._emitPendingResizedEvent();c._progressController&&c._progressController.reset();if(b.waitUntilAllContentIsReady)return c.getRenderPromise()})})}},showAnalysisAreaAt:function(a){return this._callAfterRendering("_doShowAnalysisAreaAt",[a])},_doShowAnalysisAreaAt:function(a){var b=this;return d(this._setAllAreasVisible(!1),function(){if(b._analysisAreaIndex!==a&&b.getAnalysisAreas()[a]&&
!b.getAnalysisAreas()[a].hidden)return b._applyReportData({analysisAreaIndex:a,rerenderContent:!1})})},showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(a){if(this._showAllAreasSideBySide!==a)return a?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===E.PANELS_IN_STACK_ALL?A.getDefaultViewMode(this):this.viewMode,
this._setViewMode(E.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(a){var b=this;a=a||{};var c=this._reportData&&this._reportData.isMultiFeature?0:a.analysisAreaIndex||0,e=!1!==a.rerenderContent;this._analysisAreaIndex=c;this._showError(!this._reportData);if(this._reportData)return d(this._viewModel.initialize(!this._reportData.reportObject.isGraphicReport,this.viewMode),
function(){return b._setReportContainer(e)?b._doApplyTemplateJson({analysisAreaIndex:c,isFinalArea:a.isFinalArea}):b._updateAreaSelect()})},_doApplyTemplateJson:function(a){var b=this,c=this.getCurrentReportContainer(),e=g.clone(this._reportData.templateJson);O.emulateErrors.emptyTemplateJson&&(e.sectionsTables.length=0);var f=c.fromJson(e,{waitUntilAllContentIsReady:!0,progressCallback:function(c){b._progressController&&b._progressController.setProgressForAreaAt(c,a.analysisAreaIndex)},analysisAreaIndex:a.analysisAreaIndex,
isFinalArea:a.isFinalArea,renderSync:this.isPlayerOnServer}),e=c.getPagePromise?c.getPagePromise():f,c=c.getContentPromise?c.getContentPromise():f;this._registerContainerLoadPromise(c||e);this._updateAreaSelect();return d(e,function(){b._setCurrentContainerLoaded();b.showPageAt(b._currentPageIndex);return b.resize()})},_updateAreaSelect:function(){this.playerToolbar&&this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,
currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},getAnalysisAreas:function(){return this._reportData&&
this._reportData.analysisAreas},reportDataToJson:function(a){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),a),"reportDataToJson")},reportDataFromJson:function(a,b){var c=this;this._showError(!1);return this._showWaiting(d(this.dataProvider.reportDataFromJson(a),function(a){return c.setReportData(a,b)}),"reportDataFromJson")},_configureViewModel:function(a){this._viewModel.setTheme(this._reportData.templateJson.theme);this._viewModel.enableDataDrilling=!this.isPlayerOnServer&&
this.enableDataDrilling;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,attachmentsStore:this._reportData.attachmentsStore,createMapFunc:g.hitch(this,this._createMap),reportObject:this._reportData.reportObject,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,
countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicImageFunc=g.hitch(this,this._getReportLogo)},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(a){this.errorViewDiv&&K.destroy(this.errorViewDiv);this.errorViewDiv=
null;K[a?"hide":"show"](this.printableDivContainer);b[a?"add":"remove"](this.domNode,"esriGEReportPlayerError");this._isErrorShown=!!a;this._updateElementsVisibility();a?(this.errorViewDiv=K.create("div",{"class":"esriGEReportPlayerErrorMessage",innerHTML:L.cantPlayReportError},this.domNode),this.playerToolbar&&this.playerToolbar.setErrorShown(!0),this._progressController&&this._progressController.reset(),console.log(a),this.onError(a)):this.playerToolbar&&this.playerToolbar.setErrorShown(!1)},isErrorShown:function(){return this._isErrorShown},
_updateElementsVisibility:function(){var a=0<this._waitingCount?!1:this._reportData||this._isErrorShown,b=0<this._waitingCount||this._isErrorShown?!1:!0,c=0<this._waitingCount||this._isErrorShown?!1:!0;this.playerToolbarDiv&&(this.playerToolbarDiv.style.opacity=a?"":"0.001");this.sidePageNavigator&&(this.sidePageNavigator.style.opacity=b?"":"0.001");this.reportContainerDiv.style.opacity=c?"":"0.001"},setPrintMode:function(a){b[a?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(a,
b){this._resize({width:a,height:b});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar&&this.playerToolbar.update()},_pendingResizeEvent:null,_emitResizedEvent:function(a){this._pendingResizeEvent={isPaginating:!!a};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var a;this.showToFullScreenAnimation&&
this.resizeMode===F.FIT_WINDOW&&(a=C.animateFrom(this));d(a,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",viewMode:this.viewMode,reportContainers:this.getAllReportContainers().map(function(a){return a.getVisualState&&a.getVisualState()})}},setVisualState:function(a){return this._callAfterRendering("_doSetVisualState",[a])},_doSetVisualState:function(a){var b=a&&this.getAllReportContainers().map(function(b,c){return b.setVisualState&&b.setVisualState(a.reportContainers[c])});
return f(b)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(a){this._renderQueue=this._renderQueue||new Q;this._renderQueue.add(a);this.playerToolbar&&this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(a,b){if(this.isPlayerOnServer)return this[a].apply(this,b);var c=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[a]=
function(){return c[a].apply(c,b)};return d(this.getRenderPromise(),function(){return N.invoke(c._safeFuncCaller,a)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},onResized:function(a){},onClose:function(){},onError:function(a){},onAddMoreAreas:function(){},onAreasPreRemoved:function(a){},onAreasRemoved:function(a){},destroy:function(){this._destroyAllContainers();this.inherited(arguments)}})});